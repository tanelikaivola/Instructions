
GE Fanuc Automation

Computer Numerical Control Products

Series 0 / 00 / 0-Mate

Connection Manual  (Function)

GFZ-61393E-2/02 September 1998



GFL-001

Warnings, Cautions, and Notes
as Used in this Publication

Warning

Warning notices are used in this publication to emphasize that hazardous voltages, currents,
temperatures, or other conditions that could cause personal injury exist in this equipment or
may be associated with its use.

In situations where inattention could cause either personal injury or damage to equipment, a
Warning notice is used.

Caution

Caution notices are used where equipment might be damaged if care is not taken.

Note
Notes merely call attention to information that is especially significant to understanding and
operating the equipment.

This document is based on information available at the time of its publication.  While efforts
have been made to be accurate, the information contained herein does not purport to cover all
details or variations in hardware or software, nor to provide for every possible contingency in
connection with installation, operation, or maintenance.  Features may be described herein
which are not present in all hardware and software systems.  GE Fanuc Automation assumes
no obligation of notice to holders of this document with respect to changes subsequently made.

GE Fanuc Automation makes no representation or warranty, expressed, implied, or statutory
with respect to, and assumes no responsibility for the accuracy, completeness, sufficiency, or
usefulness of the information contained herein.  No warranties of merchantability or fitness for
purpose shall apply.

©Copyright 1998 GE Fanuc Automation North America, Inc.

All Rights Reserved.



B–61393E–2/02 DEFINITION OF WARNING, CAUTION, AND NOTE

s–1

DEFINITION OF WARNING, CAUTION, AND NOTE

This manual includes safety precautions for protecting the user and preventing damage to the
machine.  Precautions are classified into Warning and Caution according to their bearing on safety.
Also, supplementary information is described as a Note.  Read the Warning, Caution, and Note
thoroughly before attempting to use the machine.

WARNING

Applied when there is a danger of the user being injured or when there is a danger of both the user
being injured and the equipment being damaged if the approved procedure is not observed.

CAUTION

Applied when there is a danger of the equipment being damaged, if the approved procedure is not
observed.

NOTE

The Note is used to indicate supplementary information other than Warning and Caution.

� Read this manual carefully, and store it in a safe place.



B–61393E–2/02 PREFACE

p–1

�������

This manual describes the following NC functions required to enable
machine tool builders to design their CNC machine tools.

1. General
Describes feature of the function. Refer to Operator’s manual as
requied.

2. Signals
Describes names, functions, output conditions and addresses of the
signals required to realize a function.

3. Parameters
Describes parameters related with a function.

4. Alarms and messages
Lists the alarms and messages related with a function in a table.

5. Reference item
List the related items of the related manuals in a table.

A list of addresses of all signals and a list of signals are described in the
appendix of this manual. Refer to it as required.

The models covered by this manual, and their abbreviations are :

Product Name Abbreviations Series

FANUC Series 0–MC 0–MC

FANUC Series 0–MD II 0–MD II

FANUC Series 0–MF 0–MF

FANUC Series 0–GSC 0–GSC
M series

FANUC Series 0–GSD II 0–GSD II
M series

FANUC Series 00–MC 00–MC

FANUC Series 0–Mate MC 0–Mate–MC

FANUC Series 0–Mate MF 0–Mate MF

FANUC Series 0–TC 0–TC

FANUC Series 0–TD II 0–TD II

FANUC Series 0–TF 0–TF

FANUC Series 0–TTC 0–TTC

FANUC Series 0–GCC 0–GCC T series

FANUC Series 0–GCD II 0–GCD II

FANUC Series 00–TC 00–TC

FANUC Series 00–GCC 00–GCC

FANUC Series 0–Mate TC 0–Mate TC

Applicable models



PREFACE B–61393E–2/02

p–2

This manual describes signals used with the following software series and
editions.  It may not be used for other software series and editions.

Product Name Series Edition

FANUC Series 0–MC
0466
0469

Edition 20 or later
Edition 01 or later

FANUC Series 0–MD II 0473 Edition 02 or later

FANUC Series 0–MF 0467 Edition 06 or later

FANUC Series 0–GSC 0866 Edition 04 or later

FANUC Series 0–GSD II 0892 Edition 02 or later

FANUC Series 00–MC 0468 Edition 01 or later

FANUC Series 0–Mate MC 0455 Edition 03 or later

FANUC Series 0–Mate MF 0454 Edition 02 or later

FANUC Series 0–TC
0666
0669

Edition 18 or later
Edition 01 or later

FANUC Series 0–TD II 0673 Edition 02 or later

FANUC Series 0–TF 0667 Edition 08 or later

FANUC Series 0–TTC
0680
0681
0682

Edition 16 or later
Edition 16 or later
Edition 16 or later

FANUC Series 0–GCC 0861 Edition 07 or later

FANUC Series 0–GCD II 0882 Edition 02 or later

FANUC Series 00–TC 0668 Edition 01 or later

FANUC Series 00–GCC 0862 Edition 01 or later

FANUC Series 0–Mate TC 0655 Edition 03 or later

One address accommodates eight signals.
Symbol (#0 to #7 indicates bit position)Address

#7
OPF148

#6
SA

#5
STL

#4
SPL

#3
ZP4

#2
ZP3

#1
ZP2

#0
ZP1

In case the signal address differs between the T and M series, which series
the signal address belongs to is indicated above its description.

#7
Signal address

#6 #5 #4 #3 #2 #1 #0
(T series)

Signal address (M series)

Applicable software
series and editions

Expression of signals



B–61393E–2/02 PREFACE

p–3

Parameters are classified by data type as follows :

Dta type Valid data range

Bit 0 or 1

Byte 0 to 255

Word 0 to �32767

2–word 0 to �99999999

NOTE
1 For the bit type parameters, a single data number is

assigned to 8 bits.  Each bit has a different meaning.
2 The valid data range for each data type indicates a general

range.  The range varies according to the parameters.  For
the valid data range of a specific parameter, see the
explanation of the parameter.

Data (#0 to #7 indicates bit position)Data No.

#7
APRS0010

#6 #5 #4
PRG9

#3 #2
OFFVY

#1
EBCL

#0
ISOT

0518 Data

DataData No.

In case the parameter data number differs between the T and M series,
which series the data number belongs to is indicated above its description.

Data (T series)Data number

Data (M series)Data number

Explanation of
parameters

� �
����
	 
� ��� ����

���������

� Notation of parameters
other than bit type



PREFACE B–61393E–2/02

p–4

[Machine without PMC]

Series 0
Series 00 Machine

X016 to X022

Y048 to Y053

[Machine with PMC]

Series 0
Series 00

Series 0–Mate
PMC Machine

G100 –

F148 –

X000 –

Y048 –

[0–TTC]

0–TTC

PMC Machine

G100 –

F148 –
X000 –

Y048 –

Tool post
#1

Tool post
#2

G1300 –

F1348 –

NOTE
1 When the PMC is not provided, for an explanation of X and

Y signals, see the explanation of the G and F signals,
respectively, having the addresses obtained by adding 100
to their addresses.

2 What X and Y addresses are usable in a specific unit
depends on the type of the I/O card installed in the unit.

3 What F and G addresses are usable in a specific unit
depends on the type of the PMC installed in the unit.

4 For the 0–TTC, signal addresses for tool post 2 are obtained
by adding 1200 to those for tool post 1. This manual
describes only the signals for tool post 1.

5 For the PMC–M, the self–diagnosis data number is
obtained by adding 2000 to the signal address.



B–61393E–2/02 PREFACE

p–5

The table below lists manuals related to the Series 0/00/0–Mate C and
Series 0–D/0–D II.
In the table, this manual is marked with an asterisk(*).

Table 1  Manuals related to the FANUC Series 0/00/0–Mate C

Manuals name Specification number

DESCRIPTIONS B–61392E

CONNECTION MANUAL (Hardware) B–61393E

CONNECTION MANUAL (Function) B–61393E–2 *

PROGRAMMING MANUAL (Macro Compiler/Macro Executer) B–61393E–1

OPERATOR’S MANUAL (For Lathe) B–61394E

OPERATOR’S MANUAL (For MachiningCenter) B–61404E

MAINTENANCE MANUAL B–61395E

PARAMETER MANUAL (For Lathe) B–61400E

PARAMETER MANUAL (For Machining Center) B–61410E

DESCRIPTIONS (Remote Buffer) B–61392EN–1

Table 1  Manuals related to the FANUC Series 0–D/0–D II

Manuals name Specification number

DESCRIPTIONS B–62542EN

CONNECTION MANUAL (Hardware) B–61393E

CONNECTION MANUAL (Function) for Series 0–D B–62543EN–1

CONNECTION MANUAL (Function) for Series 0–D II B–61393E–2 *

OPERATOR’S MANUAL (For Lathe) B–61394E

OPERATOR’S MANUAL (For MachiningCenter) B–61404E

MAINTENANCE MANUAL B–61395E

PARAMETER MANUAL (For Lathe) B–61400E

PARAMETER MANUAL (For Machining Center) B–61410E

�
��
�� ���
��� ��

	���� ��������
�� �


�� 	���� ������� ��

� Series 0/00/0–Mate C

� Series 0/0–D II



PREFACE B–61393E–2/02

p–6

The table below lists manuals related to the Servo Motor α series.

Table 2  Manuals related to the Servo Motor  α series

Document name
Document

number
Major contents Major usage

FANUC AC SERVO MOTOR α series
DESCRIPTIONS

B–65142E

� Specification
� Characteristics
� External dimensions
� Connections � Selection of motor

FANUC AC SPINDLE MOTOR α series
DESCRIPTIONS

B–65152E

� Specification
� Characteristics
� External dimensions
� Connections

� Connection of motor

FANUC SERVO AMPLIFIER α series 
DESCRIPTIONS

B–65162E

� Specifications and
functions

� Installation
� External dimensions and

maintenance area
� Connections

� Selection of 
amplifier

� Connection of 
amplifier

FANUC CONTROL MOTOR α series
MAINTENANCE MANUAL

B–65165E
� Start up procedure
� Troubleshooting
� Maintenance of motor

� Start up the system
(Hardware)

� Troubleshooting
� Maintenance of motor

FANUC AC SERVO MOTOR α series
PARAMETER MANUAL

B–65150E
� Initial setting
� Setting parameters
� Description of parameters

� Start up the system
(Software)

FANUC AC SPINDLE MOTOR α series
PARAMETER MANUAL

B–65160E
� Initial setting
� Setting parameters
� Description of parameters

( )
� Turning the system

(Parameters)

Manuals related to the
����� Motor  α series



B–61393E–02/01 Table of Contents

c–1

DEFINITION OF WARNING, CAUTION, AND NOTE s–1. . . . . . . . . . . . . . . . . . . . . . . . . . 

PREFACE p–1. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

1. AXIS CONTROL 1. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
1.1 CONTROLLED AXES 2. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

1.2 SETTING EACH AXIS 3. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
1.2.1 Name of Axes 3. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
1.2.2 Increment System 6. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
1.2.3 Specifying the  Rotation Axis 8. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
1.2.4 Controlled Axes Detach 11. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
1.2.5 Mirror Image 12. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
1.2.6 Follow–up 15. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
1.2.7 Servo Off (Mechanical Handle) 16. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
1.2.8 Position Switch 18. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

1.3 ERROR  COMPENSATION 22. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
1.3.1 Stored Pitch Error Compensation 22. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
1.3.2 Backlash  Compensation 27. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

1.4 SETTINGS RELATED TO SERVO– CONTROLLED AXES 29. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
1.4.1 Parameters Related to Servo 29. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
1.4.2 Absolute Position Detection 34. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
1.4.3 Ignore–the–fourth–axis–signal (M Series) 35. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
1.4.4 Cancel–the–Z–axis Command Signal  (M Series) 36. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

1.5 SETTINGS RELATED WITH COORDINATE SYSTEMS 37. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
1.5.1 Machine Coordinate System 37. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
1.5.2 Workpiece Coordinate System (T/M Series)/ 

Additional of Workpiece Coordinate System Pair (M Series) 38. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
1.5.3 Rotary Axis Roll Over 44. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

1.6 SIMPLE SYNCHRONOUS CONTROL 46. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

1.7 AXIS RECOMPOSITION (0–TTC) 51. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

1.8 ANGULAR AXIS CONTROL (0–GCC, 0–GSC) 86. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

1.9 POSITION SIGNAL OUTPUT (T SERIES) 89. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

1.10 Cf AXIS CONTROL  (T SERIES) 92. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

2. PREPARATIONS FOR OPERATION 94. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
2.1 EMERGENCY STOP 95. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

2.2 CNC READY SIGNAL 97. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

2.3 OVERTRAVEL CHECK 99. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
2.3.1 Overtravel Signal 99. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
2.3.2 Stored Stroke Check 1 103. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
2.3.3 Stored Stroke  check 3, 4 107. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
2.3.4 Tool Post Interference Check (0–TTC) 113. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

2.4 ALARM SIGNAL 119. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

2.5 START LOCK/ INTERLOCK 121. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

2.6 MODE SELECTION 126. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

2.7 TOOL POST  SELECTION  (0–TTC) 132. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

2.8 STATUS OUTPUT  SIGNAL 134. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

2.9 VRDY OFF ALARM  IGNORE SIGNAL 136. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 



B–61393E–2/01Table of Contents

c–2

3. MANUAL OPERATION 138. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
3.1 JOG  FEED/ INCREMENTAL FEED 139. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

3.2 MANUAL HANDLE  FEED 147. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

3.3 MANUAL HANDLE INTERRUPTION 158. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

4. REFERENCE POSITION ESTABLISHMENT 160. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
4.1 MANUAL  REFERENCE  POSITION RETURN 161. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

4.2 SETTING THE  REFERENCE  POSITION WITHOUT  DOGS 173. . . . . . . . . . . . . . . . . . . . . . . . . . . . 

4.3 REFERENCE  POSITION SHIFT (M SERIES) 180. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

4.4 REFERENCE  POSITION RETURN 183. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

4.5 2ND REFERENCE  POSITION  RETURN/3RD, 4TH  REFERENCE  POSITION RETURN 185. . . . 

4.6 REFERENCE POSITION SETTING BY BUTTING AXIS AGAINST STOPPER 188. . . . . . . . . . . . . 

5. AUTOMATIC OPERATION 194. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
5.1 CYCLE START/FEED  HOLD 195. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

5.2 RESET AND REWIND 201. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

5.3 TESTING A  PROGRAM 205. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
5.3.1 Machine Lock 205. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
5.3.2 Dry Run 207. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
5.3.3 Single Block 209. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

5.4 MANUAL ABSOLUTE  ON/OFF 211. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

5.5 OPTIONAL BLOCK  SKIP/ADDITION OF  OPTIONAL BLOCK  SKIP 213. . . . . . . . . . . . . . . . . . . . 

5.6 SEQUENCE NUMBER COMPARISON AND  STOP 216. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

5.7 PROGRAM RESTART 217. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

5.8 EXACT STOP/EXACT  STOP MODE/ TAPPING MODE/ CUTTING MODE  (M SERIES) 220. . . . . 

5.9 BALANCE CUT (0–TTC) 222. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

5.10 DNC OPERATION 224. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

5.11 REMOTE BUFFER DI/DO SIGNALS 226. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

5.12 IN–FEED CONTROL 228. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

6. INTERPOLATION FUNCTION 229. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
6.1 POSITIONING 230. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

6.2 LINEAR  INTERPOLATION 232. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

6.3 CIRCULAR  INTERPOLATION 234. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

6.4 THREAD CUTTING 239. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
6.4.1 Thread Cutting 239. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
6.4.2 Thread Cutting Cycle Retract (T series) 244. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

6.5 SINGLE DIRECTION  POSITIONING  (M SERIES) 246. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

6.6 HELICAL  INTERPOLATION  (M SERIES) 248. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

6.7 POLAR COORDINATE INTERPOLATION  (T SERIES) 249. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

6.8 CYLINDRICAL INTERPOLATION 251. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

6.9 POLYGONAL  TURNING  (T SERIES) 253. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
6.9.1 Polygonal Turning 254. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

6.10 NORMAL DIRECTION  CONTROL  (M SERIES) 259. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 



B–61393E–02/01 ����� 
� �
	��	��

c–3

7. FEEDRATE CONTROL/ACCELERATION AND 
DECELERATION CONTROL 262. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
7.1 FEEDRATE CONTROL 263. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

7.1.1 Rapid Traverse Rate 263. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
7.1.2 Cutting Feedrate Clamp 266. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
7.1.3 Feed Per Minute 267. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
7.1.4 Feed Per Revolution/ Manual Feed Per  Revolution 269. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
7.1.5 F1-digit Feed  (M Series) 271. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
7.1.6 Override 274. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

7.1.6.1 Rapid traverse override 274. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

7.1.6.2 Feedrate override 276. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

7.1.6.3 Rapid traverse override B (T series) 278. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

7.1.6.4 Override cancel 279. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

7.1.7 Automatic Corner Override (M series) 280. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
7.1.8 External Deceleration 284. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
7.1.9 Feedrate Clamping by  Arc Radius (M Series) 286. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
7.1.10 Automatic Corner  Deceleration (M series) 288. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
7.1.11 Advanced Preview Control (M Series) 295. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

7.2 ACCELERATION/ DECELERATION  CONTROL 301. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
7.2.1 Automatic  Acceleration/ Deceleration 301. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
7.2.2 Bell–shaped  Acceleration/ Deceleration for  Rapid Traverse  (M Series) 306. . . . . . . . . . . . . . . . . . . . . . 
7.2.3 Linear Acceleration/  Deceleration after  Interpolation for  Cutting Feed 309. . . . . . . . . . . . . . . . . . . . . . 
7.2.4 Linear Acceleration/ Deceleration of Cutting Feed before  Interpolation (M Series) 312. . . . . . . . . . . . . . 
7.2.5 Corner Control 316. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

7.2.5.1 In–position check 316. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

7.2.5.2 In–position check  independently of  feed/rapid traverse  (M series) 318. . . . . . . . . . . . . . . . . . . 

7.2.5.3 Error detect (T series) 320. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

7.2.5.4 Signals output according to the speed of travel along an axis  (M series) 321. . . . . . . . . . . . . . . 

7.2.6 Feed Forward in Rapid Traverse (M series) 323. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

8. AUXILIARY FUNCTION 324. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
8.1 MISCELLANEOUS  FUNCTION/2ND  AUXILIARY FUNCTION 325. . . . . . . . . . . . . . . . . . . . . . . . . 

8.2 AUXILIARY  FUNCTION LOCK 338. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

8.3 MULTIPLE M  COMMANDS IN A  SINGLE BLOCK 340. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

8.4 HIGH–SPEED M/S/T/B INTERFACE 343. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

8.5 WAITING M CODE  (0–TTC) 348. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

9. SPINDLE SPEED FUNCTION 351. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
9.1 SPINDLE SPEED  FUNCTION  (S CODE OUTPUT) 352. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

9.2 SPINDLE SERIAL  OUTPUT/SPINDLE  ANALOG OUTPUT 353. . . . . . . . . . . . . . . . . . . . . . . . . . . . 
9.2.1 General 353. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

9.3 SPINDLE SPEED  CONTROL 359. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

9.4 SPINDLE SPEED  CONTROL FOR 0–TTC 386. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

9.5 CONSTANT  SURFACE SPEED  CONTROL 397. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

9.6 SPINDLE SPEED  FLUCTUATION  DETECTION  (T SERIES) 402. . . . . . . . . . . . . . . . . . . . . . . . . . . 

9.7 ACTUAL SPINDLE  SPEED OUTPUT (T SERIES) 407. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

9.8 SPINDLE  POSITIONING  (T SERIES) 408. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

9.9 CS CONTOUR  CONTROL 427. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

9.10 MULTI-SPINDLE CONTROL (T SERIES) 443. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 



B–61393E–2/01Table of Contents

c–4

9.11 RIGID TAPPING 456. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
9.11.1 General 456. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
9.11.2 Connection Among  Spindle, Spindle Motor, and Position Coder 458. . . . . . . . . . . . . . . . . . . . . . . . . . . . 
9.11.3 Rigid Tapping Specification 463. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
9.11.4 Display Data on the Diagnosis 464. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
9.11.5 Command Format 467. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
9.11.6 Signal 471. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

9.11.6.1 Signals for the rigid tapping function 471. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

9.11.6.2 Signals related to S code output 472. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

9.11.6.3 Signals related to gear switching 473. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

9.11.6.4 Signals related to  second and third spindle rigid tapping (T series) 475. . . . . . . . . . . . . . . . . . . 

9.11.6.5 Signal addresses 477. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

9.11.6.6 Notes on interface with the PMC 477. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

9.11.7 Timing Charts for Rigid Tapping Specification 480. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

9.11.7.1 When M29 is specified before G84 (G74) 481. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

9.11.7.2 M29 and G84 (G74) are specified in the same block 485. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

9.11.7.3 Specifying G84 (G74) for rigid tapping by parameters 489. . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

9.11.7.4 Timing to cancel rigid tapping mode 493. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

9.11.8 Parameter 495. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
9.11.9 Alarm and Message 508. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
9.11.10 Caution and Notes 509. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
9.11.11 Reference item 513. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

9.12 RIGID TAPPING  RETURN (M SERIES) 514. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

9.13 SPINDLE  SYNCHRONOUS  CONTROL 519. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

9.14 CONTROLLING THE  SPINDLE SPEED  RATIO FOR 
SERIAL  INTERFACE  SPINDLES (0–TTC) 525. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

9.15 SPINDLE  ORIENTATION 527. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

9.16 SPINDLE OUTPUT  SWITCHING 530. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

9.17 POSITION CODER  FEEDBACK CONTROL FUNCTION (0–TC) 532. . . . . . . . . . . . . . . . . . . . . . . . . 

9.18 SERIAL SPINDLE  SIMPLE SYNCHRONOUS CONTROL 534. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

10.TOOL FUNCTIONS 543. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
10.1 TOOL FUNCTION 544. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

10.2 TOOL COMPENSATION VALUE/ NUMBER OF TOOL COMPENSATION/ 
TOOL COMPENSATION MEMORY 546. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

10.3 TOOL LIFE  MANAGEMENT 552. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

10.4 CUTTER  COMPENSATION 559. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
10.4.1 Cutter  Compensation B, C  (M Series) 559. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
10.4.2 Tool Nose Radius  Compensation  (T Series) 563. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

11.PROGRAM COMMAND 565. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
11.1 DECIMAL POINT  PROGRAMMING/ POCKET CALCULATOR  TYPE DECIMAL  

POINT PROGRAMMING 566. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

11.2 G CODE SYSTEM  (T SERIES) 568. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

11.3 PROGRAM CONFIGURATION 572. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

11.4 INCH/METRIC CONVERSION 575. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

11.5 HIGH SPEED CYCLE CUTTING 578. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

11.6 CUSTOM MACRO 584. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
11.6.1 Custom Macro 584. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 



B–61393E–02/01 ����� 
� �
	��	��

c–5

11.6.2 Interruption Type Custom Macro 593. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
11.6.3 Custom Macro Variables Common between Tool Posts (0–TTC) 596. . . . . . . . . . . . . . . . . . . . . . . . . . . . 

11.7 CANNED CYCLE  (M SERIES)/CANNED CYCLE FOR HOLE MACHINING  (T SERIES) 597. . . . 

11.8 SMALL–DIAMETER PECK DRILLING  CYCLE (M SERIES) 607. . . . . . . . . . . . . . . . . . . . . . . . . . . 

11.9 EXTERNAL MOTION FUNCTION  (M SERIES) 613. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

11.10 CANNED CYCLE  (T SERIES)/MULTIPLE REPETITIVE CANNED CYCLE (M SERIES) 615. . . . 

11.11 MIRROR IMAGE FOR  DOUBLE TURRETS  (T SERIES) 621. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

11.12 INDEX TABLE  INDEXING FUNCTION (M SERIES) 623. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

11.13 SCALING (M SERIES) 630. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

11.14 COORDINATE SYSTEM ROTATION (M SERIES) 634. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

11.15 MACRO COMPILER/ MACRO EXECUTER 636. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

12.DISPLAY/SETTING/EDIT 637. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
12.1 DISPLAY/SETTING 638. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

12.1.1 Clock Function 639. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
12.1.2 Servo Tuning Screen 640. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
12.1.3 Spindle Tuning Screen 640. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
12.1.4 Servo Waveform Display 641. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
12.1.5 Self–diagnosis 642. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
12.1.6 Position Display Neglect 643. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
12.1.7 Run Hour and Parts Count Display 644. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
12.1.8 Graphic Display/ Dynamic Graphic Display 646. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
12.1.9 Operating Monitor Display 653. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
12.1.10 Software Operator’s Panel 654. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
12.1.11 Multi–language Display 661. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

12.2 EDIT 662. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
12.2.1 Part Program Storage Length 662. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
12.2.2 No. of Registered Programs 662. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
12.2.3 Memory Protection Key 663. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
12.2.4 Password Function 664. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
12.2.5 Background Editing 665. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
12.2.6 Playback 666. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
12.2.7 Conversational Programming with Graphic Function 667. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

13.INPUT/OUTPUT OF DATA 668. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
13.1 READER/PUNCHER  INTERFACE 669. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

13.2 REMOTE BUFFER 674. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

13.3 DNC1 INTERFACE 675. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

13.4 DNC2 INTERFACE 681. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

13.5 EXTERNAL I/O  DEVICE CONTROL 682. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

13.6 SIMULTANEOUS INPUT AND OUTPUT  OPERATIONS  (M SERIES) 689. . . . . . . . . . . . . . . . . . . . 

13.7 EXTERNAL  PROGRAM INPUT 691. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

14.MEASUREMENT 696. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
14.1 TOOL LENGTH  MEASUREMENT  (M SERIES) 697. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

14.2 AUTOMATIC TOOL LENGTH MEASUREMENT  (M SERIES) /  
AUTOMATIC TOOL  OFFSET (T SERIES) 698. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

14.3 SKIP FUNCTION 705. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
14.3.1 Skip Function 705. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 



B–61393E–2/01Table of Contents

c–6

14.3.2 High–speed Skip Signal 708. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
14.3.3 Multi–step Skip (0/00–GCC) 709. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
14.3.4 Torque Limit Skip  (T series) 712. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

14.4 ENTERING COMPENSATION VALUES 715. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
14.4.1 Input of Offset Value Measured A (T series) 715. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
14.4.2 Input of Tool Offset Value Measured B  (T series) 717. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
14.4.3 Input of Measured Workpiece Origin Offsets 726. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
14.4.4 Grinding Wheel Diameter Automatic Compensation 727. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

15.PMC CONTROL FUNCTION 728. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
15.1 PMC AXIS  CONTROL/PMC AXIS  SPEED CONTROL  FUNCTION 729. . . . . . . . . . . . . . . . . . . . . . 

15.2 EXTERNAL DATA  INPUT 803. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

15.3 EXTERNAL  WORKPIECE  NUMBER SEARCH 812. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

15.4 SPINDLE OUTPUT  CONTROL BY THE  PMC 815. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

15.5 EXTERNAL KEY  INPUT 822. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

15.6 DIRECT OPERATION  BY MMC (T SERIES) 832. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

15.7 PMC WINDOW  FUNCTION 833. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

APPENDIX

A. INTERFACE BETWEEN CNC AND PMC 855. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
A.1 LIST OF ADDRESSES 856. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

A.2 LIST OF SIGNALS 891. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
A.2.1 List of Signals  (In Order of Functions) 891. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
A.2.2 List of Signals  (In Order of Symbols) 907. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
A.2.3 List of Signals  (In Order of Addresses) 920. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 



B–61393E–2/02 1. AXIS CONTROL

1

1 ���	 ���
���



B–61393E–2/021. AXIS CONTROL

2

The total number of controlled axes and the number of controlled axes that
can be used at the same time in a specific unit vary depending on the model
and the configuration of its options.  Refer to the relevant operator’s
manual.  In manual operation, basically, only one axis can be controlled
at a time; the number of axes that can be controlled at the same time can
be extended to three by parameter setting, however.

#7
0049

#6 #5 #4
S3JOG

#3 #2 #1 #0

S3JOG Specifies the number of axes that can be controlled at the same time
during manual operation, as follows:
1 : Up to three
0 : One

������ Message Description

015 TOO MANY AXES COM-
MANDED

The number of the commanded axes ex-
ceeded that of simultaneously controlled
axes.  Correct the program.

NOTE
When the 9” CRT is fitted, the overall position display screen
and the position display screen for manual handle interrupt
can display up to eight axes.  The positions of the 9th and
10th axes are not displayed on these screens when used
0–TTC having nine or more axes.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.2.1 CONTROLLED AXES

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.2.1 CONTROLLED AXES

1.1
CONTROLLED AXES

General

Parameter

Alarm and message

Note

Reference item



B–61393E–2/02 1. AXIS CONTROL

3

The axis names are as follows:

(M series)

Axis number 1 2 3 4

Axis name X Y Z Parameter
(No.0008#2, #3, #4)

(T series)

Axis number 1 2 3 4

Axis name X Z Parameter
(No.0030#0)

Parameter
(No.0030#4)

(0–TTC)

Axis number 1 2 3 4 5 6

Axis name X Z Parameter
(No.0030#0)

Parameter
(No.0030#4)

X Z

(0–GCC/when axis names are changed)

Axis number 1 2 5 6

Axis name X Z Parameter
(No.0210)

Parameter
(No.0211)

#7
0008

#6 #5 #4
ADW2

#3
ADW1

#2
ADW0

#1 #0
(M series)

ADW0, ADW1, ADW2
Specify the name of the fourth axis as listed below:

ADW2 ADW1 ADW0 Axis name

0 0 0 A

0 0 1 B

0 1 0 C

0 1 1 U

1 0 0 V

1 0 1 W

1.2
SETTING EACH AXIS

1.2.1
Name of Axes

General

Parameter



B–61393E–2/021. AXIS CONTROL

4

#7
0030

#6 #5 #4
ADW40

#3 #2 #1 #0
ADW30 (T series)

ADW30 Specifies the name of the third axis as follows:
1 : C
0 : B

ADW40 Specifies the name of the fourth axis as follows:
1 : Y
0 : B

#7
0069

#6
B3AX

#5
BABS

#4
BAX

#3 #2 #1 #0
(T series)

For G–code system A in the T series, the names of the third axis and fourth
axis can be changed by parameter setting as listed below:

B3AX BABS BAX
Third axis Fourth axis

B3AX BABS BAX
ABS INC ABS INC

0 0 0 C H Y V

0 0 1 C H Y B

0 1 1 C H B V

1 0 1 C B Y V

1 1 1 B H Y V

(0–GCC/when axis names are changed)

0210 Axis name of third axis

0211 Axis name of fourth axis

The axis names of the third and fourth axes are set according to the
following table:

Axis number Setting value Axis name Setting value

U 85 A 65

V 86 B 66

W 87 C 67



B–61393E–2/02 1. AXIS CONTROL

5

NOTE
1 In 0–TTC, when information (such as the current position)

about each axis is displayed on the CRT screen, an axis
name may be followed by a subscript to indicate a path
number (e.g.,X1 and X2).  This is axis name to help the user
to easily understand which path an axis belongs to.  When
writing a program, the user must specify X, Y, Z, U, V, W, A,
B, and C without attaching a subscript.

2 If the second auxiliary function is used, it is impossible to use
address B as an axis name.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.2.2 NAMES OF AXES

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.2.2 NAMES OF AXES

Note

Reference item



B–61393E–2/021. AXIS CONTROL

6

The increment system consists of the least input increment (for input ) and
least command increment (for output).  The least input increment is the
least increment for programming the travel distance.  The least command
increment is the least increment for moving the tool on the machine.  Both
increments are represented in mm, inches, or degrees.
The increment system is classified into IS–B and IS–C (Tables 1.2.2(a)
and 1.2.2 (b)).When selecting IS–C, the option of increment system 1/10
is necessary.

Table 1.2.2 (a) Increment system IS–B

Least input increment Least command increment

Metric 
system

mm 
input

0.001mm(Diameter) 0.0005mm
system 
machine

input 0.001mm(Radius) 0.001mm
machine

0.001deg 0.001deg

inch 
inp t

0.0001inch(Diameter) 0.0005mm
input 0.0001inch(Radius) 0.001mm

0.001deg 0.001deg

Inch 
s stem

mm 
inp t

0.001mm(Diameter) 0.00005inch
system
machine

input 0.001mm(Radius) 0.0001inch
machine

0.001deg 0.001deg

inch 
inp t

0.0001inch(Diameter) 0.00005inch
input 0.0001inch(Radius) 0.0001inch

0.001deg 0.001deg

Table 1.2.2 (b) Increment system IS–C

Least input increment Least command increment

Metric
s stem

mm
inp t

0.0001mm(Diameter) 0.00005mm
system
machine

input 0.0001mm(Radius) 0.0001mm
machine

0.0001deg 0.0001deg

inch
inp t

0.00001inch(Diameter) 0.00005mm
input 0.00001inch(Radius) 0.0001mm

0.0001deg 0.0001deg

Inch
s stem

mm
inp t

0.0001mm(Diameter) 0.000005inch
system
machine

input 0.0001mm(Radius) 0.00001inch
machine

0.0001deg 0.0001deg

inch
inp t

0.00001inch(Diameter) 0.000005inch
input 0.00001inch(Radius) 0.00001inch

0.0001deg 0.0001deg

1.2.2
Increment System

General



B–61393E–2/02 1. AXIS CONTROL

7

NOTE
Diameter programming is used only for X axis at T series.
Whether diameter programming or radius programming is
used is selected by parameter XRC (No.0019#3).

Setting parameter
INCH Specifies the input unit as follows:

0 : Millimeter
1 : Inch

#7
0001

#6 #5 #4 #3 #2 #1 #0
SCW

NOTE
When this parameter has been set, the power must be
turned off before operation is continued.

[Data type] Bit

SCW Specifies the least command increment of linear axes as follows:
0 : Millimeter (metric machine)
1 : Inch (inch machine)

#7
0019

#6 #5 #4 #3
XRC

#2 #1 #0
(T series)

NOTE
When this parameter has been set, the power must be
turned off before operation is continued.

[Data type] Bit

XRC Specifies whether the X–axis travel distance is specified based on the
diameter or radius, as follows:
1 : Radius–based specification
0 : Diameter–based specification

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.2.1 CONTROLLED AXES

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.2.1 CONTROLLED AXES

Parameter

Reference item



B–61393E–2/021. AXIS CONTROL

8

It is possible to specify whether the fourth axis of the M series unit and
the third of fourth axis of the T series unit are a linear or rotation axis,
using parameters ADLN (bit 2 of parameter No.0011) and LIN3/LIN4 (bit
2/3 of parameter No.0032), respectively.  The basic axes can be specified
only as linear, however.
The rollover function can prevent the coordinates of a rotation axis from
overflowing.  The rollover function is enabled by setting bit 1 of
parameter No.0398 (M) and bit 1 of parameter No.0388 (T) to 1 (for the
rotation axis).
In a incremental command, the travel distance is determined directly by
a value specified in the command. For an absolute command, the
coordinates after the tool has moved are values set in parameter No.0860
(M)/No.0788 (T), and rounded by the angle corresponding to one
rotation. The tool moves in the direction in which the final coodinates are
closest when parameter No.0398#2 (T) /No.0388#2 (T) is set to 0.
The display of the relative coordinates can be rounded to the travel
amount per rotation (when bit 3 of parameter No.0398 (M) or bit 3 of
parameter No.0388 (T) is 1).

#7
0011

#6 #5 #4 #3 #2
ADLN

#1 #0
(M series)

ADLN Specifies whether the fourth axis is a linear or rotation axis, as follows:
1 : Linear axis
0 : Rotation axis

#7
0032

#6 #5 #4 #3
LIN4

#2
LIN3

#1 #0

(T series)

LIN3 Specifies whether the third axis is a linear or rotation axis, as follows:
1 : Linear axis
0 : Rotation axis

LIN4 Specifies whether the fourth axis is a linear or rotation axis, as follows:
1 : Linear axis
0 : Rotation axis

1.2.3
Specifying the 
Rotation Axis

General

Parameter



B–61393E–2/02 1. AXIS CONTROL

9

#7
0388

#6 #5 #4 #3
ROCNT

#2
RODRC

#1
ROAXC

#0
(T series)

0398 ROCNT RODRC ROAXC (M series)

[Data type] Bit

ROAXC The roll–over function of a rotation axis is
0 : Invalid
1 : Valid

NOTE
ROAXC specifies the function only for a rotation axis.

RODRC In the absolute commands, the axis rotates in the direction
0 :  In which the distance to the target is shorter.
1 :  Specified by the sign of command value.

NOTE
RODRC is valid only when ROAXC is 1.

ROCNT Relative coordinates are
0 :  Not rounded by the amount of the shift per one rotation
1 :  Rounded by the amount of the shift per one rotation

NOTE
1 ROCNT is valid only when ROAXC is 1.
2 Assign the amount of the shift per one rotation in parameter

(No.0860 (M)/No.0788 (T)).

0788 Amount of a shift per one rotation of a rotation axis (T series)

0860 Amount of a shift per one rotation of a rotation axis (M series)

NOTE
1 After setting the parameter, turn off the power once and turn

it on again to operate the machine.
2 This parameter is valid only when ROAXC = 1.

[Data type] Two–word

Increment system Unit of data Standard value

IS–A 0.01 deg 36000

IS–B 0.001 deg 360000

IS–C 0.0001 deg 3600000

[Valid data range] 1000 to 9999999

Set the amount of a shift per one rotation of a rotation axis.

[Unit of data]



B–61393E–2/021. AXIS CONTROL

10

NOTE
Rotary axis roll–over function cannot be used together with
the indexing function of the index table.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.22 ROTARY AXIS ROLL–OVER

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.22 ROTARY AXIS ROLL–OVER

Note

Reference item



B–61393E–2/02 1. AXIS CONTROL

11

The PMC can be used to indicate the movement status of each axis.

[Classification] Output signal

[Function] These signals indicate that the respective controlled axes are moving.  The
signals correspond to the controlled axes on a one–to–one basis.  A
numeral or letter at the end of each signal name represents the controlled
axis number.

MV x

X ..... X–axis movement is under way.
Y ..... Y–axis movement is under way.
Z  ..... Z–axis movement is under way.
 : :
 : :

[Output condition] Each signal becomes 1 when:

· The corresponding axis begins to move.

· The corresponding axis is selected as a handle feed axis during manual
handle feed mode.

Each signal becomes 0 when:

· Distribution of the move command for the corresponding axis ends.

#7
MV4F148

#6
MV3

#5
MVZ

#4
MVX

#3 #2 #1 #0
(T series)

MV4 MVZ MVY MVX (M series)

CAUTION
These signals are output regardless of whether the
operation is automatic or manual.

1.2.4
Controlled Axes
Detach

General

Signal

Axis–movement–under–
way signals
MVX to MV4
<F148#4 to #7>

Signal address

Caution



B–61393E–2/021. AXIS CONTROL

12

Mirror image can be applied to each axis, either by signals or by setting
parameters.  All movement directions are reversed during automatic
operation along axes to which a mirror image is applied.

When M1 signal turned to “1” at point A

X
B

B’

0

A

Z

Mirror image (Example for T series)

However, the following directions are not reversed:
– Direction of manual operation and direction of movement, from the

intermediate position to the reference position during automatic
reference position return (for the M and T series)

– Approach direction for single direction positioning (G60) and shift
direction for boring cycles (G76 and G87) (for M series only)

Mirror image check signals indicate whether mirror image is applied to
each axis.  System variable #3005 contains the setting data (refer to the
operator’s manual).

[Classification] Input signal

[Function] Apply mirror image to the specified axes.

[Operation] Apply mirror image to those axes for which the signals are 1.
These signals are provided for the controlled axes on a one–to–one basis.
A number or alphabet appended to a signal represents the controlled axis
number.
MI x (T series)  MIR  x (M series)

X ..... Applies mirror image to the X axis.
Y ..... Applies mirror image to the Y axis.
Z  ..... Applies mirror image to the Z axis.
 : :
 : :

1.2.5
Mirror Image

General

Signal

Mirror image signal
MIRX, MIRY, MIR4
<G127#0, #1, #7>(M)

MIX, MIZ
<G120#0, G127#1>(T)



B–61393E–2/02 1. AXIS CONTROL

13

The mirror image signal can be turned to “1” in the following cases:

a) During offset cancel;

b) When the CNC is in the automatic operation stop state and not in the
feed hold state.

[Classification] Output signal

[Function] These signals indicate the mirror image condition of each axis. The mirror
image is set by taking the logical sum of the signal from the MDI panel
and the input signal of the machine tool, then relaying the information to
the machine tool. 
These signals are provided for every control axis; the numeral in the signal
name indicates the relevant control axis number.

MMI n

1  ..... Mirror image is applied to the 1st axis
2  ..... Mirror image is applied to the 2nd axis
4  ..... Mirror image is applied to the 4th axis

[Output condition] These signals turn to “1” when:

· Mirror image signal MIn of the corresponding axis is “1”; or

· Mirror image of the corresponding axis is turned on by setting data
from the MDI panel.

These signals turn to “0” when:

· Mirror image signal (MIn) of the corresponding axis is “0” and the
setting of the mirror image in the control unit is turned off.

#7
G120

#6 #5 #4 #3 #2 #1 #0
MIX (T series)

(M series)

G127 MIZ (T series)

MIR4 MIRY MIRX (M series)

F155 MMI2 MMI1 (T series)

(M series)

#7 #6 #5 #4 #3 #2 #1 #0

F158 (T series)

MMI4 MMI2 MMI1 (M series)

Mirror image check
signal
MMI1, MMI2, MMI4
<F158#0, #1, #3>(M)

MMI1, MMI2
<F155#0, #1>(T)

Signal address



B–61393E–2/021. AXIS CONTROL

14

REVX, REVY, REV4
Turn on or off the mirror image of each axis, as follows:
0 : Off
1 : On

WARNING
1 When programmable mirror image and ordinary mirror

image are specified at the same time, programmable mirror
image is applied first.

2 No programmable mirror image affects mirror image check
signals MMI1 to MMI4 <F155(T)/F158(M)>.

CAUTION
Even when the mirror image is applied, commands which do
not actuate mirror image (such as automatic reference
position return and manual operation) do not affect mirror
image check signals MMI1 to MMI4 <F155 (T)/F158 (M)>.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

III.4.8 MIRROR IMAGE

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

III.4.9 MIRROR IMAGE

Setting parameters
(M series)

Warning

Caution

Reference item



B–61393E–2/02 1. AXIS CONTROL

15

When position control is disabled for the controlled axes (when the servo
is off, during emergency stop, or during a servo alarm), if the machine is
moved, a positional error occurs.  Follow–up is a function for changing
the current position of the CNC and reset the error counter to zero,
assuming a command corresponding to the error has been specified.
Follow–up requires the mechanical handle function and PMC.
Follow–up is always performed during emergency stop or a servo alarm.

When signal *FLWU is 1, follow–up is not performed.  The error is added
to the error counter as a servo error.  In this case, the machine moves to
compensate for the error when the servo off signal changes to 0.
In general, follow–up is not used if the machine is mechanically clamped
when position control is disabled for the controlled axes.

When *FLWU is “0”, the follow-up function is engaged. The present
position of the CNC is changed to reset the error counter to zero. The
machine tool remains in a deviated position, but since the present position
of the CNC changes correspondingly, the machine moves to the correct
position when the absolute command is next applied. 
In general, follow–up should be used when motors are driven by
mechanical handles.

[Classification] Input signal

[Function] Select whether to perform follow–up when the servo is turned off for those
axes.

[Operation] 0:  Performs follow–up.
1:  Does not perform follow–up.

#7
G104

#6 #5
*FLWU

#4 #3 #2 #1 #0

CONNECTION MANUAL 
(This manual)

1.2.7 Servo Off (Mechanical handle)

1.2.6
Follow–up

General

� When follow–up is not
performed for axes for
which the servo is
turned off

� When follow–up is
performed for the axes
for which the servo is
turned off

Signal

Follow–up signal
*FLWU <G104#5>

Signal address

Reference item



B–61393E–2/021. AXIS CONTROL

16

Place the controlled axes in the servo off state; that is, they stop the current
to the servo motor, which disables position control.  However, the
position detection feature functions continuously, so the current position
is not lost.
These signals are used to prevent the servo motors from overloading when
the tools on the axes are mechanically clamped under certain machining
conditions on the machine, or to move the machine by driving the motors
by mechanical handles.

[Classification] Input signal

[Function] Select whether to place each axis in the servo off state.
These signals are provided for the controlled axes on a one–to–one basis.
A number appended to a signal represents a controlled axis number.

X ..... Servo off for the X axis
Y ..... Servo off for the Y axis
Z  ..... Servo off for the Z axis
 : :

* SVF x

[Operation] These signals place those axes for which the signals are 1 in the servo off
state (the current to the servo motor is stopped), thus disabling position
control.  However, the position detection feature continues to function, so
the current position is not lost.

#7
G105

#6 #5 #4 #3
SVF4

#2
SVF3

#1
SVFZ

#0
SVFX (T series)

SVF4 SVFZ SVFY SVFX (M series)

1.2.7
Servo Off (Mechanical
Handle)

General

Signal

Servo off signal
SVFX to SVF4 
<G105#0 to #3>

Signal address



B–61393E–2/02 1. AXIS CONTROL

17

CAUTION
1 In general, interlock is applied to an axis while the servo off

signal for that axis is 1.
2 When one of these signals turns to “1”, the servo motor is

turned off. The mechanical clamp is done by using the
auxiliary function.  Set the timing for the auxiliary function,
mechanical clamp and servo off signals as shown in the
diagram below. The clamp command auxiliary function
should be executed only after the distribution end signal
(DEN) turned to “1”.

Clamp

Machine
clamp

Unclamp command

Servo off state

FIN

MF

SVFX

CONNECTION MANUAL 
(This manual)

1.2.6 Follow–up

Caution

Reference item



B–61393E–2/021. AXIS CONTROL

18

Position switch signals can be output to the PMC while the machine
coordinates along a controlled axes are within a specified ranges.

[Classification] Output signal

[Function] Notifies that the machine coordinates along the controlled axes specified
by parameters (0310 to 0319) are within the ranges specified by
parameters (0840 to 0849 and 0850 to 0859).  Up to ten position switch
signals can be output.

[Output condition] These signals are 1 in the following case:
· When the machine coordinates along the controlled axes are within the

specified ranges.

These signals are 0 in the following case:

· When the machine coordinates along the controlled axes are not within
the specified ranges.

#7
PSW08F190

#6
PSW07

#5
PSW06

#4
PSW05

#3
PSW04

#2
PSW03

#1
PSW02

#0
PSW01

F191 PSW10 PSW09

1.2.8
Position Switch

General

Signal

Position switch signal
PSW01 to PSW10
<F190#0 to F191#1>

Signal address



B–61393E–2/02 1. AXIS CONTROL

19

0310 Axis corresponding to the first position switch

0311 Axis corresponding to the second position switch

0312 Axis corresponding to the third position switch

0313 Axis corresponding to the fourth position switch

0314 Axis corresponding to the fifth position switch

0315 Axis corresponding to the sixth position switch

0316 Axis corresponding to the seventh position switch

0317 Axis corresponding to the eighth position switch

0318 Axis corresponding to the ninth position switch

0319 Axis corresponding to the tenth position switch

[Data type] Byte

[Valid data range] 1, 2, 3, . . . , Number of control axis

These parameters specify the control–axes numbers corresponding to the
first through tenth position switch functions.  A corresponding position
switch signal is output to PMC when the machine coordinate value of a
corresponding axis is within the range that is set using a parameter.

NOTE
Set 0 for those position switch numbers that are not to be
used.

Parameter

� Setting the
correspondence
between the position
switch signals and the
controlled axes



B–61393E–2/021. AXIS CONTROL

20

0840 Maximum operation range of the first position switch

0841 Maximum operation range of the second position switch

0842 Maximum operation range of the third position switch

0843 Maximum operation range of the fourth position switch

0844 Maximum operation range of the fifth position switch

0845 Maximum operation range of the sixth position switch

0846 Maximum operation range of the seventh position switch

0847 Maximum operation range of the eighth position switch

0848 Maximum operation range of the ninth position switch

0849 Maximum operation range of the tenth position switch

[Data type] Two–word

[Unit of data]

Increment system IS–A IS–B IS–C Unit

Metric input 0.01 0.001 0.0001 mm

Inch input 0.001 0.0001 0.00001 inch

Rotation axis 0.01 0.001 0.0001 deg

[Valid data range] –99999999 to +99999999

These parameters set the maximum operation range of the first through
tenth position switches.

� Setting the machine
coordinate ranges for
which the position
switch signals are output

� Maximum operation
range



B–61393E–2/02 1. AXIS CONTROL

21

0850 Minimum operation range of the first position switch

0851 Minimum operation range of the second position switch

0852 Minimum operation range of the third position switch

0853 Minimum operation range of the fourth position switch

0854 Minimum operation range of the fifth position switch

0855 Minimum operation range of the sixth position switch

0856 Minimum operation range of the seventh position switch

0857 Minimum operation range of the eighth position switch

0858 Minimum operation range of the ninth position switch

0859 Minimum operation range of the tenth position switch

[Data type] Two–word

[Unit of data]

Increment system IS–A IS–B IS–C Unit

Metric input 0.01 0.001 0.0001 mm

Inch input 0.001 0.0001 0.00001 inch

Rotation axis 0.01 0.001 0.0001 deg

[Valid data range] –99999999 to +99999999

These parameters set the minimum operation range of the first through
tenth position switches.

� Minimum operation
range



B–61393E–2/021. AXIS CONTROL

22

If pitch error compensation data is specified, pitch errors of each axis can
be compensated in detection unit per axis.  
Pitch error compensation data is set for each compensation position at the
intervals specified for each axis.  The origin of compensation is the
reference position to which the tool is returned.
Pitch error compensation data can be set with external devices such as the
Handy File (see Operator’s manual).  Compensation data can also be set
directly with the MDI panel.
The following parameters must be set for pitch error compensation.  Set
the pitch error compensation value for each pitch error compensation
position number set by these parameters.
In the following example, 33 is set for the pitch error compensation
number at the reference position.

1

2

3

333231 34 35 36 37

–1

–2

34 35 36 3731 32 33

+3 –1 –1 +1 +2 –1 –3

Reference position

Pitch error compensation value (absolute value)

Compensation number parameter
for the reference position
(No.n000)

Compensation magnification
parameter (No.0011#0, 1)

Compensation
position number

Compensation interval parameter
(No.0712 – 0715 (M))
(No.0756 – 0759 (T))

Compensation
value to be set

· Number of the pitch error compensation position at the reference
position (for each axis):  Parameter n000 (n : axis number)

· Pitch error compensation magnification (for each axis):  Parameter
0011#0, 1

· Interval of the pitch error compensation positions (for each axis):
Parameter 0712 – 0715 (M), 0756 – 0759 (T)

1.3
ERROR 
COMPENSATION

1.3.1
Stored Pitch Error
Compensation

General



B–61393E–2/02 1. AXIS CONTROL

23

⋅ Machine stroke:  –400 mm to +800 mm
⋅ Interval between the pitch error compensation positions:  50 mm
⋅ No. of the compensation position of the reference position:  40
If the above is specified, the correspondence between the machine
coordinate and the compensation position No. is as follows:

33 39 40 41 42 56

–400 –350 –100 –50 0 50 100 750 800
Machine 
coordinate (mm)

Compensation 
point number

Compensation values are output at the positions indicated by      .

Therefore, set the parameters as follows:

Parameter Setting value

n000 (n : axis number)
: Compensation number for the reference position

40

0011#0, 1 : Compensation magnification 0, 0

0712 – 0715 (M), 0756 – 0759 (T)
: Interval between pitch error compensation positions

50000

The compensation amount is output at the compensation position No.
corresponding to each section between the coordinates.  
The following is an example of the compensation amounts.

–400 –300 –200 –100 100 200 300 400 (mm)
0

33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49

–1

–2

–3

–4

+1

+2

+3

+4
Pitch error compensation value 
(absolute value)

Reference 
position

33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49

+2 +1 +1 –2 0 –1 0 –1 +2 +1 0 –1 –1 –2 0 +1 +2

No
���	��
�����
����

56

1

Examples

� For linear axis



B–61393E–2/021. AXIS CONTROL

24

⋅ Amount of movement per rotation:  360°
⋅ Interval between pitch error compensation positions:  45°
⋅ No. of the compensation position of the reference position:  60
If the above is specified, the correspondence between the machine
coordinate and the compensation position No. is as follows:

0.0

45.0

90.0

135.0

180.0

225.0

270.0

315.0
(68)
(60)

(67)

(66)

(65)(64)

(63)

(62)

(61)

(+)

Reference position

Compensation values are output at the positions indicated by      .

If the sum of the compensation values for positions 61 to 68 is not 0, pitch
error compensation values are accumulated for each rotation, causing
positional deviation.
The same value must be set for compensation positions 60 and 68.

Therefore, set the parameters as follows:

Parameter Setting value

n000 (n : axis number)
: Compensation number for the reference position

60

0011#0, 1 : Compensation magnification 0, 0

0712 – 0715 (M), 0756 – 0759 (T)
: Interval between pitch error compensation positions

45000

The following is an example of compensation amounts.

(deg)0

60 61 62 63 64 65 66 67 68

+1 –2 +1 +3 –1 –1 –3 +2 +1

No
���	��
�����
����

61 62 63 64 65 66 67
68
(60)

–1

–2

–3

–4

+1

+2

+3

+4

Pitch error compensation value
(absolute value)

Reference position

45 90 135 180 225 270 315

61 62 63 64 65 66 67

45 90 135 180 225 270 315 0

61 62

45 90

68
(60)

� ��� �����
 �	��



B–61393E–2/02 1. AXIS CONTROL

25

n000 Number of the pitch error compensation position for the reference position

(n : axis number)

[Data type] Byte

[Unit of data] Number

[Valid data range] 0 to 127

Set the number of the pitch error compensation position for the reference
position for each axis.

#7
0011

#6 #5 #4 #3 #2 #1
PML2

#0
PML1

#0 PML1

#1 PML2 Specify the pitch error compensation multiply value as listed below:

#1 PML2 #0 PML1 Multiply

0 0 �1

0 1 �2

1 0 �4

1 1 �8

0756 – 0759 Interval between pitch error compensation positions (T series)

0712 – 0715 Interval between pitch error compensation positions (M series)

[Data type] Two–word

Increment system IS–A IS–B IS–C Unit

Metric input 0.01 0.001 0.0001 mm

Inch input 0.001 0.0001 0.00001 inch

Rotation axis 0.01 0.001 0.0001 deg

[Valid data range] 0 to 99999999

The pitch error compensation positions are arranged with equally spaced.
Set the space between two adjacent positions for each axis.

The minimum interval between pitch error compensation positions is
limited and obtained from the following equation:

Minimum interval of pitch error compensation positions = maximum
feedrate (rapid traverse rate)/1875

Unit: mm, inch, deg

[Example] When the maximum rapid traverse rate is 15000 mm/min, the minimum
interval between pitch error compensation positions is 8 mm.

Parameter

[Unit of data]



B–61393E–2/021. AXIS CONTROL

26

WARNING
1 Compensation value range

Compensation values can be set within the range from –7
x compensation magnification (detection unit) to +7 x
compensation magnification (detection unit).  The
compensation magnification can be set for each axis within
the range from 1, 2, 4, and 8 in parameters 0011#0, and #1.

2 Intervals of compensation positions
The pitch error compensation positions are arranged with
equally spaced.  Set the space between two adjacent
positions for each axis to the parameter (No.n000 (n: axis
number)).

3 Pitch error compensation of the rotary axis
For the rotating axis, the interval between the pitch error
compensation positions shall be set to one per integer of the
amount of movement (normally 360°) per rotation. The sum
of all pitch error compensation amounts per rotation must be
made to 0.  Also, set the same compensation value to a
position and the same position with one rotation.

4 Conditions where pitch error compensation is not
performed
Note that the pitch error is not compensated in the following
cases:
· When the machine is not returned to the reference

position after turning on the power.  This excludes the
case where an absolute position detector is employed.

· If the interval between the pitch error compensation
positions is 0.

Warning



B–61393E–2/02 1. AXIS CONTROL

27

Function for compensating for lost motion on the machine.  Set a
compensation value in parameter Nos.0535 – 0538, in detection units
from 0 to �2550 pulses.

More precise machining can be performed by changing the backlash
compensating value depending on the feedrate, the rapid traverse or the
cutting feed.

Let the measured backlash at cutting feed be A and the measured backlash
at rapid traverse be B.  The backlash compensating value is shown below
depending on the change of feedrate (cutting feed or rapid traverse) and
the change of the direction of movement.

Cutting feed to
cutting feed

0 �α
� (�α)

�A �B �(B+α) �  (B+α)

Change of feedrate

Change of direction
of movement

Rapid traverse
to rapid traverse

Rapid traverse
to cutting feed

Cutting feed to
rapid traverse

Same direction

Opposite direction

0

� � = (A�B)/2

� The positive or negative direction for compensating values is the
direction of movement.

⇒ ⇒

α α
A B

Stopped during cutting feed Stopped during rapid traverse

� :  Overrun

� Assign the measured backlash at cutting feed (A) in parameter
Nos.0535 – 0538 and that at rapid traverse (B) in parameter Nos.0686
– 0689 (M)/Nos.0673 – 0676 (T).

1.3.2
Backlash 
Compensation

General

� Backlash compensation

� Backlash compensation
for each rapid traverse
and cutting feed



B–61393E–2/021. AXIS CONTROL

28

#7
0076

#6 #5 #4
ADBLS

#3 #2 #1 #0

[Data type] Bit

ADBLS Backlash compensation applied separately for cutting feed and rapid
traverse
0 : Not performed
1 : Performed

0535 – 0538 Backlash compensating value

[Data type] Word

[Unit of data] Detection unit

[Valid data range] 0 to �2550

Set the backlash compensating value.

When ADBLS is 1, set the backlash compensating value for cutting feed.

When the machine moves in the reference position return direction after
the power is turned on, the first backlash compensation is performed.

0673 – 0676 Backlash compensating value used for rapid traverse (T series)

0686 – 0689 Backlash compensating value used for rapid traverse (M series)

[Data type] Word

[Unit of data] Detection unit

[Valid data range] 0 to �2550

Set the backlash compensating value used in rapid traverse for each axis.

This parameter is valid when ADBLS, is set to 1.

CAUTION
The backlash compensation for each rapid traverse and
cutting feed is not performed until the first reference position
return is completed after the power is turned on.  Under this
state, the normal backlash compensation is performed
according to the value specified in parameter Nos.0535 –
0538 irrespective of a rapid traverse and a cutting feed.

NOTE
When backlash compensation is applied separately for
cutting feed and rapid traverse, jog feed is regarded as
cutting feed.

Parameter

Caution

Note



B–61393E–2/02 1. AXIS CONTROL

29

The servo interface of the Series 0 features the following:
Digitally controlled AC servo motor
Motor feedback with serial pulse coders
(1)  Absolute pulse coder with a resolution of 1,000,000 pulses/rev  
(2)  Absolute pulse coder with a resolution of 65,536 pulses/rev 
(3)  Incremental pulse coder with a resolution of 10,000 pulses/rev 
Scale feedback with A/B/Z signal interface

Explanation of terms frequently used in CNC

Least command increment
The minimum unit of a command to be given from CNC to the
machine tool

Detection unit
The minimum unit which can detect the machine tool position

Command multiplier (CMR)
A constant to enable the weight of CNC command pulses to meet the
weight of pulses from the detector

Detection multiplier (DMR)
A constant to enable the weight of CNC command pulses to meet the
weight of pulses from the detector

CAUTION
The relations among the least command increment,
detection unit, CMR, and DMR are as specified below.
Least command increment = CMR � detection unit

The flexible feed gear function in the digital servo defines
constant DMR using two parameters (Nos.8x84 and 8x85
(x : axis number)) n and m (DMR = n/m).

  Move amount per revolution of motor
DMR � number of pulses of detector per revolution

  Detection unit =

1.4
SETTINGS RELATED
TO SERVO–
CONTROLLED AXES

1.4.1
Parameters Related to
Servo

General



B–61393E–2/021. AXIS CONTROL

30

#7
0004

#6 #5
DMRX

#4 #3 #2 #1 #0
GRDX

POWER OFF

#7
0005

#6 #5
DMRZ

#4 #3 #2 #1 #0
GRDZ (T series)

POWER OFF

DMRY GRDY (M series)

#7
0006

#6 #5
DMR3

#4 #3 #2 #1 #0
GRD3 (T series)

POWER OFF

DMRZ GRDZ (M series)

#7
0007

#6 #5
DMR4

#4 #3 #2 #1 #0
GRD4

POWER OFF

GRDx Specify the reference counter size for each axis as listed below:

Setting value Reference counter size

#3 #2 #1 #0 Other than digital servo
0.1µ detector

Digital servo 
0.1µ detector

0 0 0 0 1000 10000

0 0 0 1 2000 20000

0 0 1 0 3000 30000

0 0 1 1 4000 40000

0 1 0 0 5000 50000

0 1 0 1 6000 60000

0 1 1 0 7000 70000

0 1 1 1 8000 80000

1 0 0 0 9000 90000

1 0 0 1 10000 100000

1 0 1 0 11000 110000

1 0 1 1 12000 120000

1 1 0 0 13000 130000

1 1 0 1 14000 140000

1 1 1 0 15000 150000

1 1 1 1 16000 160000

Parameter



B–61393E–2/02 1. AXIS CONTROL

31

DMRx Specify the detection multiply value (DMR) for each axis as follows:

#6 #5 #4 Detection multiplier

0 0 0 1/2

0 0 1 1

0 1 0 3/2

0 1 1 2

1 0 0 5/2

1 0 1 3

1 1 0 7/2

1 1 1 4

#7
0010

#6 #5 #4 #3 #2 #1
OFFVY

#0

[Data type] Bit

OFFVY When velocity control ready signal VRDY is set ON before position
control ready signal PRDY comes ON
0 : A servo alarm is generated.
1 : A servo alarm is not generated.

#7
0021

#6 #5
APC8

#4
APC7

#3
APC4

#2
APC3

#1
APCZ

#0
APCX (T series)

APC8 APC7 APC4 APCZ APCY APCX (M series)

APCx Specify whether to use absolute pulse coder detector for each axis, as
follows:
0 : Do not use
1 : Use

#7
0022

#6 #5
ABS8

#4
ABS7

#3
ABS4

#2
ABS3

#1
ABSZ

#0
ABSX (T series)

ABS8 ABS7 ABS4 ABSZ ABSY ABSX (M series)

ABSx Specify whether the reference position for the absolute pulse coder of each
axis has been established, as follows:
0 : Not established
1 : Established

#7
0037

#6 #5
SPTP8

#4
SPTP7

#3
SPTP4

#2
SPTP3

#1
SPTPZ

#0
SPTPX (T series)

SPTP8 SPTP7 SPTP4 SPTPZ SPTPY SPTPX (M series)

SPTPx Specify whether to use a separate pulse coder for each axis, as follows:
0 : Do not use
1 : Use



B–61393E–2/021. AXIS CONTROL

32

Command multiply (CMR)0100 – 0103

NOTE
When this parameter has been set, the power must be
turned off before operation is continued.

[Data type] Byte

Set a  command multiply indicating the ratio of the least command
increment to the detection unit for each axis.

Least command increment = detection unit x command multiply

Relationship between the increment system and the least command
increment

Least command increment

Increment system IS–A IS–B IS–C Unit

Metric input 0.01 0.001 0.0001 mm

Inch input 0.001 0.0001 0.00001 inch

Rotation axis 0.01 0.001 0.0001 deg

The value set in the parameter is obtained as follows:

(1)When command multiply is 1/2 to 1/27

Set value = + 1001
(Command multiply)

Valid data range:  102 to 127

(2)When command multiply is 1 to 48

Set value = 2 � command multiply
Valid data range:  2 to 96

NOTE
When command multiply is 1 to 48, the set value must be
determined so that an integer can be set for command
multiply.

Positioning deviation limit in movement0504 – 0507

[Data type] Word

[Unit of data] Detection unit

[Valid data range] 0 to 32767

Set the positioning deviation limit in movement for each axis.

If the positioning deviation exceeds the positioning deviation limit during
movement, a servo alarm is generated, and operation is stopped
immediately (as in emergency stop).
Generally, set the positioning deviation for rapid traverse plus some
margin in this parameter.



B–61393E–2/02 1. AXIS CONTROL

33

Grid shift0508 – 0511

[Data type] Word

[Unit of data] Detection unit

[Valid data range] 0 to�32767

A grid shift is set.

To shift the reference position, the grid can be shifted by the amount set in
this parameter.  Up to the half of maximum value counted by the reference
counter can be specified as the grid shift.

NOTE
When this parameter has been set, the power must be
turned off before operation is continued.

Servo loop gain (M series)0512 – 0515, 0517

[Data type] Word

[Unit of data] 0.01 s –1

[Valid data range] 1 to 9999

Set the loop gain for position control.

When the machine performs linear and circular interpolation (cutting), the
same value must be set to parameter 0517.  For machines that require only
positioning, parameter 0517 must be 0, but the settings of parameters
0512 to 0515 can vary from axis to axis.  As the loop gain increases, the
response by position control is improved.  A too large loop gain, however,
makes the servo system unstable.

The relationship between the positioning deviation (the number of pulses
counted by the error counter) and the feedrate is expressed as follows:

Positioning deviation = feedrate
60 

(loop gain)�

Unit:  Positioning deviation   mm, inches, or deg
Feedrate:   mm/min, inches/min, or deg/min
Loop gain:   s–1

Positioning deviation limit in the stopped state0593 – 0596

[Data type] Word

[Unit of data] Detection unit

[Valid data range] 0 to 32767

Set the positioning deviation limit in the stopped state.

If, in the stopped state, the positioning deviation exceeds the positioning
deviation limit set for stopped state, a servo alarm is generated, and
operation is stopped immediately (as in emergency stop).



B–61393E–2/021. AXIS CONTROL

34

Even when the power to the CNC is turned off, a battery–powered pulse
coder stores the current position.  No reference position return is required
when the power to the CNC is turned on next.

#7
0021

#6 #5
APC8

#4
APC7

#3
APC4

#2
APC3

#1
APCZ

#0
APCX (T series)

APC8 APC7 APC4 APCZ APCY APCX (M series)

APCx Specify whether to use absolute pulse coder detector for each axis, as
follows:
0 : Do not use
1 : Use

1.4.2
Absolute Position
Detection

General

Parameter



B–61393E–2/02 1. AXIS CONTROL

35

[Classification] Input signal

[Function] When a unit with an additional axis is switched on with this signal set to
1, its fourth axis is ignored; that is, it is assumed that the unit has no
additional axis.  So, it is unnecessary to perform processing related to the
additional axis.

CAUTION
This signal is checked instantly the power is switched on.
It is no use turning on and off the signal when the power is
already on.

NOTE
This signal is valid only when parameter C4NG (bit 1 of
parameter No. 0019) = 1.

#7
4NGX004

#6 #5 #4 #3 #2 #1 #0

#7
0019

#6 #5 #4 #3 #2 #1
C4NG

#0

[Data type] Bit

C4NG Specifies whether to enable the ignore–fourth–axis signal (4NG, bit 7 of
signal X004), as follows:
0 : Enable
1 : Disable

1.4.3
Ignore–the–fourth–axis
–signal (M Series)

Signal

Ignore–the–fourth–axis
signal
4NG<X004#7> (M series)

Signal address

Parameter



B–61393E–2/021. AXIS CONTROL

36

Setting this signal to 1 causes the machine to behave in the same manner
as when only the Z–axis is locked.

[Function] The X– and Y–axis move commands and the M, S, and T functions work
normally, but the Z–axis movement of the machine is inhibited, and only
the current display is updated.

[Operation] Instantly this signal becomes 1 during Z–axis movement, this function
becomes enabled.  The signal is valid during both automatic and manual
operations.

#7
G103

#6
ZNG

#5 #4 #3 #2 #1 #0

1.4.4
Cancel–the–Z–axis
Command Signal
 (M Series)

General

Signal

Cancel–the–Z–axis
command signal (Input)
ZNG (M series)<G103#6>

Signal address



B–61393E–2/02 1. AXIS CONTROL

37

Machine coordinate system is a coordinate system set with a zero  point
proper to the machine system. 
With G53 command, the machine coordinate system is selected and the
axis can be moved at rapid traverse to the position expressed by the
machine coordinates.

WARNING
Since the machine coordinate system must be set before
the G53 command is specified, at least one manual
reference position return or automatic reference position
return by the G28 command must be performed after the
power is turned on.  This is not necessary when an
absolute–position detector is attached.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.7.1 MACHINE COORDINATE SYSTEM

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.7.1 MACHINE COORDINATE SYSTEM

1.5
SETTINGS RELATED
WITH COORDINATE
SYSTEMS

1.5.1
Machine Coordinate
System

General

Warning

Reference item



B–61393E–2/021. AXIS CONTROL

38

A coordinate system used for machining a workpiece is referred to as a
workpiece coordinate system.  A workpiece coordinate system is to be set
with the CNC beforehand (setting a workpiece coordinate system).
A machining program sets a workpiece coordinate system (selecting a
workpiece coordinate system).
A set workpiece coordinate system can be changed by shifting its origin
(changing a workpiece coordinate system).

A workpiece coordinate system can be set using one of three methods:

(1)Method using G92 (G50 for G code system A)
A workpiece coordinate system is set by specifying a value after G92
(G50) in the program.

(2)Automatic setting 
If bit 7 (APRS) of parameter No.0010 is set beforehand, a workpiece
coordinate system is automatically set when manual reference
position return is performed.

(3) Input using the CRT/MDI panel
Six workpiece coordinate systems can be set beforehand using the
CRT/MDI panel.

The user can choose from set workpiece coordinate systems as described
below.

(1)Selecting a workpiece coordinate system set by G92 (G50) or
automatic workpiece coordinate system setting
Once a workpiece coordinate system is selected, absolute commands
work with the workpiece coordinate system.

(2)Choosing from six workpiece coordinate systems set using the
CRT/MDI panel
By specifying a G code from G54 to G59, one of the workpiece
coordinate systems 1 to 6 can be selected.

G54 Workpiece coordinate system 1
G55 Workpiece coordinate system 2
G56 Workpiece coordinate system 3
G57 Workpiece coordinate system 4
G58 Workpiece coordinate system 5
G59 Workpiece coordinate system 6

Workpiece coordinate system 1 to 6 are established after reference
position return after the power is turned on. When the power is turned
on, G54 coordinate system is selected.

1.5.2
Workpiece Coordinate
System (T/M Series)/
Additional of
Workpiece Coordinate
System Pair (M Series)

General

Setting a workpiece
coordinate system

Selecting a workpiece
coordinate system



B–61393E–2/02 1. AXIS CONTROL

39

The six workpiece coordinate systems specified with G54 to G59 can be
changed by changing an external workpiece zero point offset value or
workpiece zero point offset value.  
Three methods are available to change an external workpiece zero point
offset value or workpiece zero point offset value.
(1) Inputting from the CRT/MDI panel
(2) Programming by G10 or G92 (G50)
(3) Changing an external workpiece zero point offset value

ZOFS2 ZOFS3
ZOFS4

ZOFS5

ZOFS1

ZOFS6

EXOFS : External workpiece zero point offset value
ZOFS1 to ZOFS6 : Workpiece zero point offset value

EXOFS

Workpiece 
coordinate 
system 1  (G54)

Workpiece 
coordinate 
system 2  (G55)

Workpiece 
coordinate 
system 3  (G56)

Workpiece 
coordinate 
system 4  (G57)

Workpiece 
coordinate 
system 5  (G58)

Workpiece 
coordinate 
system 6  (G59)

Machine zero point

Changing an external workpiece zero point offset value or workpiece zero point 
offset value

When the coordinate system actually set by the G92 (G50) command or
the automatic coordinate system setting deviates from the programmed
workpiece coordinate, the set coordinate system can be shifted.
Set the desired shift amount in the workpiece coordinate system shift
memory.

ÂÂÂ
ÂÂÂ
ÂÂÂ

X–Z: Coordinate system in programming

x–z : Current set coordinate system with shift
amount 0
(coordinate system to be modified by shifting)

Set the shift amount from O’ to O in the workpiece coordinate system shift memory.

x
X

Z

z

O

O’

Shift

Workpiece Coordinate System shift

Changing workpiece
coordinate system

Workpiece coordinate
system shift (T series)



B–61393E–2/021. AXIS CONTROL

40

Besides the six workpiece coordinate systems (standard workpiece
coordinate systems) selectable with G54 to G59, 48 additional workpiece
coordinate systems (additional workpiece coordinate systems) can be
used.

#7
APRS0010

#6
WSFT

#5 #4 #3 #2 #1 #0
(T series)

APRS (M series)

[Data type] Bit

APRS Automatic setting of a coordinate system when the manual reference
position return is performed
0 : Not set automatically
1 : Set automatically

WSFT Specifies whether to shift the workpiece coordinate system, as follows:
0 : Do not shift
1 : Shift

#7
0063

#6 #5 #4 #3 #2 #1
PRSTIN

#0

[Data type] Bit

PRSTIN Coordinates at the reference position when a coordinate system is set
automatically
0 : Value set in parameter Nos.0708 – 0711 is used.
1 : For input in mm, the value set in parameter Nos.0708 – 0711 is used,

or for input in inches, the value set in parameter Nos.0815 – 0818 is
used.

#7
WKZSFT0388

#6 #5 #4 #3 #2 #1 #0
(T series)

[Data type] Bit

WKZSFT Shift value of the workpiece coordinate system and external workpiece
zero point offset value are
0 : Stored in the separate memory areas.
1 : Stored in the same memory area, that is, the shift and the offset values

are the same.

Addition of workpiece
coordinate system pair 
(M series)

Parameter



B–61393E–2/02 1. AXIS CONTROL

41

Coordinate value of the reference position used when automatic coordinate system
setting is performed

0708 – 0711

[Data type] Two–word

Input increment IS–A IS–B IS–C Unit

Linear axis (input in mm) 0.01 0.001 0.0001 mm

Linear axis (input in inches) 0.001 0.0001 0.00001 inch

Rotation axis 0.01 0.001 0.0001 deg

[Valid data range] –99999999 to 99999999

Set the coordinate value of the reference position on each axis to be used
for setting a coordinate system automatically.

External workpiece zero point offset value (T series)0751 – 0754

External workpiece zero point offset value (M series)0940 – 0943

[Data type] Two–word

Input increment IS–A IS–B IS–C Unit

Linear axis (input in mm) 0.01 0.001 0.0001 mm

Linear axis (input in inches) 0.001 0.0001 0.00001 inch

Rotation axis 0.01 0.001 0.0001 deg

[Valid data range] –7999 to 7999

This is one of the parameters that give the position of workpiece
coordinate system (G54 to G59).  It gives an offset of the workpiece zero
point common to all workpiece coordinate systems.  In general, the offset
varies depending on the workpiece coordinate systems.  Usually, this is
set automatically according to the input from the machine (external data
input).

[Unit of data]

[Unit of data]



B–61393E–2/021. AXIS CONTROL

42

Workpiece zero point offset value in workpiece coordinate system1 (G54) (T series)0755 – 0758

Workpiece zero point offset value in workpiece coordinate system2 (G55) (T series)0759 – 0762

Workpiece zero point offset value in workpiece coordinate system3 (G56) (T series)0763 – 0766

Workpiece zero point offset value in workpiece coordinate system4 (G57) (T series)0767 – 0770

Workpiece zero point offset value in workpiece coordinate system5 (G58) (T series)0771 – 0774

Workpiece zero point offset value in workpiece coordinate system6 (G59) (T series)0775 – 0778

Workpiece zero point offset value in workpiece coordinate system1 (G54) (M series)0944 – 0947

Workpiece zero point offset value in workpiece coordinate system2 (G55) (M series)0948 – 0951

Workpiece zero point offset value in workpiece coordinate system3 (G56) (M series)0952 – 0955

Workpiece zero point offset value in workpiece coordinate system4 (G57) (M series)0956 – 0959

Workpiece zero point offset value in workpiece coordinate system5 (G58) (M series)0960 – 0963

Workpiece zero point offset value in workpiece coordinate system6 (G59) (M series)0964 – 0967

[Data type] Two–word

Input increment IS–A IS–B IS–C Unit

Linear axis (input in mm) 0.01 0.001 0.0001 mm

Linear axis (input in inches) 0.001 0.0001 0.00001 inch

Rotation axis 0.01 0.001 0.0001 deg

[Valid data range] –99999999 to 99999999

The workpiece zero point offset values in workpiece coordinate systems 1
to 6 (G54 to G59) are set.

Workpiece coordinate system 1 (G54)

Workpiece zero point offset

Origin of machine coordinate system

Workpiece coordinate system 2 (G55)

[Unit of data]



B–61393E–2/02 1. AXIS CONTROL

43

Coordinate value of the reference position used when automatic coordinate system
setting is performed with inch input

0815 – 0818

[Data type] Two–word

Input increment IS–A IS–B IS–C Unit

Linear axis (input in inches) 0.001 0.0001 0.00001 inch

[Valid data range] –99999999 to 99999999

Set the coordinate value of the reference position on each axis to be used
for setting a coordinate system automatically when input is performed in
inches.

NOTE
This parameter is valid when PRSTIN in parameter 0063#1
is set to 1.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.7.2 WORKPIECE COORDINATE 
SYSTEM

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.7.2 WORKPIECE COORDINATE 
SYSTEM

Reference item



B–61393E–2/021. AXIS CONTROL

44

The roll–over function prevents coordinates for the rotation axis from
overflowing.  The roll–over function is enabled by setting bit 1 (ROACx)
of parameter (No.0398 (M) or 0388 (T)) to 1.

For an incremental command, the tool moves the angle specified in the
command.  For an absolute command, the coordinates after the tool has
moved are values rounded by the angle corresponding to one rotation set
in parameter (No.0860 (M) or 0788 (T)).  The tool moves in the direction
in which the final coordinates are closest when bit 2 (RODRC) of
parameter No.0398 (M) or 0388 (T) is set to 0.  Displayed values for
relative coordinates are also rounded by the angle corresponding to one
rotation when bit 2 (ROCNT) of parameter No.0398 (M) or 0388 (T) is
set to 1.

#7
0011

#6 #5 #4 #3 #2
ADLN

#1 #0
(M series)

ADLN Specifies whether the fourth axis is a linear or rotation axis, as follows:
1 : Linear axis
0 : Rotation axis

#7
0032

#6 #5 #4 #3
LIN4

#2
LIN3

#1 #0
(T series)

LIN3 Specifies whether the third axis is a linear or rotation axis, as follows:
1 : Linear axis
0 : Rotation axis

LIN4 Specifies whether the fourth axis is a linear or rotation axis, as follows:
1 : Linear axis
0 : Rotation axis

#7
0388

#6 #5 #4 #3
ROCNT

#2
RODRC

#1
ROAXC

#0
(T series)

0398 ROCNT RODRC ROAXC (M series)

[Data type] Bit

ROAXC The roll–over function of a rotation axis is
0 : Invalid
1 : Valid

NOTE
ROAXC specifies the function only for a rotation axis.

1.5.3
�	��
� ���� �	�� ��


General

Parameter



B–61393E–2/02 1. AXIS CONTROL

45

RODRC In the absolute commands, the axis rotates in the direction
0 :  In which the distance to the target is shorter.
1 :  Specified by the sign of command value.

NOTE
RODRC is valid only when ROAXC is 1.

ROCNT Relative coordinates are
0 :  Not rounded by the amount of the shift per one rotation
1 :  Rounded by the amount of the shift per one rotation

NOTE
1 ROCNT is valid only when ROAXC is 1.
2 Assign the amount of the shift per one rotation in parameter

(No.0860 (M) or 0788 (T)).

0788 Move amount per rotation of rotary axis (T series)

0860 Move amount per rotation of rotary axis (M series)

NOTE
When this parameter is changed, turn off the power before
continuing operation.

[Data type] Two–word

Increment system IS–A IS–B IS–C Unit

Unit of data 0.01 0.001 0.0001 deg

Standard setting
value

36000 360000 3600000

[Valid data range] 1000 to 99999999

Set move amount per rotation of rotation axis.

NOTE
This function cannot be used together with the indexing
function of the index table (M series).

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.22 ROTARY AXIS ROLL–OVER

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.22 ROTARY AXIS ROLL–OVER

[Unit of data]

Note

Reference item



B–61393E–2/021. AXIS CONTROL

46

A movement along an axis can be executed simply by executing a move
command specified for that axis or by synchronizing the movement with
another axis. Either of these two types can be selected by means of a signal
sent from the machine.

The M series and T series support different simple synchronization
control functions.  One of the greatest differences is that:

<T series>  The function can synchronize only automatic operations.  It
cannot synchronize manual operations.

<M series>  The function can synchronize both automatic and manual
operations. The fourth axis is used as the slave axis.  In the following
description, the function is explained separately for the M series and T
series.

[Classification] Input signal

[Function] Synchronization control is performed for memory or MDI operation. 
The number or alphabet at the end of the signal name represents the
number of the controlled axis.

X. ... The X axis becomes the slave axis for synchronization control.
Y. ... The Y axis becomes the slave axis for synchronization control.
Z. ... The Z axis becomes the slave axis for synchronization control.
:
:

SYNC x

[Operation] When the signal is set to 1, the control unit operates as described below:
– During memory or MDI operation, the control unit supplies the move

command, specified for the master axis, to both the master and slave
axes of synchronization control.

The master axis is specified with a parameter.

1.6
SIMPLE
SYNCHRONOUS
CONTROL

General

� Simple synchronous
control for the M series
and T series

Signal

<T series and 
M series>

Signals to select the
slave axis for simple
synchronous control
SYNCX to SYNC4
<G237>



B–61393E–2/02 1. AXIS CONTROL

47

[Classification] Input signal

[Function] Synchronization control is performed in jog, handle, or incremental feed
mode.

[Operation] When the signal is set to 1, the control unit operates as described below:

– In jog, handle, or incremental feed mode, the control unit supplies the
move command, specified for the master axis, to both the master and
slave axes of synchronization control.

The master axis is specified with a parameter.

[Classification] Output signal

[Function] This signal is used to post notification of the occurrence of a
synchronization error.

[Operation] :This signal is output when the difference in the positional deviation
between the master axis and slave axis exceeds the value set in parameter
475.  At the same time, alarm 213 is issued.

#7
G237

#6 #5 #4 #3
SYNC4

#2
SYNC3

#1
SYNCZ

#0
SYNCX

#7
G133

#6
SYNCJ

#5 #4 #3 #2 #1 #0

G237 SYNC4

SYNALF192

<M series>

Signal for selecting the
manual feed axis for
simple synchronous
control
SYNCJ <G133#6>

<M series>

Servo axis
synchronization alarm
signal
SYNAL <F192#7>

Signal address

T series

M series



B–61393E–2/021. AXIS CONTROL

48

0281 Axes synchronized with the X and Z axes in synchronization control

0282 Axes synchronized with the 3rd and 4th axes in synchronization control

[Valid data range] 0 to 32

[Unit of data] An axis synchronized with each axis in servo axis synchronization control
is set according to the table given below.  Set the number of an axis to be
synchronized in each digit of the parameters.  Set the axis to be
synchronized with the X/third axis in the unit’s position of each
parameter, and set the axis to be synchronized with the Z/fourth axis in
the ten’s position.

Setting value Synchronized with

0 X axis

1 Z axis

2 3rd axis

3 4th axis

Ex. No. 0281 = 32

X axis is synchronized with the 3rd axis.
The Z axis is synchronized with the 4th axis.

Ex. No. 0282 = 10

The 3rd axis is synchronized with the X axis.
The 4th axis is synchronized with the Z axis.

#7
0075

#6 #5 #4 #3 #2 #1
SYNM1

#0
SYNM0

SYNM0, SYNM1 The master axis, in simple synchronous control, is set according to the
table below.

#1 SYNM1 #0 SYNM0 Master axis in simple synchronous control

0 0 Simple synchronous control is not applied.

0 1 The master axis is the X axis.
 (The 4th axis is synchronized with the X axis.)

1 0 The master axis is the Y axis.
(The 4th axis is synchronized with the Y axis.)

1 1 The master axis is the Z axis.
(The 4th axis is synchronized with the Z axis.)

Limit of the difference between the amount of positioning deviation of the master
and slave axes

0475

[Data type] Word

[Unit of data] Detection unit
[Valid data range] 0 to 32767

Parameter

T series

M series



B–61393E–2/02 1. AXIS CONTROL

49

������ Message Description

213 ILLEGAL COMMAND IN
SYNCHRO–MODE

A move command was specified for
the slave axis of synchronization con-
trol.

214 ILLEGAL COMMAND IN
SYNCHRO–MODE

A command for coordinate system
setting or shift–type tool compensa-
tion was executed during synchro-
nization control.  Correct the program.

������ Message Description

213 ILLEGAL COMMAND IN
SYNCHRO–MODE

One of the following errors occurred
during synchronous operation (simple
synchronization control):

(1) The program contains a move com-
mand for the slave axis.

(2) A command for jog feed, manual handle
feed, or incremental feed was issued for
the slave axis.

(3) After power on, the command for auto-
matic reference position return was spe-
cified before a manual reference 
position return had been performed.

(4) The difference in position error between
the master and slave axes exceeded 
the value set in parameter 0475.

CAUTION
1 When a manual reference position return is executed,

identical movements are performed along the master and
slave axes until deceleration commences.  Subsequently,
grids are detected separately.

2 Pitch error compensation and backlash compensation are
executed separately for the master and slave axes.

Alarm and message

T series

M series

Caution



B–61393E–2/021. AXIS CONTROL

50

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.21 SIMPLE SYNCHRONOUS CON-
TROL

Reference item



B–61393E–2/02 1. AXIS CONTROL

51

With the 0–TTC, movement along those axes (X1, Z1, C1, Y1) of tool post
1 is usually specified using programmed commands for tool post 1, while
movement along the axes (X2, Z2, C2) of tool post 2 is specified using
programmed commands for tool post 2.

X1
X2Z1

Z2

Tool post 1

Tool post 2

The axis recomposition function allows synchronization control between
the tool posts and within a single post, as well as composite control
between the tool posts.

Movement along an arbitrary axis of a tool post is synchronized with
another axis of the other tool post.

Example: Movement along the Z1 axis is synchronized with movement
along the Z2 axis.

Movement along an arbitrary axis of a tool post is synchronized with
another axis of the same tool post.

Example: Movement along the Z1 axis is synchronized with movement
along the Y1 axis.

Move commands for arbitrary axes of the tool posts are switched.

Example: Commands for the X1 axis and X2 axis are switched.

� Performing movement along the X2 axis and Z1 axis by
using programmed commands for tool post 1
Performing movement along the X1 axis and Z2 axis by
using programmed commands for tool post 2

1.7
AXIS
RECOMPOSITION
(0–TTC)

General

Separate control for
each tool post

Synchronization control

Composite control



B–61393E–2/021. AXIS CONTROL

52

Movement along an axis of one tool post can be synchronized with
movement along an axis of the other tool post.  When a move command
is specified for an axis (synchronization master axis), the same move
command is also specified for the corresponding axis (synchronization
slave axis) so that the same movement is performed along these axes.
When this function is used with the parking function, which places a
specific axis in the halt state by ignoring a move command for that axis,
the following control operations are enabled:

(1)Synchronizing movement along an arbitrary axis on a tool post with
movement along an arbitrary axis on the other tool post  (Both master
and slave moved)

Example 1: Synchronize the Z2 axis with the Z1 axis. 
 (Machining with both ends of a workpiece held )

Z2Z1

X1

Example 2: Synchronize the X2 and Z2 axes with the X1 and Z1 axes.
(Balance cut)

X1

Z1

X2

Z2

(2)Using a move command for an arbitrary axis on a tool post to perform
movement along an arbitrary axis on the other tool post.  At this time,
no movement is performed along that axis for which the move
command is specified.  (Master parked, slave moved)

(3)Updating the coordinate on an arbitrary axis of a tool post based on the
distance traveled along an arbitrary axis of the other tool post.  At this
time, no movement is performed along that axis for which the
coordinate is updated.  (Master moved, slave parked)

Synchronization control



B–61393E–2/02 1. AXIS CONTROL

53

Using methods (2) and (3) allows one motor to be controlled by both tool
post 1 and tool post 2.

Example 3: Share one motor between the Z1 axis and Z2 axis (where,
the motor is assumed to be connected to the Z1 axis).

X1

Z1

X2

Movement along the X2 and Z1 axes is performed using a programmed
command for tool post 2.  (The Z1 axis is synchronized with the Z2 axis).
At this time, the Z2 axis is placed in the parking state.  The coordinate
systems for the Z1 and Z2 axes are updated respectively.

X1

Z1

X2

Movement along the X1 and Z1 axes is performed using a programmed
command for tool post 1.  (The Z2 axis is synchronized with the Z1 axis.)
At this time, the Z2 axis is placed in the parking state.  For the Z2 axis,
only its coordinate system is updated.

The coordinate systems on the Z1 axis and Z2 axis are each updated
constantly.  Therefore, as soon as the synchronization state is changed, a
move command can be executed without setting the coordinate system
again.

In a special case, the fourth axis of tool post 2 (Y2 axis) can be used as the
synchronization master axis that is always parked, and the seventh axis
of tool post 1 can be used as the synchronization slave axis.  Then, Y2 axis
control is enabled.

� Master parking

� Slave parking



B–61393E–2/021. AXIS CONTROL

54

CAUTION
1 The synchronization control mentioned here is used to

specify the same move command to the two servo
processing systems simultaneously.  At this time, the
synchronization error compensation function, which always
detects the deviation between the two servo motors and
compensates one servo motor to reduce the deviation, is
not applied.  Synchronization error detection can, however,
be performed by parameter setting.  If a synchronization
error is detected, cancel synchronization control
immediately, and turn off the servo ready signal.

2 When synchronization control is canceled during automatic
operation, do not specify a move command nor coordinate
system setting for the synchronization slave axis within the
two blocks including the currently executed block (within
three blocks when tool–nose radius compensation is being
performed).

NOTE
Parking prevents move commands from being issued to the
servo processing system, thus preventing the updating of all
coordinates.  However, absolute and relative coordinates
can be updated by parameter setting.

Move commands can be switched between arbitrary axes on the tool posts
to perform movement along each axis.

In a machine having the X1 and Z1 axes of tool post 1 and the X2 and Z2
axes of tool post 2, switching between the X1 axis and X2 axis is explained
below.  Here, assume that the move commands for the Z1 and Z2 axes
allow a workpiece to move along these axes.

Turret 1 and workpiece 1 belong to tool post 1 and are moved according
to programmed commands issued for tool post 1.  Turret 2 and workpiece
2 belong to tool post 2, and are moved according to programmed
commands issued for tool post 2.

X1

Z1

Turret 1

Workpiece  1

Turret 2

Workpiece 2
Z2

(X2, Z2)

(X1, Z1)

Moved by program for
tool post 1

(X1, Z1) and (X2, Z2) are the
workpiece coordinates at the
tool tips of turret 1 and turret
2, respectively.

Moved by program
for tool post 2

X2

Composite control

Example of composite
control

Coordinate systems in
separate control mode



B–61393E–2/02 1. AXIS CONTROL

55

The control mode is changed to composite control so that turret 2 is
controlled with tool post 1, and turret 1 is controlled with tool post 2.  Set
the coordinates of the tool tip of turret 2 in the workpiece coordinate
system for tool post 1, and set the coordinates of the tool tip of turret 1 in
the workpiece coordinate system for tool post 2.  The coordinate systems
for composite control can be set automatically by parameter setting.  In
automatic setting, each workpiece coordinate system is calculated from
the machine coordinates and the workpiece coordinates at the reference
position.  (Whether the coordinate systems are to be set automatically is
determined by parameter setting.)

X1

Z1

Z2

(X2, Z2)
�

(X1, Z1)

(X2, Z2)
�

(X1, Z1) X2

Turret 2 and workpiece 1 belong to tool post 1, and are moved by
programmed commands issued for tool post 1.  Turret 1 and workpiece
2 belong to tool post 2, and are moved by programmed commands issued
for tool post 2.

X1

Z1
Workpiece 1

Workpiece 2
Z2

(X2, Z2)

(X1, Z1)

Moved by program for
tool post 1

Moved by program
for tool post 2

X2

Turret 1

Turret 2

(X1, Z1)

(X2, Z2)

Change from separate
control to composite
control

Coordinate systems in
composite control mode



B–61393E–2/021. AXIS CONTROL

56

The control mode is changed to separate control so that turret 1 is
controlled with tool post 1, and turret 2 is controlled with tool post 2.  Set
the coordinates of the tool tip of turret 1 in the workpiece coordinate
system for tool post 1, and set the coordinates of the tool tip of turret 2 in
the workpiece coordinate system for tool post 2.  The coordinate systems
for separate control can be set automatically by parameter setting.  In
automatic setting, each workpiece coordinate system is calculated from
the machine coordinates and the workpiece coordinates at the reference
position.  (Whether the coordinate systems are to be set automatically is
determined by parameter setting.)

X1

Z1

Z2

(X1, Z1)
↑

(X2, Z2)

(X1, Z1)
↓

(X2, Z2)

X2

Speed commands for the spindles and feed–per–rotation operations based
on the feedback pulses sent from the position coder are not exchanged by
this composite control  function.

� S command output: Output to the spindle connected to each path. If
command switching is necessary, change the 
analog command voltage by using the SLSPA 
and SLSBP signals.

� Feed per rotation, threading, spindle fluctuation detection:  
The feedback pulses from the position coder 
connected to each path are used.  Pulse switching
cannot be performed in the CNC.  If pulse 
switching is required, a pulse switching circuit
must be added to the machine.

� Constant surface speed control:
The spindle connected to each path is controlled
by calculating the spindle speed from the 
absolute coordinate on the X axis of the path.

� Cs axis control: This composite control function cannot perform
Cs axis switching.

Change from composite
control to separate
control

Spindle control



B–61393E–2/02 1. AXIS CONTROL

57

Example: Performing separate control and composite control with a
machine having the following configuration:

X1

Z1 Z2

X2

S1 S2

Workpiece 1

Workpiece 2

� Separate control: System X1–Z1, S1 is controlled by a program for
tool post 1
System X2–Z2, S2 is controlled by a program for
tool post 2

Workpiece 1 is machined using the program for tool post 1, while
workpiece 2 is machined using the program for tool post 2.

� Composite control 1 (switching between X1 and X2):  
System X2–Z1, S1 is controlled by a program for
tool post 1.
System X1–Z2, S2 is controlled by a program for
tool post 2.

Workpiece 1 is machined using the program for tool post 1, while
workpiece 2 is machined using the program for tool post 2.  Feed per
rotation, threading, and constant surface speed control are enabled.

� Composite control 2 (switching between Z1 and Z2):
System X1–Z2, S1 is controlled by a program for
tool post 1.
System X2–Z1, S2 is controlled by a program for
tool post 2.

Workpiece 1 is machined using the program for tool post 2, while
workpiece 2 is machined using the program for tool post 1.  Feed per
rotation, threading, and constant surface speed control are disabled.

In the configuration shown above, composite control 1 is used.

When switching between separate control and composite control is
performed, the already–set offset value and tool–tip radius compensation
are left as is.  Therefore, after the control mode is changed, a T code must
be specified to set appropriate offset values.

After performing switching between separate control and composite
control during automatic operation, never specify the setting of a
coordinate system nor a move command for the switched axes within the
two blocks including the currently executed block (or within three blocks
when tool–nose radius compensation is being performed).

Tool offset in composite
control

Move command after
switching between
separate control and
composite control



B–61393E–2/021. AXIS CONTROL

58

Example: Starting composite control to switch between the X1 axis and
X2 axis at the N200 block

N190 ;
N200 M55;(This M code command starts composite control.)
N210 ;
N220 ;
N230 ;

In the above example, no move command can be specified for the X axis
in the N210 block (also in the N220 block when tool–nose radius
compensation is being performed).  If M55 is an M code that is not
buffered, however, coordinate system setting or a move command for the
X axis can be specified in the N210 and subsequent blocks.

Performing separate control and Z1–Z2 axes synchronization control

(1)Machine configuration

(i) When separate control is applied

X1

Z1 Z2

X2

S1 S2

(ii)When Z1–Z2 axes synchronization control is applied

X1

Z1 Z2

S1 S2

With a workpiece held at both
ends, movement along the Z2
axis is also performed using a
command for the Z1 axis.

Examples



B–61393E–2/02 1. AXIS CONTROL

59

(2)Parameter setting

#7
0380

#6 #5
0

#4
0

#3
0

#2
0

#1
0

#0
0

#7 #6 #5
0

#4
0

#3
0

#2
0

#1
1

#0
0

0381 0 0 0 0 0 0 0 0 0 0 1 0

0382 0 0 0 0 0 0 0 0 0 0 0 0

Tool post 1 Tool post 2

00320 0

00321 2

00322 0

00323 0

00324 0

00325 0

00686 0

00687 100 to 1000

00688 0

00689 0

00690 0

00691 0

� To synchronize the Z2 axis with the Z1 axis, set 2 in parameter 0321
for tool post 2.

� Since the positive direction of the Z1 axis and that of the Z2 axis are
opposite to one another, mirror image is applied to perform
synchronization.  For this purpose, set SMR2 to 1 for tool post 2.

� Since movement along the Z1 axis and movement along the Z2 axis
must be equal, synchronization error detection is performed.  Set
SER2 to 1 for tool post 2.  Set a value of about 100 to 1000 as the
synchronization error limit in parameter 0687 for tool post 2.  (This
value varies depending on the machine.)

� During synchronization, the difference in positional deviation
between the Z1 axis and Z2 axis is indicated in parameter 0693 for tool
post 2.

(3)Signal operation

� To start synchronous movement along the Z1 axis and Z2 axis, set the
SYN2S signal to 1.

� To cancel synchronization, set the SYN2S signal to 0.

� When an emergency stop, NC reset, or alarm occurs, also set SYN2S
to 0.

� Leave all signals other than SYN2S set to 0.



B–61393E–2/021. AXIS CONTROL

60

(4)Sample program

Tool post 1 Tool post 2
: : Perform machining separately on each tool

post.

Z80. ; Z150. ; Move the workpiece and chuck to a 
predetermined position.

M200 ; M200 ; Wait until movement is completed.
M61 ; Clamp the workpiece and start 

synchronization.

M3 S800 ; Turn the spindle clockwise.
Z–25. ; Movement along the Z1 axis

: Machining through movement along the X1
and Z1 axes

M62 ; Cancel synchronization and unclamp the 
workpiece.

M201 ; M201 ; Wait until synchronization is released.
; ; Dummy block

 (specifying no move command)

: : Perform machining separately for each tool
post.

Where, the following is assumed:

M61 is an M code that is used to clamp the workpiece and cause the
SYN2S signal to become 1.  M62 is an M code that is used to turn the
SYN2S signal to 0 and unclamp the workpiece.

(5) Note

NOTE
1 Operation to match the speeds of spindles S1 and S2 is

required.  For example, a spindle command for tool post 1
is output to both S1 and S2.

2 When synchronous movement is performed with the master
axis and slave axis clamped mechanically as shown in the
above example, a torque limit should be applied to the slave
axis (the Z2 axis in the example) in some cases.



B–61393E–2/02 1. AXIS CONTROL

61

(1) Machine configuration

(i) When separate control is applied

X1

Z1 Z2

X2

S1 S2

Turret 2

Turret 1

(ii)When X1–Z2 axes interpolation is performed

X1
Z2

S2

X1–Z2 axes interpolation may be performed using either of the following
two methods:

(a) The X2–Z2 axes are controlled using a program for tool post 2, and
the X1 axis is synchronized with the X2 axis.  The X2 axis of tool
post 1 is parked.  Axis control is not performed for tool post 1.

(b)Composite control is performed to exchange the X1 and X2 axes
between the tool posts.  Axis control is not performed for tool post
1.

In the following, the method of using synchronization control and that of
using composite control will be explained separately.

Example of performing
separate control and
X1–Z2 axes interpolation



B–61393E–2/021. AXIS CONTROL

62

(a) When synchronization control is applied

(a.2) Parameter setting

#7

0380

#6 #5

0

#4

0

#3

0

#2

0

#1

0

#0

0

#7 #6 #5

0

#4

0

#3

0

#2

0

#1

0

#0

0

0381 0 0 0 0 0 0 0 0 0 0 0 0

0382 0 0 0 0 0 0 0 0 0 0 0 0

Tool post 1 Tool post 2

10320 0

00321 0

00322 0

00323 0

00324 0

00325 0

00686 0

00687 0

00688 0

00689 0

00690 0

00691 0

� To synchronize the X1 axis with the X2 axis, set 1 in parameter 0320
for tool post 1.

� For both the X1 and X2 axes, movement in the positive direction of the
coordinate is always away from the workpiece center.  So, mirror
image is not required.

� Since the X2 axis is parked, synchronization error detection is not
performed.

� During synchronization, the difference in positional deviation
between the X2  axis and X1 axis is indicated in parameter 0692 for tool
post 1.

(a.3) Signal operation

� To start synchronous movement along the X2 and X1 axes, set the
SYN1M and PK1S signals to 1.

� To cancel synchronization, set the SYN1M and PK1S signals to 0.

� When an emergency stop, NC reset, or alarm occurs, also set SYN1M
and PK1S to 0.

� Leave the signals other than SYN1M and PK1S set to 0.



B–61393E–2/02 1. AXIS CONTROL

63

(a.4) Sample program

Tool post 1 Tool post 2
: : Perform machining separately on each tool

post.

Z0 ; Z20. ; Move each workpiece to a predetermined 
position.

X120. ; X120. ; Movement along each X axis to the 
synchronization start position (X1 = X2)

M200 ; M200 ; Wait until movement has been completed.
M55 ; Start synchronization between the X2 and 

X1 axes and parking of the X2 axis.

T0212 ; Set an offset for turret 1.
S1000 M4 ;

G0 X30. Z55.; Machining through movement along the X1
axis and Z2 axis

G1 F0.2 W–15. ;

M56 ; Cancel synchronization and parking.
M201 ; M201 ; Wait until synchronization has been 

released.
; ; Dummy block (specifying no move 

command)

: : Perform machining separately for each tool
post.

Where, the following is assumed:

M55 is the M code that is used to start the control of turret 1 using a
program for tool post 2.  M56 is the M code that is used to cancel the
control of turret 1 using the program for tool post 2.

(a.5) Note

NOTE
During synchronization control for the X axes, no move
command can be issued from tool post 1 to the X1 axis.
However, movement along the Z1 axis is specified from tool
post 1.



B–61393E–2/021. AXIS CONTROL

64

(b)When composite control is applied

(b.2) Parameter setting

#7
0383

#6 #5
0

#4
0

#3
0

#2
0

#1
0

#0
0

#7 #6 #5
0

#4
0

#3
0

#2
0

#1
0

#0
1

0384 0 0 0 0 0 0 0 0 0 0 0 1

0385 0 0 0 0 0 1 0 0 0 0 0 0

Tool post 1 Tool post 2

00326 1

00327 0

00328 0

00329 0

00860 –150000

00861 0

00862 0

00863 0

00864 0

� To perform composite control to exchange the X1 and X2 axes, set 1
in parameter 0326 for tool post 2.

� The direction of the coordinates on the X1 axis is opposite to that of
the coordinates on the X2 axis, so set 1 in MCD1 for tool post 2.

� To automatically set the position of turret 1 in the workpiece
coordinate system for tool post 2 at the start of composite control, set
1 in MPM1 for tool post 2.

� To automatically set the position of turret 1 in the workpiece
coordinate system for tool post 1 at the end of composite control, set
1 in MPM1 for tool post 1.

� When the X coordinate of the reference position for turret 1 is –150.0
mm in the workpiece coordinate system for tool post 2, as shown in
the figure below, set –150000 in MPRM1 for tool post 2 to perform
automatic coordinate system setting.

Z2

X2

Reference position for
turret 1 150.0mm



B–61393E–2/02 1. AXIS CONTROL

65

(b.3) Signal operation

– To start composite control for the X2 and X1 axes, set the MIX1 signal
to 1.

– To cancel composite control, set the MIX1 signal to 0.

– When an emergency stop, NC reset, or alarm occurs, also set MIX1 to
0.

– Leave all signals other than MIX1 set to 0.

(b.4) Sample program

Tool post 1 Tool post 2
: : Perform machining separately on each tool 

post.

Z0 ; Z20. ; Move each workpiece to a predetermined 
position.

X120. ; Movement along the X2 axis to an appropriate
position to prevent interference

M200 ; M200 ; Wait until movement has been completed.
M55 ; Start composite control for the X2 and X1 

axes.  (The position of turret 1 is set in the 
workpiece coordinate system for tool post 2.)

; Dummy block 
(specifying no move command)

M0212 ; Set an offset for turret 1.
S1000 M4 ;

G0 U10. W–20.; Machining through movement along X1 axis
and Z2 axis

G1 F0.2 W–15. ;

M56 ; Cancel composite control.  (The position of 
turret 1 is set in the workpiece coordinate 
system for tool post 1.)

M201 ; M201 ; Wait until composite control is released.
; ; Dummy block 

(specifying no move command)

: : Perform machining separately on each tool 
post.

Where, the following is assumed:

M55 is the M code that is used to start the control of turret 1 using a
program for tool post 2.  M56 is the M code that is used to cancel control
of turret 1 using the program for tool post 2.



B–61393E–2/021. AXIS CONTROL

66

(b.5) Note

NOTE

1 The automatic setting of a coordinate system is not always
needed at the start and end of composite control.  When
automatic setting is not performed, specify the setting of an
appropriate coordinate system in a program.

2 During X–axis synchronization control, move commands for
the X axes can be issued to tool post 1 to perform movement
along the X2 axis.

3 In the parameter setting explained previously, turret 1 is
positioned on the negative side of the X coordinate in the
workpiece coordinate system for tool post 2.  Therefore, to
move turret 1 toward the workpiece center, for example,
specify U+10.  To move the turret away from the center,
specify U–10.  Note that the specified sign is opposite to that
for normal operation.  If this specification method proves to
be inconvenient, set the parameters as follows:

MCD1 = 0
Parameter 0860 = 150000

Then, turret 1 is set as if it were on the positive side of the
X coordinate.

X2

Z2

Actual position of
turret 1

Virtual position of
turret 1

MCD = 1
Parameter 0860 = –150000

MCD = 0
Parameter 0860 = 150000



B–61393E–2/02 1. AXIS CONTROL

67

(1) Machine configuration

(i) When separate control is applied

Z2

X2

S1

S2

Turret 2

Turret 1

Workpiece 2

Z1 X1

Workpiece 1

Workpiece 2 and turret 2
are controlled using a
program for tool post 2.

Workpiece 1 and turret 1
are controlled using a
program for tool post 1.

(ii)When X1–Z2 axes interpolation is performed

Z2

X1

S1

S2

Turret 2

Turret 1

Workpiece 2

Z1

X2

Workpiece 1

Workpiece 2 and turret
1 are controlled with a
program for tool post 2.

Workpiece 1 and turret
2 are controlled with a
program for tool post 1.

Example of performing
separate control and
X1–Z2, X2–Z1 composite
control



B–61393E–2/021. AXIS CONTROL

68

(2) Parameter setting

#7
0383

#6 #5
0

#4
0

#3
0

#2
0

#1
0

#0
1

#7 #6 #5
0

#4
0

#3
0

#2
0

#1
0

#0
1

0384 0 0 0 0 0 1 0 0 0 0 0 1

0385 0 0 0 0 0 1 0 0 0 0 0 1

Tool post 1 Tool post 2

00326 1

00327 0

00328 0

00329 0

2000000860 180000

00861 0

00862 0

00863 0

00864 0

� To perform composite control to exchange the X1 axis and X2 axis, set
1 in parameter 0326 for tool post 2.

� The direction of the coordinates on the X1 axis is opposite to that of
the coordinates on the X2 axis, so set 1 in MCD1 for tool post 2.

� In the workpiece coordinate system for each tool post, to automatically
set the position of the turret of the other tool post at the start of
composite control, set 1 in MPM1 for tool posts 1 and 2.

� In the workpiece coordinate system for each tool post, to automatically
set the position of the turret of the tool post at the end of composite
control, set 1 in MPS1 for tool posts 1 and 2.

� In the relationship between the workpiece coordinate systems for the
tool posts and the reference positions shown below, to perform
automatic coordinate system setting, set 200000 in parameter 0860 for
tool post 1, and set 180000 in parameter 0860 for tool post 2.

Z2

X2

Reference position
for turret 1

180.0mm

Reference position
for turret 2

200.0mm

120.0mm

Z1

X1



B–61393E–2/02 1. AXIS CONTROL

69

(3) Signal operation

� To start composite control for the X2 axis and X1 axis, set the MIX1
signal to 1.

� To cancel composite control, set the MIX1 signal to 0.

� When an emergency stop, NC reset, or an alarm occurs, set MIX1 to
0.

� Leave all signals other than MIX1 set to 0.

(4) Sample program

Tool post 1 Tool post 2
: : Perform machining separately on 

each tool post.

M350 ; M350; Wait for the start of composite 
control.

M55 ; Start composite control for the X1 and
X2 axes.

M351 ; M351 ; Completion of the start of composite
control

; ; Dummy block (specifying no move 
command) Select the tool to be used
for composite control, and set an 
offset.

T0313 T0212 ; Select the tool to be used for 
composite control, and set an offset.

G50 W120. ; G50 W120. ; Shift the Z–axis workpiece 
coordinate system.

S1000 M4 ; S1500 W120. ;
G0 X20. Z15 G0 X15. Z30. ; Machining under composite control
G1 F0.5 W–8. ; G1 F0.1 W–5. ;

M360 ; M360 ; Wait for the end of composite control.
M56 ; End of composite control

M361 ; M361 ; Completion of the end of composite 
control

; ; Dummy block 
(specifying no move command)

G50 W–120. ; G50 W–120. ; Shift the Z–axis workpiece 
coordinate system.

: : Perform machining separately on 
each tool post.

Where, the following is assumed:

M55 is the M code that is used to start composite control.  M56 is the M
code that is used to cancel composite control.



B–61393E–2/021. AXIS CONTROL

70

(5) Note

NOTE
Automatic coordinate system setting is not always needed
at the start and end of composite control.  When automatic
setting is not performed, specify the setting of an
appropriate coordinate system in a program.

� The above description covered single synchronization control or
composite control operation.  In actual operation, more than one
synchronization control and composite control operation can be
selected and executed simultaneously.  First, set all the required
parameters.  Then, select the desired synchronization or composite
control operations by using signals.  At this time, be careful to ensure
that no axis is subject to more than one synchronization or composite
control operation at any one time.

� For each synchronization or composite control operation, only one
axis pair can be set.  When multiple axis combinations are required,
use the programmable parameter input function (G10) to change the
parameter setting in a program.  Before a parameter setting can be
changed, synchronization control and composite control must be
canceled.

Example:Changing the parameter settings so that the Z2 axis is 
synchronized with the Y1 axis
(The following program is executed for tool post 2 to set 4 in
parameter 0321 for tool post 2:)

:
G10 L50 ; Start parameter setting.
N0321 P4 ; Set 4 in parameter 0321.
G11 ; End parameter setting.
:

Blocks G10 to G11 must be executed when neither synchronization
control nor composite control is being performed for the Z2 axis and
Y1 axis.

Others



B–61393E–2/02 1. AXIS CONTROL

71

[Classification] Input signal

[Function] These signals start synchronization control using the corresponding axis,
the first to the seventh axis, of tool post 1 as the slave axis.

[Output condition] Synchronization control is performed so that the axis specified with
signal SYN1M to SYN7M is used as the slave axis for the master axis set
in parameter 320 to 323.

[Classification] Input signal

[Function] These signals start synchronization control using the corresponding axis,
the first to the fourth axis, of tool post 2 as the slave axis.

[Output condition] Synchronization control is performed so that the axis specified with
signal SYN1S to SYN4S is used as the slave axis for the master axis set
in parameter 320 to 323.
Even when signal SYN1M to SYN7M or SYN1S to SYN4S is turned on,
it is ignored unless an axis number is set in corresponding parameter
SAX1 to SAX7.

[Classification] Input signal

[Function] Composite control is performed to switch move commands between each
of the first to fourth axes of tool post 2 and the corresponding axis of tool
post 1.

[Output condition] Move commands are switched between the axis specified with parameters
326 to 329 and the axis specified with  signal MIX1 to MIX4.
Even when signal MIX1 to MIX4 is turned on, it is ignored unless an axis
number is set in corresponding parameter 326 to 329.

Signal

Synchronization control
start signals (tool post 1)
SYN1M to SYN7M
<G237#0 to G237#4>

Synchronization control
start signals (tool post 2)
SYN1S to SYN4S
<G1437#0 to G1437#3>

Composite control start
signals
MIX1 to MIX4 <G1437#4
to G1437#7>



B–61393E–2/021. AXIS CONTROL

72

[Classification] Input signal

[Function] These signals place the corresponding axis of tool post 1 in the parking
state.

[Output condition] Movement along an axis of tool post 1 under synchronization control is
stopped, and the axis is parked.

[Classification] Input signal

[Function] These signals place the corresponding axis of tool post 2 in the parking
state.

[Output condition] Movement along an axis of tool post 2 under synchronization control is
stopped, and the axis is parked.
The parking signals are valid only while synchronization control is
applied.  If a parking signal is turned on while synchronization control is
not applied, it is ignored.

[Classification] Output signal

[Function] These signals post notification that each of the first to seventh axes of tool
post 1 is under synchronization or composite control.

[Classification] Output signal

[Function] These signals post notification that each of the first to fourth axes of tool
post 2 is under synchronization or composite control.
When starting or ending synchronization or composite control, check that
the corresponding signal SYN�O�has been changed correctly.

Synchronization control
parking signals 
(tool post 1)
PK1M to PK7M 
<G238#0 to G238#4>

Synchronization control
parking signals 
(tool post 2)
PK1S to PK4S 
<G1438#0 to G1438#3>

Axis recomposition
signals (tool post 1)
SYN1OM to SYN7OM
<F189#0 to F189#4>

Axis recomposition
signals (tool post 2)
SYN1OS to SYN4OS
<G1389#0 to G1389#3>



B–61393E–2/02 1. AXIS CONTROL

73

#7
G237

#6 #5 #4
SYN7M

#3
SYN4M

#2
SYN3M

#1
SYN2M

#0
SYN1M

G238 PK7M PK4M PK3M PK2M PK1M

MIX4G1437 MIX3 MIX2 MIX1 SYN4S SYN3S SYN2S SYN1S

G1438 PK4S PK3S PK2S PK1S

F189 SYN7OM SYN4OM SYN3OM SYN2OM SYN1OM

F1389 SYN4OS SYN3OS SYN2OS SYN1OS

The following parameters are provided for each of tool posts 1 and 2.
Parameters are provided for each of the first to sixth axes.  For tool post
2, the first to fourth axes can be used.  Parameters related to the following
must be set:
Axis used as the slave in synchronization control
Axis to be switched in composite control

#7
NRST0380

#6
SPERR

#5
SMR6

#4
SMR5

#3
SMR4

#2
SMR3

#1
SMR2

#0
SMR1

[Data type] Bit

SMR1 to SMR6 1 : Uses the mirror image function for synchronization control.
(Movement along the master axis and movement along the slave axis
are made in opposing directions.)

0 : Does not use the mirror image function for synchronization control.
(Movement along the master axis and movement along the slave axis
are made in the same direction.)

SPERR 1 : The synchronization error is the sum of the difference in the positional
deviation and the difference in acceleration/deceleration between the
master axis and slave axis.

0 : The synchronization error is the difference in the positional deviation
between the master axis and slave axis.  (The same value is set for both
of tool posts 1 and 2.)

When the acceleration/deceleration time constant for the master axis
differs from that for the slave axis, this bit must be set to 1.

NRST 1 : A reset operation does not cancel the axis recomposition function.
0 : A reset operation cancels the axis recomposition function.

(The same value is set for both of tool posts 1 and 2.)

Signal address

Parameter

Parameters related to
synchronization control



B–61393E–2/021. AXIS CONTROL

74

#7
0381

#6 #5 #4
SER6

#3
SER4

#2
SER3

#1
SER2

#0
SER1

[Data type] Bit

SER1 to SER6 1 : When movement is made along both the master and slave axes in
synchronization mode, the positional deviations for the
corresponding axes are compared.  If the difference is equal to or
greater than the set value, an alarm is issued.  (Synchronization error
detection)
If one of the axes is parked or placed in the machine lock state, this
check is not performed.

0 : The positional deviation check explained above is not made in
synchronization mode.

When the master and slave axes are on the same tool post, synchronization
error detection cannot be performed.

#7
0382

#6 #5 #4
PKU6

#3
PKU4

#2
PKU3

#1
PKU2

#0
PKU1

[Data type] Bit

PKU1 to PKU6 1 : When parking is performed, the absolute/relative coordinates are
updated.  The machine coordinates are not updated.

0 : When parking is performed, none of the absolute, relative, machine
coordinates are updated.

0320 Master axis with which the X axis is synchronized

0321 Master axis with which the Z axis is synchronized

0322 Master axis with which the third axis is synchronized

0323 Master axis with which the fourth axis is synchronized

[Data type] Byte

[Valid data range] 0 to 4, 200 to 204

Set the master axis with which a corresponding axis is synchronized when
the axis recomposition function is used.
<<When synchronization control is applied between the tool posts>>
Set the axis number of the corresponding synchronization master axis in
the parameter of the synchronization slave axis.  An axis number not
greater than the maximum number of controlled axes cannot be set.

Example:When synchronizing the Z2 axis with the Z1 axis

Tool post 1 Tool post 2
No.320 0 0
No.321 0 0
No.322 0 0
No.323 0 0

<<When synchronization control is applied with one tool post>>
In the parameter of the synchronization slave axis, set a value obtained
from (the axis number of the corresponding master axis + 200).  A number
not greater than the maximum number of controlled axes cannot be set.



B–61393E–2/02 1. AXIS CONTROL

75

Example:When synchronizing the Y1 axis with the Z1 axis

Tool post 1 Tool post 2
No.320 0 0
No.321 0 0
No.322 0 0
No.323 202 0

NOTE
1 When 0 is set in the parameter of an axis, that axis is not

used as the slave axis synchronized with another axis.
2 When the same number is set in more than one parameter,

multiple slave axes can be synchronized with a single
master axis.

0686 Limit on the difference in the positional deviation during synchronization control
where the X axis is used as the slave axis

0687 Limit on the difference in the positional deviation during synchronization control
where the Z axis is used as the slave axis

0688 Limit on the difference in the positional deviation during synchronization control
where the third axis is used as the slave axis

0689 Limit on the difference in the positional deviation during synchronization control
where the fourth axis is used as the slave axis

0690 Limit on the difference in the positional deviation during synchronization control
where the seventh axis is used as the slave axis

[Data type] Word

[Unit of data] Detection unit

[Valid data range] 0 to 32767

When synchronization control is applied using each axis as a slave axis,
the limit on the difference in positional deviation from the corresponding
master axis is set in these parameters.

NOTE
1 These parameters are valid when bit 0 (ERRX) to bit 5

(ERR8) of parameter 0381 are set to 1.
2 These parameters are valid with the 0–TTC.



B–61393E–2/021. AXIS CONTROL

76

0692 Difference in the positional deviation during synchronization control where the X
axis is used as the slave axis

0693 Difference in the positional deviation during synchronization control where the Z
axis is used as the slave axis

0694 Difference in the positional deviation during synchronization control where the third
axis is used as the slave axis

0695 Difference in the positional deviation during synchronization control where the
fourth axis is used as the slave axis

0696 Difference in the positional deviation during synchronization control where the
seventh axis is used as the slave axis

[Data type] Word

[Unit of data] Detection unit

[Valid data range] –32768 to 32767

When synchronization control is applied using each axis as a slave axis,
the difference in the positional deviation from the corresponding master
axis is set in these parameters.

(Difference in the positional deviation) =
(Amount of positional deviation for the master axis) �
(Amount of positional deviation for the slave axis)

+:  Mirror image ON
–:  Mirror image OFF

#7
0383

#6 #5 #4
MPM6

#3
MPM4

#2
MPM3

#1
MPM2

#0
MPM1

[Data type] Bit

MPM1 to MPM6 1 : Automatically sets the workpiece coordinate system as the coordinate
system for composite control at the start of composite control.

0 : Does not automatically set the workpiece coordinate system at the
start of composite control.

When the workpiece coordinate system is automatically set at the start of
composite control, the workpiece coordinate system is calculated from
the current machine coordinate and the composite control workpiece
coordinate of the reference position on each axis, which is set in
parameters 0860 to 0865.

Parameters related to
composite control



B–61393E–2/02 1. AXIS CONTROL

77

#7
0384

#6 #5 #4
MPS6

#3
MPS4

#2
MPS3

#1
MPS2

#0
MPS1

[Data type] Bit

MPS1 to MPS6 1 : Automatically sets the workpiece coordinate system as the coordinate
system for separate control at the end of composite control.

0 : Does not automatically set the workpiece coordinate system at the end
of composite control.

When the workpiece coordinate system is automatically set at the end of
composite control, the workpiece coordinate system is calculated from
the current machine coordinate and the workpiece coordinate of the
reference position on each axis, which is set in parameters 0708 to 0711,
0825, and 0826.



B–61393E–2/021. AXIS CONTROL

78

#7
0385

#6 #5 #4
MCD7

#3
MCD4

#2
MCD3

#1
MCD2

#0
 MCD1

[Data type] Bit

MCD1 to MCD7 1 : The direction of the coordinate system for the corresponding axis is
reversed, so mirror image is used for composite control.  (Movement
along an axis of tool post 1 and movement along an axis of tool post 2
are made in opposite directions to one another.)

0 : The direction of the coordinate system for the corresponding axis is
the same, so mirror image is not used for composite control.
(Movement along an axis of tool post 1 and movement along an axis
of tool post 2 are made in the same direction.)

The relationship between the coordinate systems of the axes to be
switched in composite control is set.  This setting determines the direction
of movement along the corresponding axis.  This setting is also used when
automatic coordinate system setting is performed when composite
control switching is applied.

Example: When the X axes and Z axes of tool posts 1 and 2 have the 
relationships shown, MCD1 and MCD2 are set as follows 
(when switching between the X axes and between the Z axes
is performed):

X1

Z1

MCD2
0

X2

Z2

MCD1
0

X1

Z1

MCD2
0

X2

Z2

MCD1
1

X1

Z1

MCD2
1

X2

Z2

MCD1
0

X1

Z1

MCD2
1

X2

Z2

MCD1
1



B–61393E–2/02 1. AXIS CONTROL

79

0326 Axis of tool post 1 with which composite control is performed for the X axis of tool post 2

0327 Axis of tool post 1 with which composite control is performed for the Z axis of tool post 2

0328 Axis of tool post 1 with which composite control is performed for the third axis of tool post 2

0329 Axis of tool post 1 with which composite control is performed for the fourth axis of tool post 2

[Valid data range] 0 to 4

When the axis recomposition function is applied with the 0–TTC, these
parameters set the axis of tool post 1 with which composite control is to
be performed for each axis of tool post 2.

Example 1: When composite control is applied to switch between the X1
axis and X2 axis

Tool post 1 Tool post 2
No.326 0 1
No.327 0 0
No.328 0 0
No.329 0 0

Example 2: When composite control is applied to switch between the Y1
axis and X2 axis

Tool post 1 Tool post 2
No.326 0 4
No.327 0 0
No.328 0 0
No.329 0 0

NOTE
1 These parameters are set only for tool post 2.
2 When 0 is set in the parameter for an axis, that axis is not

subject to control switching in composite control.
3 The same number can be set in two or more parameters.

However, the axes corresponding to these parameters are
not placed under composite control simultaneously.



B–61393E–2/021. AXIS CONTROL

80

0860 Coordinate of the reference position for the axis corresponding to the X axis in the
coordinate system in composite control

0861 Coordinate of the reference position for the axis corresponding to the Z axis in the
coordinate system in composite control

0862 Coordinate of the reference position for the axis corresponding to the third axis in
the coordinate system in composite control

0863 Coordinate of the reference position for the axis corresponding to the fourth axis
in the coordinate system in composite control

0864 Coordinate of the reference position for the axis corresponding to the seventh axis
in the coordinate system in composite control

[Data type] Two–word

[Unit of data] Least input increment

[Valid data range] 0 to �99999999

The coordinate of the reference position for the corresponding axis in the
coordinate system in composite control can be set for each axis
sequentially.

NOTE
These parameters are valid when bits 0 (MPMX) to 5
(MPM7) of parameter 0383 are all set to 1.

X1

Z1 Z2

Workpiece coordi-
nate system zero
point for tool post 2

X2

Reference position
for tool post 1

Reference posi-
tion for tool post 2

X1m
�Z2m

Z1m

�Z1m

�X2m

Z2m

�X1m

X2m

Workpiece 
coordinate system
 zero point 
for tool post 1

 In the workpiece coordinate system for tool post 1, the reference position
for tool post 2 is at (�X1m, �Z1m).  In the workpiece coordinate system
for tool post 2, the reference position for tool post 1 is at (�X2m, �Z2m).



B–61393E–2/02 1. AXIS CONTROL

81

In this case, set  �X1m in parameter 860 for tool post 1, and set �X2m in
parameter 860 for tool post 2.

If parameter MPMX is set to 1 at the start of composite control, a
workpiece coordinate system is set so that the following expressions are
satisfied:

X1 = (parameter 860 for tool post 1) � (X2 machine coordinate)

When MCD1 for tool post 1 = 0:  +
When MCD1 for tool post 1 = 1:  –

X2 = (parameter 860 for tool post 2) � (X1 machine coordinate)

When MCD1 for tool post 2 = 0:  +
When MCD1 for tool post 2 = 1:  –

If parameter MPS1 is set to 1 at the end of composite control, a workpiece
coordinate system is set so that the following expressions are satisfied:

X1 = (PRSX of parameter 708 for tool post 1) + 
(X1 machine coordinate)

X2 = (PRSX of parameter 708 for tool post 2) + 
(X2 machine coordinate)

PS Alarm

No. Contents

225 This alarm is generated in the following circumstances. (Searched
for during synchronous and mixed control command.

1 When there is a mistake in axis number patameter setting.

2 When there is a mistake in control commanded.

Modify the program or the patameter.

226 A travel command has been sent to the axis being synchronized in
synchronous mode. Modify the program or the patameter.

229 This alarm is generated in the following circumstances.

1 When the synchro/mixed state could not be kept due to system
over load.

2 The above condition occured in CMC devices (hardware) and
synchro–state could not be kept.

(This alarm is not generated in normal use conditions.)

Servo Alarm

No. Contents

407 The difference in synchronous axis position deviation exceeded
the set value.

If any of the above alarms is issued, the axis recomposition function is
released for all axes.

Alarm and message



B–61393E–2/021. AXIS CONTROL

82

CAUTION
1 Before synchronization control or composite control is

started or terminated, the axes to be controlled must be
stopped.

2 The corresponding axes under synchronization control and
composite control must have the same least input
increment, detection unit, and diameter/radius
specification.  If these settings do not match, the amounts
of travel along the axes will not be equal.

3 While synchronization control or composite control is being
performed, do not change the related parameter settings
and parking signals.

NOTE
1 Multiple axes can be placed in the synchronization state or

composite control state simultaneously.  However, an axis
cannot be synchronized with more than one axis at the
same time.  An axis currently used by switching in
composite control cannot be synchronized with another
axis.  In addition, duplicate switching is not allowed.

2 When an emergency stop, servo–off state, or servo alarm
has been released, perform reference position return and
coordinate system setting before starting synchronization
control or composite control.

3 When synchronization control or composite control is
started, reference position return for the target axes must
have been completed after power–on, or the reference
positions for the axes must have been established by using
an absolute pulse coder.

4 Acceleration/deceleration control, pitch error
compensation, backlash compensation, and stored stroke
limit check are performed independently, regardless of the
axis recomposition function.

5 The axis recomposition function cannot be selected at the
same time as the simple synchronous control or balance cut
function.

Note

Cautions and notes
relating to both
synchronization control
and composite control



B–61393E–2/02 1. AXIS CONTROL

83

CAUTION
During synchronization control, never issue move
commands for the synchronization axis on the
synchronization slave side.

NOTE
1 Whenever possible, set the same acceleration/deceleration

time constant and servo–related parameters for the
corresponding axes placed under synchronization control.

2 When operation which changes only the workpiece
coordinate system (while the machine remains stationary),
such as a workpiece coordinate system setting/shift and
geometry offset command, is performed on the
synchronization master side, the workpiece coordinate
system on the synchronization slave side is not affected.

3 When a wear offset command or tool–nose radius
compensation is executed on the synchronization master
side, the tool path on the synchronization slave side is
shifted by the offset, but the offset amount is not set.  (No
offset vector is created.)

Cautions and notes
related only to
synchronization control



B–61393E–2/021. AXIS CONTROL

84

Function During synchronization control During composite 
control

Acceleration/de-
celeration control

Acceleration/deceleration of the same
type is performed for the synchroniza-
tion axes.  A separate time constant is
used for each axis.

The acceleration/decelera-
tion type of the specified path
is used.  A separate time
constant is used for each
axis.

Linear accelera-
tion/deceleration
after interpolation

Disabled for all axes during synchro-
nization control.

Disabled for all axes during
composite control.

Feedrate clamp Clamped on the synchronization master
side.

Clamped on the specified
path side.

Reference posi-
tion return

Enabled unless the synchronization
master axis is parked.  However, the
synchronization slave axis is not placed
in the reference position return comple-
tion state.

Enabled only for those axes
which are not affected by
composite control.

Reference posi-
tion return check

Enabled only for the synchronization
master axis.

Enabled only for those axes
which are not affected by
composite control.

PMC axis control Enabled for all axes except the synchro-
nization slave axis.

Enabled.

Polar coordinate
interpolation
Circular inter-
polation

Enabled. Switching between separate
control and composite control
must be performed in cancel
mode.

Handle interrupt Interrupt can be performed separately
regardless of synchronization.

Enabled only for those axes
that are not affected by com-
posite control.

X–axis mirror
image

Each signal is enabled. Signals for the specified path
are enabled.

Machine lock Each signal is enabled. Signals for the specified path
are enabled.

Interlock For the synchronization slave axis,
those signals on the synchronization
master side are enabled.

Signals for the specified path
are enabled.

Override For the synchronization slave axis,
those signals on the synchronization
master side are enabled.

Signals for the specified path
are enabled.

External decel-
eration

For the synchronization slave axis,
those signals on the synchronization
master side are enabled.

Signals for the specified path
are enabled.

Skip function Disabled for the synchronization slave
axis.

Enabled only for those axes
which are not affected by
composite control.

Automatic tool
compensation

Disabled for the synchronization slave
axis.

Enabled only for those axes
which are not affected by
composite control.

Tool center Disabled for the synchronization slave
axis.

Enabled only for those axes
which are not affected by
composite control.

Follow–up Disabled during synchronization. Disabled during composite
control.

Program restart Disabled for programs containing the
specification of synchronization control.

Disabled for programs con-
taining the specification of
composite control.

Cs axis Synchronization control is disabled. Composite control is dis-
abled.

Limitations imposed
during synchronization
control and composite
control



B–61393E–2/02 1. AXIS CONTROL

85

During synchronization control or composite control, system variable
position information in custom macros, or the current coordinates from
the PMC window, are read as follows:

Position informa-
tion type

During synchronization
control

During composite 
control

Absolute 
coordinates

Can be read. Can be read(*1).

Machine 
coordinates

Can be read. Can be read.

End point of each
block

Can be read only for the
master.

Can be read(*1).

Skip signal position Can be read only for the
master.

Cannot be read

*1 Coordinates in the coordinate system used for composite control are
read.  The relationship with the machine coordinate system differs
from that used for separate control.

Synchronization control and composite control are canceled when the
synchronization signal/composite control signal is turned off.  In
addition, they are canceled when the following are encountered:

(1) Emergency stop

(2) Reset

(3) Servo alarm

(4) Servo–off

(5) Overtravel

(6) Alarms related to synchronization control or composite control

(7) P/S000 alarm

If any of the above occurs, even on one tool post, the
synchronization/composite control state is canceled for all axes.  If any
of the above occurs on one tool post during the execution of the axis
recomposition function, the other tool post is automatically placed in the
feed hold state (when automatic operation is being performed) or the
interlock state (when manual operation is being performed).

Reading coordinates
during synchronization
control and composite
control

Canceling
synchronization control
and composite control



B–61393E–2/021. AXIS CONTROL

86

In 0–GCC, when the angular axis makes an angle other than 90° with the
X axis, the Z axis control function controls the distance traveled along
each axis according to the inclination angle.  A program, when created,
assumes that the X axis and Z axis intersect at right angles. However, the
actual distance traveled is controlled according to an inclination angle.

Xa

+X  Actually used (moved) coordinate system

θ :  Inclination angle
Xa, Za, Fa:  Actual travel distance and speed
Xp, Zp, Fp:  Programmed travel distance and speed

+Z
Za

Zp

θ

Xp

+X  Program coordinate system

(Xp, Za)  Program command

For the 0–GSC, this control is applied between the Y– and Z–axes. In that
case, replace ”X” in the above description with ”Y.”

The travel distance for each axis is controlled according to the following
expressions.
For the 0–GCC
The X–axis travel distance specified based on the diameter is obtained by:

Xa = Xp/2cosθ
For the Z–axis travel distance is obtained using the following expression,
which is corrected by the inclination of the X–axis:

Za = Zp –1/2 � Xp � tanθ
The feedrate, which is always specified based on the radius, is obtained
as follows:
X–axis rate component

Fa = Fp/cosθ
For the 0–GSC
The Y–axis travel distance is obtained by:

Ya = Yp/cosθ
For the Z–axis travel distance is obtained using the following expression,
which is corrected by the inclination of the Y–axis:

Za = Zp – Yp � tanθ
The feedrate is obtained as follows:
Y–axis rate component

Fa = Fp/cosθ

1.8
ANGULAR AXIS
CONTROL (0–GCC,
0–GSC)

General



B–61393E–2/02 1. AXIS CONTROL

87

The NOZAGC signal can be used to prevent Z–axis movement from
being activated due to compensation.  No update occurs, so the current
position can be maintained.  (The machine behaves as if it were in a
machine lock state.)

Parameter AGLST enables or disables the inclined axis control function.
If the function is enabled, the distance traveled along each axis is
controlled according to an inclination angle (set at parameter).
Parameter ZRTM1 enables X axis manual reference point return only with
a distance along the X axis.

(1)Absolute/Relative position display
The position is displayed using the programmed rectangular
coordinate system.

(2)Machine position display
A machine position indication is provided in the machine coordinate
system where an actual movement is taking place according to an
inclination angle. However, when inch/metric conversion is
performed, a position is indicated which incorporates inch/metric
conversion applied to the results of inclination angle operation.

[Function] Prevents compensation–based Z–axis movement during inclined–axis
control.

#7
G133

#6
NOZAGC

#5 #4 #3 #2 #1 #0
(0–GCC)

G237 NOZAGC (G–GSC)

Method of use

Machine position display

Signal

Angular axis
control–related Z–axis
compensation
movement signal
NOZAGC<G133#6>
(0–GCC)
NOZAGC<G237#5>
(0–GSC)

Signal address



B–61393E–2/021. AXIS CONTROL

88

#7
0036

#6 #5 #4 #3 #2
ZRTM1

#1 #0
AGLST (0–GCC)

0077 AGLST ZRTM1 (G–GSC)

[Data type] Bit

ZRTM1 0 : The machine tool is moved along the Z axis during manual reference
position return along the X axis (Y axis) under angular axis control.

1 : The machine tool is not moved along the Z axis during manual
reference position return along the X axis (Y axis) under angular axis
control.

AGLST 0 : Does not perform angular axis control.
1 : Performs inclined axis control.

0755 Inclination angle for X axis control (0–GCC)

0837 Inclination angle for Y axis control (0–GSC)

[Valid data range] 20000 to 60000, –20000 to –60000

[Unit of data] 0.001 degree

WARNING
After inclined axis control parameter setting, be sure to
perform manual reference point return operation.

NOTE
1 If Z–axis movement is expected during a manual reference

position return on the X–axis, perform an X–axis reference
position return first.

2 If an inclination angle close to 0° or ±90° is set, an error can
occur. A range from ±20° to ±60° should be used.

3 Before a Z axis reference point return check (G27) can be
made, X axis reference point return operation must be
completed.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.23 ANGULAR AXIS CONTROL
(0–GSC, 0–GSD)

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.23 ANGULAR AXIS CONTROL
(0–GCC/00–GCC/0–GCD)

Parameter

Warning

Note

Reference item



B–61393E–2/02 1. AXIS CONTROL

89

The entire stroke of each axis of the machine is divided into up to 256
areas.  The current area of the machine position on each axis is output to
the PMC as an eight–bit position signal.

[Classification] Output signal

[Function] (1) The entire stroke of each axis of the machine is divided by the grid 
interval specified in parameter 0713 or 0714.  When each region 
divided by the grid is referred to as an area, the width of the area (grid
interval) formed by this function, which can specify up to 256 areas,
 must satisfy the following relationship:

(Whole stroke)
(Area width)

�256

(2)The individual areas are assigned numbers as follows:  The number of
the area in which reference position return is completed is specified in
parameter 0113 or 0114; The number increases by one for each
successive area of the grid in the positive direction; The number
decreases by one for each successive area of the grid in the negative
direction.

Area width (grid interval)

Reference

Negative direction

97 98 99 100 101 102

Positive direction

In the example shown above, the area number for the reference
position is 100.  Area 255 (eight output bits set to one) comes next to
area 0 (eight output bits set to zero) in the negative direction.

(3)The CNC outputs the machine position to the PMC by the area number
(8–bit binary code signal) at intervals of 16 ms.  The signal is output
even during movement.  The PMC monitors the signal constantly
(LSB:  PX0, PZ0; MSB: PX7, PZ7) to keep track of the machine
position even during axial movement.

1.9
POSITION SIGNAL
OUTPUT (T SERIES)

General

Signal

Position signal output
signal PX0 to PX7, PZ0
to PZ7 (T series)
<F165, F167>



B–61393E–2/021. AXIS CONTROL

90

(4)Since the CNC outputs the signal at 16–ms intervals, the area width
(grid interval) must be specified as shown below so that no area is
missed even during rapid traverse:

�����

��
������(Grid interval)�

(When a 1–µm increment system is used)
R:  Rapid traverse rate (m/min)

For example, when the rapid traverse rate is 24 m/min, the grid interval
must be at least 6,400, calculated as shown below:

24�106

60  �0.016=6,400

This value is based on the output condition of the CNC.  If the signal
monitoring period of the PMC is long, the grid interval must be
increased accordingly.  This function can be used to turn a control
signal on or off at a particular position during movement of the
machine.

Example of parameter setting

(i) Grid width = 10,000

Grid number at the reference position = 0

255Position signal
output value

0 1 2

–10000 0 10000 20000 30000

Machine position

(ii) Grid width = 8,000

Grid number at the reference position = 100

97

Position signal output value

–24000 0–18000 8000 16000

Machine position

98 99 100 101 102

–16000 24000

(iii)Grid width = 10,000

Grid number at the reference position = 255

253Position signal
output value

254 255 0

–20000 –10000 0 10000 20000

Machine position



B–61393E–2/02 1. AXIS CONTROL

91

#7
PX7F165

#6
PX6

#5
PX5

#4
PX4

#3
PX3

#2
PX2

#1
PX1

#0
PX0

PZ7F167 PZ6 PZ5 PZ4 PZ3 PZ2 PZ1 PZ0

0113 X–axis grid number of position signal output

0114 Z–axis grid number of position signal output

[Data type] byte

[Valid data range] 0 to 255

[Operation] Specify the grid number of the axial reference position for the position
signal output function.

0713 X–axis grid width of position signal output

0714 Z–axis grid width of position signal output

[Data type] 2–word

Setting value ���� ���� ����

Millimeter machine �		� ����� ����� ������

Inch machine ��
��� ����� ������ �������

[Valid data range] 0 to 99999999

[Operation] Specify the grid width of each axis.

NOTE
When zero is specified, position signal output is not
performed.

Signal address

Parameter

[Unit of data]



B–61393E–2/021. AXIS CONTROL

92

This function controls the third axis connected to a servo motor as an NC
axis.

As the basic specifications of the Cf axis are the same as those for the first
and second axes, this section focuses on the differences.

Attribute: This function can be set for linear and rotation axes,
using parameter LIN3 (bit 2 of parameter No.0032).
Which axis of the basic coordinate system becomes
the Cf axis is specified using parameter No.0279.

Command address:Absolute command C (*)
Incremental command H

NOTE
(�) It is necessary to set parameter ADW (bit 0 of parameter

No.0030) to 1.  It is also necessary to set parameter No.
ADRC (bit 4 of parameter No.0029) to 1 if the chamfering
corner R and direct drawing dimension input functions are
used.

If this function is unavailable, bit 2 of G118 is GR1, bit 2 is GR2, and bit
7 is DRN.  If this function is available, bit 2 of G118 is changed to +3, bit
3 is to –3, and bit 7 is to H3.  So, when using GR1, GR2, or DRN, set
parameter ADDCF (bit 5 of parameter No.0031) to 1, so that these signals
are assigned to G123.

[Classification] Input signal

[Function] Informs the NC that the third axis is connected as the spindle.

[Operation] When the signal becomes 1, the relative coordinates are cleared to 0.  If
a reference position return has been completed, the
reference–position–return–completed signal (ZP3, bit 2 of F148) for the
third axis becomes 0.

#7
G123

#6 #5 #4 #3 #2 #1 #0
COFF (T series)

1.10
Cf AXIS CONTROL 
(T SERIES)

General

Specification

Signal

C–axis–off signal
COFF<G123#0>

Signal address



B–61393E–2/02 1. AXIS CONTROL

93

#7
0029

#6 #5 #4
ADRC

#3 #2 #1 #0
DSP3

DSP3 Specifies whether to display the current position of the third axis, as
follows:
1 : Display
0 : Do not display

ADRC Specifies the address of chamfering corner R as follows:
1 : I/K rather than C is used.  C/R for the address for direct drawing

dimension input is prefixed with a comma as follows:  ,C/,R
0 : C/R is used.  C/R is used also for direct drawing dimension input.

#7
0030

#6 #5 #4 #3 #2 #1 #0
ADW30

ADW30 Specifies the name of the third axis as follows:
1 : C
0 : B

#7
CNRST0031

#6
ESFC

#5
ADDCF

#4 #3 #2 #1 #0

ADDCF Specifies the PMC address for signals GR1, GR2, and DRN as follows:
1 : G123#2 GR1, G123#3 GR2, G123#7 DRN
0 : G118#2 GR1, G118#3 GR2, G118#7 DRN

ESFC Specifies whether to enable the feedback pulse from the position detector
during the turning mode in Cf axis control.
1 : Enable
0 : Disable

CNRST Specifies whether to clear the Cf axis relative coordinates at a reference
position return.
1 : Clear
0 : Do not clear

#7
ROT100032

#6 #5 #4 #3 #2
LIN3

#1 #0

LIN3 Specifies whether the third axis is a linear or rotation axis, as follows:
1 : Linear axis
0 : Rotation axis

ROT10 Specifies the measurement unit of parameters for the upper limit to the
cutting feedrate (parameter No.0527), rapid traverse F0 rate (parameter
No.0533), and the FL rate for a reference position return (parameter
No.0534) during inch output, as follows:
1 : 1 degrees/min
0 : 0.1 degrees/min

Parameter



2. PREPARATIONS FOR OPERATION B–61393E–2/02

94

2 PREPARATIONS FOR OPERATION



B–61393E–2/02 2. PREPARATIONS FOR OPERATION

95

If you press Emergency Stop button on the machine operator’s panel, the
machine movement stops in a moment.

EMERGENCY STOP

Red

Fig. 2.1 (a) EMERGENCY STOP

This button is locked when it is pressed.  Although it varies with the
machine tool builder, the button can usually be unlocked by twisting it.

[Classification] Input signal

[Function] Outputting an emergency stop signal stops the machine instantly.

[Operation] When the emergency stop signal *ESP turns to “0”, the emergency stop
is applied to the machine and the CNC is reset. This signal is controlled
by the B contacts of a pushbutton switch. The emergency stop signal turns
the servo ready signal (SA) to “0”.

Overtravel detection by this CNC is handled by the software limit
function, and a limit switch for normal overtravel detection is not needed.
To prevent the machine from moving beyond the software limit through
servo feedback error, always install a stroke end limit switch (shown in
Fig. 2.1 (b) below).

+X –X +Y –Y +Z –Z +4 –4

EMG

SK

Emergency stop limit switch

Relay power
supply Emergency stop temporary release

Emergency stop

Spark killer

Fig. 2.1 (b) Connection of Emergency Stop Limit Switch

2.1
EMERGENCY STOP

General

Signal

Emergency stop
*ESP<X021#4,G121#4>



B–61393E–2/022. PREPARATIONS FOR OPERATION

96

The distance from the position where the dynamic brake is applied to that
where the tool stops moving is given in the “AC Servo Motor
Descriptions.”

WARNING
Software limit setting point and operating point of limit switch
for emergency stop

The stop point by the software limit goes beyond the setting
point by as much as the following distance.

R: Rapid traverse rate (mm/min)

The actual stopping point may exceed the position set by a
parameter (Nos.0700 – 0703 and 0704 – 0707) by as much
as R/7500 (mm). Set the limit switch for emergency stop
including the allowance for the above value.

(mm)R
7,500

ÄÄÄÄ
ÄÄÄÄ
ÄÄÄÄ
ÄÄÄÄ

R

7,500

Software limit setting point

Stroke end direction

The machine stops in this
range.

Set the limit switch for emergency stop in
this range.

#7
X021

#6 #5 #4
*ESP

#3 #2 #1 #0

G121 *ESP
#7 #6 #5 #4 #3 #2 #1 #0

AC SERVO MOTOR series DESCRIPTIONS B–65002E

AC SERVO MOTOR  α series DESCRIPTIONS B–65142E

Signal address

Reference item



B–61393E–2/02 2. PREPARATIONS FOR OPERATION

97

When the CNC is turned on and becomes ready for operation, the CNC
ready signal is set to 1.

[Classification] Output signal

[Function] The CNC ready signal reports that the CNC is ready.

[Output condition] When the CNC is turned on and becomes ready for operation, the signal
is set to 1.  Normally, it takes several seconds to establish this state after
the power is turned on.  If a system alarm is issued, the signal is set to 0.
The signal remains set to 1, however, when an emergency stop or a similar
operation is performed.

[Classification] Output signal

[Function] Signal SA turns to “1” when the servo system is ready to operate.  For an
axis that is to be braked, release the brake when this signal is sent and
apply the brake when this signal is not sent.  
Time chart of this signal is as follows:

Power on

Ready signal (MA)

Power off

60 to 100 msec

Servo alarm Servo alarm

Overload

1 to 2 seconds About 1 second

Reset
Reset Emergency stop

Servo ready 
signal (SA)

Brake on

Fig.2.2  Time Chart for Servo Ready Signal

2.2
CNC READY SIGNAL

General

Signal

CNC Ready Signal
MA<F149#7>

Servo Ready Signal 
SA <F148#6>



B–61393E–2/022. PREPARATIONS FOR OPERATION

98

#7
F148

#6
SA

#5 #4 #3 #2 #1 #0

MAF149

Signal address



B–61393E–2/02 2. PREPARATIONS FOR OPERATION

99

When the tool tries to move beyond the stroke end set by the machine tool
limit switch, the tool decelerates and stops because of working the limit
switch and an OVER TRAVEL is displayed.

[Classification] Input signal

[Function] Indicates that the control axis has reached its stroke limit. There are
signals for every direction in every control axis. The +/– in the signal
name indicates the direction and the alphabet corresponds to the control
axis.

X X axis is at stroke limit.

Y Y axis is at stroke limit.

Z Z axis is at stroke limit.

:    :

+ Has moved to and reached a  + direction.

– Has moved to and reached a  – direction.

+  L  x

[Operation] When it is “0” , the control unit operates as given below.
� In automatic operation, if even one axis overtravel signal turns to “0”,

all axes are decelerated to stop, an alarm is given and operation is
halted.

� In manual operation, only the axis whose movement signal has turned
to “0” is decelerated to a stop, and the axis can be moved in the
opposite direction.

� Once the axis overtravel signal has turned to “0”, the axis direction is
registered.  Even if the signal returns to “1”, it is not possible to move
that axis in that direction until the alarm is cleared.

2.3
OVERTRAVEL
CHECK

2.3.1
Overtravel Signal

General

Signal

Overtravel signal
*+LX to *–LZ
<X020#0 to #5>(M)
*+LZ<X018#5>(T)



B–61393E–2/022. PREPARATIONS FOR OPERATION

100

The following shows the deceleration distance at overtravel.

(i) Rapid traverse

TRt2t1

VR

ÄÄÄ
ÄÄÄ
ÄÄÄ
ÄÄÄ

ÄÄÄÄ
ÄÄÄÄ
ÄÄÄÄ
ÄÄÄÄ

t

V
Servo system delay

Command pulse
deceleration

*+L� limit switch

L1=VR(t1+t2+ 
TR
2

 +TS) · 
1

60000
 [mm or inch]

L1:Deceleration distance

VR: Rapid traverse speed (mm/min or inch/min)

t1: Limit switch signal delay time (from limit switch operation to *+L�
signal turn off (ms))

t2: Receiver delay time 30ms

TR: Rapid traverse acceleration/deceleration time constant (ms)

TS: Servo system time constant (ms)

NOTE
Servo system time constant TS is 33 msec when the servo
unit is adjusted to the standard setting.

ii) Cutting feed

t2t1

VC
ÄÄÄÄ
ÄÄÄÄ
ÄÄÄÄ
ÄÄÄÄ

V Servo system delay

*+L� limit switch

L2=VC(t1+t2+ 
TR
2

 +TS) · 
1

60000
 [mm or inch]

L2:Deceleration distance

Vc: Maximum feedrate (mm/min or inch/min)

t1, t2, Ts: Same as (i).



B–61393E–2/02 2. PREPARATIONS FOR OPERATION

101

Press the reset button to reset the alarm after  moving the tool to the safety
direction by manual operation.  For details on operation, refer to the
operator’s manual of the machine tool builder.

#7
X018

#6 #5
*+LZ

#4 #3 #2 #1 #0
(T series)

X020 *–LZ *–LY *–LX *+LZ *+LY *+LX (M series)

#7
0015

#6 #5 #4 #3 #2
COTZ

#1 #0
(T series)

[Data type] Bit

COTZ The overtravel limit signal is:
0 : Checked
1 : Not checked

WARNING
For safety, usually set 0 to check the overtravel signal.

#7
0057

#6 #5
HOT3

#4 #3 #2 #1 #0
(M series)

HOT3 The overtravel limit signal is:
0 : Not checked
1 : Checked

WARNING
For safety, usually set 1 to check the overtravel signal.

M series

������ Message Description

5n4 OVER TRAVEL : +n Exceeded the n–th axis (axis 1 to 4) +
side hardware OT.

5n5 OVER TRAVEL : –n Exceeded the n–th axis (axis 1 to 4) –
side hardware OT.

T series

������ Message Description

520 OVER TRAVEL : +Z axis Exceeded the Z axis + side hardware
OT.

� Releasing overtravel

Signal address

Parameter

Alarm and message



B–61393E–2/022. PREPARATIONS FOR OPERATION

102

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

III.6.2 OVERTRAVEL

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

III.6.2 OVERTRAVEL

Reference item



B–61393E–2/02 2. PREPARATIONS FOR OPERATION

103

When the tool exceeds a stored stroke check, an alarm is displayed and
the tool is decelerated and stopped.
When the tool enters a forbidden area and an alarm is generated, the tool
can be moved in the reverse direction from which the tool came.

Parameters (Nos.0700 – 0707 or 0743 – 0750 (M)/0770 – 0777 (T)) set
boundary.  Outside the area of the set checks is a forbidden area.  The
machine tool builder usually sets this area as the maximum stroke.

[Classification] Input signal

[Function] Selects stroke check 1 (parameter Nos.0700 to 0707) or stroke check 2
(parameter Nos.0743 to 0750 (M)/0770 to 0777 (T)).

[Operation] When this signal is set to 1, the control unit operates as follows:
– Checks stroke check 1 on the basis of parameter Nos.0743 to 0750

(M)/0770 to 0777 (T), instead of parameter Nos.0700 to 0707.

[Classification] Input signal

[Function] Change the values of the parameters governing the stroke check (0700 to
0707).

[Operation] When these signals are set to 1, the control unit operates as follows:
– Change the stored checks, set with parameter Nos. 0700 to 0707, 

to the machine coordinates when the signals are input.

[Classification] Input signal

[Function] Selects whether the software limit check are checked.

[Operation] When this signal is set to 1, the control unit operates as follows:
– Does not check the sofware limit check.

2.3.2
Stored Stroke Check 1

General

Signal

Stored stroke check
select signal 
EXLM2 <G129#6>

Stroke check external
setting signals +LMX to
–LMZ <G129#0 to #5> 
(M series)

Stroke check release
signal RLSOT <G129#7>
(M series)



B–61393E–2/022. PREPARATIONS FOR OPERATION

104

#7
G129

#6
EXLM2

#5 #4 #3 #2 #1 #0
(T series)

RLSOTG129 EXLM2 –LMZ –LMY –LMX +LMZ +LMY +LMZ (M series)

#7
0015

#6 #5 #4
LM2

#3 #2 #1 #0
(T series)

0020 LM2 (M series)

[Data type] Bit

LM2 The EXLM2 signal for switching stored stroke check 1 and 2
0: Disabled
1: Enabled

#7
0065

#6 #5 #4 #3
PSOT

#2 #1 #0

[Data type] Bit

PSOT Checking of stored stroke limit during the time from power–on to the
manual position reference return
0: The stroke limit is checked.
1: The stroke limit is not checked

#7
OTRFOM0076

#6 #5 #4 #3 #2 #1 #0

[Data type] Bit

OTRFOM When a command that exceeds a stored stroke check is issued
0: An alarm is generated after the stroke check is exceeded.
1: An alarm is generated before the stroke check is exceeded.

Coordinate value I of stored stroke check 1 in the positive direction on each axis0700 – 0703

Coordinate value I of stored stroke check 1 in the negative direction on each axis0704 – 0707

[Data type] Two–word

Increment system IS–A IS–B IS–C Unit

Metric input 0.01 0.001 0.0001 mm

Inch input 0.001 0.0001 0.00001 inch

Rotation axis 0.01 0.001 0.0001 deg

[Valid data range]  – 99999999 to 99999999

The coordinate values of stored stroke checks 1 in the positive and
negative directions are set for each axis in the machine coordinate system.
The outside area of the two checks set in the parameters is inhibited.

Signal address

Parameter

[Unit of data]



B–61393E–2/02 2. PREPARATIONS FOR OPERATION

105

WARNING
1 For axes with diameter specification, a diameter value must

be set.
2 When the parameters are set as follows, the stroke

becomes infinite:
parameters 0700 – 0703 < parameters 0704 – 0707

For movement along the axis for which infinite stroke is set,
only incremental commands are available.  If an absolute
command is issued for this axis, the absolute register may
overflow, and normal movement will not result.

Coordinate value II of stored stroke check 1 in the positive direction on each axis (T series)0743 – 0746

Coordinate value II of stored stroke check 1 in the negative direction on each axis (T series)0747 – 0750

Coordinate value II of stored stroke check 1 in the positive direction on each axis (M series)0770 – 0773

Coordinate value II of stored stroke check 1 in the negative direction on each axis (M series)0774 – 0777

[Data type] Two–word

Increment system IS–A IS–B IS–C Unit

Metric input 0.01 0.001 0.0001 mm

Inch input 0.001 0.0001 0.00001 inch

Rotation axis 0.01 0.001 0.0001 deg

[Valid data range]  – 99999999 to 99999999

Set the coordinate values of stored stroke checks 1 in the positive and
negative directions  for each axis in the machine coordinate system.

When stroke check switching signal EXLM2 is ON, stroke checks are
checked with parameters 0700 to 0707, not with parameters 1320 and
1321.  The area outside  that set by parameters 1326 and 1327 is inhibited.

NOTE
The EXLM2 signal is enabled only when parameter LM2
(No.0020#4 (M)/No.0015#4 (T)), is set to 1.

������ Message Description

5n0 OVER TRAVEL : +n Exceeded the n–th axis (axis 1 to 4) +
side stored stroke check I.

5n1 OVER TRAVEL : –n Exceeded the n–th axis (axis 1 to 4) –
side stored stroke check I.

[Unit of data]

Alarm and message



B–61393E–2/022. PREPARATIONS FOR OPERATION

106

CAUTION
In setting a forbidden area, if two points to be set are the
same, all area is forbidden in check 1.

NOTE
1 Parameter PSOT (bit 6 of No.0065) selects whether each

check becomes effective after the power is turned on and
manual reference position return or automatic reference
position return by G28 has been performed or immediately
after the power is turned on.

2 For the 0–TTC, set a forbidden area for each path.
3 Parameter OTRFOM (bit 7 of No.0076) selects whether an

alarm is displayed immediately before the tool enters the
forbidden area or immediately after the tool has entered the
forbidden area.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

III.6.3 STROKE CHECK

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

III.6.3 STROKE CHECK

Caution

Note

Reference item



B–61393E–2/02 2. PREPARATIONS FOR OPERATION

107

Three areas which the tool cannot enter can be specified with stored
 stroke check 1, stored stroke check 3,and stored stroke check 4.
(Stored stroke check 4 is performed in T series only.)

ÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇ

ÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇ

ÇÇÇÇÇ
ÇÇÇÇÇ
ÇÇÇÇÇ
ÇÇÇÇÇ
ÇÇÇÇÇ
ÇÇÇÇÇ
ÇÇÇÇÇ

ÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇStored stroke

check 4

Stored stroke
check 3

Stored stroke check 1
ÇÇÇ
ÇÇÇ

: Forbidden area for the tool

Fig. 2.3.3 (a) Stroke check (T series)

ÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇÇ

ÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇ

ÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇ

ÇÇÇ
ÇÇÇ
ÇÇÇ
ÇÇÇ

(1) Forbidden area is inside.

(2) Forbidden area is outside.

(I, J, K)

(X, Y, Z)

(I, J, K)

(X, Y, Z)

ÇÇÇ
ÇÇÇ

: Forbidden area for the tool

Fig. 2.3.3 (b) Stroke check (M series)

When the tool exceeds a stored stroke check, an alarm is displayed and
the tool is decelerated and stopped.
When the tool enters a forbidden area and an alarm is generated, the tool
can be moved in the reverse direction from which the tool came.

2.3.3
Stored Stroke 
check 3, 4

General



B–61393E–2/022. PREPARATIONS FOR OPERATION

108

Parameters (Nos. 0804–0809 (M)/0747–0754 (T)) or commands set these
boundaries.  Inside or outside the area of the check can be set as the forbid-
den area.  Parameter INOUT (No. 0024#4) selects either inside or outside
as the forbidden area. 
In case of program command a G22 command forbids the tool to enter the
forbidden area, and a G23 command permits the tool to enter the forbid-
den area. Each of G22; and G23; should be commanded independently of
another commands in a block.
The command below creates or changes the forbidden area:

G 22X_Z_I_K_;

A(X,Z)

X>I,Z>K
X–I>ζ
Z–K>ζ������

ζ is the distance the tool travels in 8 ms. It is 2000 in least 
command increments when the feedrate is 15 m/min.

Fig. 2.3.3 (c) Creating or changing the forbidden area using a program
(T series)

ÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇ(I,J,K)

(X,Y,Z)

ÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇ

X>I,Y>J,Z>K
X–I>2000
Y–J>2000
Z–K>2000

G 22X_Y_Z_I_J_K_;

Fig. 2.3.3 (d) Creating or changing the forbidden area using a program
(M series)

B(X2,Z2)

X1>X2,Z1>Z2
X1–X2> ζ
Z1–Z2> ζ

A(X1,Z1)

ζ is the distance the tool travels in 8 ms. It is 2000 in least 
command increments when the feedrate is 15 m/min.

Fig. 2.3.3 (e) Creating or changing the forbidden area using a parameters
(T series)

Stored stroke check 3



B–61393E–2/02 2. PREPARATIONS FOR OPERATION

109

B(I,J,K)

ÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇ

A(X,Y,Z)

ÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇ

X>I,Y>J,Z>K
X–I>2000
Y–J>2000
Z–K>2000

Fig. 2.3.3 (f) Creating or changing the forbidden area using a parameters
(M series)

When you set the forbidden area X1,Z1,X2,and Z2 through parameters
Nos.0804 to 0809 (M)/Nos.0747 to 0754 (T), the data should be specified
by the distance from the reference position in the least command
increment (output increment). 
If set the forbidden area XZIK by a G22 command, specify the data  by
the distance from the reference position in the least input increment (input
increment).   The programmed data are then converted into the numerical
values in the least command increment, and the values are set as the
parameters.

Set the boundary with parameters Nos. 0760 to 0767.  The area inside the
boundary becomes the forbidden area. (T series)

The parameter setting or programmed value (XZIK) depends on which
part of the tool or tool holder is checked for entering the forbidden area.
Confirm the checking position (the top of the tool or the tool chuck) before
programming the forbidden area.
If point C (The top of the tool) is checked in Fig. 2.3.3 (g), the distance
“c” should be set as the data for the stored stroke check function.  If point
D (The tool chuck) is checked, the distance “d” must be set.

Forbidden area boundary

d

c

D

C The position of the
tool after reference
position return

Fig. 2.3.3 (g) Setting the forbidden area (T series)

ÇÇÇÇÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇÇÇÇÇ

A

B

a

b

The position of the
tool after reference
position return

Forbidden area boundary

Fig. 2.3.3 (h) Setting the forbidden area (M series)

� Stored stroke check 4

� Checkpoint for the
forbidden area



B–61393E–2/022. PREPARATIONS FOR OPERATION

110

Area can be set in piles.

ÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇ

ÇÇÇÇÇÇ
ÇÇÇÇÇÇ
ÇÇÇÇÇÇ

Fig. 2.3.3 (i) Setting the forbidden area overlapping (T series)

Unnecessary checks should be set beyond the machine stroke.

ÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇÇÇ

ÇÇÇÇÇÇ
ÇÇÇÇÇÇ

Setting the forbidden area over lapping

Fig. 2.3.3 (j) Setting the forbidden area overlapping (M series)

Parameter PSOT (bit 3 of No. 0065) selects whether each check becomes
effective after the power is turned on and manual reference position return
or automatic reference position return by G28 has been performed or
immediately after the power is turned on.
After the power is turned on, if the reference position is in the forbidden
area of each check, an alarm is generated immediately  (Only in G22 mode
for stored stroke check 3).

When the tool has become unmovable in the forbidden area, push the
emergency stop button to release the forbidden condition and move the
tool out of the forbidden area in the G23 mode; then, if the setting is
wrong, correct it and perform the reference position return again.

When G23 is switched to G22 in the forbidden area, the following results.
(1)When the forbidden area is inside, an alarm is informed in the next 

move.
(2)When the forbidden area is outside, an alarm is informed immediately.

For the 0–TTC, set a forbidden area for each tool post.

� Forbidden area over–
lapping

� Effective time for a
forbidden area

� Releasing the alarms

� Change from G23 to
G22 in a forbidden area

� Creating the forbidden
area for the 0–TTC



B–61393E–2/02 2. PREPARATIONS FOR OPERATION

111

#7
0024

#6 #5 #4
INOUT

#3 #2 #1 #0

[Data type] Bit

INOUT The area inside or outside of the third stored stroke check is set as an
inhibition area.
0: Inside
1: Outside

#7
0065

#6 #5 #4 #3
PSOT

#2 #1 #0

[Data type] Bit
PSOT Checking of stored stroke limit during the time from power–on to the

manual position reference return
0: The stroke limit is checked.
1: The stroke limit is not checked

#7
OTRFOM0076

#6 #5 #4 #3 #2 #1 #0

[Data type] Bit
OTRFOM When a command that exceeds a stored stroke limit is issued

0: An alarm is generated after the stroke limit is exceeded.
1: An alarm is generated before the stroke limit is exceeded.

Coordinate value of stored stroke check 3 in the positive direction on each axis0747–0750 (T series)

Coordinate value of stored stroke check 3 in the negative direction on each axis0751–0754 (T series)

Coordinate value of stored stroke check 3 in the positive direction on each axis0804–0806 (M series)

Coordinate value of stored stroke check 3 in the negative direction on each axis0807–0809 (M series)

[Data type] Two–word

[Unit of data]

Increment system IS–A IS–B IS–C Unit

Metric input 0.01 0.001 0.0001 mm

Inch input 0.001 0.0001 0.00001 inch

Rotation axis 0.01 0.001 0.0001 deg

[Valid data range]  – 99999999 to 99999999

Set the coordinate values of stored stroke checks 2 in the positive and
negative directions for each axis in the machine coordinate system.
INOUT, #4 of parameter 0024, sets either the area outside or the area
inside  specified by two checks as the inhibition area.

WARNING
For axes with diameter specification, a diameter value must
be set.

Parameter



B–61393E–2/022. PREPARATIONS FOR OPERATION

112

Coordinate value of stored stored check 4 in the positive direction on each axis0760–0763

Coordinate value of stored stroke check 4 in the negatice direction on each axis0764–0767

[Data type] Two–word

[Unit of data]

Increment system IS–A IS–B IS–C Unit

Metric input 0.01 0.001 0.0001 mm

Inch input 0.001 0.0001 0.00001 inch

Rotation axis 0.01 0.001 0.0001 deg

[Valid data range]  – 99999999 to 99999999

Set the coordinate values of stored stroke checks 3 in the positive and
negative directions for each axis in the machine coordinate system.  The
area inside the checks set in the parameters is forbidden.

������ Message Description

5n2 OVER TRAVEL : +n Exceeded the n–th axis + side stored
stroke check 3.
(Parameter Nos. 0747–750 (T)/
0804–0806 (M) )

5n3 OVER TRAVEL : –n Exceeded the n–th axis – side stored
stroke check 3.
(Parameter Nos. 0751–0754 (T)/
0807–0809 (M))

5n4 OVER TRAVEL : +n Exceeded the n–th axis + side stored
stroke check 4.
(Parameter Nos. 0760–0763 (T) )

5n5 OVER TRAVEL : –n Exceeded the n–th axis – side stored
stroke check 4.
(Parameter Nos. 0764–0767 (T) )

NOTE
Over travel alrams (No. 5n4–5n5) occur, in the T series

WARNING
In setting  a forbidden area, if the two points to be set are
 the same, the area is as follows: 
(1)When the forbidden area is check 1, all areas are
forbidden areas.
(2)When the forbidden area is check 3 or check 4, all areas
are movable areas.

Alarm and message

Warning



B–61393E–2/02 2. PREPARATIONS FOR OPERATION

113

NOTE
Parameter OTRFOM (bit 7 of No. 0076) selects whether an
alarm is displayed immediately before the tool enters the
forbidden area or immediately after the tool has entered the
forbidden area.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

III.6.3 STROKE CHECK

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

III.6.3 STROKE CHECK

When two tool posts machine the same workpiece simultaneously, the
tool posts can approach each other very closely.  If the two tool posts
interfere with each other due to a program error or any other setting error,
a serious damage such as a tool or machine destruction can occur.
The function “tool post interference check” is available which can
decelerate and stop the two tool posts before the tool posts interfere with
each other due to an  incorrect command.

Tool post 1

Tool post 2

The contours of the two tool posts are checked to determine whether or
not an interference occurs.

Note

Reference item

2.3.4
Tool Post Interference
Check (0–TTC)

General



B–61393E–2/022. PREPARATIONS FOR OPERATION

114

[Classification] Output signal

[Function] Indicates whether the tool post interference check function is being
performed.

[Output condition] This signal goes “0” when:
(i) All requisites for the tool post interference check function are satisfied.

This signal goes “1” when:

(i) Any of the requisites for the tool post interference check function are
not satisfied.

NOTE
For details of the requisites for the tool post interference
check function, refer to the operator’s manual for Lathe
(B–61394E).

[Classification] Output signal

[Function] Indicates that the tool post interference alarm is activated.

[Output condition] This signal goes “1” when:
(i) The control unit judges that the two tool posts will interfere with each

other during the execution of the tool post interference check function.

This signal goes “0” when:

(i) The control unit judges that the two tool posts will not interfere with
each other during the execution of the tool post interference function.

(ii)When the tool post interference check function is not being performed.

Signal

Tool post interference
check signal 
BOFF <F180#6>

Tool post interference
alarm signal 
TAL <F180#7>



B–61393E–2/02 2. PREPARATIONS FOR OPERATION

115

NOTE
1 During the execution of the interference check function, if

the control unit judges that the two tool posts will interfere
with each other, it stops both tool posts by slowing them
down, and then enters the alarm state.  The CNC then sets
the TAL signal “1” to indicate that an interference alarm has
occurred.

2 If the interference alarm is activated, switch the operation
mode to the manual mode, manually withdraw the tool posts
to where they do not interfere each other, then release the
alarm status by resetting the control unit.
As the result of manually withdrawing the tool posts, the
TIALM signal goes “0” when the control unit judges that the
tool posts are separated enough not to interfere with each
other any more.  When manually withdrawing the interfering
tool posts, the TIALM signal is effective in identifying how far
the tool posts must be separated from each other.  This is
because it is easy for the operator to check at which point
the signal goes “0”.

3 If an interference alarm occurs, the axis being moved and
its moving direction are stored, and the axis cannot be
moved in the stored direction until the alarm is released by
resetting the control unit.  This prevents the axis from
interfering any further by prohibiting movement in the
direction that caused the interference.

#7
TALF180

#6
BOFF

#5 #4 #3 #2 #1 #0

Signal address



B–61393E–2/022. PREPARATIONS FOR OPERATION

116

#7
0048

#6 #5
ZCLR

#4
IFE

#3
IFM

#2
ITO

#1
TY1

#0
TY0

[Data type] Bit

TY0, TY1 This parameter specifies the relationship between the coordinate systems
of the two tool posts.

X

X

X

X

Z Z
Z

Z

(3)  When TY1=1 and TY0=0 (4)  When TY1=1 and TY0=1

Tool post 2

Tool post 1 Tool post 1

Tool post 2

(1)  When TY1=0 and TY0=0 (2)  When TY1=0 and TY0=1

X X

Z

X

Z Z

Tool post 1

Tool post 2

Tool post 2 Tool post 1

ITO When offset number 0 is specified by the T code,
0: Checking interference between tool posts is stopped until an offset

number other than 0 is specified by the next T code.
1: Checking interference between tool posts is continued according to

the previously specified offset number.

IFM Specifies whether interference between tool posts is checked in the
manual operation mode.
0: Not checked
1: Checked

IFE Specifies whether interference between tool posts is checked.
0: Checked
1: Not checked

ZCLR Specifies whether interference along the Z axis is checked while checking
interference between tool posts.
0: Checked
1: Not checked (Only interference along the X axis is checked.)

Parameter



B–61393E–2/02 2. PREPARATIONS FOR OPERATION

117

0768 Distance along the X axis between the reference positions of tool posts 1 and 2

0769 Distance along the Z axis between the reference positions of tool posts 1 and 2

[Data type] Two–word

[Unit of data]

Increment system IS–B IS–C Unit

Metric input 0.001 0.0001 mm

Inch input 0.0001 0.00001 inch

[Valid data range]  –99999999 to +99999999

+X

+Z

Tool post 1

Tool post 2

Specify the X and Z values (�, �) of the
reference position of tool post 2 in
parameters 0768 and 0769,
respectively, in the Z–X plane
coordinate system.  However, note that
the reference position of tool post 1 is
plotted at the zero point.

ζ ε

WARNING
After the parameter values are changed, perform manual
reference position return for individual tool posts.
Otherwise, data on the positional relationship between the
tool posts stored in memory will not be updated to the new
parameter values.



B–61393E–2/022. PREPARATIONS FOR OPERATION

118

������ Message Description

169 ILLEGAL TOOL GEOME-
TRY DATA

Incorrect tool figure data in interfer-
ence check.

590
592

INTERFERENCE :  +X
INTERFERENCE :  +Z

An interference alarm has generated
when X or Z axis is moving in the pos-
itive direction.

591
593

INTERFERENCE : �X
INTERFERENCE : �Z

An interference alarm has generated
when X or Z axis is moving in the neg-
ative direction.

WARNING
1 When an alarm is raised, the CNC system and machine

system stop with some delay in time.  So an actual stop
position can be closer to the other tool post beyond an
interference forbidden position specified using tool shape
data.  So, for safety, tool shape data a little larger than the
actual shape should be set.  The extra distance, L, required
for this purpose is calculated from a rapid traverse feedrate
as follows

For example, when a rapid traverse feedrate of 15 m/min is
used, L=2mm.

2 When parameters or tool shape data (contact forbidden
area) are set for the interference check function, check that
the interference forbidden area is correctly set by moving
the tool posts to foul each other in several directions in
manual mode (interference check enabled with a
parameter).

1

7500
 L = (Rapid traverse rate) �

OPERATOR’S MANUAL 
(For Lathe) (B–61394EN)

II.24.3 TOOL POST INTERFERENCE
CHECK

Alarm and message

Warning

Reference item



B–61393E–2/02 2. PREPARATIONS FOR OPERATION

119

When an alarm is triggered in the CNC, the alarm is indicated on the CRT
screen, and the alarm signal is set to 1.

If the voltage level of the memory backup battery falls to below a specified
level while the CNC is turned off, the battery alarm signal is set to 1.

[Classification] Output signal

[Function] The alarm signal reports that the CNC is in an alarm state.

There are the following alarms.  The following alarms are issued:

(a)  TH alarm
(b)  TV alarm
(c)  P/S alarm
(d)  Overtravel alarm
(e)  Overheat alarm
(f)  Servo alarm

[Output condition] The alarm signal is set to 1 when:
–  The CNC is placed in the alarm state.
The alarm signal is set to 0 when:
–  The alarm has been released by resetting the CNC.

[Classification] Output signal

[Function] Indicates when the battery voltage for the absolute pulse coder is below
the specified value.

[Output condition] The signal is set to 1 when:
– The battery voltage of the absolute pulse coder has fallen to below the

specified level.

The signal is set to 0 when:

– The battery voltage of the absolute pulse coder has risen to the
specified level or higher.

2.4
ALARM SIGNAL

General

Signal

Alarm signal
AL<F149#0>

Absolute pulse coder
battery alarm signal
BAL1 to BAL4, BAL7,
BAL8
<F156#0 to F156#5>
(T series)
<F159#0 to F159#5>
(M series)



B–61393E–2/022. PREPARATIONS FOR OPERATION

120

[Classification] Output signal

[Function] The battery alarm signal indicates that the voltage of the battery for the
memory has fallen to below a specified level while the CNC is off.  In
general, this signal is used to turn on an LED to notify the operator.

[Output condition] The signal is set to 1 when:
– The battery voltage has fallen to below the specified level.

The signal is set to 0 when:

– The battery voltage has risen to the specified level or higher.

#7
F149

#6 #5 #4 #3 #2
BAL

#1 #0
AL

F156 BAL8 BAL7 BAL4 BAL3 BAL2 BAL1 (T series)

F159 BAL8 BAL7 BAL4 BAL3 BAL2 BAL1 (M series)

#7
0064

#6 #5
NPA

#4 #3 #2 #1 #0

[Data type] Bit

NPA Action taken when an alarm is generated or when an operator message is
entered
0 : The display shifts to the alarm or message screen.
1 : The display does not shift to the alarm or message screen.

Battery alarm signal 
BAL<F149#2>

Signal address

Parameter



B–61393E–2/02 2. PREPARATIONS FOR OPERATION

121

This signal disables machine movement along axes.  When this signal is
input during movement along axes, the tool movement is decelerated,
then stopped.

[Classification] Input signal

[Function] This signal disables machine movement along axes in automatic
operation (memory or MDI operation).

[Operation] When the STLK signal turns to “1”, the axis movement is decelerated and
stopped.
In automatic operation, blocks containing M, S, or T commands are
executed consecutively until a block containing an axis move command
is encountered; the system then stops and is placed into the automatic
operation mode (STL is “1”, SPL is “0”). When the STLK signal turns
to “0”, operation restarts. (Figs.2.5 (a), (b)).

STLK

Axis move

Command read

Fig.2.5 (a) Block containing only axis move command

FIN

STLK

Command read

MF/SF/TF

Fig.2.5 (b) Block containing auxiliary functions only

2.5
START LOCK/
INTERLOCK

General

Signal

Start lock signal
STLK<G120#1>(T series)



B–61393E–2/022. PREPARATIONS FOR OPERATION

122

[Classification] Input signal

[Function] This signal is used to inhibit the machine from moving, and is effective
regardless of the selected mode.

[Operation] When the *ILK signal is “0”, the axis movement is decelerated and
stopped. In automatic operation, blocks containing M, S or T commands
are executed consecutively until a block containing an axis move
command is encountered; the system then stops and is placed into the
automatic operation mode (cycle start lamp signal STL is “1”, feed hold
lamp signal SPL is “0”). When the *ILK signal turns to “1”, operation
resumes (Figs.2.5.2(c), (d)).

*IT

Command read

Axis move

Fig.2.5 (c) Block containing only axis move command
(manual and automatic operation)

MF/SF/TF

FIN

*IT

Command read

Fig.2.5 (d) Block containing auxiliary functions only 
(automatic operation)

NOTE
The overtravel amount of the motor after turning *ILK to “0”
is represented by the following formula.

Where
Qmax : Overtravel quantity (mm or inch)
Fm : Feedrate (mm/min or inch/min)
Tc : Cutting time constant (ms)
Ts : Servo time constant (Ts = 33ms normally)
A : Processing time of CNC

A = 50ms at standard interlock signal
A = 16ms at high–speed interlock signal

Qmax =Fm �
1
60

×  (
Tc

1000
+

Ts
1000

+
A

1000
)

Interlock signal
*ILK<G117#0>(M series)



B–61393E–2/02 2. PREPARATIONS FOR OPERATION

123

[Classification] Input signal

[Function] These signals disable feed along axes on an axis–by–axis basis.
A separate interlock signal is provided for each controlled axis.  The
number at the end of each signal name denotes the number of the
corresponding controlled axis.

*IT x

� ..... Interlock for the X axis

� ..... Interlock for the Y axis

� ..... Interlock for the Z axis
: :

: :

[Operation] a) In manual operation
The movement of an interlocked axis is inhibited, but the other axes
are movable. If an axis is interlocked during movement, it stops after
being decelerated, and it starts moving again when it is released from
interlock.

b) In automatic operation (AUTO or MDI mode)
If an axis is interlocked while its movement is being commanded (the
move amount is not 0, inclusive of the tool offset), all axes movements
are prevented.
If a moving axis is interlocked, all axes stop moving after being
decelerated, and they start moving again when it is released from being
interlocked.
This function is effective during dry run.

[Classification] Input signal

[Function] This function allows a directional interlock for each axis.  Together with
the high-speed interlock, it is possible to release the interlock of an axis
only in the direction in which no axis/directional interlock is applied.

Interlock signal for each
axis
*ITX to *IT4
<G128#0 to #3>(M series)
ITX to IT4
<G128#0 to #3>(T series)

Interlock signal for each
axis and direction
*+MITX, *–MITX, *+MITY,
*–MITY, *+MITZ, *–MITZ,
*+MIT4, *–MIT4
<G142>(M series)
+MIT1, –MIT1, +MIT2,
–MIT2
<X008#2 to X008#5>
(T series)



B–61393E–2/022. PREPARATIONS FOR OPERATION

124

[Operation] When the axis/directional interlock signal becomes “0” for M series or
“1” for T series, CNC applies interlock only in the corresponding axial
direction.  However, during automatic operation, all axes will stop.

#7
X008

#6 #5
–MIT2

#4
+MIT2

#3
–MIT1

#2
+MIT1

#1 #0
(T series)

G117 *ILK (M series)
#7 #6 #5 #4 #3 #2 #1 #0

G120 STLK (T series)

G128 IT4 IT3 ITZ ITX (T series)

*IT4 *ITZ *ITY *ITX (M series)

*–MIT4G142 *–MITZ *–MITY *–MITX *+MIT4 *+MITZ *+MITY *+MITX (M series)

#7
EILK0008

#6 #5 #4 #3 #2 #1 #0
(T series)

EILK Specifies whether a start lock is applied to each axis separately or in
common, as follows:
1 : Separately (ITX, bit 0 of G0128 to IT4, bit 3)
0 : In common (STLK, bit 1 of G0120)

#7
EILK0008

#6 #5 #4 #3 #2 #1 #0
(M series)

EILK Specifies whether an interlock signal is applied to each axis separately or
in common, as follows:
1 : Separately
0 : All axes in common or Z–axis alone (Either is selected according to

the setting of the ZILK bit (bit 1 of parameter 0012).)

#7
0012

#6 #5 #4 #3 #2 #1
ZILK

#0
(M series)

ZILK Specifies whether an interlock is applied to only the Z–axis or all axes in
common, as follows:
1 : Z–axis only
0 : All axes in common

#7
0015

#6 #5 #4 #3 #2
RILK

#1 #0
(M series)

RILK Specifies whether to enable the high–speed interlock signal (*RILK, bit 5
of X008), as follows:
1 : Enable
0 : Disable

Signal address

Parameter



B–61393E–2/02 2. PREPARATIONS FOR OPERATION

125

#7
EDILK0024

#6 #5 #4 #3 #2 #1 #0
(T series)

EDILK Specifies whether to enable axial interlock signals (+MIT1, bit 2 of X008
to –MIT2, bit 5), as follows:
1 : Enable
0 : Disable

#7
0049

#6 #5 #4 #3 #2 #1
RDIK

#0
DILK (M series)

DILK Specifies whether to enable axial interlock signals (*+MIT, bit 0 of G142
to *–MIT, bit 7), as follows:
1 : Enable
0 : Disable

RDIK Specifies when the high–speed interlock signal (*RILK, bit 5 of X008) is
to be enabled, as follows:
1 : Disable when the axial interlock signals (*+MIT, bit 0 of G142 to

*–MIT, bit 7)
0 : Always enable

NOTE
The interlock signal for each axis and direction (T series) is
supported regardless of whether the tool compensation
measurement value direct input B function is provided.

Note



B–61393E–2/022. PREPARATIONS FOR OPERATION

126

The mode select signal is a code signal consisting of the three bits MD1,
MD2, and MD4. The seven modes -- memory edit (EDIT), memory
operation  (MEM), manual data input (MDI), manual handle/incremental
feed (HANDLE/STEP), manual continuous feed (JOG), TEACH IN
JOG, and in addition, DNC operation mode can be selected by combining
the (AUTO) mode setting and the DNCI signal.  Manual reference
position return mode can be selected by combining the manual
continuous feed (JOG) mode setting and the ZRN signal.
The currently selected operation mode can be posted by outputting the
operation mode check signal.

[Classification] Input signal

[Operation] As shown in the following table, the mode select signal is a grey code (a
code in which only one bit is different than that of the adjacent mode).
To prevent faulty mode switching, use an overcrossing contact rotary
switch so that only one bit changes from that of the adjacent mode. 
“Faulty mode switching” means for example:

When the mode is switched to the EDIT mode during memory operation,
the CNC enters the single block state and the operation stops at the end
of the executing block.

For this mode switching, only MD2 should change from 0 to 1.  If a
transient signal status change occurs in a signal other than MD2 during
mode switching, however, another mode (manual continuous feed mode,
for example) is set between automatic operation mode and memory edit
mode.  When manual continuous feed mode is set while the CNC is in
automatic status, the CNC immediately stops memory operation.  As a
result, although the operator intends to switch the mode to the memory
edit mode, the CNC is, instead, placed in the feed hold state.

2.6
MODE SELECTION

General

Signal

Mode selection signal
MD1, MD2, MD4
<G122#0 to #2>
DNCI<G127#5>
ZRN<G120#7>



B–61393E–2/02 2. PREPARATIONS FOR OPERATION

127

Mode
Signal status

Mode
MD4 MD2 MD1 DNCI ZRN

1 Memory edit (EDIT) 0 1 1 0 0

2 Memory operation (AUTO) 0 0 1 0 0

3 Manual data input (MDI) 0 0 0 0 0

4 Manual handle/incremental feed
(HANDLE/INC)

1 0 0 0 0

5 Jog feed (JOG) 1 0 1 0 0

6 TEACH IN HANDLE 1 1 1 0 0

7 TEACH IN JOG 1 1 0 0 0

8 DNC operation 0 0 1 1 0

9 Manual reference position return
(ZRN)

1 0 1 0 1

#7
ZRNG120

#6 #5 #4 #3 #2 #1 #0

G122 MD4 MD2 MD1

G127 DNCI

Signal address



B–61393E–2/022. PREPARATIONS FOR OPERATION

128

NOTE
Precautions on modes and mode switching

1 In the MDI mode, the STL signal turns to “0” and the CNC
stops at the end of execution of the commands input from
the CRT/MDI panel, but the SPL signal does not turn to “1”.
Therefore, another command can be input from the manual
data input unit under this state.

2 When the manual handle function is not provided,
incremental  feed is enabled in the HANDLE/INC mode.
When the manual handle function is provided, only manual
handle feed is enabled in that mode.

3 Manual operation in TEACH IN JOG and TEACH IN
HANDLE mode.
a) When parameter JHD no.0013#0 is set to “0” so that jog

operation and handle feed operation are performed with
separate modes:
In TEACH IN JOG mode, jog operation can be done.
In TEACH IN HANDLE mode, handle feed can be done
when optional manual handle feed function is provided,
and incremental feed can be done when handle feed
function is not provided.

b) When parameter JHD no.0013#0 is set to “1” so that jog
operation and handle feed operation are performed with
the same mode:
In TEACH IN JOG mode, handle feed and jog feed can be done
when optional manual handle feed function is provided, but jog
feed only when it is not included.
In TEACH IN HANDLE mode, handle feed and jog feed
can be done when optional manual handle feed function
is provided, but incremental feed only when it is not
included.
The program can be edited in both TEACH IN JOG and
TEACH IN HANDLE modes.

4 When the CNC is operating in the MEM mode and is
switched to MDI, the unit automatically switches to single
block operation, then enters the MDI mode at the end of the
executing block. The STL signal turns to “0” at this time, but
the SPL signal does not turn to “1” (see Fig.2.6 (a)).

STL

Mode select signal state

Operation

MDI mode

MEM mode

Manual data in-
put possible in
this range

Executing command

Fig.2.6 (a)

Note



B–61393E–2/02 2. PREPARATIONS FOR OPERATION

129

NOTE
5 When the CNC is operating in the MDI mode and is switched

to MEM mode, the executing command is finished before
the CNC switches to the MEM mode (Fig. 2.6 (b)).

Fig.2.6 (b)

STL

Mode select signal state

Operation

MDI mode

MEM mode

Memory opera-
tion possible in
this range

Executing command

6 When the HANDLE/INC or TEACH IN HANDLE mode is
selected while the CNC is operating in the MEM or MDI
mode, the automatic or MDI operation stops, the STL signal
turns to “0”, the SPL signal simultaneously turns to “1”, and
the CNC enters the HANDLE/INC or TEACH IN HANDLE
mode.  Manual handle feed or incremental feed by axis
direction select signal is possible under this state.  Since the
MEM mode or  MDI mode commands are held, operation
can be restarted by the cycle start signal by selecting the
MDI or MEM mode. However, if operation was stopped by
switching to the HANDLE/INC or TEACH IN HANDLE mode
during manual data input or automatic operation, it can be
restarted only by the mode in use before the operation was
stopped (Fig.2.6 (c)).

STL

SPL

ST

MEM/MDI mode

Mode select signal state
HANDLE/INC or
TEACH IN HAN-
DLE mode

Operation in the MEM
mode or MDI mode

Cycle start signal

Manual handle
/incremental
feed enabled

Fig.2.6 (c)



B–61393E–2/022. PREPARATIONS FOR OPERATION

130

NOTE
7 When the JOG or TEACH IN JOG mode is selected during

MEM or MDI mode operation, operation stops, the STL
signal turns to “0”, the SPL signal simultaneously turns to
“1”, and the CNC enters the JOG or TEACH IN JOG mode.
Manual feed by feed axis direction select signal is possible
under this state.  Operation can be restarted by returning to
the original state, as described for HANDLE/STEP or
TEACH IN HANDLE mode . When the mode is switched to
the JOG or TEACH IN JOG mode during manual handle
feed or step feed operation, the CNC ignores the manual
handle feed or step feed command and manual jog feed
becomes effective. If a feed axis direction select signal turns
to “1” before the JOG or TEACH IN JOG mode is selected,
that signal is ignored. The feed axis select signal is selected
by turning the necessary feed axis direction signal to “1”
after turning all the feed axis direction select signals to “0”.
It is possible to perform handle feed in TEACH IN JOG mode
by parameter TJHD no.0002#6.  For details, refer to item (3)
(Fig.2.6 (d), (e)).

Fig.2.6 (e)

STL

SPL

ST

MEM/MDI mode

Mode select signal state HANDLE/INC or
TEACH IN JOG
mode

Operation in the
MEM mode or MDI
mode

Cycle start signal

Jog feed
enabled

Fig.2.6 (d)

MEM/MDI/HADLE/
INC mode/TEACH
IN HANDLE mode

100ms or more

Mode select signal state

Jog or TEACH
IN JOG

Feed axis
direction select
signal

Jog feed
disable

Jog feed enable



B–61393E–2/02 2. PREPARATIONS FOR OPERATION

131

NOTE
8 The mode switching operation is summarized in the time chart below (Fig.2.6 (f)).

H / S

STLSTLSTL

*SP

STST ST ST ST ST ST

SPL

STL STL

SPL

MEM mode selection

MDI mode selection

HANDLE/INC or TEACH IN HANDLE mode selection

JOG or TEACH IN JOG mode selection

H / S

M

D

J

D

D

M

M M

D

J

M

Memory
operation

Disable because of
feed hold state of
automatic operation

Memory read Memory
operation

End of operation

MDI command
operation

MDI command
operation

MDI operation
possible here-
after

Disable because of
feed hold state of
MDI operation

End of opera-
tion

Memory read

or

Fig.2.6 (f) Mode signal time chart

CONNECTION MANUAL 
(This manual)

4.1 MANUAL REFERENCE POSITION
RETURN

Reference item



B–61393E–2/022. PREPARATIONS FOR OPERATION

132

Either tool post is selected for the display and setting of tool compensation
data and other data, program input in MDI mode, the editing of a
machining program in program memory, and other operations.

[Classification] Input signal

[Function] The 0–TTC has a single CRT/MDI unit.  This signal specifies whether the
CRT/MDI unit is used for tool post 1 or 2.
Tool post select signal TRT2 is a DI signal that is directly read by the CNC
at power–up only.  Another tool post select signal, TRT2PC, is a PMC
output signal that is constantly monitored after power–up.  The TRT2
signal is used for clearing memory or performing other special
maintenance–related operations at power–up.

[Operation] 1: The CRT/MDI panel is used to operate tool post 2.
0: The CRT/MDI panel is used to operate tool post 1.

#7
X018

#6 #5 #4 #3
TRT2

#2 #1 #0

G133 TRT2PC

NOTE
1 The following data for tool posts 1 and 2 is output on a single

screen:
– Position indicated by triple–size letters
– Alarm
– Operator message

2 The following operation or function is enabled for a selected
tool post only:
– Input/output via the reader/punch interface
– External key input
– Tool compensation measurement value direct input B

function
3 The following operation at power–up can be performed only

for the tool post selected with the TRT2 signal.
– Program clear

4 Memory all clear can always be performed for both tool
posts, irrespective of the setting of the TRT2 signal.

2.7
TOOL POST 
SELECTION 
(0–TTC)

General

Signal

Tool post selection
signal
TRT2<X018#3>
TRT2PC<G133#0>

Signal address



B–61393E–2/02 2. PREPARATIONS FOR OPERATION

133

#7
0046

#6 #5 #4 #3 #2
IGANL

#1 #0
RSTSW

RSTSW The 0–TTC uses the reset key:
1: Only for the selected tool post.

2: For both tool posts.

IGNAL If an alarm is issued for a tool post of the 0–TTC, the other tool post:
1: Does not enter the feed hold status.

0: Enters the feed hold status.

#7
0047

#6 #5 #4 #3 #2 #1 #0
TIST

TIST For the 0–TTC, tool post select signals TRT2 (X0018, #3) and TRT2PC
(G0133, #0) are:
1: Disabled.

0: Enabled.

Parameter



B–61393E–2/022. PREPARATIONS FOR OPERATION

134

The table below lists the status output signals for notifying the state of the
CNC.  See the sections listed in the table for details of each signal.

Signal name Symbol Reference section

Alarm signal AL 2.4

Battery alarm signal BAL 2.4

Reset signal RST 5.2

Rewinding signal RWD 5.2

Tapping signal TAP 11.7

Moving signal MVX – MV4 1.2.5

In–position signals INPX – INP4 7.2.6.1

Cutting feed signal CUT 2.8  (the section you are
reading)

Thread cutting signal THRD 6.4.1

Canned cycle start 
signal

FXST 2.8  (the section you are
reading)

[Classification] Output signal

[Function] Notifies that cutting feed is being performed by automatic operation.

[Output condition] This signal is set to 1 in the following case:

– When cutting feed is being performed by automatic operation (cutting
feed for linear interpolation, circular interpolation, helical cutting,
thread cutting, skip cutting, or canned cycle)

CAUTION
This signal is not output in the feed hold state.

NOTE
This signal is output even when the feedrate override is 0%,
or during interlock.

2.8
STATUS OUTPUT 
SIGNAL

General

Signal

Cutting feed signal 
CUT<F188#6>



B–61393E–2/02 2. PREPARATIONS FOR OPERATION

135

[Classification] Output signal

[Function] This signal is kept to be 1 for 200 ms after the beginning of drilling axis
movement, to indicate when a canned cycle such as G73, G74, G76, or
G80 to G89 (including a rigid tapping cycle) begins.

[Output condition] This signal becomes 1 when:
� Drilling axis movement begins in a canned cycle such as G73, G74,

G76, or G80 to G89 (including a rigid tapping cycle); when drilling
axis movement begins at the R point, signal output is treated as one
block, so be careful about single–block operation.

The signal becomes 0 when:

� 200 ms elapses after the signal becomes 1.

� A reset occurs, or an emergency stop signal is input.

NOTE
1 If drilling axis movement ends in the 200 ms period during

which the signal is 1, the signal will not be reset to 0.
2 If feed hold occurs in the 200 ms period during which the

signal is 1, the signal will not be reset to 0.

#7
F161

#6 #5 #4
FXST

#3 #2 #1 #0

F188 CUT

Canned cycle start
signal
FXST<F161#4>

Signal address



B–61393E–2/022. PREPARATIONS FOR OPERATION

136

The German VDE safety standard requires that the motor be deactivated
when the safety guard is opened.  By using the VRDY OFF alarm ignore
signal, however, the CNC can be restarted without resetting, even if the
safety guard has been opened.

[Classification] Input signal

[Function] Disables the detection of servo alarm No.401 or 403, VRDY OFF, for all
axes.

[Operation] When this signal is set to logical 1, the control unit operates as follows:

� The control unit does not issue servo alarm No.401 or 403, VRDY OFF,
even when the servo amplifier ready signal goes off.

#7
G123

#6 #5 #4 #3 #2 #1 #0
IGNVRY (M series)

G127 IGNVRY (T series)

������ Message Description

401 SERVO ALARM: 1, 2TH
AXIS VRDY OFF

1–axis, 2–axis servo amplifier READY
signal (DRDY) went off.

403 SERVO ALARM: 3, 4TH
AXIS VRDY OFF

3–axis, 4–axis servo amplifier READY
signal (DRDY) went off.

2.9
VRDY OFF ALARM 
IGNORE SIGNAL

General

Signal

All–axis VRDY OFF alarm
ignore signal
IGNVRY<G123#0>(M)
IGNVRY<G127#0>(T)

Signal address

Alarm and message



B–61393E–2/02 2. PREPARATIONS FOR OPERATION

137

CAUTION
1 When the control enters NOT READY status due to

emergency stop or a servo alarm and then the control is
reset, reset processing is not terminated until the VRDY
OFF alarm ignore signal is set to 0.

2 When the VRDY OFF alarm ignore signal is set to 1 and the
servo amplifier ready signal is set to off, the motor is freed
from the drive, but follow up is not performed.  To perform
follow up, set the servo off signal to 1.

NOTE
While the VRDY OFF alarm ignore signal is set to 1, and a
servo alarm other than alarm No.401 or 403 occurs, the
control unit detects the alarm.

Caution

Note



3. MANUAL OPERATION B–61393E–2/02

138

3 MANUAL OPERATION



B–61393E–2/02 3. MANUAL OPERATION

139

In the jog mode, turning a feed axis and direction selection signal to “1”
on the machine operator’s panel continuously moves the tool along the
selected axis in the selected direction.
Manual operation is allowed for one axis at a time. 3 axes can be selected
at a time by parameter S3JOG (No.0049#4).

In the incremental feed mode, turning a feed axis and direction selection
signal to “1” on the machine operator’s panel moves the tool one step
along the selected axis in the selected direction.  The minimum distance
the tool is moved is the least input increment.  Each step can be 10, 100,
or 1000 times the least input increment.

The jog feedrate can be adjusted with the override signal.
With the rapid traverse selection signal the tool can be moved at the rapid
traverse rate regardless of the override signal.

The following signals determine the way in which jog feed or incremental
feed is executed.

Selection Jog feed Incremental feed

Mode selection MD1, MD2, MD4 MD1, MD2, MD4

Selection of the axis to
move

+X –X +Y –Y +Z –Z
Selection of the direc-
tion to move the axis

+X, –X, +Y, –Y, +Z, –Z, . . .

Selection of the move
amount

MP1, MP2

Selection of feedrate *OV1 – *OV8, RT, ROV1, ROV2

The only difference between jog feed and incremental feed is the method
of selecting the feed distance.  In jog feed, the tool continues to be fed
while the following signals selecting the feed axis and direction are “1”:
+X, –X, +Y, –Y, +Z, –Z, etc.  In incremental feed, the tool is fed by one
step.
The distance of the step is selected by the manual handle feed move
distance select signal MP1 an d MP2.
For the signals selecting the mode, see Section 2.6, “Mode Selection
Signals.”  For the manual handle feed selection signals, MP1 and MP2 of
selection of the move amount, see 3.2 “Manual handle feed.”  For rapid
traverse override signals ROV1 and ROV2, see Subsec. 7.1.7.1,
“Feedrate Override Signals.”
Other signals are described below.

3.1
JOG  FEED/
INCREMENTAL FEED

General

� Jog feed

� Incremental feed

Signal



B–61393E–2/023. MANUAL OPERATION

140

[Classification] Input signal

[Function] Selects a desired feed axis and direction in jog feed or incremental feed.
The sign (+ or –) in the signal name indicates the feed direction.  The
number or alphabet indicates the number of the control
axis.

X X axis is fed

Y Y axis is fed

Z Z axis is fed

:    :

4 Fourth axis is fed

+ Feed in positive direction

– Feed in negative direction

+   x

[Operation] When the signal is high, the control unit operates as described below.
� When jog feed or incremental feed is allowed, the control unit moves

the specified axis in the specified direction.

� In jog feed, the control unit continues to feed the axis while the signal
is “1”.

Jog mode
 (or Teach in jog mode)

+X

X axis move

� In incremental feed, the control unit feeds the specified axis by the step
distance which is specified by the manual handle feed move distance
selection signal MP1, MP2.  Then the control unit stops it.  Even if the
signal is set to “0” while the axis is being fed, the control unit does not
stop feeding it.
To feed the axis again, set the signal to “0”, then set it to “1” again.

Incremental feed mode
 (TEACH IN HANDLE mode)

+X

X axis move

Feed Axis and Direction
Selection Signal
+X to +4
<G116#2 to G119#2>
–X to –4
<G116#3 to G119#3>



B–61393E–2/02 3. MANUAL OPERATION

141

NOTE
1 If both the positive direction and negative direction signals of the same axis are simultaneously

set to “1”, neither the positive direction nor the negative direction is selected.  The control unit
assumes that both these signals are set to “0”.

2 If the feed axis and direction selection signals are set to “1” before the jog feed mode or
incremental feed mode is selected, these signals are invalidated.  After the jog feed mode or
incremental feed mode is selected, set these signal to “0”, then set them to “1” again.

Jog mode
 or incremental feed mode

+X

X axis move
+X is inef-
fective dur-
ing this 
period.

Axis is fed again after signals
have turned to “0” once.

3 If the control unit is reset while the feed axis and direction selection signals are set to “1” or if
a feed axis and direction signal turns to “1” while the control unit is in the reset state, the signal
cannot be validated by releasing the reset state.  After the reset state is released, set these
signals to “0”, then set them to “1” again.

Incremental feed mode
 (TEACH IN HANDLE mode)

Reset

+X

X axis move

+X is inef-
fective dur-
ing this 
period.

Axis is fed again
after signals have
turned to “0” once.

Move is stopped by
resetting

[Classification] Input signal

[Function] Selects the feedrate for jog or incremental feed.

[Operation] During jog or incremental feed, the signal specifies the feedrate that is
applied when the manual rapid traverse selection signal, RT, is 0.

Override signal
*OV1 to *OV8
<G121#0 to #3>



B–61393E–2/023. MANUAL OPERATION

142

A relationship between the state of the machine contact and the feedrate
can be selected from the two in the following table according to parameter
setting.

Machine contact state
When parameter OVRI is 0 When parameter OVRI is 1

Machine  contact  state

Override
Jog feed

Override
Jog feed

*OV1 *OV2 *OV4 *OV8

Override
value
[%]

Metric
system

[mm/min]

Inch 
system

[inch/min]

Override
value
[%]

Metric
system

[mm/min]

Inch 
system

[inch/min]

1 1 1 1 0 0 0 150 1260 50

0 1 1 1 10 20 0.08 140 790 30

1 0 1 1 20 3.2 0.12 130 500 20

0 0 1 1 30 5.0 0.2 120 320 12

1 1 0 1 40 7.9 0.3 110 200 8.0

0 1 0 1 50 12.6 0.5 100 126 5.0

1 0 0 1 60 20 0.8 90 79 3.0

0 0 0 1 70 32 1.2 80 50 2.0

1 1 1 0 80 50 2.0 70 32 1.2

0 1 1 0 90 79 3.0 60 20 0.8

1 0 1 0 100 126 5.0 50 12.6 0.5

0 0 1 0 110 200 8.0 40 7.9 0.3

1 1 0 0 120 320 12 30 5.0 0.2

0 1 0 0 130 500 20 20 3.2 0.12

1 0 0 0 140 790 30 10 2.0 0.08

0 0 0 0 150 1260 50 0 0 0

NOTE
1 Parameter OVRI is bit 4 of parameter No.003.
2 A newly selected feedrate becomes valid immediately when

the override switch is operated during axis movement.
3 Generally, this signal is issued using the rotary switch.
4 Each feedrate value in the above table includes an error of

�3%.
5 In the M series units, the feedrate for jog feed can be

changed by parameter setting.
6 This signal can be used also as an override signal for

automatic dry run.



B–61393E–2/02 3. MANUAL OPERATION

143

[Classification] Input signal

[Function] Selects a rapid traverse rate for jog feed or incremental feed.

[Operation] When the signal turns to “1”, the control unit operates as described below:

� The control unit executes the jog feed or incremental feed at a rapid
traverse rate.  The rapid traverse override is validated.

� When the signal is switched from “1” to “0” or vice versa during jog
feed or incremental feed, the feedrate is decelerated until it reaches
zero, then increased to the specified value.  During acceleration and
deceleration, the feed axis and direction selection signal can be kept
“1”.

Rapid traverse
rate

Jog feed mode
 or incremental feed mode

+X

RT

X axis move

Feedrate selected by manual
feedrate override signal

WARNING
After the power is turned on, the stroke limit function does
not work until the reference position return is completed.
During this period, the control unit ignores the RT signal, if
it is set to “1”, and keeps moving the tool at a feedrate
selected by the manual feedrate override signal.  A
parameter ISOT (No.0010#0) can be specified so that the
rapid traverse is validated before the reference position
return is completed.

[Classification] Input signal

[Function] Specifies a value of jog feedrate override in the range of 0% to 150% in
10% increments.  This signal is also effective for dry–run operation.

Manual rapid traverse
selection signal 
RT<G121#6>

Jog feedrate override
signal (M series)
JOV1 to JOV8
<G104#0 to G104#3>



B–61393E–2/023. MANUAL OPERATION

144

#7
G104

#6 #5 #4 #3
JOV8

#2
JOV4

#1
JOV2

#0
JOV1

Override (%) JOV8 JOV4 JOV2 JOV1

0 0 0 0 0

10 0 0 0 1

20 0 0 1 0

30 0 0 1 1

40 0 1 0 0

50 0 1 0 1

60 0 1 1 0

70 0 1 1 1

80 1 0 0 0

90 1 0 0 1

100 1 0 1 0

110 1 0 1 1

120 1 1 0 0

130 1 1 0 1

140 1 1 1 0

150 1 1 1 1

G116 –X +X

G117 –Z +Z (T series)

–Y +Y (M series)

G118 –3 +3 (T series)

–Z +Z (M series)

G119 –4 +4 (M series)

G121 RT *OV8 *OV4 *OV2 *OV1

#7
0008

#6 #5 #4
MFPR

#3 #2 #1 #0
(T series)

[Data type] Bit

MFPR Jog feed (manual continuous feed)
0 : Jog feed is performed at feed per minute.
1 : Jog feed is performed at feed per rotation.

Signal address

Parameter



B–61393E–2/02 3. MANUAL OPERATION

145

#7
0010

#6 #5 #4 #3 #2 #1 #0
ISOT

[Data type] Bit

ISOT Manual rapid traverse during the period from power–on time to the
completion of the reference position return.
0 : Disabled  (Jog feed is performed.)
1 : Enabled

#7
0049

#6 #5 #4
S3JOG

#3 #2 #1 #0

[Data type] Bit

S3JOG Number of axes controlled simultaneously in jog feed, manual rapid
traverse and manual reference position return
0 : 1 axis
1 : Up to 3 axes

Manual rapid traverse rate0559 – 0562

[Data type] Two–word

��������� ������ 	��� �� ���


��� ��� �����

��������� ������ 	��� �� ���

����� ���� ����

Millimeter machine 1 mm/min 30 to 24000 30 to 12000

Inch machine 0.1 inch/min 30 to 9600 30 to 4800

Rotation axis 1 deg/min 30 to 24000 30 to 12000

Set the rate of manual rapid traverse when the rapid traverse override is
100% for each axis.

NOTE
If 0 is set, the rate set in parameters 0518 to 0521 (rapid
traverse rate) is assumed.

Time constant of exponential acceleration/deceleration in jog feed0601 – 0604

[Data type] Word

[Unit of data] 1 msec

[Valid data range] 0 to 4000

Set the time constant used for exponential acceleration/deceleration in jog
feed.

[Unit of data]

[Valid data range]



B–61393E–2/023. MANUAL OPERATION

146

FL rate of exponential acceleration/deceleration in jog feed0605 – 0608

[Data type] Word

��������� ������ 	��� �� ���


��� ��� �����

��������� ������ 	��� �� ���

����� ���� ����

Millimeter machine 1 mm/min 6 to 15000 6 to 12000

Inch machine 0.1 inch/min 6 to 6000 6 to 4800

Rotation axis 1 deg/min 6 to 15000 6 to 12000

Set the lower limit (FL rate) of exponential acceleration/deceleration in
jog feed.

WARNING
For incremental feeding along an axis under diameter
programming, the tool moves in units of the diameter.

NOTE
1 Time constant and method of automatic acceleration/

deceleration for manual rapid traverse are the same as G00
in programmed command.

2 If a manual pulse generator is provided, the manual handle
feed mode is enabled instead of incremental feed mode.
However, using parameter JHD (bit 0 of parameter
No.0013) enables both manual handle and incremental
feed in the manual handle feed mode.

OPERATOR’S MANUAL
(For Machining Center)

III.3.2 JOG FEED
(For Machining Center)
(B–61404E) III.3.3 INCREMENTAL FEED

OPERATOR’S MANUAL
(For Lathe)

III.3.2 JOG FEED
(For Lathe)
(B–61394E) III.3.3 INCREMENTAL FEED

[Unit of data]

[Valid data range]

Warning

Note

Reference item



B–61393E–2/02 3. MANUAL OPERATION

147

In the manual handle feed mode, the tool can be minutely moved by
rotating the manual pulse generator.  Select the axis along which the tool
is to be moved with the handle feed axis selection signal.
The minimum distance the tool is moved when the manual pulse
generator is rotated by one graduation is equal to the least input increment.
Or the distance the tool is moved when the manual pulse generator is
rotated by one graduation can be magnified by 10 times or by one of the
two magnifications specified by parameters (No.0121 and 0699).
The handle magnifications can be selected by the manual handle feed
move distance selection signal.

The number of manual pulse generators available depends on the type of
an option used as listed below.

(M series)
– Control with one manual handle:  Up to one generator
– Control with two or three manual handles:  Up to three generators

(T series)
– Control with one manual handle:  Up to one generator
– Control with two manual handles:  Up to two generators

Which manual pulse generator moves which axis of which path depends
on the setting of manual handle feed axis select signals for each path.  For
each tool post, eight bits are reserved as manual handle feed axis select
signals.

With the 0–TTC, either of the following can be selected as single manual
pulse generator control.  The selection is made by specifying the SEPH
bit (bit 2 of parameter 0047).
(1)Single manual pulse generator control when a single manual pulse

generator is provided for the two tool posts. Set the SEPH bit to 0.

Tool post 1 (main) Tool post 2 (sub)

CNC

Manual pulse
generator 1

Tool post 1 is controlled by the HX (G116, #7) and
HZ (G117, #7) signals for tool post 1.
Tool post 2 is controlled by the HX (G1316, #7)
and HZ (G1317, #7) signals for tool post 2.

M12
(On the memory card)

3.2
MANUAL HANDLE 
FEED

General

Two–path control

Single/dual manual pulse
generator control

Single manual pulse
generator control



B–61393E–2/023. MANUAL OPERATION

148

(2)Single manual pulse generator control when a single manual pulse
generator is provided for each tool post. Set the SEPH bit to 1.

Tool post 1 (main) Tool post 2 (sub)

CNC

Manual pulse 
generator 1

Tool post 1 is controlled by
the HX (G116, #7) and HZ
(G117, #7) signals for tool
post 1.
Tool post 2 is controlled by
the HX (G1316, #7) and HZ
(G1317, #7) signals for tool
post 2.

M12
(On the 

memory card)

Manual pulse 
generator 2

M21
(Graphic card/

MPG card)

Tool post 1 (main) Tool post 2 (sub)

CNC

Manual pulse 
generator 1

Tool post 1 is controlled by the HX (G116, #7) and
HZ (G117, #7) signals for tool post 1.
Tool post 2 is controlled by the HX (G1316, #7)
and HZ (G1317, #7) signals for tool post 2.

M12
(On the 

memory card)

Manual pulse 
generator 2

M21
(Graphic card/

MPG card)

Parameter JHD (bit 0 of No.0013) enables or disables the manual  handle
feed in the JOG mode.
When the parameter JHD( bit 0 of No.0013) is set 1,both manual handle
feed and incremental feed are enabled.

Parameter TJHD (bit 6 of No.0002) enables or disables the manual handle
feed generator in the TEACH IN JOG mode.

Parameter HDLPM (No.0060#4 (M)/No.0077# (T)) specifies as follows:

SET VALUE 0: The feedrate is clamped at the rapid traverse rate
and generated pulses exceeding the rapid traverse rate are
ignored.(The distance the tool is moved may
not match the graduations on the manual pulse generator.)

Dual manual pulse
generator control

Availability of manual
handle feed in Jog mode

Availability of manual
handle feed in TEACH IN
JOG mode

A command to the MPG
exceeding rapid traverse
rate



B–61393E–2/02 3. MANUAL OPERATION

149

SET VALUE 1: The feedrate is clamped at the rapid traverse rate and
generated pulses exceeding the rapid traverse rate are not
ignored but accumulated in the CNC.
(No longer rotating the handle does not immediately stop the
tool.  The tool is moved by the pulses accumulated in the
CNC before it stops.)

Parameter HPNEG (No.0386#0 to #3) (T) switches the direction in which
the tool moves along an axis, corresponding to the direction in which the
handle of the manual pulse generator is rotated.

[Classification] Input signal

[Function] (1) When only one manual pulse generator is used
The following table lists the relationships between the manual handle
feed axis selection signal and the axis to which the signal is applied.
Any combination not listed below does not cause axis movement at
all.

Manual handle feed axis selection signal
Feed axis

H4 HZ HY HX
Feed axis

0 0 0 1 X axis

0 0 1 0 Y axis

0 1 0 0 Z axis

1 0 0 0 Fourth axis

(2)With two manual pulse generators
Parameter 0118 (number of manual pulse generators) is set to 2.

Movement direction of
an axis to the rotation of
MPG

Signal

Manual handle feed axis
selection signal
HX to H4<G116#7 to
G119#7>(M series)



B–61393E–2/023. MANUAL OPERATION

150

(2.1) Multi–handle function of type A 
(MHPGB bit (bit 0 of parameter 0019) set to 0) 
The table below indicates the relationship between the manual
handle feed axis select signals and feed axes.  No other signal
combination can cause axial movement.

Manual handle feed axis selection signal Feed axis

H4 HZ HY HX 1st handle 2nd handle

0 0 1 1 X axis Y axis

0 1 0 1 X axis Z axis

0 1 1 0 Y axis Z axis

1 0 0 1 X axis Fourth axis

1 0 1 0 Y axis Fourth axis

1 1 0 0 Z axis Fourth axis

(2.2) Multi–handle function of type B
(MHPGB bit (bit 0 of parameter 0019) set to 1)
The table below indicates the relationship between the manual
handle feed axis select signals and feed axes.

Feed axis Manual pulse generator to be used

X axis First manual pulse generator

Y axis Second manual pulse generator

Z axis Determined by signals G133, #0 and #1

Fourth axis Determined by parameter 0117

G133 Manual pulse generator corresponding to 

#1 SLHZ1 #0 SLHZ0 the Z–axis

0 0 Determined by parameter 0117

0 1 First manual pulse generator

1 0 Second manual pulse generator

(3)With three manual pulse generators
Parameter 0118 (number of manual pulse generators) is set to 3.
(3.1) Multi–handle function of type A

(MHPGB bit (bit 0 of parameter 0019) set to 0)
(3.1.1) The HSLE bit (bit 7 of parameter 0003) is set to 0.

(The axis select signals are disabled.)
The handle rotation of a manual pulse generator causes the
corresponding axial movement, irrespective of the axis select
signals.
This setting cannot be made for a four–axis system.  (If the
setting is attempted on a four–axis system, axial movement
cannot be performed.)

Feed axis

1st handle 2nd handle 3rd handle

X axis Y axis Z axis



B–61393E–2/02 3. MANUAL OPERATION

151

(3.1.2) The HSLE bit (bit 7 of parameter 0003) is set to 1. 
(The axis select signals are enabled.)
The table below indicates the relationship between the manual
handle feed axis select signals and feed axes.  No other signal
combination can cause axial movement.

Manual handle feed axis
selection signal Feed axis

H4 HZ HY HX 1st handle 2nd handle 3 handle

0 1 1 1 X axis Y axis Z axis

1 0 1 1 X axis Y axis Fourth axis

1 1 0 1 X axis Z axis Fourth axis

1 1 1 0 Y axis Z axis Fourth axis

(3.2) Multi–handle function of type B
(MHPGB bit (bit 0 of parameter 0019) set to 1)

(3.2.1) The HSLE bit (bit 7 of parameter 0003) is set to 0.
(The axis select signals are disabled.)
Handle rotation of a manual pulse generator causes the
corresponding axial movement, irrespective of the axis select
signals.
This setting cannot be made for a four–axis system.
(If the setting is attempted on a four–axis system, axial
movement cannot be performed.)

Feed axis

1st handle 2nd handle 3 handle

X axis Y axis Z axis

(3.2.2) The HSLE bit (bit 7 of parameter 0003) is set to 1. 
(The axis select signals are enabled.)
The table below indicates the relationship between the manual
handle feed axis select signals and feed axes.

Feed  axis Manual pulse generator to be used

X axis First manual pulse generator

Y axis Second manual pulse generator

Z axis Determined by signals G133, #0 and #1

Fourth axis Determined by parameter 0117

G133
Manual pulse generator 

#1 SLHZ1 #0 SLHZ0
corresponding to the Z–axis

0 0 Determined by parameter 0117

0 1 First manual pulse generator

1 0 Second manual pulse generator

1 1 Third manual pulse generator



B–61393E–2/023. MANUAL OPERATION

152

[Classification] Input signal

[Function] (1) When only one manual pulse generator is used
The following table lists the relationships between the manual handle
feed axis selection signal and the axis to which the signal is applied.
Any combination not listed below does not cause axis movement at
all.

Manual handle feed axis selection signal
Feed axis

H4 H3 HZ HX
Feed axis

0 0 0 1 X axis

0 0 1 0 Z axis

0 1 0 0 Third axis

1 0 0 0 Fourth axis

(2) With two manual pulse generators

(2.1) The HSLE bit (bit 5 of parameter 0002) is set to 0.
(The axis select signals are disabled.)
Handle rotation of a manual pulse generator causes the
corresponding axial movement, irrespective of the axis select
signals.

Feed axis

1st handle 2nd handle

X axis Z axis

(2.2) The HSLE bit (bit 5 of parameter 0002) is set to 1.
(The axis select signals are enabled.)
The table below indicates the relationship between the manual
handle feed axis select signals and feed axes.  No other signal
combination can cause axial movement.

Manual handle feed axis selection signal Feed axis

H4 H3 HZ HX 1st handle 2nd handle

0 0 1 1 X axis Z axis

0 1 0 1 X axis Third axis

0 1 1 0 Z axis Third axis

1 0 0 1 X axis Fourth axis

1 0 1 0 Z axis Fourth axis

1 1 0 0 Third axis Fourth axis

Manual handle feed axis
selection signal
HX to H4 <G116#7 to
G119#7> (T series)



B–61393E–2/02 3. MANUAL OPERATION

153

[Classification] Input signal

[Function] This signal selects the distance traveled per pulse from the manual pulse
generator during the manual handle feed or manual handle interrupt.  It
also selects the distance traveled per incremental feed step.
The table below lists the signal–to–distance correspondence.

Travel distance
select signal for
manual handle

feed

Distance traveled

MP2 MP1 Manual handlefeed
Manual handle 

interrupt Incremental feed

0 0 Least input
increment�1

Least command 
increment�1

Least input
increment�1

0 1 Least input
increment�10

Least command 
increment�10

Least input
increment�10

1 0 Least input
increment�m*1

Least command 
increment�m*1

Least input
increment�100

1 1 Least input
increment�n*1

Least command 
increment�n*1

Least input
increment�1000

*1 Scale factors m and n are specified using parameter Nos.0121 and
0699.

WARNING
1 Because the least input increment is used as the units for

manual handle and incremental feed, the same value
represents a different distance depending on whether the
metric or inch input system is used.

2 For an axis under diameter programming, the tool moves by
the diameter value.

NOTE
See Section 3.3, “Manual Handle Interrupt” for manual
handle interrputs, Section 3.1, “Jog Feed/Incremental
Feed” for incremental feed.

Manual Handle Feed
Amount Selection Signal
MP1, MP2
<G120#0, #1>(M)
<0117#0, G118#0>(T)
(Incremental Feed
Signal)



B–61393E–2/023. MANUAL OPERATION

154

#7
HXG116

#6 #5 #4 #3 #2 #1 #0

HZG117 MP1 (T series)

HY (M series)

H3G118 MP2 (T series)

HZ (M series)

H4G119

G120 MP2 MP1 (M series)

#7
0002

#6
TJHD

#5 #4 #3 #2 #1 #0

[Data type] Bit

TJHD Manual pulse generator in TEACH IN JOG mode
0 : Invalid
1 : Valid

#7
0002

#6 #5
HSLE

#4 #3 #2 #1 #0
(T series)

HSLE0003 (M series)

[Data type] Bit

HSLE When two (T series) or three (M series) manual pulse generators are
provided, the axis select signals are:
1 : Enabled.  (Handle rotation of a manual pulse generator is ignored

when the corresponding axis select signal is set to 0.)

0 : Disabled.  (Handle rotation of a manual pulse generator causes the
corresponding axial movement, irrespective of the axis select
signals.)

#7
0013

#6 #5 #4 #3 #2 #1 #0
JHD

[Data type] Bit

JHD Manual handle feed in JOG mode or incremental feed in the manual
handle feed
0 : Invalid
1 : Valid

Signal address

Parameter



B–61393E–2/02 3. MANUAL OPERATION

155

#7
0018

#6 #5 #4 #3
NAMP2

#2
NZMP2

#1
NYMP2

#0
NXMP2 (M series)

[Data type] Bit

N*MP2 Specify whether to enable the handle feed multiply value (�100) for each
axis, as follows:
1 : Disable
0 : Enable

#7
0019

#6 #5 #4 #3 #2 #1 #0
MHPGB (M series)

[Data type] Bit

MHPG B The multi–handle function of:
1 : Type B is used.
0 : Type A is used.

#7
0060

#6 #5 #4
HDLPM

#3 #2 #1 #0
(M series)

0077 HDLPM (T series)

[Data type] Bit

HDLPM When a manual handle feed exceeding the rapid traverse rate is issued,
0 : The rate is clamped at the rapid traverse rate, and the handle pulses

corresponding to the excess are ignored. (The graduations of the
manual pulse generator may not agree with the distance the machine
has traveled.)

1 : The rate is clamped at the rapid traverse rate, and the handle pulses
corresponding to the excess are not ignored, but stored in the CNC. (If
the rotation of the manual pulse generator is stopped, the machine
moves by the distance corresponding to the pulses preserved in the
CNC, then stops.)

#7
0075

#6 #5 #4 #3 #2
INHND

#1 #0

[Data type] Bit

INHND The units of movement by manual handle interrupt are:
1 : The input unit.  Acceleration/deceleration is enabled.
0 : The output unit.  Acceleration/deceleration is disabled.

0117 Manual pulse generator for the Z–axis or fourth axis. (M series)

[Data type] Byte

[Valid data range] 12 to 32

[Description] When the type B multi–handle function is used, this parameter is used to
set which manual pulse generator causes the movement on the Z–axis or
fourth axis.  Specify a two–digit decimal number.  The units digit
indicates the ordinal number of the manual pulse generator for the Z–axis,
while the tens digit indicates that for the fourth axis.



B–61393E–2/023. MANUAL OPERATION

156

Example) To set the second manual pulse generator for the Z–axis and
the third manual pulse generator for the fourth axis, specify 32.

Ordinal number of the manual pulse
generator for the Z–axis

Ordinal number of the manual pulse
generator for the fourth axis

Set value = 3  2

0118 Number of manual pulse generators used (M series)

[Data type] Byte

[Valid data range] 1, 2, or 3

This parameter sets the number of manual pulse generators.

0121 Manual handle feed magnification m

[Data type] Byte

[Unit of data] One time

[Valid data range] 1 to 127

This parameter sets the magnification when manual handle feed
movement selection signal MP2 is on.

#7
HDPG40386

#6
HDPG3

#5
HDPG2

#4
HDPG1

#3 #2 #1 #0

[Data type] Bit

HDPG* Specify whether to enable the handle feed multiply value (�1000) for
each axis, as follows:
1 : Disable
0 : Enable

#7
0386

#6 #5 #4 #3
HPNEG4

#2
HPNEG3

#1
HPNEG2

#0
HPNEG1 (T series)

[Data type] Bit

HPNEG* Axis movement direction for rotation direction of manual pulse generator
0 : Same in direction
1 : Reverse in direction

0699 Manual handle feed magnification n

[Data type] Word

[Unit of data] One time

[Valid data range] 1 to 1000

This parameter sets the magnification when manual handle feed
movement selection signals MP1 and MP2 are “1”.



B–61393E–2/02 3. MANUAL OPERATION

157

WARNING
Rotating the handle quickly with a large magnification such
as x100 moves the tool too fast or the tool may not stop
immediately after the handle is no longer rotated or the
distance the tool moves may not match the graduations on
the manual pulse generator.  The feedrate is clamped at the
rapid traverse rate.

CAUTION
Rotate the manual pulse generator at a rate of five rotations
per second or lower.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

III.3.4 MANUAL HANDLE FEED

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

III.3.4 MANUAL HANDLE FEED

Warning

Caution

Reference item



B–61393E–2/023. MANUAL OPERATION

158

Rotating the manual pulse generator during automatic operation can
increase the distance traveled by the amount corresponding to the handle
feed.  The axis to which the handle interrupt is applied is selected using
the manual handle interrupt axis select signal.
The minimum travel distance per graduation is the least command
increment.  The minimum travel distance can be increased by tenfold or
by two scale factors (parameter Nos. 0121 and 0699).  Each scale factor
can be selected using the manual handle travel distance select signal
(Section 3.2, ”Manual Handle Feed”).

[Classification] Input signal

[Function] These signals select an axis to which the manual handle interrupt is
applied.

The selected feed axis is similar to the correspondence with the manual
handle feed axis select signals.  See Section 3.2, “Manual Handle Feed.”

#7
G126

#6 #5 #4 #3
HI4

#2
HI3

#1
HIZ

#0
HIX (T series)

HI4 HIZ HIY HIX (M series)

WARNING
The travel distance by handle interruption is determined
according to the amount by which the manual pulse
generator is turned and the handle feed magnification (x1,
x10, xM, xN).
Since this movement is not accelerated or decelerated, it is
very dangerous to use a large magnification value for
handle interruption.

3.3
MANUAL HANDLE
INTERRUPTION

General

Signal

Manual Handle Interrupt
Axis Selection Signal
HIX to HI4 
<G126#0 to #3>

Signal address

Warning



B–61393E–2/02 3. MANUAL OPERATION

159

NOTE
1 No handle interrupt can be used in manual operation mode

(for example,  job feed mode, manual handle feed mode
and TEACH IN HANDLE mode).

2 Handle interruption is disabled when the machine is locked
or interlocked.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

III.4.7 MANUAL HANDLE INTERRUP-
TION

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

III.4.8 MANUAL HANDLE INTERRUP-
TION

Note

Reference item



4. REFERENCE POSITION ESTABLISHMENT B–61393E–2/02

160

4 REFERENCE POSITION ESTABLISHMENT



B–61393E–2/02 4. REFERENCE POSITION ESTABLISHMENT

161

The tool is moved in the direction specified in parameter ZM*
(No.0003#0 – #3) for each axis by turning the feed axis and direction
select signal to “1” in the manual reference position return mode, and is
returned to the reference position.

Manual reference position return is performed by using a grid method.
The reference position is based on an electrical grid, using on one–rota-
tion signals received from the position detector.

Bit 7 of parameter 0010 (APRS) can be set to automatically determine the
coordinate system at manual reference position return.  Parameters 0708
– 0711 can be set to determine the workpiece coordinate system by
assigning, upon the completion of reference position return, the value set
in a parameter to a reference point on the tool holder or the tip position
of the reference tool.

The following signals relate with the manual reference position return:

Manual Reference Position Return

Mode selection MD1, MD2, MD4

Selection of reference position return ZRN

Selection of axis to be moved
+X –X +Y –Y +Z –Z

Selection of direction to be moved
+X, –X, +Y, –Y, +Z, –Z, ...

Selection of speed to be moved ROV1, ROV2

Deceleration signal for reference
position return

*DECX, *DECY, *DECZ, ...

Completion signal for reference 
position return

ZPX, ZPY, ZPZ, ...

Reference position establishment 
signal

ZRFX, ZRFY, ZRFZ, ...

(1)Select the JOG mode or TEACH IN JOG mode, and set the manual
reference position return selection signal ZRN to “1”.

(2)Feed a target axis toward the reference position by making an
appropriate feed axis and direction selection signal (+X, –X, +Y,
–Y,…) “1”.

(3)While the feed axis and direction selection signal is “1”, rapid traverse
takes place along that axis.  Although the rapid traverse override
signals (ROV1, ROV2) are valid, the override is generally set to
100%.

4.1
MANUAL 
REFERENCE 
POSITION RETURN

General

� Automatic setting of 
coordinate system

Basic Procedure for 
Reference Position 
Return



4. REFERENCE POSITION ESTABLISHMENT B–61393E–2/02

162

(4)When the reference position is approached, a limit switch installed on
the machine is turned on, making the deceleration signal (*DECX,
*DECY, *DECZ,…) for reference position deceleration “0”.
Consequently, the feedrate is decelerated to 0, then the tool is fed at
a constant low speed (reference position return FL feedrate specified
by parameter (No.0534) setting).

(5)When the deceleration signal turns to “1” again after the limit switch
for deceleration is passed, the tool is fed with the feedrate unchanged,
then the tool stops at the first grid point (electric grid point).

(6)Upon confirmation that the current position is in the in–position area,
the reference position return end signal (ZPX, ZPY, ZPZ,…) and the
reference position establishment signal (ZRFX, ZRFY, ZRFZ,…) turn
to “1”.

Step (2) and subsequent steps are performed independently for each axis.
The number of simultaneously controlled axes is usually one, but it
becomes three by parameter S3JOG (No.0049#4).

If the feed axis direction selection signal (+X, –X, +Y, –Y,…) turns to “0”
between step (2) and (5) , the tool is stopped at once, and reference
position return is assumed to be canceled. If the signal turn to “1” again,
operation resumes from step (3) (rapid traverse).

The timing charts for the basic procedures are given below.

ZRN

+X

*DECX

Grid

ZPX

ZRFX

Feedrate

Rapid traverse rate FL rate

����������������������������������������������

JOG or TEACH IN

JOG mode



B–61393E–2/02 4. REFERENCE POSITION ESTABLISHMENT

163

When installing the deceleration limit switch for manual reference
position return, ensure that following conditions are satisfied:

*DECX

Grid

 Feedrate

Rapid traverse rate (VR)

Deceleration limit
operation position

FL rate (VL)

������������������������������������������

LDALDW

Reference position
Deceleration limit
release position

� LDW: Deceleration dog width (mm or inch)

LDW �
VR(

TR
2
� 30� TS) � 4VL � TS

60� 1000
VR: Rapid traverse (mm/min or inch/min)
TR: Rapid traverse time constant (ms)
TS: Servo time constant (ms) 
VL: FL speed for reference position return (mm/min or inch/min)

� LDA: Distance between deceleration limit switch released position
and reference position

LDA: Move amount of 1/2 revolution of motor
Since the above conditions do not include the limit switch operation
variations, this point must also be considered at installation.

To perform manual reference position return when the reference position
has not yet been established, the tool must be fed, in manual reference
position return mode, in the reference position return direction at a speed
so that the servo position error value exceeds 128.  At this time, the tool
must cross the grid line corresponding to a one–rotation signal from the
position detector.

The servo position error is calculated from the following formula:

Servo position error amount = F � 1000
60

�
1
G
�

1
U

F:  Feedrate
G:  Servo loop gain [s–1]
U:  Detection unit [�m]

(Example)

When the tool is fed at a feedrate F of 6000 mm/min with a servo loop gain
G of 30 s–1 and a detection unit U of 1 �m, the servo position error is
calculated as follows:

Servo position error� 6000� 1000
60

�
1
30

�
1
1

 =3,333

Installation conditions 
for deceleration limit 
switch

Servo position error and 
one–rotation signal



4. REFERENCE POSITION ESTABLISHMENT B–61393E–2/02

164

By reversing the formula above, the following formula gives the feedrate
F needed to set the servo position error to 128 when the servo loop gain
G is 30 s–1 and the detection unit U is 1 �m:

F = 128� 60
1000

� 30

= 230 [mm/min]

Therefore, when the servo loop gain is 30 s–1 and the detection unit is 1
�m, the tool must be fed in the reference position return direction at a
speed of at least 230 mm/min before manual reference position return.

The grid can be shifted by the distance set in parameters 0508 to 0511,
thus shifting the reference position.  The grid shift to be set in the
parameter must not exceed the reference counter capacity (parameter
No.0004#0 to #3, No.0007#0 to #3) (grid interval).

[Classification] Input signal

[Function] This signal selects manual reference position return.  Manual reference
position return is a kind of jog feed.  Therefor, to select manual reference
position return, it is required that the jog mode be selected and that the
manual reference position return selection signal be set to “1”.

[Operation] When the manual reference position return selection signal is set to “1”,
the control unit becomes as described below.

� If jog feed mode is not selected, the control unit ignores the manual
reference position return selection signal.

� If jog mode is selected, manual reference position return is enabled.

NOTE
If the ZRN status changes from “0” to “1” or “1” to “0” during
jog feed, the feedrate is decelerated to 0.  Then, to make
reference position return or jog feed, turn feed axis and
direction selection signal to “0” then set it to “1”.

Grid shift

Signal

Manual reference 
position return selection 
signal ZRN<G120#7>



B–61393E–2/02 4. REFERENCE POSITION ESTABLISHMENT

165

For details about this signal, see 3.1.2, “Feed Axis and Direction
Selection Signal”.  Here, only notes on use of reference position return are
given.

NOTE
1 The direction of reference position return is predetermined

for each axis by parameter ZM* (No.0003#0 to #3).  If the
tool is fed in the opposite direction to the predetermined
direction in manual reference position return, the
deceleration signal for reference position return turns to “0”,
and the tool is returned to the point at which the deceleration
signal turns to “1” again (that is, the point where the
deceleration limit switch would be encountered if the tool
were fed in the predetermined direction).  Then reference
position return is performed automatically in the
predetermined direction.

ZRN

–X

*DECX

Grid

ZPX

ZRFX

Feedrate

Rapid traverse rate

FL rate

����������������������������������������������

JOG mode or TEACH IN
JOG mode

Rapid 
traverse 
rate

NOTE
2 When reference position return is selected, an axis whose

reference position return end signal is already “1” or an axis
whose reference position return end signal was set “1” upon
completion of reference position return is locked, and
movement along that axis is disabled while the reference
position return selection signal (ZRN) is “1”.  To perform
movement along such an axis, ZRN must be set “0”, and the
feed axis and direction selection signal must be set “0” then
set “1” again.

Feed Axis and Direction 
Selection Signal



4. REFERENCE POSITION ESTABLISHMENT B–61393E–2/02

166

[Classification] Input signal

[Function] These signals decelerate the feedrate for manual reference position return
so that the reference position is approached at a low feedrate.  
The deceleration signals are provided for axes in a one–to–one correspon-
dence.  A number or alphabet appended to a deceleration signal represents
a controlled axis number.

	 � �������� �������� ������ ����������� ������ ��� ��� 	 ����


 � �������� �������� ������ ����������� ������ ��� ��� 
 ����

� � �������� �������� ������ ����������� ������ ��� ��� � ����

��
��

���� �

[Operation] For the operation of the control unit in response to the deceleration signal,
see the description of the basic procedure for manual reference position
return.

[Classification] Output signal

[Function] These signals report that the tool is at the refernce position on a controlled
axis.  
These siganls are provided for axes in a one–to–one corespondence.  
A number or alphabet appended to a signal represents a controlled axis
number.

	 � �������� �������� ������ ��� ������ ��� ��� 	 ����


 � �������� �������� ������ ��� ������ ��� ��� 
 ����

� � �������� �������� ������ ��� ������ ��� ��� � ����

��
��

�� �

[Output condition] These signals turn to “1” when:
� Manual reference position returns is completed, and the current

position is in the in–position area.
� Automatic reference position return (G28) is completed, and the

current position is in the in–position area.
� Reference position return check (G27) is completed, and the current

position is in the in–position area.
These signals turn to “0”when:
� The tool has moved from the reference position.
� An emergency stop is applied.
� A servo alarm is raised.

Reference position 
return deceleration 
signals *DECX to *DEC4 
<X016#5 to X019#5>

Reference position 
return completion
signals 
ZPX to ZP4 
<F148#0 to #3>



B–61393E–2/02 4. REFERENCE POSITION ESTABLISHMENT

167

[Classification] Output signal

[Function] Notify the system that the reference position has been established.

A reference position establishment signal is provided for each axis.  The
number appended to each signal name indicates the number or alphabet
of the controlled axis.

� � ��	��� �������� �������� ���	
�������� ����	�

� � ��	��� �������� �������� ���	
�������� ����	�

� � ��	��� �������� �������� ���	
�������� ����	�

��
��

��� �

[Output condition] The signals are set to 1 in the following case:

⋅ When the reference position is established after manual reference
position return

⋅ When the reference position is established using the absolute–position
detector at initial power–on

The signals are set to 0 in the following case:

⋅ When the reference position is lost

#7
X016

#6 #5
*DECX

#4 #3 #2 #1 #0

X017 *DECZ

*DECY

(T series)

(M series)

X018 *DEC3 (T series)

*DECZ (M series)

X019 *DEC4 (M series)

ZRNG120
#7 #6 #5 #4 #3 #2 #1 #0

F148 ZP4 ZP3 ZPZ ZPX (T series)

ZP4 ZPZ ZPY ZPX (M series)

#7 #6 #5 #4 #3 #2 #1 #0

F168 ZRF4 ZRF3 ZRFZ ZRFX (T series)

ZRF4 ZRFZ ZRFY ZRFX (M series)

Reference position 
establishment signal
ZRFX to ZRF4
<F168#0 to #3>

Signal address



4. REFERENCE POSITION ESTABLISHMENT B–61393E–2/02

168

#7
0001

#6 #5
DECI

#4 #3 #2 #1 #0

[Data type] Bit

DECI Deceleration signal (*DECX to *DEC4) for manual reference position
return
0 : Deceleration is applied when the signal is 0.
1 : Deceleration is applied when the signal is 1.

#7
0003

#6 #5 #4 #3
ZM4

#2
ZM3

#1
ZMZ

#0
ZMX (T series)

ZM4 ZMZ ZMY ZMX (M series)

NOTE
When this parameter is changed, turn off the power before
continuing operation.

[Data type] Bit

ZMx The direction of reference position return and the initial direction of
backlash at power–on
0 : Positive direction
1 : Negative direction

#7 #6 #5 #4 #3
Reference counter size

#2 #1 #0
0004 – 0007

[Data type] Bit

[Valid data range] 1000 to 16000

Set the size of the reference counter.
As the size of the reference counter, specify the grid interval for the
reference position return in the grid method.

Size of the reference counter =
grid interval

detection unit

Grid interval = the amount of travel per rotation of the pulse coder

NOTE
When this parameter has been set, the power must be
turned off before operation is continued.

#7
APRS0010

#6 #5 #4 #3 #2 #1 #0

[Data type] Bit

APRS Automatic setting of a coordinate system when the manual reference
position return is performed
0 : Not set automatically
1 : Set automatically

Parameter



B–61393E–2/02 4. REFERENCE POSITION ESTABLISHMENT

169

#7
0024

#6
CLCL

#5 #4 #3 #2 #1 #0
(M series)

0075 CLCL (T series)

[Data type] Bit

CLCL Local coordinate system when the manual reference position return is
performed
0 : The local coordinate system is not canceled.
1 : The local coordinate system is canceled.

#7
0041

#6 #5 #4 #3 #2
JRNJF

#1 #0
(T series)

[Data type] Bit

JRNJF The manual reference position return at JOG feedrate
0 : Not performed
1 : Performed

#7
0049

#6 #5 #4
S3JOG

#3 #2 #1 #0

[Data type] Bit

S3JOG Number of axes controlled simultaneously in JOG feed, manual rapid
traverse and manual reference position return
0 : 1 axis
1 : Up to 3 axes

#7
0063

#6 #5 #4 #3 #2 #1
PRSTIN

#0

[Data type] Bit

PRSTIN Coordinates at the reference position when a coordinate system is set
automatically
0 : Value set in parameter Nos.0708 to 0711 is used.
1 : For input in mm, the value set in parameter Nos.0708 to 0711 is used,

or for input in inches, the value set in parameter Nos.0815 to 0818 is
used.

#7
0065

#6 #5 #4 #3
PSOT

#2 #1 #0

[Data type] Bit

PSOT Checking of stored stroke limit during the time from power–on to the
manual reference position return
0 : The stroke limit is checked.
1 : The stroke limit is not checked



4. REFERENCE POSITION ESTABLISHMENT B–61393E–2/02

170

#7
0074

#6 #5 #4 #3
CFR4

#2
CFR3

#1
CFRZ

#0
CFRX (T series)

CFR4 CFRZ CFRY CFRX (M series)

[Data type] Bit

CFRx When a command specifying the movement except for G28 is issued in
automatic operation (MEM or MDI) when a return to the reference
position has not been performed since the power was turned on
0 : An alarm is not generated.
1 : An alarm is generated. (P/S alarm 224).

#7
OUTZRN0399

#6 #5 #4 #3 #2 #1 #0

[Data type] Bit

OUTZRN When manual reference position return is attempted in the halt state
during automatic operation (feed hold stop state) under any of the
conditions listed below:
0 : Manual reference position return is not performed, with P/S alarm No.

091.
1 : Manual reference position return is performed without an alarm

occurring.

< Conditions >

� When there is a remaining distance to travel.

� When an auxiliary function (miscellaneous function, spindle–speed
function, tool function) is being executed.

� When a cycle such as a dwell cycle or canned cycle is being executed.

Grid shift value0508 – 0511

[Data type] Word

[Unit of data] Detection unit

[Valid data range] 0 to �32767

A grid shift is set.

To shift the reference position, the grid can be shifted by the amount set in
this parameter.  Up to the half of maximum value counted by the reference
counter can be specified as the grid shift.

NOTE
When this parameter has been set, the power must be
turned off before operation is continued.



B–61393E–2/02 4. REFERENCE POSITION ESTABLISHMENT

171

0534 FL rate of the reference position return

[Data type] Word

��������� ������ 	��� �� ���


��� ��� �����

��������� ������ 	��� �� ���

����� ���� ����

Millimeter machine 1 mm/min 6 to 15000 6 to 12000

Inch machine 0.1 inch/min 6 to 6000 6 to 4800

Rotaion axis 1 deg/min 6 to 15000 6 to 12000

Set feedrate (FL rate) after deceleration when the reference position return
is performed.

Coordinate value of the reference position on each axis used for setting a
coordinate system automatically

0708 – 0711

[Data type] Two–word

Increment system IS–A IS–B IS–C Unit

Linear axis
(input in mm)

0.01 0.001 0.0001 mm

Linear axis
(input in inches)

0.001 0.0001 0.00001 inch

Rotation axis 0.01 0.001 0.0001 deg

[Valid data range] –99999999 to 99999999

Set the coordinate value of the reference position on each axis  to be used
for setting a coordinate system automatically.

Coordinate value of the reference position on each axis used for setting a
coordinate system automatically when input is performed in inches

0815 – 0818

[Data type] Two–word

Increment system IS–A IS–B IS–C Unit

Linear axis
(input in inches)

0.001 0.0001 0.00001 inch

[Valid data range] –99999999 to 99999999

Set the coordinate value of the reference position on each axis to be used
for setting a coordinate system automatically when input is performed in
inches.

NOTE
This parameter is valid when PRSTIN in parameter 0063#1
is set to 1.

[Valid data range]

[Unit of data]

[Unit of data]

[Unit of data]



4. REFERENCE POSITION ESTABLISHMENT B–61393E–2/02

172

������ Message Description

090 REFERENCE RETURN IN-
COMPLETE

The reference position return cannot be
performed normally because the reference
position return start point is too close to the
reference position or the speed is too slow.
Separate the start point far enough from the
reference position, or specify a sufficiently
fast speed for reference position return.
Check the program contents.

091 REFERENCE RETURN IN-
COMPLETE

Manual reference position return cannot be
performed in the feed hold state.  Perform a
manual reference position return in the au-
tomatic operation stop state or reset state.

224 RETURN TO REFERENCE
POINT

Not returned to reference point before cycle
start.  (Only when parameter No.0074#0 to
#3 are 1.
Do reference position return.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

III.3.1 MANUAL REFERENCE POSITION
RETURN

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

III.3.1 MANUAL REFERENCE POSITION
RETURN

Alarm and message

Reference item



B–61393E–2/02 4. REFERENCE POSITION ESTABLISHMENT

173

This function moves the tool near around the reference position set for
each axis in the manual continuous feed mode. Then it sets the reference
position in the reference position return mode without the deceleration
signal for reference position return by turning the feed axis and direction
select signal to “1”. With this function, the machine reference position can
be set at a given position without installing the limit switch for
deceleration for reference position return.

Also, if the absolute-position detector is provided, the set reference
position is retained after the power is turned off. In this case, when the
power is turned on again, there is no need for setting the reference position
again.

(1)Feed the tool, along the axis for which the reference position is to be
set, by manual continuous feed in the reference position return
direction.  Stop the tool near the reference position, but do not exceed
the reference position.

(2)Enter manual reference position return mode, then set 1 for the feed
axis direction selection signal (for the positive or negative direction)
for the axis.

(3)The CNC positions the tool to the nearest grid line (based on
one–rotation signals from the position detector) in the reference
position return direction specified with bits 0 to 3 (ZMx) of parameter
No.0003.  The point to which the tool is thus positioned becomes the
reference position.

(4)The CNC checks that the tool is positioned to within the in–position
area, then sets the completion signal for reference position return and
the reference position establishment signal to 1.

The timing chart for the basic elements constituting steps (2) to (4) is
shown below.

4.2
SETTING THE 
REFERENCE 
POSITION WITHOUT 
DOGS

General

����	 ���	�
��� ��� ������

��� �������	� ��������

������� ���



4. REFERENCE POSITION ESTABLISHMENT B–61393E–2/02

174

+X or –X

Grid

ZPX

ZRFX

Feedrate

�

Manual reference
position return
mode

FL rate

� ��� �

The following figure shows the positional relation between the reference
position and the point to which the tool is positioned by manual
continuous feed.

Grid

– direction

Position 
after jog feed

+ direction

Reference position for reference position return in the negative direction

Reference position for reference position return in the positive direction

A B

A

B

To set the reference position without dogs, when the reference position
has not yet been established, the tool must be fed, in manual continuous
feed mode, in the reference position return direction at such a speed that
the servo position error value exceeds 128.  The tool must cross the grid
line corresponding to a one–rotation signal from the position detector.

Section 4.1 explains how to calculate the servo position error.

To shift the reference position, the grid can be shifted by the distance set
in parameter Nos.0508 to 0511.  The grid shift to be set in the parameter
must not exceed the reference counter capacity (bits 0 to 3 of parameter
Nos.0004 to 0007).

When the feed axis and direction selection signal is set to 1 in manual
reference position return mode after the reference position has been
established, the tool is positioned to the reference position regardless of
the direction specified with the feed axis and direction selection signal.
The completion signal for reference position return is then set to 1.

Servo position error and 
one–rotation signal

Grid shift

Reference position 
return



B–61393E–2/02 4. REFERENCE POSITION ESTABLISHMENT

175

#7
0003

#6 #5 #4 #3
ZM4

#2
ZM3

#1
ZMZ

#0
ZMX (T series)

ZM4 ZMZ ZMY ZMX (M series)

NOTE
When this parameter is changed, turn off the power before
continuing operation.

[Data type] Bit

ZMx The direction of reference position return and the direction of initial
backlash at power–on
0 : Positive direction
1 : Negative direction

#7 #6 #5 #4 #3
Reference counter size

#2 #1 #0
0004 – 0007

[Data type] Bit

[Valid data range] 1000 to 16000

Set the size of the reference counter.

As the size of the reference counter, specify the grid interval for the
reference position return in the grid method.

Size of the reference counter =
grid interval

detection unit

Grid interval = the amount of travel per rotation of the pulse coder

NOTE
When this parameter has been set, the power must be
turned off before operation is continued.

#7
APRS0010

#6 #5 #4 #3 #2 #1 #0

[Data type] Bit

APRS Automatic setting of a coordinate system when the manual reference
position return is performed
0 : Not set automatically
1 : Set automatically

Parameter



4. REFERENCE POSITION ESTABLISHMENT B–61393E–2/02

176

#7
0024

#6
CLCL

#5 #4 #3 #2 #1 #0
(M series)

0075 CLCL (T series)

[Data type] Bit

CLCL Local coordinate system when the manual reference position return is
performed
0 : The local coordinate system is not canceled.
1 : The local coordinate system is canceled.

#7
0049

#6 #5 #4
S3JOG

#3 #2 #1 #0

[Data type] Bit

S3JOG Number of axes controlled simultaneously in manual continuous feed,
manual rapid traverse and manual reference position return
0 : 1 axis
1 : Up to 3 axes

#7
0063

#6 #5 #4 #3 #2 #1
PRSTIN

#0

[Data type] Bit

PRSTIN Coordinates at the reference position when a coordinate system is set
automatically
0 : Value set in parameter Nos.0708 to 0711 is used.
1 : For input in mm, the value set in parameter Nos.0708 to 0711 is used,

or for input in inches, the value set in parameter Nos.0815 to 0818 is
used.

#7
0065

#6 #5 #4 #3
PSOT

#2 #1 #0

[Data type] Bit

PSOT Checking of stored stroke limit during the time from power–on to the
manual position reference return
0 : The stroke limit is checked.
1 : The stroke limit is not checked

#7
0074

#6 #5 #4 #3
CRF4

#2
CRF3

#1
CRFZ

#0
CRFX (T series)

CRF4 CRFZ CRFY CRFX (M series)

[Data type] Bit

CRFx When a command specifying the movement except for G28 is issued in
automatic operation (AUTO or MDI) and when a return to the reference
position has not been performed since the power was turned on
0 : An alarm is not generated.
1 : An alarm is generated (P/S alarm 224).



B–61393E–2/02 4. REFERENCE POSITION ESTABLISHMENT

177

#7
0076

#6 #5 #4 #3 #2 #1
JZRN

#0

[Data type] Bit

JZRN Function setting the reference position without dog
0 : Disabled
1 : Enabled

NOTE
This function can be specified for each axis by JZRNx, bits
0 to 5 of parameter No.0391.

#7
0391

#6 #5
JZRN8

#4
JZRN7

#3
JZRN4

#2
JZRN3

#1
JZRNZ

#0
JZRNX

[Data type] Bit

JZRNx Function for setting the reference position without dogs for each axis
0 : Enabled
1 : Disabled

NOTE
When parameter JZRN (No.0076#1) is 1, these parameters
are enabled.

#7
OUTZRN0399

#6 #5 #4 #3 #2 #1 #0

[Data type] Bit

OUTZRN When manual reference position return is attempted in the halt state
during automatic operation (feed hold stop state) under any of the
conditions listed below:
0 : Manual reference position return is not performed, with P/S alarm No.

091.
1 : Manual reference position return is performed without an alarm

occurring.

< Conditions >

� When there is a remaining distance to travel.

� When a auxiliary function (miscellaneous function, spindle–speed
function, tool function) is being executed.

� When a cycle such as a dwell cycle or canned cycle is being executed.



4. REFERENCE POSITION ESTABLISHMENT B–61393E–2/02

178

Grid shift value0508 – 0511

[Data type] Word

[Unit of data] Detection unit

[Valid data range] 0 to �32767

A grid shift is set for each axis.

To shift the reference position, the grid can be shifted by the amount set in
this parameter.  Up to the half of maximum value counted by the reference
counter can be specified as the grid shift.

NOTE
When this parameter has been set, the power must be
turned off before operation is continued.

0534 FL rate of the reference position return

[Data type] Word

��������� ������ 	��� �� ���


��� ��� �����

��������� ������ 	��� �� ���

����� ���� ����

Millimeter machine 1 mm/min 6 to 15000 6 to 12000

Inch machine 0.1 inch/min 6 to 6000 6 to 4800

Rotaion axis 1 deg/min 6 to 15000 6 to 12000

Set feedrate (FL rate) after deceleration when the reference position return
is performed.

Coordinate value of the reference position used when automatic coordinate system
setting is performed

0708 – 0711

[Data type] Two–word

Increment system IS–A IS–B IS–C Unit

Linear axis
(input in mm)

0.01 0.001 0.0001 mm

Linear axis
(input in inches)

0.001 0.0001 0.00001 inch

Rotation axis 0.01 0.001 0.0001 deg

[Valid data range] –99999999 to 99999999

Set the coordinate value of the reference position on each axis  to be used
for setting a coordinate system automatically.

[Valid data range]

[Unit of data]

[Unit of data]



B–61393E–2/02 4. REFERENCE POSITION ESTABLISHMENT

179

Coordinate value of the reference position on each axis used for setting a
coordinate system automatically when input is performed in inches

0815 – 0818

[Data type] Two–word

Increment system IS–A IS–B IS–C Unit

Linear axis
(input in inches)

0.001 0.0001 0.00001 inch

[Valid data range] –99999999 to 99999999

Set the coordinate value of the reference position on each axis to be used
for setting a coordinate system automatically when input is performed in
inches.

NOTE
This parameter is valid when PRSTIN in parameter 0063#1
is set to 1.

������ Message Description

090 REFERENCE RETURN IN-
COMPLETE

The reference position return cannot be
performed normally because the reference
position return start point is too close to the
reference position or the speed is too slow.
Separate the start point far enough from the
reference position, or specify a sufficiently
fast speed for reference position return.
Check the program contents.

091 REFERENCE RETURN IN-
COMPLETE

Manual reference position return cannot be
performed in the feed hold state.  Perform a
manual reference position return in the au-
tomatic operation stop state or reset state.

224 RETURN TO REFERENCE
POINT

Not returned to reference position before
cycle start.  (Only when bits 0 to 3 of pa-
rameter No.0074 are 1).
Do reference position return.

NOTE
Alarm No. 090 is issued when G28 is specified if the
reference position has not yet be established.

[Unit of data]

Alarm and message

Note



4. REFERENCE POSITION ESTABLISHMENT B–61393E–2/02

180

When reference position return is performed using a grid method, the
reference position can be shifted by a parameter–set distance without
having to move the deceleration dog.

This function is enabled by setting bit 3 of parameter No. 0399 (SFDEC)
to 1.  When distance LSFT, shown below, is set in parameter Nos. 0508 to
0511, the reference position can be shifted.

Distance LDEC’, shown below, for the axis along which  reference position
return was last made is indicated on the diagnostic screen (No. 0956).

Direction of reference
position return

  LDEC   LSFT  
Deceleration dog

↑
Reference
positionGrid point

↑

LSFT:  Reference position shift amount
LDEC:  Distance from the position where the deceleration dog is turned
off to the first grid point (grid point when the shift amount is 0)

(1)Set the SFDEC bit (bit 3 of parameter No. 0399) to 1, and set the
reference position shift amount to 0.  Then, perform reference position
return.

  LDEC   LSFT  

Direction of reference position return

Deceleration dog

↑
Reference position

Grid point
↑ ↑

Stop position

After the deceleration dog is turned off, the tool stops when the first
grid point is reached.  Distance LDEC is indicated on the diagnostic
screen (No. 0956).

(2)Determine the distance LSFT (reference position shift amount) from
the stop position to the reference position, and set it in parameter Nos.
0508 to 0511.

This completes the adjustment of the reference position.

4.3
REFERENCE 
POSITION SHIFT
(M SERIES)

General

� How to adjust the
reference position



B–61393E–2/02 4. REFERENCE POSITION ESTABLISHMENT

181

(3)Perform reference position return again.  Then, the tool stops when it
reaches the reference position.

Direction of reference position return

Deceleration dog

↑
Reference position

(stop position)

Grid point
↑

#7
0399

#6 #5 #4 #3
SFDEC

#2 #1 #0

[Data type] Bit

SFDEC The function for shifting the reference position is
0 : Not used
1 : Used

Reference position shift0508 – 0511

[Data type] Word

[Unit of data] Detection unit

[Valid data range] –32767 to 32767

A reference position shift is set for each axis.

CAUTION
When bit 3 of parameter No. 0399, SFDEC, is set to 0, this
parameter is used for reference position shift.

NOTE
When this parameter has been set, the power must be
turned off before operation is continued.

0956 Distance from the position where the deceleration dog is turned off to
the first grid point

[Data type] Two–word

[Unit of data] 0.001 mm (metric output), 0.0001 inch (inch output)

[Valid data range] –99999999 to 99999999

Parameter

� Diagnostic display



4. REFERENCE POSITION ESTABLISHMENT B–61393E–2/02

182

NOTE
1 The reference position can be shifted only in the direction

of reference position return.
2 When the SFDEC bit (bit 3 of parameter No. 0399) is 0, only

the distance from the position where the deceleration dog
is turned off to the first grid point (the grid point after grid
shift) is indicated.

Note



B–61393E–2/02 4. REFERENCE POSITION ESTABLISHMENT

183

The G28 command positions the tool to the reference position, via the
specified intermediate point, along the specified axis, then sets the
completion signal for reference position return (see Section 4.1) to 1.

The tool moves to the intermediate point or reference position at the rapid
traverse rate.

#7
0003

#6 #5 #4 #3
ZM4

#2
ZM3

#1
ZMZ

#0
ZMX (T series)

ZM4 ZMZ ZMY ZMX (M series)

NOTE
After setting this parameter, turn the power off then on again
so that the setting will take effect.

[Data type] Bit

ZMx The direction of reference position return and the direction of initial
backlash at power–on
0 : Positive direction
1 : Negative direction

������ Message Description

405 SERVO ALARM: (ZERO
POINT RETURN FAULT)

Position control system fault.  Due to
an CNC or servo system fault in the
reference position return, there is the
possibility that reference position re-
turn could not be executed correctly.
Try again from the manual reference
position return.

4.4
REFERENCE 
POSITION RETURN

General

Parameter

Alarm and message



4. REFERENCE POSITION ESTABLISHMENT B–61393E–2/02

184

CAUTION

1 The tool is moved from the intermediate point in a sequence
similar to manual reference position return, if the G28
command is issued in the following cases:
· When the reference position has not yet been

established
· When the input increment (millimeter/inch) is changed at

a position other than the reference position
In these cases, the tool leaves the intermediate point in the
reference position return direction specified with bits 0 to 3
(ZMx) of parameter No.0003.  The intermediate point must
therefore be specified at a position from which reference
position return is possible.

2 If the G28 command is issued in the machine lock status,
the completion signal for reference position return is not set
to 1.

3 If millimeter input is selected for an inch–system machine,
the completion signal for reference position return may be
set to 1, even when the programmed tool position deviates
from the reference position by the least input increment.
This is because the least input increment is smaller than the
least command increment for the machine.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.6 REFERENCE POSITION

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.6 REFERENCE POSITION

Caution

Reference item



B–61393E–2/02 4. REFERENCE POSITION ESTABLISHMENT

185

The G30 command positions the tool to the 2nd, 3rd, or 4th reference
position, via the specified intermediate point, along the specified axis.
Then, it sets the completion signal for 2nd, 3rd, or 4th reference position
return to 1.

The 2nd, 3rd, or 4th reference position must be set in parameter Nos. 0735
to 0738 and 0780 to 0787 with coordinates in the machine coordinate
system, before issuing the G30 command.

The tool moves to the intermediate point or 2nd, 3rd, or 4th reference
position at the rapid traverse rate.

Return to the 2nd, 3rd, or 4th reference position can be performed only
after the reference position has been established.

[Classification] Output signal

[Function] The second, third, and fourth reference position end signals report the tool
is at the second, third, and fourth reference positions on a controlled axis,
respectively.  These signals are provided for axes in a one–to –one
correspondence.  A numeric character or alphabet appended to the end of
a signal represents a controlled axis number, and a numeric character
immediately following ZP represents a reference position number.

4.5
2ND REFERENCE 
POSITION 
RETURN/3RD, 4TH 
REFERENCE 
POSITION RETURN

General

Signal

Second reference 
position return completion
signals ZP2X to ZP24 
<F161#0 to #3>
Third reference position 
return completion signals
ZP3X to ZP34 <F169#0 to
#3>
Fourth reference 
position return completion
signals ZP4X to ZP44
<F169#4 to #7>



4. REFERENCE POSITION ESTABLISHMENT B–61393E–2/02

186

1 : Return end signal for the X axis

2 : Return end signal for the Y axis

3 : Return end signal for the Z axis

 :
 :

2 : Second reference position return
3 : Third reference position return
4 : Fourth reference position return

ZP 2 x

[Output condition] These signals turn to “1” when:

� The second, third, or fourth reference position return (G30) is
completed, and the current position is in the in–position area.

These signals turn to “0” when:
� The tool  moved from the reference position.
� An emergency stop is applied.
� A servo alarm is raised.

#7
F161

#6 #5 #4 #3
ZP24

ZP24

#2
ZP23

ZP2Z

#1
ZP2Z

ZP2Y

#0
ZP2X

ZP2X

(T series)

(M series)

ZP44F169

ZP44

ZP43

ZP4Z

ZP4Z

ZP4Y

ZP4X

ZP4X

ZP34

ZP34

ZP33

ZP3Z

ZP3Z

ZP3Y

ZP3X

ZP3X

(T series)

(M series)

Coordinate value of the second reference position on each axis in the
machine coordinate system

0735 to 0738

Coordinate value of the third reference position on each axis in the ma-
chine coordinate system

0780 to 0783

Coordinate value of the fourth reference position on each axis in the ma-
chine coordinate system

0784 to 0787

[Data type] Two–word

[Unit of data]

Increment system IS–A IS–B IS–C Unit

Millimeter machine 0.01 0.001 0.0001 mm

Inch input 0.001 0.0001 0.00001 inch

Rotation axis 0.01 0.001 0.0001 deg

[Valid data range] –99999999 to 99999999

Set the coordinate values of the reference positions in the machine
coordinate system.

Signal address

Parameter



B–61393E–2/02 4. REFERENCE POSITION ESTABLISHMENT

187

������ Message Description

046 ILLEGAL REFERENCE RE-
TURN COMMAND

Other than P2, P3 and P4 are commanded
for 2nd, 3rd and 4th reference position re-
turn command.
Correct program.

CAUTION
1 If the G30 command is issued in machine lock status, the

completion signal for 2nd, 3rd, or 4th reference position
return is not set to 1.

2 If millimeter input is selected for an inch–system machine,
the completion signal for 2nd, 3rd, or 4th reference position
return may be set to 1, even when the programmed tool
position deviates from the 2nd, 3rd, or 4th reference position
by the least input increment.  This is because the least input
increment is smaller than the least command increment for
the machine.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.6 REFERENCE POSITION

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.6 REFERENCE POSITION

Alarm and Message

Caution

Reference Item



4. REFERENCE POSITION ESTABLISHMENT B–61393E–2/02

188

This function sets the machine zero point by butting an axis against its
mechanical stopper while the servo motor is under torque control.
Because this butting is performed automatically, stable reference position
setting can be realized easily.  This function is optional and is enabled only
when an absolute–position detector is used.

Reference position setting is performed as follows:

1 The servo motor is subjected to torque control as specified in a
parameter in order to suppress the torque when the axis is butted
against the mechanical stopper.

2 The axis is butted against the stopper at the speed specified in a
parameter.  Whether the axis is butted against the stopper is determined
from the torque limit reach signal, sent from the servo motor.  Then,
movement is performed in the opposite direction, by an amount
specified in a parameter.

3 The axis is again butted against the mechanical stopper at the speed
specified in another parameter.  The position of the stopper is
determined from the torque limit reach signal sent from the servo
motor.  Movement in the opposite direction is made, starting from that
position, by the amount specified in a parameter.  The resulting
position is set as the machine zero point.

4 The servo motor is released from torque control.

Start reference position setting by butting the axis against the stopper, by
applying the following procedure:

(1)Set the parameters required for reference position setting by butting
the axis against the stopper.

(2)Select reference position return mode.

(3)Turn on the manual handle feed axis select signal for the target axis for
reference position setting. (Because an absolute–position detector is
provided, a reference position return request alarm, issued for the axis,
is displayed.)

(4)Turn on the cycle start (ST) signal.

Now, reference position setting by pressing axis to stopper starts, causing
the automatic operation start (OP) signal to be output.  Upon the
completion of reference position setting, the reference position return
complete (ZP) signal is output, thus disabling the OP signal.  In addition,
alarm 000 is displayed.  Repeat the above procedure for each necessary
axis.  Then, turn the power off.  The reference position is set at the next
power–up.  If the above operation is performed again, positioning to the
established reference position is done by rapid traverse.  During
positioning, however, the rapid traverse override function is disabled.

4.6
REFERENCE
POSITION SETTING
BY BUTTING AXIS
AGAINST STOPPER

General

Operation



B–61393E–2/02 4. REFERENCE POSITION ESTABLISHMENT

189

(1)The target axis of reference position setting is subjected to torque
control as specified in parameters 360 to 363 (M series) or parameters
372 to 375 (T series).

Torque control
Mechanical
stopper

(2)The target axis of reference position setting is moved in the direction
specified in bits 0 to 3 of parameter 003 at the speed (high detection
speed) specified in parameter 942 (M series) or parameter 451 (T
series).

Mechanical
stopper

⇐ High detection speed

(3)When the torque limit reach signal sent from the servo motor goes on,
the axis is assumed to be butted against the mechanical stopper.  Then,
movement is made in the opposite direction by the amount specified
in parameters 944 to 947 (M series) or parameters 459 to 462 (T series)
at the speed specified in parameters 944 to 947 (M series) or
parameters 459 to 462 (T series).

Mechanical
stopper

Retracted to a point approxi-
mating to the reference
position ⇒

(4)The axis is moved in the direction specified in bits 0 to 3 of parameter
003 at the speed (low detection speed) specified in parameter 943 (M
series) or parameter 458 (T series).

Mechanical
stopper

⇐ Low detection speed

<

Operation of reference
position setting



4. REFERENCE POSITION ESTABLISHMENT B–61393E–2/02

190

(5)When the torque limit reach signal sent from the servo motor goes on,
the axis is assumed to be butted against the mechanical stopper.
Movement is made in the opposite direction by the amount specified
in parameters 944 to 947 (M series) or parameters 459 to 462 (T series)
at the speed specified in parameters 944 to 947 (M series) or
parameters 459 to 462 (T series).  The resultant position is set as the
reference position.  The servo motor is released from torque control.

Mechanical
stopper

Reference position established (torque control released)

Retracted to the 
reference position ⇒

Speed of movement towards the mechanical stopper

Mode signal
(Input) MD1, 2, 4, ZRN

Axis select signal
(Input) H �

Automatic operation
start signal
(input) ST

Cycle operation

Automatic operation signal
(Output) OP

Reference position return
complete signal
(output) ZP �

100% 100%
Torque control Torque control (parameter setting)

Speed 0
Axial speed

Retracting speed

Torque limit reach signal

Time chart



B–61393E–2/02 4. REFERENCE POSITION ESTABLISHMENT

191

For reference position setting by butting the axis against the stopper, set
the following six parameters:

(1)Direction of reference position
#7

0003
#6 #5 #4 #3

ZM4
#2

ZMZ
#1

ZMY
#0

ZMX (M series)

0003 ZM4 ZM3 ZMZ ZMX (T series)

ZMx ZMx  On the axis for which reference position setting is performed by
butting the axis against the stopper, the reference position (mechanical
stopper) is:

1 : In the negative direction.
0 : In the positive direction.

(2)Torque limit value

0360 TRQLTX (M series)

0361 TRQLTY (M series)

0362 TRQLTZ (M series)

0363 TRQLT4 (M series)

0372 TRQLTX (T series)

0373 TRQLTZ (T series)

0374 TRQLT3 (T series)

0375 TRQLT4 (T series)

TRQLTx Set a torque limit value for each axis, to be applied for reference position
setting by butting the axis against the stopper.  The actual torque limit is
calculated as follows:

(Setting)
255

 � (Maximum torque)

When the setting is 0, torque control is not performed.
Valid data range:  0 to 255

(3)Butting speed 1

0942 STPSD1 (M series)

0451 STPSD1 (T series)

STPSD1 Set the speed at which the axis is butted against the mechanical stopper:
Setting 0 to 15000 Unit 1mm/min (Millimeter output)

0 to 6000 Unit 0.1inch/min (Inch output)

Parameter



4. REFERENCE POSITION ESTABLISHMENT B–61393E–2/02

192

(4)Butting speed 2

0943 STPSD2 (M series)

0452 STPSD2 (T series)

STPSD2 Set the speed at which the axis is butted against the mechanical stopper the
second time:
Setting 0 to 15000 Unit 1mm/min (Millimeter output)

0 to 6000 Unit 0.1inch/min (Inch output)

(5)Retracting speed (speed of travel for reference position setting)

0944 ZRNSPX (M series)

0945 ZRNSPY (M series)

0946 ZRNSPZ (M series)

0947 ZRNSP4 (M series)

0459 ZRNSPX (T series)

0460 ZRNSPZ (T series)

0461 ZRNSP3 (T series)

0462 ZRNSP4 (T series)

ZRNSPx Set the speed at which the axis is retracted after being butted against the
mechanical stopper.
Setting 0 to 15000 Unit 1mm/min (Millimeter output)

0 to 6000 Unit 0.1inch/min (Inch output)

(6)Reference position

0948 SAZRNX (M series)

0949 SAZRNY (M series)

0950 SAZRNZ (M series)

0951 SAZRN4 (M series)

0872 SAZRNX (T series)

0873 SAZRNZ (T series)

0874 SAZRN3 (T series)

0875 SAZRN4 (T series)

SAZRNx Set the position of the mechanical stopper, as viewed from the reference
position set for each axis.  The sign added to the data corresponds to the
direction of the reference position (parameter 003).  If the signs do not
match, reference position setting by butting the axis against the
mechanical stopper is not performed.
Setting 0 to � 99999999 Unit 0.001mm/min (Millimeter output)

0.0001inch (Inch output)



B–61393E–2/02 4. REFERENCE POSITION ESTABLISHMENT

193

CAUTION
If a reset occurs during reference position setting, reference
position setting is stopped.  Torque control, however,
continues to be applied to ensure safety.  To release the
current control, turn the power off.

NOTE
1 This function is disabled for the fifth/sixth axis or for the

seventh/eighth axis.
2 Two axes cannot be specified simultaneously.
3 Normal manual reference position return can be performed

for some other axes.
4 The specified torque limit value must be higher than the

traveling torque corresponding to the detection speed of the
mechanical stopper.
If the torque limit value is not greater than the traveling
torque, the torque reach signal is enabled before the axis
reaches the stopper.  The position at which the torque reach
signal goes on is assumed to be the position of the
mechanical stopper.

Caution

Note



5. AUTOMATIC OPERATION B–61393E–2/02

194

5 AUTOMATIC OPERATION



B–61393E–2/02 5. AUTOMATIC OPERATION

195

When automatic operation start signal ST is set to 1 then 0 in which
memory (AUTO) mode or manual data input (MDI) mode, the CNC
enters the automatic operation start state then starts operating.

Signal ST, however, is ignored in the following cases:

1. When the mode is other than AUTO or MDI

2. When the feed hold signal (*SP) is set to 0

3. When the emergency stop signal (*ESP) is set to 0

4. When the external reset signal (ERS) is set to 1

5. When the reset and rewind signal (RRW) is set to 1

6. When MDI RESET key is pressed

7. When the CNC is in the alarm state

8. When the CNC is in the NOT READY state

9. When automatic operation is starting

10.When the program restart signal (SRN) is 1

11.When the CNC is searching for a sequence number.

The CNC enters the feed hold state and stops operation in the following
cases during automatic operation:

1. When the feed hold signal (*SP) is set to 0

2. When the mode is changed to manual handle feed (HNDL),
incremental feed (STEP), or jog feed (JOG).

The CNC enters the automatic operation stop state and stops operating in
the following cases during automatic operation:

1. When a single command block is completed during a single block
operation

2. When operation in manual data input (MDI) mode has been completed

3. When an alarm occurs in the CNC

4. When a single command block is completed after the mode is changed
to manual data input mode (MDI) or memory edit (EDIT)

The CNC enters the reset state and stops operating in the following cases
during automatic operation:

1. When the emergency stop signal (*ESP) is set to 0

2. When the external reset signal (ERS) is set to 1

3. When the reset and rewind signal (RRW) is set to 1

4. When MDI RESET key is pressed

The state of the CNC (automatic operation start, feed hold , automatic
operation stop, or reset) is posted to the PMC with status output signals
OP, SPL, and STL.  See the table in the “Signals” section for details.

5.1
CYCLE START/FEED 
HOLD

General

� Start of automatic
operation (cycle start)



5. AUTOMATIC OPERATION B–61393E–2/02

196

When the feed hold signal *SP is set to 0 during automatic operation, the
CNC enters the feed hold state and stops operation.  At the same time,
cycle start lamp signal STL is set to 0 and feed hold lamp signal SPL is
set to 1.  Re–setting signal *SP to 1 in itself will not restart automatic
operation.  To restart automatic operation, first set signal *SP to 1, then
set signal ST to 1 and then to 0.

STL

ST

SPL

ST

STL

*SP *SP

This signal is ignored when the
feed hold signal is set to 0.

ST

Fig. 5.1 Time Chart for Automatic Operation

When signal *SP is set to 0 during the execution of a block containing
only the M, S or T function, signal STL is immediately set to 0, signal SPL
is set to 1, and the CNC enters the feed hold state.  If the FIN signal is
subsequently sent from the PMC, the CNC executes processing up until
the end of the block that has been halted.  Upon the completion of that
block, signal SPL is set to 0 (signal STL remains set to 0) and the CNC
enters the automatic operation stop state.

(a) During threading
When signal *SP is set to 0 during threading, the CNC enters the feed
hold state after executing a non–threading block after the threading
blocks.
When signal *SP is set to 0 during threading with the G92 command
(threading cycle), signal SPL is immediately set to 1 but operation
continues up until the end of the retraction block following threading.
When signal *SP is set to 0 during threading with the G32 command,
signal SPL is immediately set to 1 but operation continues until the
end of a non–threading block following the threading blocks.
(Stopping feeding during threading is dangerous because the amount
of cutting will increase.)

(b) During tapping in a cannec cycle (G84)
When signal *SP is set to 0 during tapping in a canned cycle (G84),
signal SPL is immediately set to 1 but operation continues until the
tool returns to the initial level or R point level after the completion
of tapping.

(c) When a macro instruction is being executed
Operation stops after the currently executing macro instruction has
been completed.

� Halt of automatic
operation (feed hold)



B–61393E–2/02 5. AUTOMATIC OPERATION

197

[Classification] Input signal

[Function] Starts automatic operation.

[Operation] When signal ST is set to 1 then 0 in memory (AUTO) mode or manual data
input (MDI) mode, the CNC enters the cycle start state and starts
operation.

⋅⋅⋅
Start

Signal ST “1”
“0”

Automatic operation

AUTO or MDI mode

[Classification] Input signal

[Function] Halts automatic operation.

[Operation] When signal *SP is set to 0 during automatic operation, the CNC enters
the feed hold state and stops operation.  Automatic operation cannot be
started when signal *SP is set to 0.

Feed hold
 Start

Signal ST “1”
“0”

Automatic operation

AUTO or MDI mode

Signal *SP “1”
“0”

 Start

Ignored

[Classification] Output signal

[Function] Notifies the PMC that automatic operation is in progress.

[Output condition] This signal is set to 1 or 0, according to the state of the CNC, as listed in
Table 5.1.

Signal

Cycle start signal 
ST<G120#2>

Feed hold signal 
*SP<G121#5>

Automatic operation
signal 
OP<F148#7>



5. AUTOMATIC OPERATION B–61393E–2/02

198

[Classification] Output signal

[Function] Notifies the PMC that automatic operation start is entered.

[Output condition] This signal is set to 1 or 0, according to the state of the CNC, as listed in
Table 5.1.

[Classification] Output signal

[Function] Notifies the PMC that feed hold state is entered.

[Output condition] This signal is set to 1 or 0, according to the state of the CNC, as listed in
Table 5.1.

Table 5.1 Status of Operation

Signal name

State of 
the operation

Cycle start
lamp
STL

Feed hold
lamp
SPL

Automatic op-
eration lamp

OP

Cycle start state 1 0 1

Feed hold state 0 1 1

Automatic operation stop
state

0 0 1

Reset state 0 0 0

· When the reference position has not yet been established
The CNC is executing memory operation or manual data input
operation commands.

� Feed hold state
The CNC is not executing memory operation nor manual data input op-
eration commands while the commands to be executed remain.

� Automatic operation stop state
Memory operation or manual data input operation has been completed
and stopped.

� Reset state
The automatic operation has been forcibly terminated.

NOTE
If the sequence number search is performed through MDI
panel during Memory mode (AUTO), the signal op turns to
“1”.

Cycle start lamp signal
STL<F148#5>

Feed hold lamp signal
SPL<F148#4>



B–61393E–2/02 5. AUTOMATIC OPERATION

199

[Classification] Output signal

[Function] Informs when the [START] button on the MDI panel is pressed.

[Output condition] The signal becomes 1 when:
� The [START] button on the MDI panel is pressed.

The signal is 0 when:

� The [START] button on the MDI panel is not pressed.

#7
G120

#6 #5 #4 #3 #2
ST

#1 #0

G121 *SP

OPF148 STL SPL
#7 #6 #5 #4 #3 #2 #1 #0

F150 DST

#7
0001

#6 #5 #4 #3 #2
DCS

#1 #0

[Data type] Bit

DCS Specifies how the [START] button on the MDI panel is used, as follows:
1 : The signal from the button does not passes the machine, so that

manual data input is started directly by the NC.
0 : The signal from the button is sent to the machine as the manual data

input start signal (DST, bit 5 of F150).  If the machine returns a start
signal, manual data input begins.

During automatic operation, the machine may sometimes show no
movement while no alarm is detected.  In that case, the CNC may be
performing processing or waiting for the occurrence of an event.  The state
of the CNC can be obtained using the CNC self–diagnosis function
(diagnosis numbers 0700 and 0701).

Detailed information on the automatic operation stop or feed hold state
can also be displayed (diagnosis number 0712).

Manual data input start
signal
DST<F150#5>

Signal address

Parameter

Alarm and message

� Self–diagnosis
information



5. AUTOMATIC OPERATION B–61393E–2/02

200

OPERATOR’S MANUAL
(For Machining Center)

III.4.1 MEMORY OPERATION
(For Machining Center)
(B–61404E) III.4.2 MDI OPERATION

III.7.2 CHECKING BY SELF–DIAGNOSTIC
SCREEN

OPERATOR’S MANUAL
(For Lathe)

III.4.1 MEMORY OPERATION
(For Lathe)
(B–61394E) III.4.2 MDI OPERATION

III.7.2 CHECKING BY SELF–DIAGNOSTIC
SCREEN

Reference item



B–61393E–2/02 5. AUTOMATIC OPERATION

201

The CNC is reset and enters the reset state in the following cases:

1. When the emergency stop signal (*ESP) is set to 0

2. When the external reset signal (ERS) is set to 1

3. When the reset and rewind signal (RRW) is set to 1

4. When MDI RESET key is pressed

When the CNC is reset, the resetting signal (RST) is output to the PMC.
The resetting signal (RST) is set to 0 when the resetting signal output
time, set with parameter No.0252, has elapsed after the above conditions
have been released.

RST signal output time = Treset (Reset processing time) + (parameter
setting value) � 16 msec.

Reset  Pro-
cessing

Reset ON

RST signal

Treset (Parameter
setting value)
� 16 msec

CAUTION
Treset requires at least 16 msec.  This time will be longer on
optional configurations.

When the CNC is reset during automatic operation, automatic operation
is stopped and tool movement along the controlled axis is decelerated and
stopped(*1).  When the CNC is reset during the execution of the M, S, or
T function, signal MF, SF, or TF is set to 0 within 100 ms.

Tool movement along the controlled axis is also decelerated and
stopped(*1) in jog feed (JOG), manual handle feed (HNDL), or
incremental feed (STEP).

CAUTION
(*1) When the emergency stop signal (*ESP) is set to 0, the

tool is stopped by an emergency stop.

Bit 6 (CLER) of parameter No.0045 is used to select whether the
CNC internal data (such as modal G codes) is cleared or reset when
the CNC is reset.  Refer to the Appendix E, ”Status when turning on
power, when cleared, and when reset” in the Operator’s manual for
the state of the internal data when cleared or reset.

5.2
RESET AND REWIND

General



5. AUTOMATIC OPERATION B–61393E–2/02

202

The following parameters are also used to select how to handle
processing for CNC data when the CNC is reset.

� Bit 7 (MBCLR) of parameter No.0057
Whether programs created in MDI mode are erased or stored

� Bit 6 (COMC) of parameter No.0040
Whether custom macro variables #100 to #149 are cleared or stored

� Bit 7 (LOCC) of parameter No.0040
Whether custom macro local variables #1 to #33 are cleared or
stored

When the reset & rewind signal (RRW) is set to 1, reset is performed and
the following rewinding operation is also performed.

1. In automatic operation mode, if the DNC operation selection signal
(DNCI) is 1, and the selected input/output unit is connected with a
portable tape reader, the tape on the reader is rewound.

While the tape reader is being rewound, the rewinding–in–progress
signal (RWD) is output.  This signal goes 0 when the tape reader has
been rewound.

2. In cases other than case 1, the head of the selected main program is
searched for.  Setting RWDOUT, bit 2 of parameter no. 0045,
determines whether the rewinding–in–progress signal is output.

When RWDOUT is set to 1:

The rewinding–in–progress signal is output.  It is set to 1, then set to
0 after about 100 ms.  Since searching for the main program in memory
takes little time, when the rewinding–in–progress signal (RWD) is set
to 0, the main program has already been searched for.

[Classification] Input signal

[Function] Reset the CNC.

[Operation] Turning the signal ERS to 1 resets the CNC and enters the reset state.
While the CNC is reset, the resetting signal RST turns to 1.

[Classification] Input signal

[Function] CNC is reset and a program under an automatic operation is rewound.

[Operation] As described in the item, “RESET AND REWIND”.

� ����	 � ��
���

Signal

External reset signal
ERS<G121#7>

Reset & rewind signal
RRW<G104#6>



B–61393E–2/02 5. AUTOMATIC OPERATION

203

[Classification] Output signal

[Function] Notifies the PMC that the CNC is being reset.  This signal is used for reset
processing on the PMC.

[Output condition] This signal is set to 1 in the following cases:
1.  When the emergency stop signal (*ESP) is set to 0
2.  When the external reset signal (ERS) is set to 1
3.  When the reset & rewind signal (RRW) is set to 1

4.  When RESET  key is pressed

This signal is set to 0 in the following case:
When the resetting signal output time, set with parameter No.0252, has
elapsed after the above conditions have been released and the CNC is reset

[Classification] Output signal

[Function] Notifies the PMC that the CNC is being rewound.

[Output condition] As described in the item, “RESET AND REWIND”.

#7
G104

#6
RRW

#5 #4 #3 #2 #1 #0

ERSG121

F149 RST
#7 #6 #5 #4 #3 #2 #1 #0

F164 RWD

#7
LOCC0040

#6
COMC

#5 #4 #3 #2 #1 #0

[Data type] Bit

COMC Custom macro’s common variables Nos. 100 to 149
0 : Cleared to “vacant” by reset
1 : Not cleared by reset

LOCC Custom macro’s local variables Nos. 1 to 33
0 : Cleared to “vacant” by reset
1 : Not cleared by reset

Resetting signal 
RST<F149#1>

Rewinding signal 
RWD<F164#6>

Signal address

Parameter



5. AUTOMATIC OPERATION B–61393E–2/02

204

#7
0045

#6
CLER

#5 #4 #3 #2
RWDOUT

#1 #0

[Data type] Bit

RWDOUT RWD signal indicating that rewinding is in progress
0 : Output only when the tape reader is being rewound by the reset and

rewind signal RRW
1 : Output when the tape reader is being rewound or a program in

memory is being rewound by the reset and rewind signal RRW

CLER Reset key on the CRT/MDI panel, external reset signal, reset and rewind
signal, and emergency stop signal
0 : Cause reset state.
1 : Cause clear state.

#7
MBCLR0057

#6 #5 #4 #3 #2 #1 #0

[Data type] Bit

MBCLR Whether a program prepared in the MDI mode is cleared by reset
0 : Not deleted
1 : deleted

0252 Output time of reset signal RST

[Data type] Byte

[Unit of data] 16 ms

[Valid data range] 0 to 255

To extend the output time of reset signal RST, the time to be added is
specified in this parameter.
RST signal output time = time required for reset + parameter value�
16 ms

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

APPENDIX E STATUS WHEN TURNING
POWER ON, WHEN CLEAR
AND WHEN RESET

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

APPENDIX E STATUS WHEN TURNING
POWER ON, WHEN CLEAR
AND WHEN RESET

Reference item



B–61393E–2/02 5. AUTOMATIC OPERATION

205

Before machining is started, the automatic running check can be
executed.  It checks whether the created program can operate the machine
as desired.  This check can be accomplished by running the machine
actually or viewing the position display change without running the
machine.

The change of the position display can be monitored without moving the
machine.
When all–axis machine lock signal MLK is set to 1, output pulses (move
commands) to the servo motors are stopped in manual or automatic
operation.  The commands are distributed, however, updating the
absolute and relative coordinates.  The operator can therefore check if the
commands are correct by monitoring the position display.

[Classification] Input signal

[Function] Places all controlled axes in the machine lock state.

[Operation] When this signal is set to 1, pulses (move commands) are not output to
the servo motors for all axes in manual or automatic operation.

#7
G117

#6 #5 #4 #3 #2 #1
MLK

#0

5.3
TESTING A 
PROGRAM

5.3.1
Machine Lock

General

Signal

All–axis machine lock
signal 
MLK <G117#1>

Signal address



5. AUTOMATIC OPERATION B–61393E–2/02

206

NOTE
1 Automatic operation in the machine lock state (M, S,

and T commands)
Machine lock applies only to move commands along
controlled axes.  Updating modal G codes or setting a
coordinate system is performed normally.  M, S, and T
commands are also performed normally.

2 Reference position return in the machine lock state
(G27, G28, and G30)
When the reference position return command (G28), or 2nd
to 4th reference position return command (G30), is
executed for an axis in the machine lock state, distribution
and position updating are performed.  The tool, however, is
not returned to the reference position.  The reference
position return completion signals (ZPX to ZP4) are not
output.
The reference position return check command (G27) is
ignored in the machine lock state.

3 Turning on/off the machine lock signal during
movement along an axis
When the machine lock signal for an axis is set to 1 during
movement along the axis that is not in the machine lock
state, the axis is immediately placed in the machine lock
state and output pulses (move commands) to the servo
motor are stopped.  The tool is decelerated and stopped
with the automatic acceleration/deceleration function.
On the other hand, when the machine lock signal for an axis
is set to 0 during distribution of the move command along
the axis in the machine lock state, pulse (move command)
output for the axis is immediately restarted.  The tool is
accelerated with the automatic acceleration/deceleration
function.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

III.5.1 MACHINE LOCK AND AUXILIARY
FUNCTION LOCK

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

III.5.1 MACHINE LOCK AND AUXILIARY
FUNCTION LOCK

Note

Reference item



B–61393E–2/02 5. AUTOMATIC OPERATION

207

Dry run is valid only for automatic operation.
The tool is moved at a constant feedrate(*1) regardless of the feedrate
specified in the program.  This function is used, for example, to check the
movement of the tool without a workpiece.

CAUTION
This feedrate depends on the specified parameters, the
manual rapid traverse switching signal (RT), manual
feedrate override signals (*OV1 to *OV8), and whether the
command block specifies rapid traverse or cutting feed, as
listed in the table below.

Manual rapid
traverse

Program command

switching 
signal (RT)

Rapid traverse Feed

1 Rapid traverse rate Maximum value on the
manual feed feedrate dial

0 Feedrate determined using
the override dial, or rapid tra-
verse rate (*1)

Feedrate determined using
the override dial

Rapid traverse rate Setting by parameter Nos.0518 to 0521. . . . . . . . 

*1:If parameter RDRN (bit 6 of parameter No.0001) is 1, the feedrate
determined using the override dial is used.  If the parameter is 0, the
rapid traverse rate is used.

[Classification] Input signal

[Function] Enables dry run.

[Operation] When this signal is set to 1, the tool is moved at the feedrate specified for
dry run.
When this signal is set to 0, the tool is moved normally.

CAUTION
When the dry run signal is changed from 0 to 1 or 1 to 0
during the movement of the tool, the feedrate of the tool is
first decelerated to 0 before being accelerated to the
specified feedrate.

5.3.2
Dry Run

General

Signal

Dry run signal 
DRN<G118#7>



5. AUTOMATIC OPERATION B–61393E–2/02

208

#7
DRNG118

#6 #5 #4 #3 #2 #1 #0

#7
0001

#6
RDRN

#5 #4 #3 #2 #1 #0

[Data type] Bit

RDRN Dry run for rapid traverse command
0 : Disabled
1 : Enabled

#7
0065

#6 #5
TAPDRN

#4 #3 #2 #1 #0
(M series)

[Data type] Bit

TAPDRN Dry run during tapping (tapping cycle G74 or G84; rigid tapping)
0 : Enabled
1 : Disabled

Rapid traverse rate0518 – 0521

[Data type] Word

��������� ������ 	��� �� ���


��� ��� �����

��������� ������ 	��� �� ���

����� ���� ����

Millimeter machine 1 mm/min 30 to 24000 6 to 12000

Inch machine 0.1 inch/min 30 to 9600 6 to 4800

Rotation axis 1 deg/min 30 to 24000 30 to 12000

Set the rapid traverse rate when the rapid traverse override is 100% for
each axis.

0527 Maximum cutting feedrate for all axes

[Data type] Word

��������� ������ 	��� �� ���


��� ��� �����

��������� ������ 	��� �� ���

����� ���� ����

Millimeter machine 1 mm/min 6 to 15000 6 to 12000

Inch machine 0.1 inch/min 6 to 6000 6 to 4800

Specify the maximum cutting feedrate.

A feedrate in the tangential direction is clamped in cutting feed so that it
does not exceed the feedrate specified in this parameter.

Signal address

Parameter

[Unit of data]

[Valid data range]

[Unit of data]

[Valid data range]



B–61393E–2/02 5. AUTOMATIC OPERATION

209

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

III.5.4 DRY RUN

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

III.5.4 DRY RUN

Single block operation is valid only for automatic operation. 
When the single block signal (SBK) is set to 1 during automatic operation,
the CNC enters the automatic operation stop state after executing the
current block.  In subsequent automatic operation, the CNC enters the
automatic operation stop state after executing each block in the program.
When the single block signal (SBK) is set to 0, normal automatic
operation is restored.

Single block operation during the execution of custom macro statements
depends on the setting of bit 5 (SBKM) of parameter No.0011, as follows:

SBKM = 0: Operation does not stop in the custom macro statements
but stops once the next NC command has been executed.

SBKM = 1: Operation stops after each block in the custom macro
statements.

When the CNC is in the automatic operation stop state during single block
operation, the mode can be changed to manual data input (MDI), manual
handle feed (HND), incremental feed (STEP), or jog feed (JOG), by using
the mode select signals (MD1, MD2, and MD4).

[Classification] Input signal

[Function] Enables single block operation.

[Operation] When this signal is set to 1, single block operation is performed.  When
this signal is set to 0, normal operation is performed.

Reference item

5.3.3
Single Block

General

Signal

Single block signal 
SBK<G116#1>



5. AUTOMATIC OPERATION B–61393E–2/02

210

#7
G116

#6 #5 #4 #3 #2 #1
SBK

#0

#7
0011

#6 #5
SBKM

#4 #3 #2 #1 #0

[Data type] Bit

SBKM Custom macro statement
0 : Not  stop the single block
1 : Stops the single block

CAUTION
Operation in canned cycle 
When the SBK signal turns to “1” during canned cycle
operation, the operation stops at each positioning,
approach, drilling and retreat instead of the end of the block.
The SPL signal turns to “1” while the STL signal turns to “0”,
showing that the end of the block has not been reached.
When the execution of one block is completed, the STL and
SPL signals turn to “0” and the operation is stopped.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

III.5.5 SINGLE BLOCK

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

III.5.5 SINGLE BLOCK

Signal address

Parameter

Caution

Reference item



B–61393E–2/02 5. AUTOMATIC OPERATION

211

This function selects whether the movement of the tool with manual
operation (such as jog feed and manual handle feed) is counted for
calculating the current position in the workpiece coordinate system.

When manual operation interrupts during automatic operation:

i) At the end of the block where manual operation interrupts, the tool
position moves in parallel by the manual move amount, regardless of
the absolute or incremental command.

ii) In subsequent blocks, the parallel-moved tool position remains
unchanged until an absolute command block appears.  Therefore, if all
blocks are programmed by incremental commands, the tool keeps the
parallel-moved position until machining ends.

In case of  incremental commands

Manual 
intervention

Programmed tool path The tool returns to the programmed
tool path when an absolute command
block is encountered.

End
point

Fig. 5.4 (a) Manual absolute ON

CAUTION
If the machining end position has shifted by the manual
move amount because all blocks are programmed by
incremental commands only, the present position is
displayed shifted by the manual move amount.

The manual move amount is not counted to the present position on the
workpiece coordinate system. The current position display on the CRT
includes the manual move amount. The display is reset to the initial value
(before manual operation) when the control is reset, when operation in the
automatic operation mode, or MDI mode is started after the manual
operation.

5.4
MANUAL ABSOLUTE 
ON/OFF

General

When manual absolute
turns on (manual
absolute signal *ABSM
=0)

When manual absolute
turns off (manual
absolute signal
*ABSM=1)



5. AUTOMATIC OPERATION B–61393E–2/02

212

During automatic operation,  if manual intervention of a block interrupts,
the tool position moves in parallel by the manual move amount,
regardless of the absolute or incremental command at the end point of that
block, as well as at the end point of subsequent blocks.

End
pointProgrammed tool path

Manual in-
tervention

Actual tool path

(The tool moves along this path, regardless of
absolute command or incremental command)

The actual end point
always moves in parallel

Fig. 5.4 (b) Manual absolute OFF

The present position display at the finish of the operation shows an end
point value on the program as if manual intervention had not been
executed. However, the tool position moves in parallel.

[Classification] Input signal

[Function] Turns the manual absolute function on or off.

[Operation] When this signal is set to 1, the control unit operates as follows:
–  Turns off the manual absolute function.

When this signal is set to 0, the control unit operates as follows:
–  Turns on the manual absolute function.

#7
G127

#6 #5 #4 #3 #2
*ABSM

#1 #0

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

III.3.5 MANUAL ABSOLUTE ON AND
OFF

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

III.3.5 MANUAL ABSOLUTE ON AND
OFF

Signal

Manual absolute signal
*ABSM<G127#2>

Signal address

Reference item



B–61393E–2/02 5. AUTOMATIC OPERATION

213

When a slash followed by a number (/n, where n = 1 to 9) is specified at
the head of a block, and optional block skip signals BDT1 to BDT9 are
set to 1 during automatic operation, the information contained in the block
for which /n, corresponding to signal BDTn, is specified is ignored (from
/n to the end of the block).

(Example) /2 N123 X100. Y200. ;

Input signal Code specified at teh head of a block

BDT1 / or /1  (Note)

BDT2 /2

BDT3 /3

BDT4 /4

BDT5 /5

BDT6 /6

BDT7 /7

BDT8 /8

BDT9 /9

NOTE
Number 1 for /1 can be omitted.  However, when two or more
optional block skip switches are used in one block, number
1 for /1 cannot be omitted.
(Example)

//3 N123 X100. Y200. ; — Invalid
/1 /3 N123 X100. Y200. ; — Valid

The following figures show the relationship between the timing, when
optional block skip signals (BDT1 to BDT9) are set to 1, and the ignored
information:

1. When BDTn is set to 1 before the CNC starts reading a block
containing /n, the block is ignored.

BDTn ”1”
”0”

Reading by CNC � ...; /n N123 X100.  Y200.  ; N234 ....
ÄÄÄÄ
ÄÄÄÄ

 Ignored

5.5
OPTIONAL BLOCK 
SKIP/ADDITION OF 
OPTIONAL BLOCK 
SKIP

General



5. AUTOMATIC OPERATION B–61393E–2/02

214

2. When BDTn is set to 1 while the CNC is reading a block containing
/n, the block is not ignored.

BDTn ”1”
”0”

Reading by CNC �  ...; /n N123 X100.  Y200.  ; N234 ....

Not ignored

3. When BDTn, currently set to 1, is set to 0 while the CNC is reading
a block containing /n, the block is ignored.

BDTn ”1”
”0”

Reading by CNC � ...; /n N123 X100.  Y200.  ; N234 ....

ÄÄÄÄ Ignored

4. When two or more optional block skip switches are specified in a block
and BDTn, corresponding to one of them, is set to 1, the block is
ignored.

BDT3 ”1”
”0”

Reading by CNC � ...;/1 /3 /5 N123 X100.  Y200.  ; N234 ....

ÄÄÄÄÄ
ÄÄÄÄÄ

 Ignored

[Classification] Input signal

[Function] Select whether a block containing /n is to be executed or ignored.

[Operation] During automatic operation, a block containing /n in the program is
ignored when the corresponding optional block skip signal is set to 1.  It
is executed normally when the signal is set to 0.

Signal

Optional block skip
signals 
BDT1 <G116#0> 
BDT2 to BDT9 <G141>



B–61393E–2/02 5. AUTOMATIC OPERATION

215

#7 #6 #5 #4 #3 #2 #1 #0

G116

G141

BDT1

BDT9 BDT8 BDT7 BDT6 BDT5 BDT4 BDT3 BDT2

NOTE
1 This function is ignored when programs are loaded into

memory. Blocks containing /n are also stored in memory,
regardless of how the optional block skip signal is set.
Programs stored in memory can be output, regardless of
how the optional block skip signals are set.
Optional block skip is effective even during sequence
number search operation.

2 Position of a slash
A slash (/) must be specified at the head of a block. If a slash
is placed elsewhere, the information from the slash to
immediately before the EOB code is ignored.

3 TV and TH check
When an optional block skip signal is “1”. TH and TV checks
are made for the skipped portions in the same way as when
the optional block skip switch is “0”.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.12.2 PROGRAM SECTION CONFIGU-
RATION

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.12.2 PROGRAM SECTION CONFIGU-
RATION

Signal address

Note

Reference item



5. AUTOMATIC OPERATION B–61393E–2/02

216

During program execution, this function causes a single block stop right
after a block with a specified sequence number is executed.

To use this function, first specify the program number (1 to 9999) of a
program that contains a sequence number where operation is to be stopped
and the sequence number on the setting data screen:
With this setting, a single block stop occurs after the execution of the
block with the specified sequence number during automatic operation.

Setting data

– SEQUENCE STOP (PROGRAM NO.)
Specify the program number (1 to 9999) of a program to which a
sequence to be stopped belongs.

– SEQUENCE STOP (SEQUENCE NO.)
Specify the sequence number (1 to 99999) of a sequence to be stopped.

NOTE
After the specified sequence number is found during the
execution of the program, the sequence number set for
sequence number compensation and stop is decremented
by one.  When the power is turned on, the setting of the
sequence number is 0.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

III.11.5.4 Sequence Number Comparison and
Stop

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

III.11.5.2 Sequence Number Comparison and
Stop

5.6
SEQUENCE NUMBER
COMPARISON AND 
STOP

General

Setting data

Note

Reference item



B–61393E–2/02 5. AUTOMATIC OPERATION

217

A program may be restarted at a block by specifying the sequence number
of the block, after automatic operation is stopped because of a broken tool
or for holidays.  This function can also be used as a high–speed program
check function.

There are two types of restart methods.

P type:  Restart after a tool is broken down
Q type:  Restart after holidays

[Classification] Input signal

[Function] Selects program restart.

[Operation] When the program restart signal is set to logical 1 to search for the
sequence number of the block to be restarted, the CRT screen changes to
the program restart screen.  When the program restart signal is set to
logical 0, and automatic operation is activated, the tool is moved back to
the machining restart point at dry run speed along the axes one by one in
the sequence specified in parameter Nos. 124 to 127.  When the tool is set
to the restart point, machining restarts.

[Classification] Output signal

[Function] Notifies that return operation at program restart is in progress.

[Output condition] The signal is output during return operation at program restart.

#7 #6 #5 #4 #3 #2 #1 #0

G003 SRN

F188 SRNMV

5.7
PROGRAM RESTART

General

Signal

Program restart signal
SRN<G103#0>

Program restart under
way signal
SRNMV<F188#4>

Signal address



5. AUTOMATIC OPERATION B–61393E–2/02

218

Movement sequence to program restart position0124–0127

[Data type] Byte

[Valid data range] 1  to 4

This parameter sets the axis sequence when the machine moves to the
restart point by dry run after a program is restarted.

[Example]
The machine moves to the restart point in the order of the  fourth, first,
second, and third axes one at a time when the  first axis = 2, the second
axis = 3, the third axis = 4, and the  fourth axis = 1 are set.

������ Message Description

094 P TYPE NOT ALLOWED
(COORD CHG)

P type cannot be specified when the pro-
gram is restarted. (After the automatic op-
eration was interrupted, the coordinate
system setting operation was per-
formed.) Perform the correct operation
according to the operator’s manual.

095 P TYPE NOT ALLOWED
(EXT OFS CHG)

P type cannot be specified when the
program is restarted.   (After the auto-
matic operation was interrupted, the
external workpiece offset amount
changed.)

096 P TYPE NOT ALLOWED
(WRK OFS CHG)

P type cannot be specified when the
program is restarted.  (After the auto-
matic operation was interrupted, the
workpiece offset amount changed.)

097 P TYPE NOT ALLOWED
(AUTO EXEC)

P type cannot be specified when the
program is restarted. (After power ON,
after emergency stop or P / S alarm 94
to 97 were reset, no automatic opera-
tion was performed.) Perform automat-
ic operation.

098 G28 FOUND IN SE-
QUENCE RETURN

A command of the program restart was
specified without the reference position
return operation after power ON or
emergency stop, and G28 was found
during search.
Perform the reference position return.

099 MDI EXEC NOT AL-
LOWED AFT. SEARCH

After completion of search in program
restart, a move command is given with
MDI.

Parameter

Alarm and message



B–61393E–2/02 5. AUTOMATIC OPERATION

219

WARNING
As a rule, the tool cannot be returned to a correct position
under the following conditions.
Special care must be taken in the following cases since
none of them cause an alarm:
⋅ Manual operation is performed when the manual

absolute mode is OFF.
⋅ Manual operation is performed when the machine is

locked.
⋅ When the mirror image is used.
⋅ When manual operation is performed in the course of

axis movement for returning operation.
⋅ When the program restart is commanded for a block

between the block for skip cutting and subsequent
absolute command block.

⋅ When program restart specified for an intermediate block
for a multiple repetitive canned cycle

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

III.4.4 PROGRAM RESTART

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

III.4.5 PROGRAM RESTART

Warning

Reference item



5. AUTOMATIC OPERATION B–61393E–2/02

220

NC commands can be used to control a feedrate in continuous cutting feed
blocks as described below.

The tool is decelerated in a block specifying G09, and an in–position
check (*1) is performed.  When the feed motor falls in position, the tool
is moved by the next block.  This function may be used to produce a sharp
edge at the corner of a workpiece.

When G61 is commanded, deceleration of cutting feed command at  the
end point and inposition check is performed per block thereafter.  This
G61 is valid till G63 (tapping mode), G62 (automatic corner override),
or G64 (cutting mode), is commanded.

When G63 is commanded, feed rate override is ignored (always  regarded
as 100%), and feed hold also becomes invalid.  Cutting feed does not
decelerate at the end of block to transfer to the next block.  This G63 is
valid till G61 (exact stop mode), G62 (automatic cornter override), or G64
(cutting mode) is commanded.

When G64 is commanded, deceleration at the end point of each  block
thereafter is not performed and cutting goes on to the next block.  This
command is valid till G61 (exact stop mode) or G62 (automatic corner
override) is commanded.
However, in G64 mode, feed rate is decelerated to zero and in–position
check is performed in the following case;
1) Positioning mode (G00, G60)
2) Block with exact stop check (G09)
3) Next block is a block without movement command

*1 The term in–position indicates that the servo motor reaches in a range
of positions specified by a parameter.  See Subsec. 7.2.6.1 and 7.2.6.2
for details.

(Example) Tool paths from block (1) to block (2)

In–position check

���

���

Y

0 X

Tool path in the exact stop mode

Tool path in the cutting mode or
tapping mode

5.8
EXACT STOP/EXACT 
STOP MODE/
TAPPING MODE/
CUTTING MODE 
(M SERIES)

General

� Exact stop (G09)

� Exact Stop Mode (G61)

� Tapping Mode (G63)

� Cutting Mode (G64)



B–61393E–2/02 5. AUTOMATIC OPERATION

221

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.5.4.1 Exact Stop (G09, G61)
Cutting Mode (G64)
Tapping Mode (G63)

Reference item



5. AUTOMATIC OPERATION B–61393E–2/02

222

When a thin workpiece is to be machined as shown in fig. 5.9, a precision
machining can be achieved by machining each side of the workpiece with
a tool simultaneously;this function can prevent the workpiece from
distortion that results when only one side is machined at a time.  When
both sides are machined at the same time, the movement of one tool must
synchronize with that of the other tool.  Otherwise, the workpiece may
vibrate, resulting in poor machining.  With this function, the  movement
of one tool post can easily synchronize with that of the other tool post.

Fig. 5.9 Balance cut

��� Message Contents

163 COMMAND G68/G69 
INDEPENDENTLY 
(0–TTC)

G68 and G69 are not independently
commanded in balance cut.  
Correct program.

5.9
BALANCE CUT
(0–TTC)

General

Alarm and message



B–61393E–2/02 5. AUTOMATIC OPERATION

223

CAUTION
1 If feed hold operation is performed during balance cutting

using both tool posts, balance cut processing is not
performed at restart time, it is performed when the next
move command is specified for both tool posts.

2 Balance cutting is not performed in dry run or machine lock
state.

3 When rapid traverse operation is specified, balance cut
processing is not performed.

4 A workpiece for which thread cutting has been performed in
the balance cut mode cannot be subjected to thread cutting
in the cancel mode. Thread cutting starts at a different
position.

5 Balance cut only starts cutting feed on both tool posts at the
same time; it does not maintain synchronization thereafter.
To synchronize all the movements of both tool posts, the
data for both tool posts, such as the travel distance and
feedrate, must be the same.

NOTE
1 Time delay before the pulse distribution of both tool posts

is started is 2 ms or shorter.
2 In the balance cut mode, synchronization is established at

the start of a move block,  so movement may momentarily
stop.

3 The cancel mode (G69) is set by a reset.
4 When the option ”mirror image for double turrets” is

selected, the balance cut function cannot be used.

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II. 24.4 BALANCE CUT (G68, G69)

Caution

Note

Reference item



5. AUTOMATIC OPERATION B–61393E–2/02

224

By activating automatic operation during the DNC operation mode, it is
possible to perform machining (DNC operation) while a program is being
read in via the reader/puncher interface, or remote buffer.
If the floppy cassette directory display option is available, it is possible
to select files (programs) saved in an external input/output unit of a floppy
format (Handy File, Floppy Cassettes, or FA card) and specify (schedule)
the sequence and frequency of execution for automatic operation.
To use the DNC operation function, it is necessary to set the parameters
related to the reader/punch interface, and remote buffer in advance.

[Classification] Input signal

[Function] Selects the DNC operation mode.
To select the DNC operation mode, it is necessary to select the automatic
operation mode (AUTO) and set the DNC operation select signal to
logical 1 simultaneously.

[Operation] When the DNC operation select signal becomes logical 1, the control unit
operates as follows:

– If the automatic operation mode (AUTO) has not been selected, the
signal is ignored, and nothing happens.

– If the automatic operation mode (AUTO) has been selected, the DNC
operation mode is selected, and DNC operation becomes possible.

#7
G127

#6 #5
DNCI

#4 #3 #2 #1 #0

#7
NODC30390

#6 #5 #4 #3 #2 #1 #0

[Data type] Bit

NODC3 In DNC operation, a program is:
0 : Read block by block.  (A DC3 code is output for each block.)
1 : Read continuously until the buffer becomes full.  (A DC3 code is

output when the buffer becomes full.)

5.10
DNC OPERATION

General

Signal

DNC operation select
signal
DNCI<G127#5>

Signal address

Parameter



B–61393E–2/02 5. AUTOMATIC OPERATION

225

NOTE
In general, reading is performed more efficiently when
NODC3=1. This specification reduces the number of
buffering interruptions caused by reading of a series of
blocks specifying short movements.  This reduces the cycle
time.

������ Message Description

086 DR SIGNAL OFF When entering data in the memory by
using Reader / Puncher interface, the
ready signal (DR) of reader / puncher
was off.
Power supply of I/O unit is off or cable
is not connected or a P.C.B. is defec-
tive.

123 CAN NOT USE MACRO
COMMAND IN DNC

Macro control command is used dur-
ing DNC operation.
Modify the program.

210 CAN NOT COMAND
M198/M199

M198 and M99 are executed in the
schedule operation. Or M198 is
executed in the DNC operation.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

III.4.3 DNC OPERATION

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

III.4.3 DNC OPERATION

CONNECTION MANUAL
(This manual)

13.1 READER/PUNCHER INTERFACE
(This manual)

13.2 REMOTE BUFFER

Alarm and message

Reference item



5. AUTOMATIC OPERATION B–61393E–2/02

226

Eight input signals and eight output signals are provided to interface the
PMC with the host CPU.  The host manages the signals by means of a
predetermined method.

[Transmission]

SDI (SEND DI) PMC → Host CPU
CS SDI DA E

When the host CPU issues a DI read request, or RDI, the contents of the
DI signals (RMTDI0 to RMTDI7) are sent to the host CPU.

CS: Checksum data
DA: Two hexadecimal bytes representing the eight DI bits
E: End code

[Reception]

SDO (SEND DO) PMC ← Host CPU
CS SDO DA E

Upon receiving GDT, SAT, or SDI, the host CPU can issue this command.
The command causes the contents of the DO signals (RMTDO0 to
RMTDO7) to be output to the PMC.

CS: Checksum data
DA: Two hexadecimal bytes representing the eight DO bits
E: End code

NOTE
This function is added to protocol A of the remote buffer.  For
details of the controlling method, refer to Descriptions
(B–61392EN–1) for remote buffer.

The following two protocols are supported to enable communication
between the host computer and remote buffer.  Either protocol is selected
according to the setting of the corresponding parameter.

(1)Protocol A
Handshaking.  Transmission and reception are repeated between the
host computer and remote buffer.

(2)Protocol B
The communication between the host computer and remote buffer is
controlled according to the control code output from the remote buffer.

Protocol A is provided for handshaking, in which transmission and
reception are repeated between the remote buffer and host computer.

For an explanation of each signal, refer to Descriptions (B–61392EN–1)
for remote buffer.

For details of the communication system, refer to Descriptions
(B–61392EN–1) for remote buffer.

5.11
REMOTE BUFFER
DI/DO SIGNALS

General

� Protocol

� Protocol A

� Signals

� Communication system



B–61393E–2/02 5. AUTOMATIC OPERATION

227

For details of the message format, refer to ”FANUC REMOTE BUFFER
Descriptions (B–90699).”

#7
RMTDO7F289

#6
RMTDO6

#5
RMTDO5

#4
RMTDO4

#3
RMTDO3

#2
RMTDO2

#1
RMTDO1

#0
RMTDO0 (T series)

RMTDO7F290 RMTDO6 RMTDO5 RMTDO4 RMTDO3 RMTDO2 RMTDO1 RMTDO0 (M series)

#7
RMTDI7G239

#6
RMTDI6

#5
RMTDI5

#4
RMTDI4

#3
RMTDI3

#2
RMTDI2

#1
RMTDI1

#0
RMTDI0

� Message format

Signal

(Output) RMTDO0 to
RMTDO7 
<F289> (T series),
<F290> (M series)

(Input) RMTDI0 to
RMTDI7 <G239>



5. AUTOMATIC OPERATION B–61393E–2/02

228

[Classification] Input signal

[Function] When this signal is turned on, the tool moves through a specified cut–in
amount along a programmed figure.

#7
G237

#6
INFD

#5 #4 #3 #2 #1 #0

5.12
IN–FEED CONTROL

Signal

In–feed control cut–in
start signal (0–GSC)
INFD<G237#6>

Signal address



B–61393E–2/02 6. INTERPOLATION FUNCTION

229

6 INTERPOLATION FUNCTION



6. INTERPOLATION FUNCTION B–61393E–2/02

230

The G00 command moves a tool to the position in the workpiece system
specified with an absolute or an incremental command at a rapid traverse
rate.
In the absolute command, coordinate value of the end point is
programmed.
In the incremental command the distance the tool moves is programmed.

The rapid traverse rate in the G00 command is set to the parameter
(Nos.0518 to 0521 for 1st axis to 4th axis, Nos. 7518 and 7519 for 5th axis
and 6th axis, Nos. 0643 and 0644 for 7th axis and 8th axis) for each axis
independently by the machine tool builder. In the positioning mode
actuated by G00, the tool is accelerated to a predetermined speed at the
start of a block and is decelerated at the end of a block.  Execution
proceeds to the next block after confirming the in–position.

0518 Rapid traverse rate for 1st axis

0519 Rapid traverse rate for 2nd axis

0520 Rapid traverse rate for 3rd axis

0521 Rapid traverse rate for 4th axis

0643 Rapid traverse rate for 7th axis

0644 Rapid traverse rate for 8th axis

7518 Rapid traverse rate for 9th axis

7519 Rapid traverse rate for 10th axis

��������� ������ 	��� �� ���


��� ��� �����

��������� ������ 	��� �� ���

����� ���� ����

Millimeter machine 1 mm/min 30 to 24000 30 to 12000

Inch machine 0.1 inch/min 30 to 9600 30 to 4800

Rotaion axis 1 deg/min 30 to 24000 30 to 12000

[Description] Set a rapid traverse rate for each axis.

NOTE
By setting the FML 10 bit (bit 7 of parameter 0049) to 1, the
units of data can be multiplied by ten.  Doing so causes the
maximum value to change as follows:
IS–A, IS–B:  100 [m/min] (4000 [inch/min])
IS–C:  12 [m/min] (480 [inch/min])

6.1
POSITIONING

General

Parameter

[Unit of data]

[Valid data range]



B–61393E–2/02 6. INTERPOLATION FUNCTION

231

NOTE
The rapid traverse rate cannot be specified in the address
F.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.4.1 POSITIONING (G00)

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.4.1 POSITIONING (G00)

Note

Reference item



6. INTERPOLATION FUNCTION B–61393E–2/02

232

Tools can move along a line

A tools move along a line to the specified position at  the feedrate
specified in F.
The feedrate specified in F is effective until a new value is specified. It
need not be specified for each block.
The feedrate commanded by the F code is measured along the tool path.
If the F code is not commanded, the feedrate is regarded as zero.
The feedrate of each axis direction is as follows.

F� � �
L
� f

F� �
�

L
� f

F� �
�

L
� f

Feed rate of α axis direction :

F� �
�
L
� f

L � �2 � �2 � �2 � �2�

G01ααββγγζζ Ff ;

Feed rate of γ axis direction :

Feed rate of β axis direction :

Feed rate of ζ axis direction :

The feedrate of the rotary axis is commanded in the unit of deg/min (if the
feedrate is 12 deg/min, F12.0 is commanded).

When the straight line axis α(such as X, Y, or Z) and the rotating axis β
(such as A, B, or C) are linearly interpolated, the feed rate is that in which
the tangential feed rate in the α and β cartesian coordinate system is
commanded by F(mm/min). 
β–axis feedrate is obtained ; at first, the time required for  distribution is
calculated by using the above fromula, then the β –axis feedrate unit is
changed to deg/min.

A calculation example is as follows.

202 � 402�

300

40 deg
0.14907 min

The feed rate for the C axis is

0.14907 (min)�

268.3 deg�min�

G91 G01 X20.0B40.0 F300.0 ;
This changes the unit of the C axis from 40.0 deg to 40mm with metric
input.  The time required for distribution is calculated as follows:

(Example)

In simultaneous 3 axes control, the feed rate is calculated the same way
as in 2 axes control.

6.2
LINEAR 
INTERPOLATION

General



B–61393E–2/02 6. INTERPOLATION FUNCTION

233

#7
0011

#6
G01

#5 #4 #3 #2 #1 #0

[Data type] Bit

G01 Mode entered when the power is turned on or when the control is cleared
0 : G00 mode (positioning)
1 : G01 mode (linear interpolation)

0527 Maximium cutting feedrate for all axes

[Data type] Word

��������� ������ 	��� �� ���


��� ��� �����

��������� ������ 	��� �� ���

����� ���� ����

Millimeter machine 1 mm/min 6 to 15000 6 to 12000

Inch machine 0.1 inch/min 6 to 6000 6 to 4800

Specify the maximum cutting feedrate.
A feedrate in the tangential direction is clamped in cutting feed so that it
does not exceed the feedrate specified in this parameter.

0549 Cutting feedrate when the power is turned on (M series)

[Data type] Word

��������� ������ 	��� �� ���


��� ��� �����

��������� ������ 	��� �� ���

����� ���� ����

Millimeter machine 1 mm/min 6 to 15000 6 to 12000

Inch machine 0.01 inch/min 6 to 6000 6 to 4800

When the machine requires little change in cutting feedrate during
cutting, a cutting feedrate can be specified in the parameter.  This
eliminates the need to specify a cutting feedrate in the NC command data.

No. Message Description

011 NO FEEDRATE COMMAN-
DED

Cutting feedrate was not commanded or
the feedrate was inadequate. Modify the
program.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.4.3 LINEAR INTERPOLATION (G01)

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.4.2 LINEAR INTERPOLATION (G01)

Parameter

[Unit of data]

[Valid data range]

[Unit of data]

[Valid data range]

Alarm and message

Reference item



6. INTERPOLATION FUNCTION B–61393E–2/02

234

The command below can move a tool along a circular arc in the defined
plane.

“Clockwise”(G02) and “counterclockwise”(G03) on the XpYp plane
(ZpXp plane or YpZp plane) are defined when the XpYp plane is viewed
in the positive–to–negative direction of the Zp axis (Yp axis or Xp axis,
respectively) in the Cartesian coordinate system. See the figure below.

Yp

G02

G03

G17 G18 G19

G02

G03

G02

G03

Yp

Xp Zp

ZpXp

The end point of an arc is specified by address Xp, Yp or Zp, and is
expressed as an absolute or incremental value according to G90 or G91.
For the incremental value, the distance of the end point which is viewed
from the start point of the arc is specified with a sign.

The arc center is specified by addresses I, J, and K for the Xp, Yp, and Zp
axes, respectively.  The numerical value following I, J, or K, however, is
a vector component in which the arc center is seen from the start point,
and is always specified as an incremental value, as shown below.
I, J, and K must be signed according to the direction.

End point (x,y)

Center

Start
point

End point (z,x) End point (y,z)

Start
point

Start
point

Center Center

i
x

y x
z

k

z
y

j

j i k

I0,J0, and K0 can be omitted. When Xp, Yp , and Zp  are omitted (the end
point is the same as the start point) and the center is specified with I, J,
and K, a 360� arc (circle) is specified.
G02I;  Command for a circle
If, when the RADCHK bit (bit 6 of parameter 0393) is set to 1, the
difference in the radius between the start and end points exceeds the value
set in parameter 0876, alarm No. 020 is issued.

6.3
CIRCULAR 
INTERPOLATION

General



B–61393E–2/02 6. INTERPOLATION FUNCTION

235

The distance between an arc and the center of a circle that contains the arc
can be specified using the radius, R, of the circle instead of I, J, and K.
In this case, one arc is less than 180�, and the other is more than 180� are
considered.

For T series, an arc with a sector angle of 180� or wider cannot be
specified (Alarm 023).
For M series, specify an arc more than 180� with a negative radius value
commanded.

If Xp, Yp, and Zp are all omitted, if the end point is located at the same
position as the start point and when R is used, an arc of 0°is programmed.
G02R_ ; (The tool does not move.)

r=50mm

End point

Start point r=50mm

Y

X

(1)

(Example)  (T series)
For arc �(1) (less than 180 �)

G02 W60.0 U10.0 R50.0 F300.0 ;
For arc  (2) (greater than 180 �)

An arc with a sector angle of 180 °
or wider cannot be specified
within a single block.

(2)



6. INTERPOLATION FUNCTION B–61393E–2/02

236

r=50mm

End point

Start point r=50mm
Y

X

(Example)  (M series)
For arc �(1)(less than 180 �)

G91 G02 X60.0 Y20.0 R50.0 F300.0 ;
For arc  (2)(greater than 180 �)

G91 G02 XP60.0 YP20.0 R–50.0 F300.0 ;

(1)

(2)

The feedrate in circular interpolation is equal to the feedrate specified by
the F code, and the feedrate along the arc (the tangential feedrate of the
arc) is controlled to be the specified feedrate.
The error between the specified feedrate and the actual tool feedrate is
±2% or less.  However, this feedrate is measured along the arc after the
cutter compensation (M series) or tool nose radius compensation (T
series) is applied.

0212 Plane selected at power–up (M series)

[Data type] None

[Valid data range] 0 to 2

[Description] Set one of the following as the plane that will be selected at power–up:

Setting value Selected plane

0 X – Y plane (G17)

1 Z – X plane (G18)

2 Y – Z plane (G19)

Parameter



B–61393E–2/02 6. INTERPOLATION FUNCTION

237

0279 Setting of 3rd axis in the basic coordinate system (T series)

Setting of 4th axis in the basic coordinate system (M series)

0280 Setting of 4rd axis in the basic coordinate system (T series)

NOTE
When this parameter is set, power must be turned off before
operation is continued.

[Data type] Byte

To determine the following planes used for circular interpolation, cutter
compensation C (for the M series), tool nose radius compensation (for the
T series), etc.

G17:  Plane Xp–Yp

G18:  Plane Zp–Xp

G19:  Plane Yp–Zp
Set value Meaning

2 Y axis of the basic three axes (Only for T series)

5 Axis parallel to the X axis

6 Axis parallel to the Y axis

7 Axis parallel to the Z axis

#7
0393

#6
RADCHK

#5 #4 #3 #2 #1 #0

RADCHK When a circular interpolation command is specified, the difference in the
radius between the start and end points is:
1 : Checked.
0 : Not checked.

0876 Tolerance of arc radius

[Data type] Two–word

Increment system IS–A IS–B IS–C Unit

Metric input 0.01 0.001 0.0001 mm

Inch input 0.001 0.0001 0.00001 inch

[Valid data range] 1 to 99999999

When a circular interpolation command (G02, G03) is executed, the
tolerance for the radius between the start point and the end point is set.  If
the difference of radii between the start point and the end point exceeds the
tolerance set here, a P/S alarm No. 20 is informed.

[Unit of data]



6. INTERPOLATION FUNCTION B–61393E–2/02

238

������ Message Description

011 NO FEEDRATE COM-
MANDED

Cutting feedrate was not commanded
or the feedrate was inadequate.
Modify the program.

020 OVER TOLERANCE OF
RADIUS

In circular interpolation (G02 or G03),
difference of the distance between the
start point and the center of an arc
and that between the end point and
the center of the arc exceeded the
value specified in parameter No.
3410.

021 ILLEGAL PLANE AXIS
COMMANDED

An axis not included in the selected
plane (by using G17, G18, G19) was
commanded in circular interpolation.
Modify the program.

023 ILLEGAL RADIUS COM-
MAND

(T series)

In circular interpolation by radius des-
ignation, negative value was com-
manded for address R.  Modify the
program.

025 CANNOT COMMAND F0
IN G02/G03

(M series)

F0 (rapid traverse) was instructed by
F1 –digit command in circular inter-
polation. Modify the program.

028 ILLEGAL PLANE SE-
LECT

In the plane selection command, two
or more axes in the same direction
are commanded.
Modify the program.

NOTE
1 The U, V and W axes (parallel with the basic axis) can be

used with G–code system B and C. (T series)
2 If I, J, K, and R addresses are specified simultaneously, the

arc specified by address R takes precedence and the other
are ignored.

3 If an axis not comprising the specified plane is commanded,
an alarm is displayed.
For example, when G code system B or C is used, if U axis
with X axis is specified as a parallel axis to X axis when
plane XY is specified, an alarm (No.028)is displayed.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.4.4 CIRCULAR INTERPOLATION
(G02,G03)

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.4.3 CIRCULAR INTERPOLATION
(G02,G03)

Alarm and message

Note

Reference item



B–61393E–2/02 6. INTERPOLATION FUNCTION

239

Tool movement can be synchronized with spindle rotation when cutting
threads.

The spindle speed is continuously read through the position coder
attached to the spindle.  Then, it is converted to a cutting feedrate (feed
per minute) to feed the tool.

L

����
�	� �	����

L

L

������ ����� ������ �	����

L : Lead

In general, thread cutting is repeated along the same tool path in rough
cutting through finish cutting for a screw.  Since thread cutting starts when
the position coder mounted on the spindle outputs a 1–turn signal,
threading is started at a fixed point and the tool path on the workpiece is
unchanged for repeated thread cutting.  Note that the spindle speed must
remain constant from rough cutting through finish cutting.  If not,
incorrect thread lead will occur.

[Function] This signal indicates that thread cutting is in progress.

[Output condition] This signal turns to “1” in the following cases:
� Thread cutting mode in progress
� Thread cutting cycle for turning

This signal turns to “0” in the following case.
� Neither thread cutting mode nor thread cutting are in progress.

6.4
THREAD CUTTING

6.4.1
Thread Cutting

General

Signal

Thread cutting signal
THRD<F188#3>(T series)



6. INTERPOLATION FUNCTION B–61393E–2/02

240

#7
F188

#6 #5 #4 #3
THRD

#2 #1 #0

#7
0024

#6 #5 #4 #3 #2
SCTO

#1 #0

[Data type] Bit

SCTO The spindle speed arrival signal (G120#4 SAR) is:
0 : Not checked
1 : Checked

#7
0065

#6 #5
G92ZAX

#4 #3 #2 #1 #0
(T series)

G92ZAX Parameters for the Z–axis time constant and acceleration/deceleration
lower limit (FL) in threading (G92):
0 : Parameters common to all axes
1 : Parameters 0627 and 0628

0526 Time constant of threading (G92) for the X–axis (T series)

[Data type] Word

[Unit of data] msec

[Valid data range] 1 to 4000

[Description] Set a time constant of threading (G92) for the X–axis.

NOTE
Set an optimum value, considering parameter 0528.

0627 Time constant of exponetial acceleration/deceleration in the thread cutting cycle for
Z axis

(T series)

[Data type] Word

[Unit of data] ms

[Valid data range] 0 to 4000

Set the time constant used for exponential acceleration/deceleration in the
thread cutting cycle (G92) for Z axis.

Signal address

Parameter

� Setting the time constant
for the threading cycle



B–61393E–2/02 6. INTERPOLATION FUNCTION

241

0528 FL rate of acceleration/deceleration in the thread cutting cycle for X axis (T series)

[Data type] Word

��������� ������ 	��� �� ���


��� ��� �����

��������� ������ 	��� �� ���

����� ���� ����

Millimeter machine 1 mm/min 6 to 15000 6 to 12000

Inch machine 0.1 inch/min 6 to 6000 6 to 4800

Rotaion axis 1 deg/min 6 to 15000 6 to 12000

Set the FL rate of acceleration/deceleration in the thread cutting cycle
(G92) for X axis.

NOTE
Set an optimum value, considering parameter 0526.

0628 FL rate of exponential acceleration/deceleration in the thread cutting cycle for Z
axis

(T series)

[Data type] Word

��������� ������ 	��� �� ���


��� ��� �����

��������� ������ 	��� �� ���

����� ���� ����

Millimeter machine 1 mm/min 6 to 15000 6 to 12000

Inch machine 0.1 inch/min 6 to 6000 6 to 4800

Rotaion axis 1 deg/min 6 to 15000 6 to 12000

Set the lower limit (FL rate) of acceleration/deceleration in the thread
cutting cycle (G92) for each axis.

0109 Chamfering distance in the thread cutting cycles G76 and G92 (T series)

[Data type] Byte

[Unit of data] 0.1 pitch

[Valid data range] 0 to 127

This parameter sets the chamfering in the thread cutting cycles G76 and
G92.

� Setting the FL feedrate
for the thread cutting
cycle

[Unit of data]

[Valid data range]

[Unit of data]

[Valid data range]

� Setting the chamfering
distance for the thread
cutting cycle



6. INTERPOLATION FUNCTION B–61393E–2/02

242

0725 Minimium depth of cut in the multiple repetitive canned cycle G76 (T series)

[Data type] Two–word

Increment system IS–A IS–B IS–C Unit

Metric input 0.01 0.001 0.001 mm

Inch input 0.001 0.0001 0.0001 inch

[Valid data range] 0 to 99999999

This parameter sets the minimum depth of cut in the multiple repetitive
canned cycle G76.

0726 Finishing allowance in the multiple repetitive canned cycle G76 (T series)

[Data type] Two–word

Increment system IS–A IS–B IS–C Unit

Metric input 0.01 0.001 0.001 mm

Inch input 0.001 0.0001 0.0001 inch

[Valid data range] 0 to 99999999

This parameter sets the finishing allowance in the multiple repetitive
canned cycle G76.

0723 Repetition count of final finishing in the multiple repetitive canned cycle G76 (T series)

[Data type] Two–word

[Unit of data] Cycle

[Valid data range] 1 to 99999999

This parameter sets the repetition count in the multiple repetitive canned
cycle G76.

0724 Tool nose angle in the multiple repetitive canned cycle G76 (T series)

[Data type] Two–word

[Unit of data] Degree

[Valid data range] 0, 29, 30, 55, 60, 80

This parameter sets the tool nose angle in the multiple repetitive canned
cycle G76.

� Setting the minimum
depth of cut for the
multiple repetitive
canned cycle G76

[Unit of data]

� Setting the finishing
allowance for the
multiple repetitive
canned cycle G76

[Unit of data]

� Setting the repetition
count of finishing for the
multiple repetitive
canned cycle G76

� Setting the tool angle for
the multiple repetitive
canned cycle G76



B–61393E–2/02 6. INTERPOLATION FUNCTION

243

WARNING
1. Feedrate override is ignored during thread cutting, 100%

being assumed.
2. During threading, spindle override is ignored, 100% being

assumed.
3. It is very dangerous to stop feeding the thread cutter without

stopping the spindle.  This will suddenly increase the cutting
depth.  Thus, the feed hold function is ineffective while
thread cutting.  If the feed hold button is pressed during
thread cutting, the tool will stop after a block not specifying
thread cutting is executed as if the SINGLE BLOCK button
were pushed.  However, the feed hold lamp (SPL lamp)
lights when the FEED HOLD button on the machine control
panel is pushed.  Then, when the tool stops, the lamp is
turned off (Single Block stop status).

4. When the first non–threading block is executed after
threading mode has been finished, and the feed hold button
is pressed again (or the feed hold button has been held
down), the execution of the non–threading block is stopped
immediately.

5. When thread cutting is executed in the single block status,
the tool stops after execution of the first block not specifying
thread cutting.

6. When the previous block was a thread cutting block, cutting
will start immediately without waiting for detection of the
1–turn signal even if the present block is a thread cutting
block.

WARNING
The thread cutting retract function is supported only for the
threading cycle.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.4.7 CONSTANT LEAD THREADING

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.4.6
II.4.8
II.13.1.2
II.13.2.7

CONSTANT LEAD THREADING
CONTINUOUS THREAD CUTTING
Thread Cutting Cycle
Multiple Thread Cutting Cycle

Warning

� Warnings applicable to
both the M and T series

� Warning applicable to
the T series only

Reference item



6. INTERPOLATION FUNCTION B–61393E–2/02

244

When the automatic operation stop signal *SP <G121#5> is set to 0
during threading in a threading cycle, the tool immediately retracts while
performing chamfering, then returns to the start point of the current cycle,
first along the X–axis, then along the Z–axis.

Motion when the signal *SP is
set to 0.

Stop point

Ordinary cycle

Rapid traverse

��	 ��
�� ��� �� �	� �� � �	�	�

#7
0394

#6 #5 #4 #3 #2 #1
TFHOVR

#0

[Data type] Bit

TFHOVR Override while the tool is retracting in threading
0 : Override is effective.
1 : Override is not effective.

0109 Chamfering distance in thread cutting cycles G76 and G92

[Data type] Byte

[Unit of data] 0.1 pitch

[Valid data range] 0 to 127

This parameter sets the chamfering in thread cutting cycles G76 and G92.

6.4.2
Thread Cutting Cycle
Retract (T series)

General

Parameter

� Setting to enable the
override function during
thread cutting cycle
retraction

� Setting a chamfering
distance in thread
cutting cycle retraction



B–61393E–2/02 6. INTERPOLATION FUNCTION

245

WARNING
While the tool is retracting, automatic operation stop signal
*SP <G121#5> is ignored.

NOTE
The chamfering distance for retraction is determined by the
setting of parameter No.0109.

OPERATOR’S MANUAL
(For Lathe)

II.13.1.2 Thread Cutting Cycle
(For Lathe)
(B–61394E) II.13.2.7 Multiple Thread Cutting Cycle

Warning

Note

Reference item



6. INTERPOLATION FUNCTION B–61393E–2/02

246

For accurate positioning without play of the machine (backlash), final
positioning from one direction is available.

Start position

Temporary stop
End position

Start position

Overrun 
distance

An overrun and a positioning direction are set by the parameter (Nos.0204
– 0207).  Even when a commanded positioning direction coincides with
that set by the parameter, the tool stops once before the end point.

#7
0029

#6 #5 #4 #3
G604

#2
G60Z

#1
G60Y

#0
G60X

G60x The approach direction for each axis in unidirectional positioning (G60)
is:
0 : Positive.
1 : Negative.

6.5
SINGLE DIRECTION 
POSITIONING 
(M series)

General

Parameter



B–61393E–2/02 6. INTERPOLATION FUNCTION

247

0204 Approach distance along the X–axis in unidirectional positioning

0205 Approach distance along the Y–axis in unidirectional positioning

0206 Approach distance along the Z–axis in unidirectional positioning

0207 Approach distance along the fourth–axis in unidirectional positioning

Unit of data IS–A IS–B IS–C

Millimeter machine [mm] 0.1 0.01 0.01

Inch machine [inch] 0.01 0.001 0.001

Rotation axis [deg] 0.1 0.01 0.01

[Valid data range] 0 to 255 (For IS–C, the maximum value is 163.)

[Description] Set an approach distance for unidirectional positioning (G60) for  each
axis.

NOTE
Set the approach direction for each axis in bits G60X to
G604 (bits 0 to 3 of parameter 0029).

Example Unidirectional positioning when the approach direction is negative

Approach distance

Position of 
temporary stop

End point

– +

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.4.2 SINGLE DIRECTION POSITION-
ING

[Unit of data]

Reference item



6. INTERPOLATION FUNCTION B–61393E–2/02

248

Helical interpolation which moved helically is enabled by specifying up
to two other axes which move synchronously with the circular
interpolation by circular commands.

The command method is to simply add one or two move command axes
which is not circular interpolation axes. An F command specifies a
feedrate along a circular arc.  Therefore, the feedrate of the linear axis is
as follows:

F ×
Length of linear axis

Length of circular arc

Determine the feedrate so that the linear axis feedrate does not exceed any
of the various limit values.

Z

X Y

Tool path

The feedrate along the circumference of two cir-
cular interpolated axes is the specified feedrate.

#7
0393

#6 #5 #4 #3 #2 #1 #0
HFC

HFC The feedrate for helical interpolation is:
0: The tangential velocity of circular interpolation is clamped to the

value specified in parameter 0527.  The speed along a linear axis is
calculated as follows:

Actual circular interpolation speed �
Arc length

Segment length

1: The tangential velocity of circular interpolation is clamped to the
value specified in parameter 0527.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.4.5 HELICAL INTERPOLATION

6.6
HELICAL 
INTERPOLATION 
(M SERIES)

General

Parameter

Reference item



B–61393E–2/02 6. INTERPOLATION FUNCTION

249

Polar coordinate interpolation is a function that exercises contour control
in converting a command programmed in a Cartesian coordinate system
to the movement of a linear axis (movement of a tool) and the movement
of a rotary axis (rotation of a workpiece).  This function is useful for
grinding a cam shaft.

G112 starts the polar coordinate interpolation mode and selects a polar
coordinate interpolation plane (Fig. 6.7).  Polar coordinate
interpolation is performed on this plane.

Rotary axis (virtual axis)
(unit�mm or inch)

Linear axis
(unit:mm or inch)

Origin of the local coordinate system (G52 command)
(Or origin of the workpiece coordinate system when a G52
command is not specified)

Fig. 6.7 Polar coordinate interpolation plane

When the power is turned on or the system is reset, polar coordinate
interpolation is canceled (G113).
The linear and rotation axes for polar coordinate interpolation must be set
in parameters (No. 0291 and 0292) beforehand.

0291 Axis (linear axis) specification for polar coordinate interpolation

0292 Axis (rotary axis) specification for polar coordinate interpolarion

[Data type] Byte

[Valid data range] 1 to 4

These parameters set control axis numbers of linear and rotary axes to
execute polar interpolation.

6.7
POLAR COORDINATE
INTERPOLATION 
(T SERIES)

General

Parameter



6. INTERPOLATION FUNCTION B–61393E–2/02

250

0527 Maximum cutting feedrate for all axes

[Data type] Word

��������� ������ ���� �� ��

���� �� ����

��������� ������ ���� �� ��

�
��� �
�� �
��

Millimeter machine 1 mm/min 6 to 15000 6 to 12000

Inch machine 0.1 inch/min 6 to 6000 6 to 4800

Specify the maximum cutting feedrate.

A feedrate in the tangential direction is clamped in cutting feed so that it
does not exceed the feedrate specified in this parameter.

0663 Maximum cutting feedrate during polar coordinate interpolation

[Data type] Word

��������� ������ ���� �� ��

���� �� ����

��������� ������ ���� �� ��

�
��� �
�� �
��

Millimeter machine 1 mm/min 0, 6 to 15000 0, 6 to 12000

Inch machine 0.1 inch/min 0, 6 to 6000 0, 6 to 4800

Rotation axis 1 deg/min 0, 6 to 15000 0, 6 to 12000

This parameter sets the upper limit of the cutting feedrate that is effective
during polar coordinate interpolation. If a feedrate greater than the
maximum feedrate is specified during polar coordinate interpolation, it
is clamped to the feedrate specified by the parameter. When the setting is
0, the feedrate during polar coordinate interpolation is clamped to the
maximum cutting feedrate usually specified with parameter 0527.

	�� Message Description

145 ILLEGAL CONDITIONS
IN POLAR COORDINATE
INTERPOLATION

The conditions are incorrect when the polar
coordinate interpolation starts or it is can-
celed.

1) In modes other than G40, G112/G113
was specified.

2) An error is found in the plane selection.
Parameters No. 0291 and No. 0292 are
incorrectly specified.

Modify the value of program or parameter.

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.4.4 POLAR COORDINATE INTER-
POLATION (G112, G113)

[Unit of data]

[Valid data range]

Alarm and Message

Reference item



B–61393E–2/02 6. INTERPOLATION FUNCTION

251

The amount of travel of a rotary axis specified by an angle is once
internally converted to a distance of a linear axis along the outer surface
so that linear interpolation or circular interpolation can be performed with
another axis.  After interpolation, such a distance is converted back to the
amount of travel of the rotary axis.
The cylindrical interpolation function allows the side of a cylinder to be
developed for programming.  So programs such as a program for
cylindrical cam grooving can be created very easily.
Only one rotation axis can be set for cylindrical interpolation.

0279 Attribute of 4th axis (M series)

[Valid data range] 5 to 7

[Description] Set the axis in the basic coordinate system for the 4th axis.

Setting value Attribute

5 Axis parallel to X axis

6 Axis parallel to Y axis

7 Axis parallel to Z axis

0279 Attribute  of 3rd axis (T series)

0280 Attribute of 4th axis (T series)

[Valid data range] 2, 5 to 7

[Description] Set the axis in the basic coordinate system for the 3rd axis or 4th axis.

Setting value Attribute

2 Y axis of basic 3 axis

5 Axis parallel to X axis

6 Axis parallel to Y axis

7 Axis parallel to Z axis

6.8
CYLINDRICAL
INTERPOLATION

General

Parameter



6. INTERPOLATION FUNCTION B–61393E–2/02

252

������ Message Description

175 ILLEGAL G107 COMMAND Conditions when performing cylindrical in-
terpolation start or cancel not correct.  To
change the mode to the cylindrical inter-
polation mode, specify the command in a
format of “G107 rotation–axis name radius
of cylinder.”

176 IMPROPER G–CODE IN
G107

Any of the following G codes which cannot
be specified in the cylindrical interpolation
mode was specified.

1) G codes for positioning, such as  G28,
G76, G81 – G89, including the codes
specifying the rapid traverse cycle

2) G codes for setting a coordinate system:
G50, G52

3) G code for selecting coordinate system:
G53, G54–G59

Modify the program.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.4.6 CYLINDRICAL INTERPOLATION
(G07.1)

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.4.5 CYLINDRICAL INTERPOLATION
(G07.1)

Alarm and Message

Reference item



B–61393E–2/02 6. INTERPOLATION FUNCTION

253

Polygonal turning means machining a polygonal figure by rotating the
workpiece and tool at a certain ratio.

Workpiece
ToolWorkpiece

Fig. 6.9 (a) Polygonal turning

By changing conditions which are rotation ratio of workpiece and tool and
number of cutters,the machining figure can be changed to a square or
hexagon. The machining time can be reduced as compared with polygonal
figure machining using C and X axes of the polar coordinate.  The
machined figure however, is not exactly polygonal.  Generally, polygonal
turning is used for the heads of square and/or hexagon bolts or hexagon
nuts�

Fig. 6.9 (b) Hexagon bolt

This function controls the workpiece (spindle) and tool (rotation tool
axis) so that the relationship between the spindle speed and tool speed is
maintained at a constant ratio specified in a command given to the CNC.

(For the principle of polygonal turning, refer to Chapter 20, Part II of the
“Operator’s Manual (For Lathe).”)

6.9
POLYGONAL 
TURNING 
(T SERIES)



6. INTERPOLATION FUNCTION B–61393E–2/02

254

One of the axes (servo axes) controlled by the CNC is assigned as a tool
rotation axis.  Either serial spindle or analog spindle can be used as a
workpiece axis (spindle).

This section focuses on supplementary information and examples for the
connection.

A position coder must be mounted on the spindle.  However, polygonal
turning requires no additional changes to the spindle connection  (See
Section 9.3.).

Polygonal turning uses the position coder feedback signal to control the
positional relationship (cutting position) between the spindle and tool
rotation axis, and the ratio of speed.

Bits #0 to #3 of parameter No. 0069 specifies the controlled axis (servo
axis) to be used as the tool rotation axis.

The same parameter setting as for ordinary servo axes applies to the servo
axis connection for polygonal turning except for some parameters.

A move command such as Y_ cannot be specified for the servo axis
specified as a tool rotation axis, unlike the other controlled axes.

Only the command for reference position return, G28 V0; can be
specified.  See Chapter II.21 in the ”FANUC Series 0/00/0–Mate for
Lathe Operator’s Manual” and the examples given below:

· The following descriptions exemplify typical parameter setting for
polygonal turning using a serial pulse coder (with a million pulse
capability).

→ The parameter setting described here is not a must for polygonal
turning.

→ Specify typical values for parameters unless otherwise stated.
� Tool rotation axis setting

This example uses the CNC’s fourth axis (connected as the Y–axis) as
a rotation tool axis for polygonal turning.

Parameter PLGN4 (bit 1 of No.0069) =1

� Servo parameter setting

Set the servo parameters as listed below:

CMR = 1
DMR = 36/1000

(With the above setting, the reference counter capacity is 36000.)

Parameter No. 0103 = 2 (CMR)
Parameter No. 0573 = 3600 (reference counter capacity)
Parameter No. 8484 = 36 (DMR numerator)
Parameter No. 8485 = 1000 (DMR denominator)

6.9.1
Polygonal Turning

General

� Spindle connection

� Tool rotation axis 
(servo axis) connection

� Examples of parameter 
setting



B–61393E–2/02 6. INTERPOLATION FUNCTION

255

For the other servo parameters, specify typical values.

� Parameter setting for polygonal turning

The least command increment, detection unit, the angle to rotate
through per rotation for the polygon axis are as follows:

Least command increment = 
L CMR�
Q DMR�

Detection unit = 
DMR

least command increment
= 

L
Q DMR�

Angle to rotate through per tool axis rotation 

= 
360

least command increment

where

L: Tool axis rotation angle per motor rotation (degrees), 
(360� speed increment ratio)

When the servo motor is connected directly to the rotation tool, for
example, L = 360.  When the tool speed is doubled, L = 720.

Q: Number of pulses per pulse coder rotation
(For a serial pulse coder, Q = 1000000.)

The minimum command increment specified here is provided for the
polygon axis only.  This is determined irrespective of the ISA/ISC
setting.  However, IS–B should be specified.

If the servo motor is connected directly to the rotation tool:

Least command increment = 
1000000 36�

360 � 1

1000

 = 0.01 (degrees)

Detection unit = 0.01 (degrees)

Angle to rotate through per tool axis rotation = 
360
0.01

 = 36000

(degrees)

The upper limit to the tool rotation axis speed is:

Maximum servo motor speed� speed increment ratio

Therefore, if the maximum servo motor speed is 2000 rpm, and the
servo motor is directly connected to the servo motor:

Upper limit to the tool rotation axis speed = 2000� 1 = 2000 (rpm)

This means the parameters must be set as follows:

No. 0778 = 36000 (angle to rotate through per tool axis rotation)
No. 0667 = 2000 (upper limit to tool rotation axis speed)

� Feedrate parameter setting

Because the least command increment is 0.01 degrees, the input unit
for the feedrate is 10 degrees/min.

To obtain a rapid traverse speed of 2000 rpm, for example, specify as
follows:

No. 0521 = 72000 (= 2000� 
360
10

)

Also specify other feedrates in 10 degrees/min units.



6. INTERPOLATION FUNCTION B–61393E–2/02

256

[Classification] Output signal

[Function] Informs the PMC that the machine is in the polygon turning mode.

[Output condition] The polygon synchronization signal is set to logical “1” by the polygon
turning mode command (G251) and stays at “1” during the polygonal
turning mode.

The signal is reset to logical “0” by the polygon turning mode reset
command (G250) or a reset.  It stays at logical “0” when the machine is
not in the polygonal turning mode.

· Other signals (related to the tool rotation axis)
→ Some signals related to the CNC controlled axis used as the tool

rotation axis may be made ineffective depending on whether the
machine is in the polygonal turning mode.

For these signals, read the note in Chapter II–21 in operator’s
manual (B–61394E) for lathe.

#7
PSYNF160

#6 #5 #4 #3 #2 #1 #0

(T series)

0067 Maximum allowable speed for the tool rotation axis (polygon synchronization axis) (T series)

[Data type] Word

[Unit of data] rpm

[Valid data range] For polygonal turning using servo motors:
0 to 1.2 � 108

set value of the parameter No. 0778

This parameter sets the upper–limit rotation speed of a tool rotation axis.
The rotation speed of the tool rotation axis is clamped by  the set
upper–limit rotation speed during polygon turning.  The spindle and tool
rotation axis go out of synchronization when the rotation speed is
clamped.

Signal

Polygon synchronization
under way signal 
PSYN 
<F160#7>

Signal address

Parameter



B–61393E–2/02 6. INTERPOLATION FUNCTION

257

#7
PLHZ0069

#6 #5 #4 #3
PLG8

#2
PLG7

#1
PLGN4

#0
PLGN3 (T series)

[Data type] Bit

PLGN3, PLGN4, As a synchronous axis used for polygonal turning, the third, fourth,
PLG7, PLG8 seventh, or eighth axis is:

0: Not used.
1: Used.

NOTE
Set any one axis.

PLHZ Synchronous axis using G28 command
0:  Returns to the reference position in the same sequence as the manual

reference position return.
1:  Returns to the reference position by positioning at a rapid traverse.

The synchronous axis returns to the reference position in the same
sequence as the manual reference position return when no
return–to–reference position is performed after the power is turned
on.

0778 Movement of tool rotation axis per revolution (T series)

[Data type] Two–word

Increment system IS–A IS–B IS–C Unit

Rotation axis 0.01 0.001 0.0001 deg

[Valid data range] 1 to 9999999

This parameter sets the movement of a tool rotation axis per revolution.

������ Message Description

217 DUPLICATE G251 (COM-
MANDS)

G251 is further commanded in the po-
lygonal turning mode.  Modify the pro-
gram.

218 NOT FOUND P/Q COM-
MAND IN G251

P or Q is not commanded in the G251
block, or the command value is out of
the range.  Modify the program.

219 COMMAND G250/G251
INDEPENDENTLY

G251 and G250 are not independent
blocks.

220 ILLEGAL COMMAND IN
SYNCHR–MODE

In the synchronous operation, move-
ment is commanded by the NC pro-
gram or PMC axis control interface for
the synchronous axis.

221 ILLEGAL COMMAND IN
SYNCHR–MODE

Polygon machining synchronous op-
eration and Cs contouring control or
balance cutting are executed at a
time.  Modify the program.

Alarm and message



6. INTERPOLATION FUNCTION B–61393E–2/02

258

CAUTION
1 Before issuing a G251, rotate the spindle.  If it is not rotating

when the G251 is issued, the program stops to wait for a
one–rotation signal from the position coder on the spindle.
This does not apply to a dry run.

2 A reset releases the polygonal turning mode.
3 Machine a workpiece at the same spindle speed until finish

machining for the workpiece.

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.21 POLYGONAL TURNING

Caution

Reference item



B–61393E–2/02 6. INTERPOLATION FUNCTION

259

When a tool with a rotation axis (4th axis) is moved in the XY plane
during cutting, the normal direction control function can control the tool
so that the 4th axis is always perpendicular to the tool path (Fig. 6.10).

Tool

Tool

Programmed tool pat�

Normal direction (in
which the tool moves)

4th axi�

4th axi�

Fig. 6.10 Sample Movement of the tool

Movement of the 4th axis inserted at the beginning of each block is
executed at the feedrate set in parameter 5481.  If dry run mode is on at
that time, the dry run feedrate is applied.  If the tool is to be moved along
the X–and Y–axes in rapid traverse (G00) mode, the rapid traverse rate
is applied.

If the federate of the 4th axis exceeds the maximum cutting feedrate of the
4th axis specified to parameter No.0527, the federate of each of the other
axes is clamped to keep the federate of the 4th axis below the maximum
cutting feedrate of the 4th axis.

6.10
NORMAL DIRECTION 
CONTROL 
(M SERIES)

General



6. INTERPOLATION FUNCTION B–61393E–2/02

260

0527 Maximum cutting feedrate for all axes

[Data type] Word

��������� ������ 	��� �� ���


��� ��� �����

��������� ������ 	��� �� ���

����� ���� ����

Millimeter machine 1 mm/min 6 to 15000 6 to 12000

Inch machine 0.1 inch/min 6 to 6000 6 to 4800

Specify the maximum cutting feedrate.

A feedrate in the tangential direction is clamped in cutting feed so that it
does not exceed the feedrate specified in this parameter.

0683 Rotation feedrate of normal direction control axis

[Data type] Word

[Unit of data] 1 deg/min

[Valid data range] 1 to 15000

This parameter sets the feedrate of a normal direction control axis that is
inserted at the start point of a block during normal direction control.

0832 Limit value that ignores the rotation insertion of normal direction control axis

[Data type] Two–word

Increment system IS–A IS–B IS–C Unit

Rotation axis 0.01 0.001 0.0001 deg

[Valid data range] 1 to 99999999

The rotation block of a normal direction control axis is not inserted when
the rotation insertion angle calculated during normal direction control
does not exceed this setting value.  The ignored rotation angle is added to
the next rotation insertion angle.  The block insertion is then judged.

NOTE
1 No rotation block is inserted when 360 or more degrees are

set.
2 If 180 or more degrees are set, a rotation block is inserted

only when the circular interpolation is 180 or more degrees.

Parameter

[Unit of data]

[Valid data range]

[Unit of data]



B–61393E–2/02 6. INTERPOLATION FUNCTION

261

0833 Limit value of movement that is executed at the normal direction angle of a
preceding block

[Data type] Two–word

Increment system IS–A IS–B IS–C Unit

Metric input 0.01 0.001 0.0001 mm

Inch input 0.001 0.0001 0.00001 inch

[Valid data range] 1 to 99999999

This parameter sets the limit value of movement at the normal direction
angle of a preceding block.

N1

Tool center path
N2

Movement
Programmed path

For straight line
Block N2 is machined with the tool being normal
to block N1 when the movement of N2 in the
figure on the left does not exceed the set value.

N3

Diameter

Programmed path

Tool center path
N2 For arc

Arc N2 is machined with the tool being normal
to block N1 when the arc diameter of N2 in the
figure on the left does not exceed the setting
value.  A normal direction axis is not controlled
to move in the normal direction according to
the arc movement.

N1

N3

NOTE
The helical interpolation option is required to use this
function.  Helical interpolation cannot be specified in the
normal direction control mode.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.14.11 NORMAL DIRECTION CONTROL

[Unit of data]

Note

Reference item



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION 

AND DECELERATION CONTROL

262

7 FEEDRATE CONTROL/ACCELERATION ANDDECELERATION CONTROL



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION

 AND DECELERATION CONTROL

263

The feed functions control the feedrate of the tool.  The following two feed
functions are available:

1. Rapid traverse 
When the positioning command (G00) is specified, the tool moves at
a rapid traverse rate set in the CNC (parameter Nos.0518 – 0521).

2. Cutting feed
The tool moves at a programmed cutting feedrate.

Override can be applied to a rapid traverse rate or cutting feedrate using
the switch on the machine operator’s panel.

The positioning command (G00) positions the tool by rapid traverse.

G00  IP_ ;

G00 : G code (group 01) for positioning (rapid traverse)
  IP_ ; Dimension word for the end point

In rapid traverse, the next block is executed after the specified rate
becomes 0 and the servo motor reaches a certain range set by the MTB
(in–position check).
A rapid traverse rate is set for each axis by parameter Nos.0518 – 0521,
so no rapid traverse rate need be programmed.
The following overrides can be applied to a rapid traverse rate using the
switch on the machine operator’s panel :F0, 25, 50, 100%
F0:  Allows a fixed feedrate to be set for all axes by parameter No.0533.

#7
0001

#6
RDRN

#5 #4 #3 #2 #1 #0

[Data type] Bit

RDRN Dry run for rapid traverse command
0 : Disabled
1 : Enabled

#7
0393

#6 #5
STOV0

#4 #3 #2 #1 #0

[Data type] Bit

STOV0 When cutting feedrate override is 0% during rapid traverse,
0 : The machine tool does not stop moving.
1 : The machine tool stops moving.

7.1
FEEDRATE CONTROL

7.1.1
Rapid Traverse Rate

General

Parameter



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION 

AND DECELERATION CONTROL

264

0518 Rapid traverse for X axis

0519 Rapid traverse for Y axis

0520 Rapid traverse for Z axis

0521 Rapid traverse for 4th axis

0643 Rapid traverse for 7th axis

0644 Rapid traverse for 8th axis

7518 Rapid traverse for 5th axis

7519 Rapid traverse for 6th axis

��������� ������ 	��� �� ���


��� ��� �����

��������� ������ 	��� �� ���

����� ���� ����

Millimeter machine 1 mm/min 30 to 24000 30 to 12000

Inch machine 0.1 inch/min 30 to 9600 30 to 4800

Rotaion axis 1 deg/min 30 to 24000 30 to 12000

Set the rapid traverse rate for each axis.

NOTE
By setting the FML 10 bit (bit 7 of parameter 0049) to 1, the
units of data can be multiplied by ten.  Doing so causes the
maximum value to change as follows:
IS–A, IS–B:  100 [m/min] (4000 [inch/min])
IS–C:  12 [m/min] (480 [inch/min])

Manual rapid traverse rate0559 – 0562

[Data type] Two–word

��������� ������ 	��� �� ���


��� ��� �����

��������� ������ 	��� �� ���

����� ���� ����

Millimeter machine 1 mm/min 30 to 24000 30 to 12000

Inch machine 0.1 inch/min 30 to 9600 30 to 4800

Rotaion axis 1 deg/min 30 to 24000 30 to 12000

Set the rate of manual rapid traverse for each axis when the rapid traverse
override is 100% for each axis.

NOTE
If 0 is set, the rate set in parameter No.0518 – 0521 is
assumed.

[Unit of data]

[Valid data range]

[Unit of data]

[Valid data range]



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION

 AND DECELERATION CONTROL

265

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.5.2 RAPID TRAVERSE

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.5.2 RAPID TRAVERSE

Reference item



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION 

AND DECELERATION CONTROL

266

A common upper limit can be set on the cutting feedrate along each axis
with parameter No.0527.  If an actual cutting feedrate (with an override
applied) exceeds a specified upper limit, it is clamped to the upper limit.

0527 Maximum cutting feedrate for all axes

[Data type] Word

��������� ������ 	��� �� ���


��� ��� �����

��������� ������ 	��� �� ���

����� ���� ����

Millimeter machine 1 mm/min 6 to 15000 6 to 12000

Inch machine 0.1 inch/min 6 to 6000 6 to 4800

Specify the maximum cutting feedrate.

A feedrate in the tangential direction is clamped in cutting feed so that it
does not exceed the feedrate specified in this parameter.

NOTE
CNC calculation may involve a feedrate error of �2% with
respect to a specified value. However, this is not true for
acceleration/deceleration. To be more specific, this error is
calculated with respect to a measurement on the time the
tool takes to move 500 mm or more during the steady state:

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.5.3 CUTTING FEED

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.5.3 CUTTING FEED

7.1.2
Cutting Feedrate
Clamp

General

Parameter

[Unit of data]

[Valid data range]

Note

Reference item



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION

 AND DECELERATION CONTROL

267

After specifying G94 (G98 for T series) (in the feed per minute mode), the
amount of feed of the tool per minute is to be directly specified by setting
a number after F.  G94 (G98 for T series) is a modal code.  Once a G94
(G98 for T series) is specified, it is valid until G95 (G99 for T series) (feed
per revolution) is specified.  At power–on, the feed per minute mode (feed
per revolution mode for T series) is set.
An override from 0% to 254% (in 1% steps) can be applied to feed per
minute with the feedrate override signal.
Refer to manuals of machine tool builder for details.

Workpiece

Table

Tool

Feed amount per minute
(mm/min or inch/min)

[M series]

Fig. 7.1.3  Feed per minute

WARNING
No override can be used for any commands such as for
threading.

For M series 
G94; G code for feed per minute (Group 05)
F_; Feed rate (mm/min or inch/min)

For T series 
G98; G code for feed per minute (Group 05)
F_; Feed rate (mm/min or inch/min)

7.1.3
Feed Per Minute

General

� Feed per minute (G94)

Format (M series)

Format (T series)



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION 

AND DECELERATION CONTROL

268

#7
0077

#6 #5
HICFR

#4 #3 #2 #1 #0

[Data type] Bit

HICFR Cutting feedrates at feed per minute is specified by F commands
0 : In units of 1 mm/min for millimeter machines or 0.01 inches/min for

inch machines.
1 : In unit of 0.001 mm/min for millimeter machines or 0.00001

inches/min for inch machines.

NOTE
M series are not equipped with this parameter. Cutting
feedrates are specified by F commands in units of 0.001
mm/min for millimeter machines or 0.00001 inches/min for
inch machines.

������ Message Description

011 NO FEEDRATE COM-
MANDED

Feedrate was not commanded to a
cutting feed or the feedrate was inad-
equate. Modify the program.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.5.3 CUTTING FEED

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.5.3 CUTTING FEED

Parameter

Alarm and message

Reference item



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION

 AND DECELERATION CONTROL

269

After specifying G95 (G99 for T series) (in the feed per revolution mode),
the amount of feed of the tool per spindle revolution is to be directly
specified by setting a number after F. G95 (G99 for T series) is a modal
code.  Once a G95 is specified, it is valid until G94 (G98 for T series) (feed
per minute) is specified. 
An override from 0% to 254% (in 1% steps) can be applied to feed per
revolution with the switch on the machine operator’s panel.  For detailed
information, see the appropriate manual of the machine tool builder.

Feed amount per spindle revolution
(mm/rev or inch/rev)

F
[T series]

Fig. 7.1.4 Feed per revolution

Jog feedrate can be specified by feed per revolution.

#7
0008

#6 #5 #4
MFPR

#3 #2 #1 #0
(T series)

[Data type] Bit

MFPR Jog feed
0 : Jog feed is performed at feed per minute.
1 : Jog feed is performed at feed per rotation.

CAUTION
When the speed of the spindle is low, feedrate fluctuation
may occur. The slower the spindle rotates, the more
frequently feedrate fluctuation occurs.

7.1.4
Feed Per Revolution/
Manual Feed Per 
Revolution

General

� Feed per revolution

� Manual feed per 
revolution

Parameter

Caution



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION 

AND DECELERATION CONTROL

270

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.5.3 CUTTING FEED

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.5.3 CUTTING FEED

Reference item



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION

 AND DECELERATION CONTROL

271

When a one–digit number from 1 to 9 is specified after F, the feedrate set
for that number in a parameter (Nos. 0788 to 0796) is used.  When F0 is
specified, the rapid traverse rate is applied.
The feedrate corresponding to the number currently selected can be
increased or decreased by turning on the switch for changing F1–digit
feedrate on the machine operator’s panel, then by rotating the manual
pulse generator.
The increment/decrement, ∆F, in feedrate per scale of the manual pulse
generator is as follows:

F � Fmax
100X

∆

Fmax : feedrate upper limit for F1–F4 set by parameter 0583, or
feedrate upper limit for F5–F9 set by parameter 0584

X  : any value of 1–127 set by parameter 0216
The feedrate set or altered is kept even while the power is off.  The current
feedrate is displayed on the CRT screen.

[Classification] Input signal

[Function] Increases or decreases F1-digit speed set by the parameters No. 0788 to
0796 using the manual pulse generator.  
Since the manual pulse generator may also be used for axis feeding, signal
F1D (G140#7) designates which function may be used.

[Operation] When the signal is “1”, the F1–digit speed can be increased/decreased
using the manual pulse generator.

#7
F1DG140

#6 #5 #4 #3 #2 #1 #0
(M series)

7.1.5
F1-digit Feed 
(M Series)

General

Signal

F1-digit feed select signal
F1D <G140#7>

Signal address



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION 

AND DECELERATION CONTROL

272

0216 Change of feedrate for one graduation on the manual pulse generator
during F1 digit feed

[Data type] Byte

[Valid data range] 1 to 127

Set the constant that determines the change in feedrate as the manual pulse
generator is rotated one graduation during F1-digit feed.

F � Fmaxi
100n

∆   (where, i=1 or 2)

In the above equation, set n.  That is, the number of revolutions of the
manual pulse generator, required to reach  feedrate Fmaxi is obtained.
Fmaxi refers to the upper limit of the feedrate for an F1-digit feed
command, and set it in parameter 0583 or 0584.

Fmax1:  Upper limit of the feedrate for F1 to F4 (parameter 0583)

Fmax2:  Upper limit of the feedrate for F5 to F9 (parameter 0584)

0583 Upper limit of feedrate for the F1–digit  feed command (F1 to F4)

0584 Upper limit of feedrate for the F1-digit  feed command (F5 to F9)

[Data type] Two–word

��������� ������ 	��� �� ���


��� ��� �����

��������� ������ 	��� �� ���

����� ���� ����

Millimeter machine 1 mm/min 6 to 15000 6 to 12000

Inch machine 0.1 inch/min 6 to 6000 6 to 4800

Rotaion axis 1 deg/min 6 to 15000 6 to 12000

Set the upper limit of feedrate for the F1-digit feed command.

As the feedrate increases by turning the manual pulse generator, the
feedrate is clamped when it reaches the upper limit set. If an F1-digit feed
command F1 to F4 is executed, the upper limit is that set in parameter
0583. If an F1-digit command F5 to F9 is executed, the upper limit is that
set in parameter 0584.

Parameter



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION

 AND DECELERATION CONTROL

273

0788 Feedrate for F1 digit command F1

0789 Feedrate for F1 digit command F2

0790 Feedrate for F1 digit command F3

0791 Feedrate for F1 digit command F4

0792 Feedrate for F1 digit command F5

0793 Feedrate for F1 digit command F6

0794 Feedrate for F1 digit command F7

0795 Feedrate for F1 digit command F8

0796 Feedrate for F1 digit command F9

[Data type] Two–word

��������� ������ 	��� �� ���


��� ��� �����

��������� ������ 	��� �� ���

����� ���� ����

Millimeter machine 1 mm/min 6 to 15000 6 to 12000

Inch machine 0.1 inch/min 6 to 6000 6 to 4800

Rotaion axis 1 deg/min 6 to 15000 6 to 12000

Set Feedrates for F1-digit feed commands F1 to F9.

When an F1-digit feed command is executed, as the feedrate is changed by
turning the manual pulse generator, these parameter values also change
accordingly.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.5.3 CUTTING FEED

Reference item



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION 

AND DECELERATION CONTROL

274

An override of four steps (F0, 25%, 50%, and 100%) can be applied to the
rapid traverse rate.  F0 is set by a parameter (No.0533).

ÇÇ
ÇÇ
ÇÇ

ÇÇ
ÇÇ

Rapid traverse
rate10m/min

Override
50%

5m/min

Fig.7.1.6.1  Rapid traverse override

Actual feedrate is obtained by multiplying the rapid traverse rate preset
by parameter Nos.0518 to 0521 by the override value determined by this
signal, whether in automatic or manual operation (including manual
reference position return).

For F0 value, an absolute value is set by parameter No.0533 within a range
of 0 to rapid traverse rate.

[Classification] Input signal

[Function] These signals override the rapid traverse rate

[Operation] These code signals correspond to the rates as follows:

Rapid traverse override
Override val e

ROV2 ROV1
Override  value

0 0 100 %

0 1 50 %

1 0 25 %

1 1 Fo %

Fo:  Set in parameter No.0533

7.1.6
Override

7.1.6.1
Rapid traverse override

General

� Feedrate

� F0 rate

Signal

Rapid traverse override
signal
ROV1, ROV2
<G116#7, G117#7>



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION

 AND DECELERATION CONTROL

275

#7
ROV1G116

#6 #5 #4 #3 #2 #1 #0

ROV2G117

#7
EAXOVE0078

#6 #5 #4 #3 #2 #1 #0
(M series)

[Data type] Bit

EAXOVE Dry run and override signals during axis control by the PMC
0 : Use the same signals as CNC

(1)Cutting feed override signal *OV1 to *OV128
(2)Override cancel signal OVC
(3)Rapid traverse override signals ROV1 and ROV2
(4)Dry run signal DRN
(5)Rapid traverse selection signal RT

1 : Use dedicated axis control signals by the PMC.  
(1)Cutting feed override signal *OV1E to *OV8E
(2)Override cancel signal OVCE
(3)Rapid traverse override signals ROV1E and ROV2E
(4)Dry run signal DRNE
(5)Rapid traverse selection signal RTE

0533 F0 rate of rapid traverse override

[Data type] Word

��������� ������ 	��� �� ���


��� ��� �����

��������� ������ 	��� �� ���

����� ���� ����

Millimeter machine 1 mm/min 6 to 15000 6 to 12000

Inch machine 0.1 inch/min 6 to 6000 6 to 4800

Rotaion axis 1 deg/min 6 to 15000 6 to 12000

Set the F0 rate of the rapid traverse override.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

III.5.3 RAPID TRAVERSE OVERRIDE

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

III.5.3 RAPID TRAVERSE OVERRIDE

Signal address

Parameter

[Unit of data]

[Valid data range]

Reference item



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION 

AND DECELERATION CONTROL

276

A programmed feedrate can be reduced or increased by a percentage (%)
selected by the override dial.This feature is used to check a program.
For example, when a feedrate of 100 mm/min is specified in the program,
setting the override dial to 50% moves the tool at 50 mm/min.

Tool
Check the machining
by altering the feedrate
from the value speci-
fied in the program.

Feedrate 100 mm/min
(Specified by programmed)

Feedrate 50 mm/min after
feedrate override

Workpiece

Fig.7.1.6.2  Feedrate override

[Classification] Input signal

[Function] These signals override the cutting feedrate. Eight binary code signals
correspond to override values as follows:

Override value  = Σ � 2i×Vi � %
7

 

i=0

Vi=0 when *OVi is “1” and
Vi=1 when *OVi is “0”

These signals have the following weight.

*OV1=1%, *OV2=2%, *OV4=4%, *OV8=8%, 
*AOV16=16%, *AOV32=32%, *AOV64=64%, *AOV128=128%

When all signals are “0”, they are regarded as overriding 0% in the same
way as when all signals are “1” .
Thus, the override is selectable in steps over a range of 0 to 254%.

7.1.6.2
Feedrate override

General

Signal

Feedrate Override signal 
*OV1 to *OV8
<G121#0 to G121#3>
(T/M series)
*AOV16 to *AOV128
<G116#4 to G116#6, 
G117#6>(M series)
*AOVR16 to *AOVR128
<G140#4 to G140#7>
(T series)



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION

 AND DECELERATION CONTROL

277

[Operation] Actual feedrate is obtained by multiplying the speed specified in cutting
feed in automatic operation mode by the override value selected by this
signal.
The override is regarded as 100%, regardless of this signal, in the
following cases:

⋅Override cancel signal OVC is “1”.
⋅During cutting in tap cycle of canned cycle;
⋅Tapping mode (63); or
⋅Thread cutting is in progress.

#7
G116

#6
*AOV64

#5
*AOV32

#4
*AOV16

#3 #2 #1 #0
(M series)

G117 *AOV128 (M series)

G121 *OV8 *OV4 *OV2 *OV1

*AOVR128G140 *AOVR64 *AOVR32 *AOVR16 (T series)

#7
0393

#6 #5
STOV0

#4 #3 #2 #1 #0

[Data type] Bit

STOV0 When cutting feedrate override is 0% during rapid traverse,
0 : The machine tool does not stop moving.
1 : The machine tool stops moving.

#7
0397

#6 #5 #4 #3 #2
OVR255

#1 #0
(T series)

OVR255 (M series)

OVR255 The signals of speed override in units of 1% (*AOVR16 to *AOVR128)
are:
0 : Disabled.
1 : Enabled.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.5.3 CUTTING FEED

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.5.3 CUTTING FEED

Signal address

Parameter

Reference item



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION 

AND DECELERATION CONTROL

278

The rapid traverse rate can be overridden by selecting a rapid traverse
override signal (ROV1D to ROV3D).

Machine contact status Override value

ROV3D ROV2D ROV1D When parameter
OVRI is 0

When parameter
OVRI is 1

0 0 0 100% 20%

0 0 1 50% 15%

0 1 0 25% 10%

0 1 1 F0 5%

1 0 0 5% F0

1 0 1 10% 25%

1 1 0 15% 50%

1 1 1 20% 100%

#7
G116

#6
ROV3D

#5
ROV2D

#4
ROV1D

#3 #2 #1 #0

#7
0003

#6 #5 #4
OVRI

#3 #2 #1 #0

OVRI 1 : When the override signal (*OV1 to *OV8, ROV1, ROV2, ROV1D to
ROV3D) is set to 1, the speed increases.

0 : When the override signal (*OV1 to *OV8, ROV1, ROV2, ROV1D to
ROV3D) is set to 0, the speed increases.

#7
0041

#6 #5 #4 #3
ROVB

#2 #1 #0

ROVB 1 : ROV1D to ROV3D are used as the rapid traverse override signals.
(Enabled for PMC is used.)

0 : ROV1 and ROV2 are used as the rapid traverse override signals.

7.1.6.3
Rapid traverse override
B (T series)

General

Signal

[Operation]

Signal address

Parameter



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION

 AND DECELERATION CONTROL

279

The override cancel signal fixes the feedrate override to 100%.

[Classification] Input signal

[Function] Feedrate override is fixed to 100%.

[Operation] When the signal is “1”, the CNC operates as follows:
⋅ Feedrate override is fixed to 100% irrespective of feedrate override

signal.

⋅ Rapid traverse override and spindle speed override are not affected.

#7
G126

#6 #5 #4
OVC

#3 #2 #1 #0

7.1.6.4
Override cancel

General

Signal

Override cancel signal 
OVC<G126#4>

Signal address



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION 

AND DECELERATION CONTROL

280

When G62 is specified, and the tool path with cutter compensation
applied forms an inner corner, the feedrate is automatically overridden
at both ends of the corner. 
There are four types of inner corners (Fig. 7.1.7).
2,�θ�θp�178, in Fig. 7.1.7
θp is a value set with parameter No. 0215. When θ is approximately
equal to θp, the inner corner is determined with an error of 0.001,or
less.

θ

�Cutter center path

�Tool

�Programmed path

θ

θ

θ

1. Straight line–straight line 2. Straight line–arc

3. Arc–straight line 4. Arc–arc

Fig. 7.1.7 (a) Inner corner

WARNING
When the block before a corner is a start–up block, or the
block after a corner includes G41 or G42, the feedrate is not
overridden. The feedrate override function is disabled when
the offset value is 0.

7.1.7
Automatic Corner
Override (M series)

General

� Inner corner automatic
override



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION

 AND DECELERATION CONTROL

281

An override value is set with parameter No. 0214.  An override value
is valid even for dry run and F1–digit feed specification.
In the feed per minute mode, the actual feedrate is as follows:

F × (inner corner automatic override) × (feedrate override)

For internally offset circular cutting, the feedrate on a programmed path
is set to a specified feedrate (F) by specifying the circular cutting feedrate
with respect to F, as indicated below.  This  function is valid in the cutter
compensation mode, regardless of the G62 code.

F � Rc
Rp

Rc : Cutter center path radius
Rp : Programmed radius

It is also valid for the dry run and the F1–digit feed command.

��

RP

Programmed path

Cutter center
path

Fig. 7.1.7 (b) Internal circular cutting feedrate change

If Rc is much smaller than Rp, Rc/Rp�0; the  tool stops. A minimum
deceleration ratio (MDR) is to be specified with parameter No. 0213.
When  Rc/Rp�MDR, the  feedrate of the tool is (F×MDR).

CAUTION
When internal circular cutting must be performed together
with automatic override for inner corners, the feedrate of the
tool is as follows:

 (inner corner override)× (feedrate override)F � Rc
Rp

�

� Override value

� Internal Circular Cutting 
Feedrate Change



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION 

AND DECELERATION CONTROL

282

0213 Minimum deceleration ratio (MDR) of the inner circular cutting rate in
automatic corner override

[Data type] Byte

[Unit of data] %

[Valid data range] 1 to 100

Set the minimum deceleration ratio (MDR) in changing the inner circular
cutting feedrate by automatic corner override.

In circular cutting with an inward offset, the actual feedrate for a specified
feedrate (F) becomes as follows:

F� Rc
Rp

�
Rc:  Radius of the path of the cutter’s center
Rp:  Programmed radius

As the actual feedrate becomes the value obtained from the above
equation, the specified rate F can be achieved on the program path.

Programmed 
path

Cutter center 
path

Rc

Rp

If Rc is too samall in comparison with Rp so that Rc
Rp

 �0, the cutter will

stop.  To prevent this, the minimum deceleration ratio (MDR) is set.  

When Rc
Rp

 �0,

the actural rate becomes as follows:  
F × (MDR)

0214 Amount of automatic override for an inner corner

[Data type] Byte

[Unit of data] %

[Valid data range] 1 to 100 (standard value = 50)
Set inner corner automatic override value when automatic corner override
is performed.

0215 Angle (�p) to recognize the inner corner in automatic override

[Data type] Byte

[Unit of data] Degree

[Valid data range] 1 to 179 (standard value = 91)
Set the angle to recognize the inner corner when automatic corner override
is performed for the inner corner

Parameter



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION

 AND DECELERATION CONTROL

283

0580 Distance Le from the starting point in inner corner automatic override

[Data type] Word

[Unit of data]

Increment system IS–A IS–B IS–C Unit

Input in mm 1 0.1 0.01 mm

Input in inches 0.1 0.01 0.001 inch

[Valid data range] 0 to 3999

Set distance Le from the starting point in an inner comer for automatic
corner override.

0581 Distance Ls up to the ending point in inner corner automatic override

[Data type] Word

[Unit of data]
Increment system IS–A IS–B IS–C Unit

Input in mm � ��� ���� mm

Input in inches ��� ���� ����� inch

[Valid data range] 0 to 3999

Set distance Ls up to the end point in an inner corner for automatic corner
override.
If �� �p, the inside of a comer is recognized.  (� is set in parameter 0215.)
When an inner corner is recognized, the feedrate is overridden in the range
of Le in the block immediately before the intersection of the corner and Ls
in the next block following the intersection.
Ls and Le are each a straight line connecting the intersection of the corner
and a given point on the path of the cutter’s center.
Ls and Le are set in parameters 0580 and 0581.

An override is applied from point a to b.

Programmed
path

Cutter center
path

LsLe

a
bθ

Fig. 7.1.7 (c) Distance Le and Ls in the automatic 
corner override at an inner corner

OPERATOR’S MANUAL
(For Machining Center)

II.5.4.2 Automatic Override for Inner Corners
(For Machining Center)
(B–61404E) II.5.4.3 Internal Circular Cutting Feedrate Change

Reference item



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION 

AND DECELERATION CONTROL

284

These signals decelerate the feedrate of the control axes down to the speed
which has been set by parameter No. 0636.

[Classification] Input signal

[Function] These signals are used to apply deceleration; provided for each direction
of each control axis; +/� indicates the direction, while the signal number
corresponds to the number of the controlled axis.

  *

X … The X axis is decelerated.

Y … The Y axis is decelerated.

Z … The Z axis is decelerated.

+ … The feed is decelerated in the plus (+) direction.

– … The feed is decelerated in the minus (–) direction.

EDC+ �

[Operation] When a signal becomes “0”, the corresponding axis decelerate to stop in
the specified direction. If the speed with the signal set to 1 is lower, the
speed does not change.  (Acceleration will not occur.)  The override
function is disabled for external deceleration.

#7
G138

#6 #5 #4
*–EDCZ

#3
*–EDCX

#2 #1
*+EDCZ

#0
*+EDCX (T series)

G138 *–EDCZ *–EDCY *–EDCX *+EDCZ *+EDCY *+EDCX (M series)

7.1.8
External Deceleration

General

Signal

External deceleration
signal
*+EDCX to
*–EDCZ<G138>

Signal address



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION

 AND DECELERATION CONTROL

285

#7
0059

#6 #5 #4
EDMZ

#3
EDMX

#2 #1
EDPZ

#0
EDPX (T series)

0059 EDMZ EDMY EDMX EDPZ EDPY EDPX (M series)

[Data type] Bit

EDPx External deceleration signal in the positive direction for each axis
0 : Valid only for rapid traverse
1 : Valid for rapid traverse and cutting feed

EDMx External deceleration signal in the negative direction for each axis
0 : Valid only for rapid traverse
1 : Valid for rapid traverse and cutting feed

0636 External deceleration rate

[Data type] Word

��������� ������ 	��� �� ���


��� ��� �����

��������� ������ 	��� �� ���

����� ���� ����

Millimeter machine 1 mm/min 6 to 15000 6 to 12000

Inch machine 0.1 inch/min 6 to 6000 6 to 4800

Rotaion axis 1 deg/min 6 to 15000 6 to 12000

Set the external deceleration rate.

Parameter



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION 

AND DECELERATION CONTROL

286

When an arc is cut at a high speed in circular interpolation, a radial error
exists between the actual tool path and the programmed arc.  An
approximation of this error can be obtained from the following
expression:

0

�

�

r

��Error

��Maximum radial error (mm)

�Feedrate (mm/s)
�Arc radius (mm)
	��Time constant (s) for exponential acceleration/deceleration of

cutting feed
	��Time constant of the servo motor (s)

�� �	�
��	�

��
2
1




�

Programmed path

Actual path

When actual machining is performed, radius r of the arc to be machined
and permissible error�r are given.  Then, maximum allowable feedrate
v (mm/min) is determined from the above expression.

The function for clamping the feedrate by the arc radius automatically
clamps the feedrate of arc cutting to the value set in a parameter.  This
function is effective when the specified feedrate may cause the radial error
for an arc with a programmed radius to exceed the permissible degree of
error.

0495 Maximum feedrate for arc radius R

[Data type] Word

��������� ������ ���� �� ��

���� �� ����

.��������� ������ ���� �� ��
�
��� �
�� �
��

Millimeter machine 1 mm/min 6 to 15000 6 to 12000

Inch machine 0.1 inch/min 6 to 6000 6 to 4800

Set a maximum feedrate for the arc radius set in parameter No. 0863.
Set this parameter when the function for clamping the feedrate by an arc
radius is supported.

7.1.9
������� ������� ��

��� 	���� (M Series)

General

Parameter



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION

 AND DECELERATION CONTROL

287

0496 Minimum value (RV min) for arc radius–based feedrate clamp

[Data type] Word

��������� ������ 	��� �� ���


��� ��� �����

��������� ������ 	��� �� ���

����� ���� ����

Millimeter machine 1 mm/min 6 to 15000 6 to 12000

Inch machine 0.1 inch/min 6 to 6000 6 to 4800

The arc radius–based feedrate clamping function reduces the maximum
feedrate as the arc radius decreases.  When the specified maximum
feedrate is not greater than RV min (minimum value for arc radius–based
feedrate clamping), RV min is used as the maximum feedrate.

0863 Arc radius value corresponding to a maximum feedrate

[Data type] Two–word

[Unit of data]

Unit IS–A IS–B IS–C Unit

Linear axis 
(millimeter machine)

0.01 0.001 0.0001 mm

Linear axis 
(inch machine)

0.001 0.0001 0.00001 inch

[Valid data range] 1000 to 99999999

Set the arc radius corresponding to the maximum feedrate set in parameter
No. 0495.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.5.9 FEEDRATE CLAMP BY CIRCLE
RADIUS

Reference item



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION 

AND DECELERATION CONTROL

288

This function automatically controls the feedrate during corner
machining according to the angle of a corner made by machining blocks
or according to the feedrate difference for each axis.

This function is enabled when G64 (machining) mode is selected and
deceleration of the first of two consecutive cutting feed blocks is
executed.

Feedrate control can be performed according to the angle of a corner made
by machining blocks or according to the feedrate difference for each axis.
The desired method is selected by specifying the corresponding value in
the CHEAFD bit (bit 3 of parameter No. 0395).

If the angle made by blocks A and B is smaller than that specified in parameter
No. 0865 (for the selected plane), and if the feedrate is lower than that specified
in parameter No. 0482, the system executes block B, assuming that no pulses
are accumulated.

The figure shows the relationship between feedrate and time when a
corner angle is smaller than the angle specified in the parameter.

At time t, some accumulated pulses remain, as indicated by the shaded
part.  The system, however, starts the next block because the feedrate of
the automatic acceleration/deceleration circuit is lower than that specified
in the parameter.

Time

Feedrate specified in
parameter No. 0482

Feedrate

t

Block A Block B

7.1.10
Automatic Corner 
Deceleration (M series)

General

Feedrate control 
according to corner 
angle

� Overview



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION

 AND DECELERATION CONTROL

289

� When linear acceleration/deceleration before interpolation for
cutting feed is enabled

If the angle made by blocks A and B is smaller than that specified in
parameter No. 0865 (for the selected plane), and if the feedrates
programmed for blocks A and B are higher than the value set in parameter
No. 0482, the feedrate is reduced to the value specified in the parameter
in block A.  In block B, the feedrate is increased to the programmed
feedrate.  The rate of acceleration depends on the parameter for linear
acceleration/deceleration before interpolation for cutting feed.

Speed

���� 	 
���� 


���

����� ��� ��
���������
���� �����

#7
0393

#6 #5 #4 #3 #2 #1 #0
FERDT

[Data type] Bit

FERDT Function for automatically reducing the feedrate at corners (automatic
corner override function)
0 : The function is not used.
1 : The function is used.

#7
0395

#6 #5 #4 #3
CHEAFD

#2 #1 #0

[Data type] Bit

CHEAFD In the function for automatically reducing a feedrate at corners,
0 : Angles are used for controlling the feedrate.
1 : Differences in feedrates are used for controlling the feedrate.

0482 Feedrate  for assuming the termination of automatic corner deceleration

[Data type] Word

��������� ������ 	��� �� ���


��� ��� �����

��������� ������ 	��� �� ���

����� ���� ����

Millimeter machine 1 mm/min 6 to 15000 6 to 12000

Inch machine 0.1 inch/min 6 to 6000 6 to 4800

Rotaion axis 1 deg/min 6 to 15000 6 to 12000

Set the feedrate for assuming the termination of deceleration in automatic
corner deceleration.

� Parameter



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION 

AND DECELERATION CONTROL

290

0865 Critical angle subtended by two blocks for automatic corner deceleration

[Data type] Two–word

[Unit of data] 0.001 deg

[Valid data range] 0 to 180000
Set a critical angle to be subtended by two blocks for corner deceleration
when the angle–based automatic corner deceleration function is used.

The angle subtended by two blocks is defined as� in the examples shown
below.

θ θ

Block A (G01)

Block B (G01)

Angle made by two lines

Block A (G02)

Block B(G01)

If a circular path is included, the angle
between the tangent of the arc and
another line is considered.

CAUTION
1 The angle of the machining tool path is compared with that

specified in parameter No. 0865 only for the X–Y plane.
The actual feedrate and that specified in parameter No.
0482 are compared only for the X and Y axes of the X–Y
plane.  Even if simultaneous movement is performed along
three or more axes, the feedrates of only the X and Y axes
are compared for the X–Y plane.

2 The roundness of a corner is determined by the angle and
feedrate specified in parameter Nos. 0865 and 0482,
respectively.  If a sharp corner is always required, set a
feedrate of zero and an angle of 180000 (180 degrees).

3 If a G09 (exact stop) command is executed, an exact stop
is performed, irrespective of the angle and feedrate
specified in parameter Nos.0865 and 0482.

4 This function is disabled in single block and dry run mode.

Caution



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION

 AND DECELERATION CONTROL

291

If the difference between the programmed feedrates at the end of block A
and at the beginning of block B for each axis exceeds the value specified
in parameter No. 0483, and if the feedrates for all axes are lower than that
specified in parameter No. 0482, the system executes block B, assuming
that no pulses are accumulated.

The figure shows the relationship between the feedrate and time when the
feedrate difference for each axis exceeds the value specified in parameter
No. 0483.

At time t, some accumulated pulses remain, as indicated by the shaded
section.  The system, however, starts the next block because the feedrate
of the automatic acceleration/deceleration circuit is lower than that
specified in parameter No. 0482.

Speed set by parameter
(No. 0482)

t Time

�����

�	
�� � �	
�� �

� When linear acceleration/deceleration before interpolation for
cutting feed is enabled

If the difference between the feedrates of blocks A and B for each axis
exceeds the value specified in parameter No. 0483, the feedrate at the
corner is calculated from the difference for each axis, as shown below.
The feedrate is reduced to the calculated value in block A.

The feedrate change for each axis (Vc[X], Vc[Y], ...), caused by the
movement at programmed feedrate F, is compared with Vmax specified
in parameter No. 0483. If an feedrate change exceeding Vmax is detected,
the target feedrate after deceleration Fc is calculated, using maximum
comparison value Rmax.

R = Vc
Vmax

Fc = F
Rmax

If, for example, the direction of movement is changed from the X–axis to
the Y–axis, that is through 90 degrees, and if the programmed feedrate is
1000 mm/min and the permissible feedrate difference specified in
parameter No. 0483 is 500 mm/min, the deceleration shown below is
performed:

Feedrate control 
according to the feedrate
difference for each axis
� Overview



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION 

AND DECELERATION CONTROL

292

N2

 N1  G01  G91  X100.   F1000  ;

 N2  Y100.   ;

N1
Tool path if corner
deceleration is not
applied

← Tool path when corner deceleration was applied

F1000

   Without corner deceleration
   With corner deceleration

F500

F500

F500

N1 N2 Time

N2 Time

N1 Time

Speed

F1000

Speed

F1000
Speed

Feedrate
along 
X axis

Feedrate
along 
Y axis

Feedrate
along
tangential
direction



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION

 AND DECELERATION CONTROL

293

#7
0393

#6 #5 #4 #3 #2 #1 #0
FERDT

[Data type] Bit

FERDT Function for automatically reducing the feedrate at corners (automatic
corner override function)
0 : The function is not used.
1 : The function is used.

#7
0395

#6 #5 #4 #3
CHEAFD

#2 #1 #0

[Data type] Bit

CHEAFD In the function for automatically reducing a feedrate at corners,
0 : Angles are used for controlling the feedrate.
1 : Differences in feedrates are used for controlling the feedrate.

0482 Feedrate for assuming the termination of automatic corner deceleration

[Data type] Word

��������� ������ 	��� �� ���


��� ��� �����

��������� ������ 	��� �� ���

����� ���� ����

Millimeter machine 1 mm/min 6 to 15000 6 to 12000

Inch machine 0.1 inch/min 6 to 6000 6 to 4800

Rotaion axis 1 deg/min 6 to 15000 6 to 12000

Set the feedrate for assuming the termination of deceleration in automatic
corner deceleration.

0483 Allowable speed difference for the speed difference–based automatic corner
deceleration function

[Data type] Word

��������� ������ 	��� �� ���


��� ��� �����

��������� ������ 	��� �� ���

����� ���� ����

Millimeter machine 1 mm/min 6 to 15000 6 to 12000

Inch machine 0.1 inch/min 6 to 6000 6 to 4800

Set the speed difference for the speed difference–based automatic corner
deceleration function.

� Parameter



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION 

AND DECELERATION CONTROL

294

CAUTION
1 Even during dry run or external deceleration, the feedrate

difference is checked according to the F command in the
program.

2 If the G09 (exact stop) command is executed, an exact stop
is performed, irrespective of the values specified for the
parameters.

3 This function is invalid for the feed per rotation command,
F1–digit feed command, and rigid tapping command, as
well as in single block mode.

4 If the override is changed during operation, the feedrate
difference cannot be checked correctly.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.5.8 AUTOMATIC CORNER 
DECELERATION

Caution

Reference item



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION

 AND DECELERATION CONTROL

295

This function is designed for high–speed precise machining.  With this
function, the delay due to acceleration/deceleration and the delay in the
servo system which increase as the feedrate becomes higher can be
suppressed.
The tool can then follow specified values accurately and errors in the
machining profile can be reduced.  
This function becomes effective when advanced preview control mode is
entered by G08P1 command.

In advanced preview control mode, the following functions are available:

(1)Linear acceleration/deceleration before interpolation for cutting feed

(2)Automatic corner deceleration function

(3)Block overlap function

(4)Look–ahead feed forword

For details on the above functions, see the descriptions of the functions.

#7
0395

#6
FWBTYP

#5 #4 #3
CHEAFD

#2
LSUP2

#1 #0

[Data type] Bit

LSUP2 Acceleration/deceleration after interpolation for cutting feed in the
advanced preview control mode
0 : Exponential acceleration/deceleration
1 : Linear acceleration/deceleration. (The function for linear

acceleration/deceleration after interpolation for cutting feed is
required.)

CHEAFD In the function for automatically reducing a feedrate at corners,
0 : Angles are used for controlling the feedrate.
1 : Differences in feedrates are used for controlling the feedrate.

FWBTYP Cutting feed acceleration/deceleration before interpolation
0 : Type A of acceleration/deceleration before interpolation is used.
1 : Type B of acceleration/deceleration before interpolation is used.

Type A: When a feedrate is to be changed by a command, acceleration/
deceleration starts after the program enters the block in which
the command is specified.

Type B: When a feedrate is to be changed by a command, deceleration
starts and terminates at the block before the block in which the
command is specified.
When a feedrate is to be changed by a command, acceleration
starts after the program enters the block in which the command is
specified.

7.1.11
Advanced Preview
Control (M Series)

General

� Available functions

Parameter



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION 

AND DECELERATION CONTROL

296

Feedrate Feedrate

Time

Type B

Type A

Time

F3

F2

F1
N1 N2

F3

F2

F1
N1 N2

Specified feedrate

Feedrate after accelera-
tion/deceleration before
interpolation is applied

Specified feedrate

Feedrate after accelera-
tion/deceleration before
interpolation is applied

<Example of a deceleration process> <Example of an acceleration process>

0483 Allowable speed difference for the speed difference based corner deceleration
function (for linear acceleration/deceleration before interpolation)

[Data type] Word

��������� ������ 	��� �� ���


��� ��� �����

��������� ������ 	��� �� ���

����� ���� ����

Millimeter machine 1 mm/min 6 to 15000 6 to 12000

Inch machine 0.1 inch/min 6 to 6000 6 to 4800

Set the speed difference for the speed difference based automatic corner
deceleration function when linear acceleration/deceleration before
interpolation is used.

0485 Parameter 1  for setting an acceleration for linear acceleration/deceleration before
interpolation in the advanced preview control mode (maximum machining speed
during linear acceleration/deceleration before interpolation)

[Data type] Word

��������� ������ 	��� �� ���


��� ��� �����

��������� ������ 	��� �� ���

����� ���� ����

Millimeter machine 1 mm/min 6 to 15000 6 to 12000

Inch machine 0.1 inch/min 6 to 6000 6 to 4800

This parameter is used to set an acceleration for linear acceleration/
deceleration before interpolation in the advanced preview control mode.
In this parameter, set the maximum machining speed during linear
acceleration/deceleration before interpolation. Set the time used to reach
the maximum machining speed in parameter No. 0486.



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION

 AND DECELERATION CONTROL

297

Parameter 2 (No. 0486)

Speed

Time

Parameter1 

(No. 0485)

CAUTION
When 0 is set in parameter No. 0485 or parameter No. 0486,
linear acceleration/deceleration before interpolation is
disabled.

0486 Parameter 2  for setting an acceleration for linear acceleration/deceleration before
interpolation in the advanced preview control mode (time used to reach the maxi-
mum machining speed during linear acceleration/deceleration before interpolation)

[Data type] Word

[Unit of data] 1 ms

[Valid data range] 0 to 4000

This parameter is used to set an acceleration for linear acceleration/decel-
eration before interpolation in the advanced preview control mode. In this
parameter, set the time (time constant) used to reach the speed set in pa-
rameter No. 0485.

CAUTION
1 When 0 is set in parameter No. 0485 or parameter No. 0486,

linear acceleration/deceleration before interpolation is
disabled.

2 In parameter Nos. 0485 and 0486, set values that satisfy the
following: Parameter No. 0485/Parameter No. 0486
�5

0487 Minimum speed for the automatic corner deceleration function (for the advanced
preview control)

[Data type] Word

��������� ������ 	��� �� ���


��� ��� �����

��������� ������ 	��� �� ���

����� ���� ����

Millimeter machine 1 mm/min 6 to 15000 6 to 12000

Inch machine 0.1 inch/min 6 to 6000 6 to 4800

Rotaion axis 1 deg/min 6 to 15000 6 to 12000

[Unit of data]

[Valid data range]



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION 

AND DECELERATION CONTROL

298

Set a speed at which the number of buffered pulses in deceleration is as-
sumed to be 0 when linear acceleration/deceleration before interpolation
is used.

0864 Critical angle subtended by two blocks for automatic corner deceleration 
(for the advanced preview control)

[Data type] Two–word

[Unit of data] 0.001 deg

[Valid data range] 0 to 180000

Set a critical angle to be subtended by two blocks for corner deceleration
when the angle–based automatic corner deceleration function is used.  
The angle subtended by two blocks is defined as� in the examples shown
below.

Block A (G01)

θ
θ

Angle subtended by two
straight lines

Block A (G02)

Block B (G01)

Block B (G01)

Angle subtended an arc tangent
and straight line

0877 Exponential acceleration/deceleration time constant for cutting feed in the 
advanced preview control mode

[Data type] Word

[Unit of data] 1 ms

[Valid data range] 0 to 4000

Set an exponential acceleration/deceleration time constant for cutting
feed in the advanced preview control mode.

0878 Minimum speed in exponential acceleration/deceleration for cutting feed in the
advanced preview control mode

[Data type] Word

��������� ������ 	��� �� ���


��� ��� �����

��������� ������ 	��� �� ���

����� ���� ����

Millimeter machine 1 mm/min 6 to 15000 6 to 12000

Inch machine 0.1 inch/min 6 to 6000 6 to 4800

Rotaion axis 1 deg/min 6 to 15000 6 to 12000

Set a minimum speed (FL) in exponential acceleration/deceleration for
cutting feed in the advanced preview control mode.

[Unit of data]

[Valid data range]



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION

 AND DECELERATION CONTROL

299

0879 Time constant for linear acceleration/deceleration during cutting feed in the
advanced preview control mode.

[Data type] Word

[Unit of data] ms

[Valid data range] 8 to 1024

This parameter sets a time constant for linear acceleration/deceleration for
cutting feed in the advanced preview control mote.

NOTE
The function for linear acceleration/deceleration after
interpolation for cutting feed is required.

� Parameters for the cutting feed acceleration/deceleration before in-
terpolation

Parameter No.

Parameter description
Normal mode Advanced previewcontrol mode

Acceleration/deceleration type 
(A type/B type)

FWBTYP
(0395#6)

←

Acceleration (Parameter 1) 0480 0485

Acceleration (Parameter 2) 0481 0486

� Parameters for automatic corner deceleration

Parameter No.

Parameter description
Normal mode Advanced previewcontrol mode

Automatic corner deceleration accord-
ing to the corner angle or the speed dif-
ference

CHEAFD
(0395#3)

←

Minimum speed 
(according to the corner angle) 0482 0487

Critical angle 
(according to the corner angle) 0865 0864

Allowable speed difference for all axes 
(according to speed difference) 0483 ←

������ Message Description

109 P/S ALARM A value other than 0 or 1 was specified af-
ter P in the G08 code, or no value was spe-
cified.

Parameters for 
advanced preview
control mode and normal
mode

Alarm and message



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION 

AND DECELERATION CONTROL

300

NOTE
In the advanced preview control mode, the functions listed
below cannot be specified.  To specify these functions,
cancel the advanced preview control mode, specify the
desired function, then set advanced preview control mode
again.
⋅Rigid tapping function 
⋅Cs contour axis control function 
⋅Feed per rotation
⋅F1–digit feed
⋅C–axis normal direction control function 
⋅Polar coordinate interpolation function 
⋅Cylindrical interpolation function
⋅Normal direction control 
⋅Polar coordinate command 
⋅Index table indexing 
⋅Threading
⋅Synchronous feed
⋅High–speed cycle machining
⋅Handle interrupt
⋅Program restart
⋅Simplified synchronization control
⋅High–speed skip function
⋅Constant surface speed control
⋅Interrupt type custom macro
⋅Small–diameter peck drilling cycle
⋅High–speed remote buffer A/B
⋅Automatic tool length measurement 
⋅Skip cutting 
⋅G28 (low–speed reference position return)
⋅Axis control by PMC

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.24 ADVANCED PREVIEW CONTROL

Note

Reference item



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION

 AND DECELERATION CONTROL

301

� Rapid traverse linear acceleration/deceleration
� Cutting feed exponential acceleration/deceleration

To prevent a mechanical shock, acceleration/deceleration is automatically
applied when the tool starts and ends its movement (Fig.7.2.1 (a)).

FR

Rapid traverse rate

Time

TR TR

FR : Rapid traverse rate

: Acceleration/
deceleration time
constant for rapid
traverse rate

�

Time

Feed rate

FCFC

�

TC TC

TR

TC

 : Feedrate

: Acceleration/
deceleration time
constant for a cutting
feedrate

Fig.7.2.1 (a) Automatic acceleration/deceleration (example)

Acceleration and deceleration is performed when starting and ending
movement, resulting in smooth start and stop.  
Automatic acceleration/deceleration is also performed when feedrate
changes, so change in speed is also smoothly done.  
It is not necessary to take acceleration/deceleration into consideration
when programming.

Rapid traverse:Linear acceleration/deceleration (time constant per axis is
set by parameters 0522 to 0525)

Cutting feed:  Exponential acceleration/deceleration (time constant per
axis is set by parameter 0529)

7.2
ACCELERATION/
DECELERATION 
CONTROL

7.2.1
Automatic 
Acceleration/
Deceleration

General

� Automatic acceleration/
deceleration



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION 

AND DECELERATION CONTROL

302

Jog feed : Exponential acceleration/deceleration (time constant per
axis is set by parameters 0601 – 0604)

CNC
 command

Pulse 
distribution 
(interpolation)

Rate after interpolation Rate after acceleration/deceleration
Servo motor

Acceleration/
deceleraton
control

Acceleraton/
deceleration
control

Servo control

Servo control

#7
0045

#6 #5 #4 #3
LSUP

#2 #1 #0

[Data type] Bit axis

LSUP Acceleration/deceleration in cutting feed including feed in dry run
0 : Exponential acceleration/deceleration is applied.
1 : Linear acceleration/deceleration after interpolation is applied.

NOTE
If the optional function of linear acceleration/deceleration
after interpolation in cutting feed is not provided,
exponential acceleration/deceleration is used irrespective
of this setting.

#7
0065

#6 #5
G92ZAX

#4 #3 #2 #1 #0
(T series)

G92ZAX Parameters for the Z–axis time constant and acceleration/deceleration
lower limit (FL) in threading (G92):
0 : Parameters common to all axes
1 : Parameters 0627 and 0628

0522–0525 Time constant used for linear acceleration/deceleration or bell–shaped
acceleration/deceleration in rapid traverse

[Data type] Word

[Unit of data] ms

[Valid data range] 0 to 4000

Specify a time constant used for linear acceleration/deceleration in rapid
traverse. When the optional function of bell–shaped acceleration/decel-
eration in rapid traverse is provided, bell–shaped acceleration/decelera-
tion is applied in rapid traverse. If the function is not provided, linear ac-
celeration/deceleration is applied.

Parameter



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION

 AND DECELERATION CONTROL

303

(1)When the function is provided, set this parameter to time constant T1
used in bell–shaped acceleration/deceleration in rapid traverse, and set
parameter Nos. 0952 to 0955 to time constant T2.

(2)When the function is not provided, specify a time constant used in
linear acceleration/deceleration.

NOTE
When parameter Nos. 0952 to 0955 (time constant T2 used
for bell–shaped acceleration/deceleration in rapid traverse)
is set to 0, linear acceleration/deceleration is applied in
rapid traverse even if the function is provided. In this case,
this parameter stands for a time constant used in linear
acceleration/deceleration in rapid traverse.

0526 Time constant of exponential acceleration/deceleration at X axis in thread cutting
cycle

(T series)

0627 Time constant of exponential acceleration/deceleration at Z axis in thread cutting
cycle

(T series)

[Data type] Word

[Unit of data] ms

[Valid data range] 0 to 4000

Set the time constant used for exponential acceleration/deceleration in
thread cutting cycle (G76, G78 (G92 in G code system A)).

0528 FL rate of exponential acceleration/deceleration at X axis in thread cutting cycle (T series)

0628 FL rate of exponential acceleration/deceleration at Z axis in thread cutting cycle (T series)

[Data type] Word

��������� ������ 	��� �� ���


��� ��� �����

��������� ������ 	��� �� ���

����� ���� ����

Millimeter machine 1 mm/min 6 to 15000 6 to 12000

Inch machine 0.1 inch/min 6 to 6000 6 to 4800

Rotaion axis 1 deg/min 6 to 15000 6 to 12000

Set the lower limit (FL rate) of exponential acceleration/deceleration in
thread cutting cycle (G76, G78 (G92 in G code system A)).

0529 Time constant of exponential acceleration/deceleration in cutting feed

[Data type] Word

[Unit of data] ms

[Valid data range] 0 to 4000

Set the time constant used for exponential acceleration/deceleration in
cutting feed.

[Unit of data]

[Valid data range]



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION 

AND DECELERATION CONTROL

304

0530 FL rate of exponential acceleration/deceleration in cutting feed

[Data type] Word

��������� ������ 	��� �� ���


��� ��� �����

��������� ������ 	��� �� ���

����� ���� ����

Millimeter machine � ������ 6 to 15000 6 to 12000

Inch machine 0.1 inch/min 6 to 6000 6 to 4800

Rotaion axis 1 deg/min 6 to 15000 6 to 12000

Set the lower limit (FL rate) of exponential acceleration/deceleration in
cutting feed.

0555 Rapid traverse feedrate reduction ratio for overlapping rapid traverse blocks (T series)

0379 Rapid traverse feedrate reduction ratio for overlapping rapid traverse blocks (M series)

[Data type] Byte

[Unit of data] %

[Valid data range] 0 to 100

This parameter is used when rapid traverse blocks are arranged
successively, or when a rapid traverse block is followed by a block that
does not cause movement. When the feedrate for each axis of a block is
reduced to the ratio set in this parameter, the execution of the next block is
started.

NOTE
This parameter is effective when parameter SMZCT
(No.0050#4 (T)/No.0048#4 (M)) is set to 1.

(Example)

N1  G00  X- -   ;         N2  G00  X- -   ;

Fh: Rapid traverse feedrate
α:   Setting of parameter No.0555 (T)/No.0379 (M) 

(feedrate reduction ratio)

Fd: Feedrate where deceleration is terminated: =  Fh×α/ 100

Fh

Fd

X–axis feedrate

t

When the function of overlapping rapid traverse
blocks is disabled

When the function of overlapping rapid traverse
blocks is enabled

[Unit of data]

[Valid data range]



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION

 AND DECELERATION CONTROL

305

Time constant of exponential acceleration/deceleration in jog feed0601 – 0604

[Data type] Word

[Unit of data] ms

[Valid data range] 0 to 4000

Set the time constant used for exponential acceleration/deceleration in jog
feed.

FL rate of exponential acceleration/deceleration in jog feed0605 – 0608

[Data type] Word

��������� ������ 	��� �� ���


��� ��� �����

��������� ������ 	��� �� ���

����� ���� ����

Millimeter machine 1 mm/min 6 to 15000 6 to 12000

Inch machine 0.1 inch/min 6 to 6000 6 to 4800

Rotaion axis 1 deg/min 6 to 15000 6 to 12000

Set the lower limit (FL rate) of exponential acceleration/deceleration in
jog feed for each axis.

[Unit of data]

[Valid data range]



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION 

AND DECELERATION CONTROL

306

Bell–shaped acceleration/deceleration for rapid traverse smoothly
increases or decreases the rapid traverse rate, reducing the stress and strain
imposed on the machine due to the variation in the acceleration with
changes in the feedrate.  As the time constant for bell–shaped
acceleration/deceleration can be smaller than that for linear
acceleration/deceleration, the time needed for acceleration/deceleration
can be reduced.

<Linear acceleration/deceleration for rapid traverse> <Bell–shaped acceleration/deceleration for rapid traverse>

Feedrate

Time

Acceleration

0

0
Time

Acceleration

Time

Time

Feedrate

This function is enabled when the time constants for bell–shaped
acceleration/deceleration for rapid traverse T1 and T2 are specified in
parameter Nos. 0522 to 0525 and 0952 to 0955, respectively.

7.2.2
Bell–shaped 
Acceleration/
Deceleration for 
Rapid Traverse 
(M Series)

General



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION

 AND DECELERATION CONTROL

307

<Rapid traverese linear acceleration/deceleration>

Speed

Rapid traverse rate

Time T: Time constant for linear
acceleration/deceleration� �

������ �������� 	��� ����� �

������������
����������

�����

�����
�������� ����

TIme

T2/2

T2

T1 T2/2

T1: Set a time constant used for lin-
ear acceleration/deceleration

T2: Set a time for rounding.

Total time=T1 + T2
Time for linear=T1 – T2
Time for rounding part=T2

Set a time when rapid traverse override is 100% .  When it is less than
100%, the total time is reduced (constant acceleration method).

Value of T1 is determined from motor torque.  Set a value of T2 to 24 ms
or 32 ms.

0522–0525 Time constant T1 used in linear acceleration/deceleration or bell–shaped
acceleration/deceleration in rapid traverse for each axis

[Data type] Word

[Unit of data] ms

[Valid data range] 0 to 4000

Specify a time constant used for acceleration/deceleration in rapid tra-
verse. When the optional function of bell–shaped acceleration/decelera-
tion in rapid traverse is provided, bell–shaped acceleration/deceleration is
applied in rapid traverse. If the function is not provided, linear accelera-
tion/deceleration is applied.
� When the function is provided, set this parameter to time constant T1

used in bell–shaped acceleration/deceleration in rapid traverse, and set
parameter Nos. 0952 to 0955 to time constant T2.

Parameter



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION 

AND DECELERATION CONTROL

308

� When the function is not provided, specify a time constant used for
linear acceleration/deceleration.

NOTE
When parameter Nos.0952 to 0955 (time constant T2 used
for bell–shaped acceleration/deceleration in rapid traverse)
is set to 0, linear acceleration/deceleration is applied in
rapid traverse even if the function is provided. In this case,
this parameter stands for a time constant used for linear
acceleration/deceleration in rapid traverse.

(M series)0952–0955 Time constant T2 used for bell–shaped acceleration/deceleration in rapid
traverse

[Data type] Word

[Unit of data] ms

[Valid data range] 0 to 512

Specify time constant T2 used for bell–shaped acceleration/deceleration
in rapid traverse for each axis.

NOTE
1 This parameter is effective when the function of

bell–shaped acceleration/deceleration in rapid traverse is
provided. Set parameter Nos. 0522 to 0525 to time constant
T1 used for bell–shaped acceleration/deceleration in rapid
traverse, and set this parameter to time constant T2.
For details of time constants T1 and T2, see the description
of General of this section.

2 When this parameter is set to 0, linear
acceleration/deceleration is applied in rapid traverse. The
setting in parameter Nos. 0522 to 0525 is used as a time
constant in linear acceleration/deceleration.

CONNECTION MANUAL 
(This manual)

7.2.1 Automatic Acceleration/Deceleration

Reference item



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION

 AND DECELERATION CONTROL

309

If linear acceleration/deceleration after interpolation for cutting feed is
enabled (bit 3 of parameter No. 0045, LSUP), acceleration/deceleration
is performed as follows:

Cutting feed: Linear acceleration/deceleration (constant acceleration
time)

Specify the acceleration/deceleration time constant for
each axis in parameter No. 0635.

Jog feed: Exponential or linear acceleration/deceleration (constant
acceleration time)

Specify the acceleration/deceleration time constant for
each axis in parameter Nos. 0601 to 0604

If an identical time constant is specified, linear acceleration/deceleration
can halve the delay relative to the programmed time, in comparison with
exponential acceleration/deceleration, thus reducing the time needed for
acceleration and deceleration.  If circular interpolation is performed,
especially when high–speed cutting is being performed, the actual tool
path created after acceleration/deceleration will deviate from the
programmed arc in the radial direction.  This deviation can also be
reduced, in comparison with exponential acceleration/deceleration, by
applying linear acceleration/deceleration.

Feedrate

Acceleration/
deceleration
circuit

Time

t  : Time
constant

Feedrate

Time

Feedrate

Time

Feedrate

Time

� �

� �

⇒

⇒ ⇒

⇒

Acceleration/
deceleration
circuit

7.2.3
Linear Acceleration/ 
Deceleration after 
Interpolation for 
Cutting Feed

General



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION 

AND DECELERATION CONTROL

310

Linear acceleration/deceleration after interpolation for cutting feed is an
optional function.  This function is enabled when the LSUP bit (bit 3 of
parameter No. 0045) is specified. The time constants for cutting feed and
jog feed are specified in parameter Nos. 0635 and 0601 to 0604
respectively.  The values specified for the FL feedrate for cutting feed
(parameter No. 0530) and the FL feedrate for jog feed (parameter No.
0548) are ignored (always assumed to be 0).

#7
0045

#6 #5 #4 #3
LSUP

#2 #1 #0

[Data type] Bit

LSUP Acceleration/deceleration in cutting feed including feed in dry run
0 : Exponential acceleration/deceleration is applied.
1 : Linear acceleration/deceleration after interpolation is applied.

Time constant of exponential acceleration/deceleration in jog feed0601–0604

[Data type] Word

[Unit of data] ms

[Valid data range] 0 to 4000

Set the time constant used for exponential acceleration/deceleration in jog
feed.

0635 Time constant of exponential acceleration/deceleration, linear accelera-
tion/deceleration after interpolation or bell–shaped acceleration/decelera-
tion after interpolation, in cutting feed

[Data type] Word

[Unit of data] ms

[Valid data range] 0 to 4000

Set the time constant used for linear acceleration/deceleration after
interpolation in cutting feed.

Parameter



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION

 AND DECELERATION CONTROL

311

If the optional function for linear acceleration/deceleration after
interpolation for cutting feed is not provided, exponential
acceleration/deceleration is always selected, irrespective of the setting.

NOTE
1 If linear acceleration/deceleration after interpolation for

cutting feed is enabled, linear acceleration/deceleration is
executed during cutting feed and during a dry run.

2 In circular interpolation especially when circular cutting is
executed at high speed, the actual path of the accelerated
or decelerated tool deviates from the specified arc in the
direction of the radius.  

The maximum error in the radial direction (∆r) can be
approximated by the following expressions:

If the error caused by the time constant of the servo loop is
excluded, the error cause by linear acceleration/
deceleration or bell shaped acceleration/deceleration after
interpolation is 1/12 of that caused by exponential
acceleration/deceleration.

3 Linear acceleration/deceleration can be executed both for
cutting feed and for jog feed along a PMC axis.
Acceleration/deceleration for cutting feed is executed even
if acceleration/deceleration for jog feed is selected.  In jog
feed along the PMC axis, the time constant for cutting feed
is used instead of that for jog feed.

�r :Maximum radius error (mm)

v :Feedrate (mm/s)

r :Radius of arc (mm)

T1 :Acceleration/deceleration time constant (s)

T2 :Time constant of servo loop (s)

 (Reciprocal of position loop gain)

Y

X

r

�r Specified path

Actual path

� r = �  T12+   T22 �  …Exponential acceleration/deceleration

� r = �   T12+   T22 �  …Linear acceleration/deceleration or bell 
shaped acceleration /deceleration
after interpolation

2

24

1
2
1

2
11

v2

r

v2

r

Note



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION 

AND DECELERATION CONTROL

312

A specified cutting feedrate can be linearly increased or decreased before
interpolation.  This function eliminates machining profile errors caused
by the delay occurring in acceleration or deceleration.  The time required
for acceleration or deceleration by this function is significantly shorter
than that by the function of exponential acceleration/deceleration.

CNC command

Servo control

Servo motor

Feedrate

Speed

Time

�

�

Feedrate
command

Move data

F: Value of feedrate command

Pulse 
distribution 
(interpolation) Servo control

Linear accel-
eration/decel-
eration before
interpolation

The function of linear acceleration/deceleration before interpolation in-
creases or decreases the feedrate specified in the tangential direction.

If the feedrate command is changed

� Type A
Acceleration/deceleration is started in the block in which a new
feedrate command is specified.

� Type B (Set the FWB TYP bit (bit 6 of parameter No. 0395) to 1.)

Deceleration: Deceleration is started in a prior block such that decel-
eration is completed before the beginning of the block
in which a new feedrate command is specified.

Acceleration: Acceleration is started in the block in which a new fee-
drate command is specified.

7.2.4
Linear Acceleration/
Deceleration of Cutting
Feed before 
Interpolation (M Series)

General



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION

 AND DECELERATION CONTROL

313

B type

A type

��
	
�
������ �����
� ��		
�
������ �����
�

Command feedrate

Feedrate after accel-
eration/deceleration
before interpolation

Command feedrate

Feedrate after accel-
eration/deceleration
before interpolation

Feedrate

����� �

Time

F3

F2

F1
N1 N2

Feedrate

Time

F3

F2

F1
N1 N2

With B type, to decelerate from F3 to F2,
deceleration must start with point P.

#7
0395

#6
FWBTYP

#5 #4 #3 #2 #1 #0

[Data type] Bit

FWBTYP Linear acceleration/deceleration of cutting feed before interpolation
0 : Type A of acceleration/deceleration before interpolation is used.
1 : Type B of acceleration/deceleration before interpolation is used.

0480 Parameter 1 for setting an acceleration for linear acceleration/deceleration before
interpolation  (maximum machining feedrate  during  linear acceleration/decelera-
tion before interpolation)

[Data type] Word

��������� ������ 	��� �� ���


��� ��� �����

��������� ������ 	��� �� ���

����� ���� ����

Millimeter machine 1 mm/min 6 to 240000 6 to 100000

Inch machine 0.1 inch/min 6 to 96000 6 to 48000

This parameter is used to set an acceleration for linear acceleration/decel-
eration before interpolation. In this parameter, set a maximum machining
feedrate during linear acceleration/deceleration before interpolation. In
parameter No. 0481, set a time used to reach the maximum machining fee-
drate.

Parameter

[Unit of data]

[Valid data range]



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION 

AND DECELERATION CONTROL

314

Feedrate

Parameter 1

��	���
�	 �
����

Parameter 1:  Parameter No. 0480
Parameter 2:  Parameter No. 0481

NOTE
1 When 0 is set in parameter No. 0480 or parameter No. 0481,

linear acceleration/deceleration before interpolation is
disabled.

2 In the advanced preview control mode, parameter No. 0485
and parameter No. 0486 are valid.

0481 Parameter 2 for setting an acceleration for linear acceleration/deceleration before
interpolation (time used to reach the maximum machining feedrate during linear
acceleration/deceleration before interpolation.)

[Data type] Word

[Unit of data] 1 ms

[Valid data range] 0 to 4000

This parameter is used to set an acceleration for linear acceleration/decel-
eration before interpolation.  In this parameter, set the time (time constant)
used to reach the feedrate set in parameter No. 0480.

NOTE
1 When 0 is set in parameter No. 0480 or parameter No. 0481,

linear acceleration/deceleration before interpolation is
disabled.

2 In parameter Nos. 0480 and 0481, set values that satisfy the
following:

3 In the look–ahead control mode, parameter No. 0485 and
parameter No. 0486 are valid.

Parameter No. 0480
Parameter No. 0481

� 5



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION

 AND DECELERATION CONTROL

315

NOTE
1 If a block without a move command is found during

acceleration/deceleration before interpolation, the
movement is decelerated and temporarily stopped in the
previous block.

2 If a one–shot G code is specified during acceleration/
deceleration before interpolation, the movement is
decelerated and temporarily stopped in the previous block.

3 If an M, S, or T code is specified in a block containing a move
command during acceleration/deceleration before
interpolation, the movement is decelerated and temporarily
stopped in that block.

4 Even during acceleration/deceleration before interpolation,
the block of G31 (skip function) is not subjected to
acceleration/deceleration.

5 During acceleration/deceleration before interpolation,
automatic corner override is enabled only when the internal
circular cutting feedrate is changed.

6 Even during acceleration/deceleration before interpolation,
acceleration/deceleration after interpolation can be
executed.  So that acceleration/deceleration is executed
only before interpolation, set the time constant for
acceleration/deceleration after interpolation to zero.

7 In acceleration/deceleration before interpolation of type B,
deceleration is started if preprocessing for the next block
has not been completed before the remaining distance of
the current block becomes less than that needed to
decelerate and stop the movement.

8 If inch input system in used, avoid specifying a command for
simultaneous movement on two axes, including a rotation
axis during acceleration/deceleration before interpolation.

Note



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION 

AND DECELERATION CONTROL

316

Whether the position of the servo motor is within a specified range is
checked.

If the in–position check function is enabled, the CNC checks the position
during deceleration.  If the position is found to exceed the specified range,
the CNC does not execute the next block.

NOTE
The purpose of in–position check is to check that the servo
motor has reached within a specified range (specified with
parameter Nos.500 – 503).

[Classification] Output signal

[Function] These signals indicate that the control axes are set to the in-position
condition.
They are provided for each control axis, and the number in the signal name
corresponds to the control axis number.

I  N  P  1

1 . . . . The 1st axis is set to the in-position condition.

2 . . . . The 2nd axis is set to the in-position condition.

3 . . . . The 3rd axis is set to the in-position condition.

4 . . . . The 4rd axis is set to the in-position condition.

[Output condition] These signals turn to “1” in the following case :
⋅ The acceleration/deceleration delay of the corresponding control axis

is zero and the servo error is within the specified allowance.

These signals turn to “0” in the following cases :

⋅ The acceleration/deceleration delay of the corresponding control axis
is not zero.

⋅ The servo error of the corresponding control axis exceeds the specified
allowance

7.2.5
Corner Control

7.2.5.1
In–position check

General

Signal

In–position signals 
INP1 to INP4
<F184#0 to #3>



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION

 AND DECELERATION CONTROL

317

#7
F184

#6 #5 #4 #3
INP4

#2
INP3

#1
INP2

#0
INP1

#7
0020

#6 #5
NCIPS

#4 #3 #2 #1 #0

[Data type] Bit

NCIPS Inposition check at deceleration
0 : Performed
1 : Not performed

In–position width0500 – 0503

[Data type] Word

[Unit of data] Detection unit

[Valid data range] 0 to 32767

The in–position width is set.

When the deviation of the machine position from the specified position
(the absolute value of the positioning deviation) is smaller than the
in–position width, the machine is assumed to have reached the specified
position.

NOTE
1 The in–position signals may turn to “1” even during the

movement if the axis is fed at very low speed.
2 The in–position check function is enabled, at the interface

between two cutting blocks, in the following cases:

M series When the exact stop command (G09) or exact stop mode com-
mand (G61) is specified

T series When the error detect signal is on

Signal address

Parameter

Note



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION 

AND DECELERATION CONTROL

318

If separate in–position check for cutting feed and rapid traverse is
executed, a small in–position check range can be specified between those
cutting feed blocks that require a high degree of precision.  A large
in–position check range can be specified between those rapid traverse
blocks that require quick positioning.

See Subsection 7.2.5.1.

#7
0020

#6 #5
NCIPS

#4 #3 #2 #1 #0

[Data type] Bit

NCIPS Inposition check at deceleration
0 : Performed
1 : Not performed

#7
0045

#6 #5 #4
CCINP

#3 #2 #1 #0

[Data type] Bit

CCINP The in–position area for cutting feed is:
0 : Set in parameter Nos.0500 – 0503 (same as for rapid traverse).
1 : Set in bit 4 (CINPS) of parameter No.0399.

#7
0399

#6 #5 #4
CINPS

#3 #2 #1 #0

[Data type] Bit

CINPS When bit 4 (CCINP) of parameter No.0045 = 1, the in–position area for
cutting feed is:
0 : Use value in parameter Nos.0609 to 0612 if the next block is also for

cutting feed, or use value in parameter Nos.500 to 503 if the next
block is for rapid traverse.

1 : Use value in parameter Nos.0609 to 0612, regardless of the next
block. (The setting of parameter Nos.500 to 503 is used for rapid
traverse, and the setting of parameter Nos.0609 to 0612 is used for
cutting feed.)

7.2.5.2
In–position check 
independently of 
feed/rapid traverse 
(M series)

General

Signal

Parameter



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION

 AND DECELERATION CONTROL

319

Parameter CINPS (No.0399#4)

0 1

Rapid→Rapid Nos.0500
to 0503

Rapid→Rapid Nos.0500
to 0503

0

Rapid→Feed Nos.0500
to 0503

Rapid→Feed Nos.0500
to 0503

0
Feed→Feed Nos.0500

to 0503
Feed→Feed Nos.0500

to 0503

Parameter
CCINP

Feed→Rapid Nos.0500
to 0503

Feed→Rapid Nos.0500
to 0503

CCINP
(No.0045#4) Rapid→Rapid Nos.0500

to 0503
Rapid→Rapid Nos.0500

to 0503

1

Rapid→Feed Nos.0500
to 0503

Rapid→Feed Nos.0500
to 0503

1
Feed→Feed Nos.0609

to 0612
Feed→Feed Nos.0609

to 0612

Feed→Rapid Nos.0500
to 0503

Feed→Rapid Nos.0609
to 0612

In–position width0500 – 0503

[Data type] Word

[Unit of data] Detection unit

[Valid data range] 0 to 32767

The in–position width is set for each axis.

When the deviation of the machine position from the specified position
(the absolute value of the positioning deviation) is smaller than the
in–position width, the machine is assumed to have reached the specified
position.

In–position width in cutting feed for each axis0609 – 0612

[Data type] Word

[Unit of data] Detection unit

[Valid data range] 0 to 32767

Set an in–position width for each axis in cutting feed.  This parameter is
valid when bit 4 (CCINP) of parameter No.0045=1.

NOTE
If the NCIPS bit (bit 5 of parameter No.0020) is set to 1, so
that position check is not performed during deceleration,
this function is invalid.  The system starts execution of the
next block as soon as deceleration has been completed,
without checking whether the servo position error is within
the specified range.

Note



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION 

AND DECELERATION CONTROL

320

Generally, the CNC does not zero the feedrate at the interface of two
blocks during cutting feed.  
Because of this, a corner of a tool path may be rounded.

Feedrate

Time

This part causes the corner of
the tool path to be rounded.

Programmed tool path

Actual tool–center path

If the error detect signal is used, it is possible to specify that a block not
be started until the acceleration/deceleration of the previous block has
been completed.

Time

Feedrate

[Classification] Input signal

[Function] Enables error detection.

[Operation] If the signal is set to 1, the control unit operates as follows:
� At the interface of two blocks during cutting feed, the control unit waits

until the acceleration/deceleration of the first block has been completed.
Only then does the control unit execute the next block.
The setting of the SMZ signal determines whether, at the interface of
two cutting blocks, the control unit waits until the acceleration/decel-
eration of the previous block has been completed.

#7
G126

#6
SMZ

#5 #4 #3 #2 #1 #0

7.2.5.3
Error detect (T series)

General

Signal

Error detect signal SMZ 
<G126#6>

Signal address



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION

 AND DECELERATION CONTROL

321

NOTE
If the error detect signal is on, a cutting block is not executed
until the acceleration/deceleration of the previous cutting
block has been completed.
This function alone cannot prevent corner rounding due to
delay caused by the servo motor, however.
To prevent corner rounding due to delay caused by the
servo motor, use the in–position check function together
with this function. 

After servo
motor delay

Time

Range of in–position check

After acceleration/
deceleration

Feedrate

When a programmed value after linear acceleration/deceleration by rapid
traverse exceeds the value (percentage) specified in the corresponding
parameter, a signal is output.

Programmed speed

Command After acceleration/deceleration

Signal

?%

Note

7.2.5.4
Signals output
according to the speed
of travel along an axis 
(M series)

General



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION 

AND DECELERATION CONTROL

322

[Function] The signal reports that the speed programmed for any of the first to the
fourth axes in direct acceleration/deceleration exceeds the value specified
in the corresponding parameter.

#7
F189

#6 #5 #4 #3
SPDS4

#2
SPDS3

#1
SPDS2

#0
SPDS1

0243 SPDSP

SPDSP Set a reference speed in %, to enable the function to output a signal
according to the speed of travel along an axis.  If a value exceeding the
range indicated below is set, no signal is output.
Valid data range:  0% to 99%

#7
0394

#6 #5 #4 #3 #2 #1
SPDS

#0

SPDS The function used to output a signal according to the speed of travel along
an axis is:
1 : Enabled.
0 : Disabled.

CAUTION
This function is enabled in 1st to 4th axis .
(This function is disabled in 5th and 6th axis)

NOTE
1 The signal is output in rapid traverse mode only.
2 Identical values are set for acceleration and deceleration.

Signal

Signals output
according to the speed
of travel along an axis
SPDS1 to SPDS4
<G189#0 to #3>

Signal address

Parameter

Caution

Note



B–61393E–2/02
7. FEEDRATE CONTROL/ACCELERATION

 AND DECELERATION CONTROL

323

Feed–forward control can be performed even during rapid traverse.  In
this case, the servo position error is reduced, thus reducing the time
required for positioning to within the specified range.

#7
0395

#6
FDFFEN

#5 #4 #3 #2 #1 #0

[Data type] Bit

FDFFEN Feed–forward control is enabled for
0 : Cutting feed only
1 : Cutting feed and rapid traverse

For details of this function, refer to the “FANUC AC SERVO
AMPLIFIER Maintenance Manual (B–65005E)” or the “FANUC
CONTROL MOTOR� series Maintenance Manual (B–65165E).

7.2.6
Feed Forward in Rapid
Traverse (M series)

General

Parameter

Reference item



8. AUXILIARY FUNCTION B–61393E–2/02

324

8 AUXILIARY FUNCTION



B–61393E–2/02 8. AUXILIARY FUNCTION

325

When a numeral of up to 8 digits is specified following address M, code
signal and a strobe signal are sent to the machine. The machine uses these
signals to turn on or off its functions.
Usually, only one M code can be specified in one block. In some cases,
however, up to three M codes can be specified for some types of machine
tools (see 8.3 “Multiple M code per Block”)

When three or six digits (M series) / eight digits (T series) are specified
after address B, a code signal and strobe signal are sent.  These signals are
used to index the rotation axis of the machine.  The code signal is retained
until another B code is specified.

In each block, a single B code can be specified. BCD output is performed
for the M series while binary output is performed for the T series.

–99999999 to +99999999

1.A decimal point can be used for input by setting AUX (bit 0 of
parameter No. 3405).

Command Output value
B10. 10000
B10 10

2.It is possible to change over the scale factor of B output, 1000 or 1
 when the decimal point input is omitted, using the parameter CPRD
(No.0015#7).
Command Output value
When CPRD is 1: B1 1000
When CPRD is 0: B1 1

3.It is possible to change over the scale factor of B output  1000 or
 10000 when the decimal point input is omitted in the inch input
system, using the parameter BLIN (No.0032#5).  When DPI=1.
Command Output value
When BLIN is 1: B1 10000
When BLIN is 0: B1 1000

8.1
MISCELLANEOUS 
FUNCTION/2ND 
AUXILIARY
FUNCTION

General

� Miscellaneous Function
(M code)

� 2nd Auxiliary Function
(B code)

� Command Format of 2nd
Auxiliary Function 
(T series)

� Command range

� Command method



8. AUXILIARY FUNCTION B–61393E–2/02

326

The following signals are used with these functions.  (For details of the
spindle–speed function and tool function, see Chapters 9 and 10.)

Program
Output signal Input signal

Function
Program
address

Code signal Strobe signal Distribution endsignal
Completion

signal

Miscellaneous 
function

M M11 to M38 MF

Spindle–speed func-
tion

S S11 to S28 SF

DEN FIN
Tool function T T11 to T28 (T)

T11 to T48 (M)
TF

DEN FIN

Secondary auxiliary
function

B B0 to B31 (T)
B11 to B38 (M)

BF

Each function uses different program addresses and different signals, but
they all input and output signals in the same way, as described below.  (A
sample procedure for the miscellaneous function is described below.  The
procedures for the spindle–speed function, tool function, and secondary
auxiliary function, are obtained simply by substituting S, T, or B in place
of M.)

(1)Suppose that Mxxx is specified in a program.

(2)Code signal M11 to M38 is sent.  After period TMF, specified in
parameter No.0009#4 – #7 (standard value:  16 msec), strobe signal
MF is set to 1.  The code signal is the binary representation or BCD
of the programmed value xxx.(*1)  If the move, dwell, spindle–speed,
or another function is specified at the same time as the miscellaneous
function, the execution of the other function is started when the code
signal of the miscellaneous function is sent.

(3)When the strobe signal is set to 1, the PMC reads the code signal and
performs the corresponding operation.

(4)To execute an operation after the completion of the move, dwell or
other function specified in the block, wait until distribution end signal
DEN is set to 1.

(5)Upon completion of the operation, the PMC sets completion signal
FIN to 1.  The completion signal is used by the miscellaneous function,
spindle–speed function, tool function, secondary auxiliary function,
external operation function described later, and other functions.  If any
of these functions are executed simultaneously, the completion signal
must be set to 1 upon completion of all the functions.

(6) If the completion signal remains set to 1 for longer than period TFIN,
specified in parameter No.0009#0 – #3 (standard value:  16 msec), the
CNC sets the strobe signal to 0 and reports that the completion signal
has been received.

(7)When the strobe signal is set to 0, set the completion signal to 0 in the
PMC.

(8)When the completion signal is set to 0, the CNC sets all code signals
to 0 and completes all sequences of the miscellaneous function.(*2)

Basic procedure



B–61393E–2/02 8. AUXILIARY FUNCTION

327

(9)Once all other commands in the same block have been completed, the
CNC executes the next block.

*1 When the tool function is executed, the programmed tool number is
sent as the code signal (T series).

*2 When the spindle–speed function, tool function, or secondary
miscellaneous function is executed, the code signal is maintained until
a new code for the corresponding function is specified.

The timing diagram is shown below:

������� �  ����� ���	��������� ���	���� ���	����
 �� � ���	�

(1)(2) (3)

(*2)

TMF TFIN

M command 
(independent) Mxxx
Code signals M11 to M38

Strobe signals MF

PMC side action

End signal FIN

Distribution 
end signals DEN

(5) (6) (7)(8) (9)

������� �  ���� 	�����
 ��
 ���	��������� ���	���� �� ��� ���� ���	�
a. Execution of a miscellaneous function without waiting for move command completion

(1)(2) (3)

(*2)

TMF TFIN

M command
(independent) Mxxx

Move command

Code signals M11 to M38

Strobe signal MF

PMC side action

End signal FIN

Distribution 
end signals DEN

(5) (6) (7) (8) (9)



8. AUXILIARY FUNCTION B–61393E–2/02

328

b. Execution of a miscellaneous function after move command completion

(1)(2) (3)

(*2)

TMF TFIN

M command
(independent) Mxx

Move command

Code signals M11 to M38

Strobe signal MF

PMC side action

End signal FIN

Distribution
end signals DEN

(4) (5) (6)(7)(8) (9)

[Classification] Output signal

[Function] These signals report the specification of miscellaneous functions.

[Output condition] For the output conditions and procedure, see the description of “Basic
procedure” above.

NOTE
1 The following miscellaneous functions are only processed

internally by the control unit; they are not subject to output
even when specified:
· M98, M99, M198
· M code that calls a sub program (parameter Nos.0240 to

0242)
· M code that calls a custom macro (parameter Nos.0230

to 0239)
2 Decode signals as well as the code signals and strobe

signal are output for the miscellaneous functions listed
below. (only for M series)
M00, M01, M02, M30

Signal

Miscellaneous function 
code signals 
M11 to M38
<F151, F157#0 to #3>
Miscellaneous function 
strobe signal 
MF<F150#0>



B–61393E–2/02 8. AUXILIARY FUNCTION

329

[Classification] Output signal

[Function] These signals report particular miscellaneous functions are specified.  The
miscellaneous functions in a command program correspond to output
signals as indicated below.

Command program Output signal

M00
M01
M02
M30

M00
M01
M02
M30

[Output condition] A decode M signal goes “1” when:

· The corresponding miscellaneous function is specified, and any move
commands and dwell commands specified in the same block are
completed.  These signals are not output when the end signal of the
miscellaneous function is returned before completion of such move
commands and dwell commands.

A decode M signal goes “0” when:

· The FIN signal goes “1”

· Reset occurs

Decode M signals 
(M series)
M00<F154#7>, 
M01<F154#6>, 
M02<F154#5>, 
M30<F154#4>



8. AUXILIARY FUNCTION B–61393E–2/02

330

[Classification] Output signal

[Function] These signals report that spindle speed functions have been specified.

[Output condition] For the output conditions and procedure, see the description of “Basic
procedure” above.

[Classification] Output signal

[Function] These signals report that tool functions have been specified.

[Output condition] For the output conditions and procedure, see the description of “Basic
procedure” above.

[Classification] Output signal

[Function] These signals report that second auxiliary functions have been specified.

[Output condition] For the output conditions and procedure, see the description of “Basic
procedure” above.

Spindle–speed code 
signals 
S11 to S28
<F152>
Spindle–speed strobe 
signal 
SF<F150#2>

Tool function code 
signals 
T11 to T48<F153#0 to #7,
F156#0 to #7>(M series)/
T11 to T28
<F153#0 to #7>(T series)
Tool function strobe 
signal 
TF<F150#3>

Second auxiliary 
function code signals 
B11 to B38<F155#0 to #7,
F154#0 to #3>(M series)
B0 to B31 
<F276 to F279> (T series)
Second auxiliary 
function strobe signal 
BF1, BF2<F150#7, #6> 
(M series)
BF<150#7>(T series)



B–61393E–2/02 8. AUXILIARY FUNCTION

331

[Classification] Input signal

[Function] This signal reports the completion of a miscellaneous function,
spindle–speed function, tool function, second auxiliary function, or
external operation function.

[Operation] For the control unit operation and procedure when this signal goes “1”,
see the description of “Basic procedure” above.  
The FIN signal must remain “1” for a certain time (TFIN, which is set by
a parameter No.0009#0 to #3) or longer.  The FIN signal driven “1” is
ignored if the FIN signal goes “0” before TFIN elapses.

WARNING
Only one end signal is used for all functions above.  The end
signal must go “1” after all functions are completed.

[Classification] Output signal

[Function] These signals report that all commands (such as move commands and
dwell) are completed except those miscellaneous functions, spindle
functions, tool functions, and so forth that are contained in the same block
and have been sent to the PMC.  They also report that the end signal from
the PMC is being awaited.

[Output condition] The DEN signal turns to “1” when:

· The completion of miscellaneous functions, spindle–speed functions,
tool functions, and so forth is being awaited, all other commands in the
same block are completed, and the current position is in the in–position.

The DEN signal turns to “0” when:

· The execution of one block is completed

NOTE
A parameter can specify, whether to only check if an
acceleration/deceleration delay is eliminated, or to also
check if a servo delay (error) has been reduced to within a
certain range.

End signal 
FIN<G120#3>

Distribution end signals
DEN<F149#3>



8. AUXILIARY FUNCTION B–61393E–2/02

332

[Classification] Output signal

[Function] The signal indicates that the position specified by the passing point signal
output function has been reached.

[Output condition] The DEN2 signal becomes 1 when:
� The specified position is passed.

The DEN2 signal becomes 0 when:

� Miscellaneous function completion signal FIN is returned.

#7
G120

#6 #5 #4 #3
FIN

#2 #1 #0

F149 DEN2 DEN
#7 #6 #5 #4 #3 #2 #1 #0

BFF150 TF SF MF (T series)

BF1F150 BF2 TF SF MF (M series)

M28F151 M24 M22 M21 M18 M14 M12 M11

S28F152 S24 S22 S21 S18 S14 S12 S11

T28F153 T24 T22 T21 T18 T14 T12 T11

M00F154 M01 M02 M30 B38 B34 B32 B31 (M series)

B28F155 B24 B22 B21 B18 B14 B12 B11 (M series)

T48F156 T44 T42 T41 T38 T34 T32 T31 (M series)

F157 M38 M34 M32 M31

B7F276 B6 B5 B4 B3 B2 B1 B0 (T series)

B15F277 B14 B13 B12 B11 B10 B9 B8 (T series)

B23F278 B22 B21 B20 B19 B18 B17 B16 (T series)

B31F279 B30 B29 B28 B27 B26 B25 B24 (T series)

Passing point signal 
(T series)
DEN2<F150#6>

Signal address



B–61393E–2/02 8. AUXILIARY FUNCTION

333

#7
TMF0009

#6 #5 #4 #3 #2 #1 #0
TFIN

[Data type] Bit

[Unit of data] 16[msec]

[Valid data range] 1 to 6 (16[msec] to 256[msec])

TFIN Set a time range within which the miscellaneous, spindle–speed, or tool
function completion signal FIN (G120, #3) can be accepted.

TMF Set a period starting from when an M, S, or T code is sent until the
miscellaneous function code read signal MF (F150, #0), spindle–speed
function code read signal SF (F150, #2), or tool function code read signal
TF (F150, #3) is sent.

Setting value

TMF TFIN #3
#7

#2
#6

#1
#5

#0
#4

16msec 16msec or more 0 0 0 0

32msec 32msec or more 0 0 0 1

48msec 48msec or more 0 0 1 0

64msec 64msec or more 0 0 1 1

80msec 80msec or more 0 1 0 0

96msec 96msec or more 0 1 0 1

112msec 112msec or more 0 1 1 0

128msec 128msec or more 0 1 1 1

144msec 144msec or more 1 0 0 0

160msec 160msec or more 1 0 0 1

176msec 176msec or more 1 0 1 0

192msec 192msec or more 1 0 1 1

208msec 208msec or more 1 1 0 0

224msec 224msec or more 1 1 0 1

240msec 240msec or more 1 1 1 0

256msec 256msec or more 1 1 1 1

M, S, T, B code

MF, SF, TF, BF,

signal

Delay time

Parameter



8. AUXILIARY FUNCTION B–61393E–2/02

334

M, S, T, B code

MF, SF, TF, BF

signal

FIN sigal

Ignored be-
cause shorter
than min.
signal width

Valid because
longer than min.
signal width

TFIN

#7
CPRD0015

#6 #5 #4 #3 #2 #1 #0

[Data type] Bit

CPRD When a decimal point is omitted in an address that can include a decimal
point
0 : The least input increment is assumed.
1 : The unit of mm, inches, or second is assumed.  (Pocket calculator type

decimal point input)

#7
0019

#6 #5
M02NR

#4 #3 #2 #1 #0

[Data type] Bit

M02NR When M02 is specified in memory operation
0 : M02 is sent to the machine, and the head of the program is automati-

cally searched for.  So, when the end signal FIN is returned and a reset
or reset and rewind operation is not performed, the program is
executed, starting from the beginning.

1 : M02 is sent to the machine, but the head of the program is not searched
for.  (The head of the program is searched for by the reset and rewind
signal.)

#7
0020

#6 #5 #4
BCD3

#3 #2 #1 #0
(M series)

[Data type] Bit

BCD3 The B code is output using:
1 : Three digits.
0 : Six digits.

When a B command is programmed for automatic or MDI operation, the
value of the B command is sent to the PMC as a BCD code.
The B function can output the BCD code of the B command using three
or six digits (BCD3 bit, bit 4 of parameter 0020).  When six–digit BCD
code output is selected, the three high–order digits and three low–order
digits of the BCD code are output separately.  The B function outputs the
code at the same timing as the miscellaneous function, spindle–speed



B–61393E–2/02 8. AUXILIARY FUNCTION

335

function, and tool function.  The B function uses the same FIN signal as
the miscellaneous function, spindle–speed function, and tool function.
For details, see the relevant section.

(1)Output timing of the three–digit BCD code (when the BCD3 bit (bit
4 of parameter 0020) is set to 1)

B command read
Next command

B function BCD output

BF1

FIN

B

Three disits

Three disits

TMF

TFIN

Output for B11 to B18

Output for B21 to B28

Output for B31 to B38

(2)Output timing of the six–digit BCD code (when the BCD3 bit (bit 4
of parameter 0020) is set to 0)

B command read
Next command

B function BCD output

BF2

FIN

B

TMF

TFIN

Output for B11 to B18

Output for B21 to B28

Output for B31 to B38

BF1

TMF

TFIN

Three high–order digits

Three high–order digits

Three low–order digits

Three low–order digits



8. AUXILIARY FUNCTION B–61393E–2/02

336

#7
0032

#6 #5
BLIN

#4 #3 #2 #1 #0
(T series)

[Data type] Bit

BLIN The least increment of the command of the second miscellaneous function
specified with a decimal point
0 : Assumed to be 0.001
1 : Depending on the input increment.  (For input in mm, 0.001 is

assumed, or for input in inches, 0.0001 is assumed.)

#7
M3B0065

#6 #5 #4 #3 #2 #1 #0

[Data type] Bit

M3B In a single block,
0: Up to three M codes can be specified.
1: Only one M code can be specified.

0111 M code preventing buffering 1

0112 M code preventing buffering 2

[Data type] Byte

[Valid data range] 0 to 255

Set M codes that prevent buffering the following blocks.  If processing
directed by an M code must be performed by the machine without
buffering the following block, specify the M code.

M00, M01, M02, and M30 always prevent buffering even when they are
not specified in these parameters.

#7
0393

#6 #5 #4 #3
M3RQNG

#2 #1 #0

M3RQNG The command for the three–digit M code is:
1 : Disabled (P/S 003).
0 : Enabled.



B–61393E–2/02 8. AUXILIARY FUNCTION

337

NOTE
1 When a move command and miscellaneous  function are

specified in the same block, the commands are executed in
one of the following two ways:
i) Simultaneous execution of the move command and

miscellaneous function commands.
ii) Executing miscellaneous function commands upon

completion of move command execution. 

The selection of either sequence depends on the sequence
of PMC.

2 If the second miscellaneous function is provided, B cannot
be used as an axis address.

3 The block following M00, M01, M02 and M30, is not read
into the input buffer register, if present.  Similarly, ten M
codes which do not buffer can be set by parameters (Nos.
0111 to 0112).

4 For M00 and M01 only, miscellaneous function code signal,
auxiliary function strobe signal, and M decode signals are
sent;  the control of program stop and optional stop shall be
designed on the PMC side.

5 When the automatic operation is stopped by M02 or M30,
it is necessary to send the external reset signal from the
machine side to the CNC, instead of the FIN signal,  When
the external reset signal is returned against the M02 or M30,
the control returns to the top of the program recently
executed and enters the reset state.  When the FIN signal
is returned, the control returns to the beginning of the
program recently executed and executes it from the top..

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.11.1 AUXILIARY FUNCTION 
(M FUNCTION)

(B–61404E)
II.11.3 THE SECOND AXILIARY FUNC-

TIONS (B CODE)

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.11.1 AUXILIARY FUNCTION 
(M FUNCTION)

(B–61394E)
II.11.3 THE SECOND AXILIARY FUNC-

TIONS (B CODE)

Note

Reference item



8. AUXILIARY FUNCTION B–61393E–2/02

338

Inhibits execution of a specified M, S, T and B function.  
That is, code signals and strobe signals are not issued.  
This function is used to check a program.

[Classification] Input signal

[Function] This signal selects auxiliary function lock.  That is, this signal disables
the execution of specified M, S, T, and B functions.

[Operation] When this signal turns to “1”, the control unit functions as described
below.

(1)The control unit does not execute M, S, T, and B functions specified
for memory operation or MDI operation.  That is, the control unit stops
the output of code signals and strobe signals (MF, SF, TF, BF).

(2) If this signal turns to “1” after code signal output, the output operation
is executed in the ordinary manner until its completion (that is, until
the FIN signal is received, and the strobe signal turns to “0”).

(3)Among the miscellaneous functions, M00, M01, M02, and M30 are
executed even when this signal is “1”.  All code signals, strobe signals,
decode signals (for M series only) are output in the ordinary manner.

(4)Among the miscellaneous functions, even when this signal is “1”,
those functions (M98 and M99) that are executed in the control unit
without outputting their execution results are executed in the ordinary
manner.

WARNING
Even when this signal is “1”, spindle analog output or
spindle serial output is executed.

#7
AFLG103

#6 #5 #4 #3 #2 #1 #0

8.2
AUXILIARY 
FUNCTION LOCK

General

Signal

Auxiliary function lock 
signal 
AFL<G103#7>

Signal address



B–61393E–2/02 8. AUXILIARY FUNCTION

339

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

III.5.1 MACHINE LOCK AND AUXILIARY
FUNCTION LOCK

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

III.5.1 MACHINE LOCK AND AUXILIARY
FUNCTION LOCK

Reference item



8. AUXILIARY FUNCTION B–61393E–2/02

340

So far, one block has been able to contain only one M code.  However, this
function allows up to three M codes to be contained in one block.
Up to three M codes specified in a block are simultaneously output to the
machine.  This means that compared with the conventional method of a
single M command in a single block, a shorter cycle time can be realized
in machining.

(Example)

One M command
 in a single  block

Multiple M commands
in a single block

M40 ;
M50 ;
M60 ;

G28G91X0Y0Z0 ;
:
:
:

M40M50M60 ;
G28G91X0Y0Z0 ;

:
:
:
:
:

(1)Assume that “MaaMbbMcc;” was commanded by the program.

(2)The 1st M command (Maa) sends the code signals M11 to M38 in a
manner similar to the conventional one-block single command.  The
strobe signal MF is set to “1” after a time TMF set by parameter
No.0009#4 – #7 (Standard setting:  16 msec).
The second M command (Mbb) sends the code signal  M211-M238,
the third M command (Mcc) sends the code signal  M311-M338,  and
their respective strobe signals MF2 and MF3 are set  to “1”.
Furthermore, the three code signals are sent simultaneously.
The strobe signals MF, MF2, and MF3 become “1” at the same time.
The code signal is a binary notation of the program command aa, bb
and cc.

(3)On the PMC side, the code signals corresponding to the respective
strobe  signals are read when the strobe signals become “1”, and the
appropriate operations are performed.

(4)When the operation of all M commands ends on the PMC side, the end
signal (FIN) is set to “1”.

(5)When the completion signal stays “1” for a time (TFIN) set by
parameter No.0009#0 – #3 (Standard:  16 msec), all strobe signals
(MF, MF2 and MF3) are set to “0” at the same time and the reception
of completion signal is reported.

(6)On the PMC side, when MF, MF2 and MF3 are set to “0”, the
completion signal is set to “0”.

8.3
MULTIPLE M 
COMMANDS IN A 
SINGLE BLOCK

General

Basic procedure



B–61393E–2/02 8. AUXILIARY FUNCTION

341

A time chart for this procedure is shown below:

TFINTMF

M command (MaaMbbMcc;)

Code signal M11 to M38
Strobe signal MF

PMC side operation

Code signal M211 to M238
Strobe signal MF2

PMC side operation

Code signal M311 to M338
Strobe signal MF3
PMC side operation

End signal FIN

[Classification] Output signal

[Function] Indicates that second and third auxiliary functions have been issued.

[Output condition] The output conditions and procedures are the same as that described in
“Basic procedure”.

#7
F157

#6 #5
MF3

#4
MF2

#3 #2 #1 #0

M228F193 M224 M222 M221 M218 M214 M212 M211

M318F194 M314 M312 M311 M238 M234 M232 M231

M338F195 M334 M332 M331 M328 M324 M322 M321

Signal

2nd, 3rd M function code
signal 
M211 to M238
<F193#0 to F194#3>
M311 to M338
<F194#4 to F195#7>
2nd, 3rd M Function 
strobe signal 
MF2<F157#4> 
MF3<F157#5>

Signal address



8. AUXILIARY FUNCTION B–61393E–2/02

342

#7
M3B0065

#6 #5 #4 #3 #2 #1 #0

[Data type] Bit

M3B The number of M codes that can be specified in one block
0 : One
1 : Up to three

CAUTION
1 M00, M01, M02, M30, M98, M99, or M198 must not be

specified together with another M code.
2 Some M codes other than M00, M01, M02, M30, M98, M99,

and M198 cannot be specified together with other M codes;
each of those M codes must be specified in a single block.
Such M codes include these which direct the CNC to
perform internal operations in addition to sending the M
codes themselves to the PMC. To be specified, such M
codes are M codes for calling program numbers 9001 to
9003 and M codes for disabling advance reading (buffering)
of subsequent blocks.
The M codes which can be specified in a single block must
be those which the CNC send only the M code signals to the
PMC side.

3 In MDI operation of type A, only a single M code can be
specified.

NOTE
CNC allows up to three M codes to be specified in one block.
However, some M codes cannot be specified at the same
time due to mechanical operation restrictions.  For example,
M42 can be specified only after the mechanical operation of
M41 is completed.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.11.2 MULTIPLE M COMMANDS IN A
SINGLE BLOCK

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.11.2 MULTIPLE M COMMANDS IN A
SINGLE BLOCK

Parameter

Caution

Note

Reference item



B–61393E–2/02 8. AUXILIARY FUNCTION

343

To accelerate M/S/T/B function execution, the high–speed M/S/T/B
interface has simplified the transfer of the strobe and completion signals
of the M/S/T/B functions.

Whether to use the usual system or high–speed system for strobe signal
and completion signal handling can be specified by parameter HSIF
(No.0045#7).

The description below uses the miscellaneous functions (M code
commands) as an example.  The same description applies to the
spindle–speed function (S code), tool function (T code) and 2nd auxiliary
function (B code).

(1) Assume that the following program is given:  
Mxx;
Myy;

(2) In response to an M command, the NC system sends out the code
signals M11 to M38.  
After the expiration of the time set with bits 4 to 7 of parameter 0009,
the system inverts the logic level of strobe signal MF.  That is, the MF
signal is brought to 1 from 0, or to 0 from 1.

(3)The CNC system inverts the strobe signal, then when the logical level
of the auxiliary function completion signal MFIN becomes the same
as the strobe signal, the CNC assumes the completion of PMC
sequence.

With the usual method, the operation is assumed to be completed when
a falling edge (“1” to “0”) of the M/S/T/B completion signal FIN is
received after a rising edge (“0” to “1”) of the FIN signal is detected.  This
new system, on the other hand, assumes the operation has been completed
upon detection of only one transition of the completion signal.  
In addition , the usual system uses only one completion signal (FIN)
common to the M/S/T/B functions. This new system uses a different
completion signal for each of the M, S, T, and B functions; the completion
signals for the M, S, T, and B functions are MFIN, SFIN, TFIN, and
BFIN, respectively.  
The Fig.8.4 (a) 1 below shows the timing chart of these signals with the
new system.  For comparison, Fig.8.4 (b) shows the timing chart of the
conventional system.

8.4
HIGH–SPEED M/S/T/B
INTERFACE

General

Basic procedure



8. AUXILIARY FUNCTION B–61393E–2/02

344

Mxx Myy

Next block

Code signal

Strobe signal MF

PMC side operation

Auxiliary function 
completion signal MFIN

Fig. 8.4 (a)  Timing Chart of the High–Speed System

Mxx Myy

Next block

Code signal

Strobe signal MF

PMC side operation

Completion signal FIN

Fig. 8.4 (b)  Timing Chart of the Usual System

A high–speed interface can also be used for multiple M commands issued
for one block.  This interface provides separate completion signals for
each M code.  They are called MFIN (the same name as for the single M
command per block function), MFIN2, and MFIN3, respectively.  The
signal transfer sequence for multiple M codes per block is the same as that
for a single M code per block.

The high–speed interface can also be used for the external operation
function.  In this case, special external operation signal EFD and
completion signal EFIN are used.  The procedure for sending and
receiving these signals is identical to that for sending and receiving the
strobe and completion signals of the miscellaneous function (M series).



B–61393E–2/02 8. AUXILIARY FUNCTION

345

[Classification] Input signal

[Function] Reports that the execution of a miscellaneous function using the high–
speed M/S/T/B interface is completed.

[Operation] For the operation and aprocedure of the contol unit when this signal turns
to “1” and “0”, see the description of “Basic procedure” above.

[Classification] Input signal

[Function] Reports that the execution of a spindle speed function using the
high–speed M/S/T/B interface is completed.

[Operation] For the operation and procedure of the control unit when this signal turns
to “1” and “0”, see the description of “Basic procedure” above.

[Classification] Input signal

[Function] Reports that the execution of a tool function using the high–speed
M/S/T/B interface is completed.

[Operation] For the operation and procedure of the control unit when this signal turns
to “1” and “0”, see the description of “Basic procedure” above.

[Classification] Input signal

[Function] Reports that the execution of a second auxiliary function using the
high–speed M/S/T/B interface is completed.

[Operation] For the operation and procedure of the control unit when this signal turns
to “1” and “0”, see the description of “Basic procedure” above.

Signal

Miscellaneous function 
completion signal 
MFIN<G115#0>

Spindle function 
completion signal 
SFIN<G115#2>

Tool function completion
signal 
TFIN<G115#3>

2nd auxiliary function 
completion signal 
BFIN<G115#7>(Tseries)
BFIN1, BFIN2
<G115#6, #7>(M series)



8. AUXILIARY FUNCTION B–61393E–2/02

346

[Classification] Input signal

[Function] Indicate that when the high–speed interface is used for multiple M com-
mands per block, the second or third M function have been completed.

[Operation] See “Basic procedure” for how the control unit operates and what it per-
forms when the signal turns to “1” and “0”.

[Classification] Output signal

[Function] Indicates that positioning for the external operation function has been
completed for the high–speed M, S, T, or B interface, and that another
external operation is required.

[Operation] Refer to the description of the output conditions and procedure described
in “Basic procedure”.

[Classification] Input signal

[Function] Indicates that the external operation function has been completed for the
high–speed M, S, T, or B interface.

[Operation] The “Basic procedure” describes the procedure and operation of the
control unit when the signal is set to 1 or 0.

#7
BFING115

#6 #5 #4 #3
TFIN

#2
SFIN

#1 #0
MFIN (T series)

BFIN1G115 BFIN2 TFIN SFIN EFIN MFIN (M series)

G134 MFIN3 MFIN2

F150 EF (M series)
#7 #6 #5 #4 #3 #2 #1 #0

2nd, 3rd M function
completion signals
MFIN2, MFIN3 
<G134#4, #5>

External operation signal
for high–speed interface 
(M series) 
EF<F150#1>

External operation 
function completion 
signal (M series) 
EFIN<G115#1>

Signal address



B–61393E–2/02 8. AUXILIARY FUNCTION

347

#7
HSIF0045

#6 #5 #4 #3 #2 #1 #0

[Data type] Bit

HSIF Exchange of strobe and completion signals for the M, S, T, and B codes
0 : Normal
1 : High–speed

NOTE
1 The strobe signals MF, SF, TF, and BF are “0” when the

power is turned on.
2 When the control unit is reset, MF, SF, TF, and BF are set

to “0”.

CONNECTION MANUAL 
(This manual)

8.1 MISCELLANEOUS FUNC-
TION/2ND AUXILIARY FUNCTION

8.3 MULTIPLE M COMMANDS IN A
BLOCK

11.9 EXTERNAL OPERATION FUNC-
TION

Parameter

Note

Reference item



8. AUXILIARY FUNCTION B–61393E–2/02

348

Control based on M codes is used to cause one tool post to wait for the
other during machining.  By specifying an M code in a machining
program for each tool post, the two tool posts can wait for each other at
a specified block. When an M code for waiting is specified in a block for
one tool post during automatic operation, the other tool post waits for the
same M code to be specified before staring the execution of the next block.
A range of M codes used as M codes for waiting is to be set in the
parameters (Nos. 0047#4 and 0243) beforehand.

[Classification] Input signal

[Function] Specifies whether to synchronize the tool posts by the waiting M code.

[Operation] When this signal turns to “1” the paths are not synchronized by the M
code.  The M code for waiting specified in a machining program is
ignored.  
When this signal turns to “0”, the tool posts are synchronized by the M
code.  When the M code for waiting is specified for one tool post, the CNC
waits for the corresponding M code of another tool post to be issued, then
starts executing the next block.

[Classification] Output signal

[Function] Indicates that the CNC is waiting for the M code of either tool post 1 or
2.

[Operation] This signal is “1” as long as:
(i) One tool post is waiting for another tool post.  That is, the signal stays

“1” for the period from when the M code for waiting is issued to one
tool post to when the corresponding M code is issued to another tool
post.

This signal is “0” as long as:

(ii)Neither of the tool posts are waiting for the other.

8.5
WAITING M CODE 
(0–TTC)

General

Signal

No–wait signal NOWT 
<G133#1>

Waiting signal WATO 
<F160#6>



B–61393E–2/02 8. AUXILIARY FUNCTION

349

#7
G133

#6 #5 #4 #3 #2 #1
NOWT

#0

#7
F160

#6
WATO

#5 #4 #3 #2 #1 #0
#1

#7
0047

#6 #5 #4
M3LMT

#3 #2 #1 #0

M3LMT The range of the waiting M codes to be used with the 0–TTC is determined
by value α specified in parameter 0243, as indicated below:
1: M( α � 100) to M999.
0: M( α � 100) to M( α � 100 + 99).

0243 Third (hundreds) digit of the waiting M code

[Valid data range] 1 to 9

[Description] Set the waiting M codes for tool posts 1 and 2 of the FANUC Series
0–TTC.  Specify the third (hundreds) digit.

Example Specifying 3

When the M3LMT bit (bit 4 of parameter 0047) is set to 0

Normal M codes: M000 to M299, M401 to M999
Waiting M codes: M300 to M399

When the M3LMT bit (bit 4 of parameter 0047) is set to 1

Normal M codes: M000 to M299
Waiting M codes: M300 to M999

NOTE
In this parameter, set identical values for both tool posts.

������ Message Description

160 MISMATCH WAITING M–
CODE

Different M code is commanded in
tool post 1 and 2 as waiting M code.
Modify the program.

CAUTION
The waiting M code, unlike other M codes, does not issue
code signal nor strobe signal.

Signal address

Parameter

Alarm and message

Caution



8. AUXILIARY FUNCTION B–61393E–2/02

350

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.24.2 WAITING FOR TOOL POST

Reference item



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

351

9 SPINDLE SPEED FUNCTION



B–61393E–2/029. SPINDLE SPEED FUNCTION

352

When up to five digits are specified after address S, code and strobe
signals are sent out and used to control the spindle speed.  The code
signals are retained until another S code is issued.

One S code is used for each block.

Refer to 8.1.

NOTE
1 When a move command and miscellaneous  function are

specified in the same block, the commands are executed in
one of the following two ways:
i) Simultaneous execution of the move command and

miscellaneous function commands.
ii) Executing miscellaneous function commands upon

completion of move command execution.
The selection of either sequence depends on the PMC
processing sequence.

2 For S code output when the spindle serial output/analog
spindle output is used, refer to 9.3.

9.1
SPINDLE SPEED 
FUNCTION 
(S CODE OUTPUT)

General

Signal

Note



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

353

There are two types of spindle motor control interfaces, spindle serial
output and spindle analog output.

The table below lists the relationships between the spindle control
interfaces and the configuration of the spindle.

Spindle serial
output

Spindle analog
output

First spindle Second spindle Third spindle

� × First serial spindle
The PC can be used.

Second serial spindle
The PC can be used. (*)

Analog spindle
The PC cannot be used.

� × Serial spindle
The PC can be used.

First analog spindle
The PC can be used. (*)

Second analog spindle
The PC can not be used.

× � First analog spindle
The PC can be used.

Second analog spindle
The PC can not be used. (*)

Third andlog spindle
The PC can not be used.

× × See Section 9.1.
⇒  Controlled by the PMC using an external interface.

· PC = position coder

· (*) The multispindle function is necessary to use the position coder of
the second spindle (T series only).

· See section 15.4 or 9.10 for how to control the speed of the second and
third spindles.

9.2
SPINDLE SERIAL 
OUTPUT/SPINDLE 
ANALOG OUTPUT

9.2.1
General



B–61393E–2/029. SPINDLE SPEED FUNCTION

354

The table below lists the relationship between the spindles and functions.

��Available ×�Unavailable

Spindle
Serial spindle Analog spindle

Spindle
Function First serial

spindle
Second serial

spindle

When used as the
first spindle (with

no serial SP)

When used as the
third spindle

(with a serial SP)

Thread cutting/feed per rotation
(synchronous feed)

� �  (*1) � ×

Constant surface speed control � �  (*1) � ×

Spindle speed fluctuation detection � � (*1) � ×

Actual spindle speed output 
(T series)

� �  (*1) � ×

Spindle positioning (T series) � × � ×

Cs contour control � × × ×

Multispindle (T series) (*2)
�

(First spindle)

�

(Second spindle)
×

�

(Third spindle)

Rigid tapping � �  (*1) � ×

Spindle synchronization � Master (*3) � Slave (*3) × ×

Spindle control unit functions (*4),
such as spindle orientation, spindle
output switch, and other types of
spindle switching

� � � �

Polygon turning (T series) � �  (*1) � ×

Spindle output control using PMC � � � �

NOTE
1(*1) The multispindle function (T series) is necessary.  The

function cannot be used for the first and second spindles
simultaneously.

2(*2) The multispindle function can control the speed of three
spindles and switch the feedback signal between two
position coders.  It also can work without the second or
third spindle.

3(*3) For 0–TTC, the first spindle on tool post 1 is the master,
and the first spindle on tool post 2 is the slave.  The
second spindle of either tool post cannot be used in
spindle synchronization.

4(*4) These functions belong to the spindle control unit.  They
cannot be used unless the spindle control unit supports
those functions.

The signals and parameters for spindle speed control are common to both
spindle serial output and spindle analog output.  (See Section 9.3.)



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

355

The table below lists the differences related to direct control of the spindle
control unit.

Spindle control unit for
spindle serial output inter-

face

Spindle control unit for
spindle analog output in-

terface

Parameters for
the spindle con-
trol unit

Specified as CNC parame-
ters 
(6000 to 6888/S1, S2)
Used after being transferred
to the spindle control unit

Directly specified for the
spindle control unit

Control signal for
the spindle con-
trol unit

Connected to the PMC via
the CNC
G229 to G232 and F281 to
F284:
Addresses for the first
spindle
G233 to G236 and F285 to
F288:
Addresses for the second
spindle

Connected to the PMC via
an external contact

Spindle speed
command inter-
face

Digital data in a range from
0 to � maximum spindle
motor speed

Analog voltage from 0 to
�10 V (excluding portion
for offset voltage adjust-
ment)

Position coder
interface

Connected to the CNC via
the spindle control unit

Connected directly to the
CNC

· Spindle control unit signals for the serial spindle

<G229 to G232> (input), <F281 to F284> 
→ for the first serial spindle

<G233 to G236> (input), <F285 to F288> 
→ for the second serial spindle

These addresses are on the CNC.  Actually, however, they are input/output
signals for the spindle control unit for the serial spindle.

For details of the signals belonging to these addresses, refer to the
manuals for the serial spindle:

FANUC AC SPINDLE MOTOR series (Serial Interface) Descriptions
(B–65042E)
FANUC AC SPINDLE SERVO UNIT Serial Interface S series
Maintenance Manual (B–65045E)
FANUC SERVO AMPLIFIER� series Descriptions (B–65162E)

Signal



B–61393E–2/029. SPINDLE SPEED FUNCTION

356

#7
MRDYAG229

#6
ORCMA

#5
SFRA

#4
SRVA

#3
CTH1A

#2
CTH2A

#1
TLMHA

#0
TLMLA

RCHAG230 RSLA INTGA SOCNA MCFNA SPSLA *ESPA ARSTA

G231 NRROA ROTAA INDXA

#7
ORARAF281

#6
TLMA

#5
LDT2A

#4
LDT1A

#3
SARA

#2
SDTA

#1
SSTA

#0
ALMA

F282 PCFNA PCHPA CFINA CHPA

#7
MRDYBG233

#6
ORCMB

#5
SFRB

#4
SRVB

#3
CTH1B

#2
CTH2B

#1
TLMHB

#0
TLMLB

RCHBG234 RSLB INTGB SOCNB MCFNB SPSLB *ESPB ARSTB

G235 NRROB ROTAB INDXB

#7
ORARBF285

#6
TLMB

#5
LDT2B

#4
LDT1B

#3
SARB

#2
SDTB

#1
SSTB

#0
ALMB

F286 PCFNB PCHPB CFINB CHPB

#7
0071

#6 #5 #4
SRLS2P

#3 #2 #1 #0

[Data type] Bit

SRLS2P The number of connections in serial spindle control
0 : 1
1 : 2

NOTE
To connect two serial spindles, set jumper S1 on the 1st
serial spindle control unit to B.

Nos.6500 – 6635: S1→ For 1st serieal spindle
Nos.6640 – 6775: S2→ For 2nd serial spindle

The above parameters are on the CNC, but actually they are used for the
spindle control unit of serial spindle.  
For details of these parameters, refer to the following manual:

FANUC AC SPINDLE MOTOR� series PARAMETER MANUAL
(B–65160E)

FANUC AC SPINDLE SERVO UNIT Serial Interface S series
Maintenance Manual (B–65045E)

Signal address
� For 1st SERIAL SPINDLE

� For 2ND SERIAL
SPINDLE

Parameter
� Connection of serial

spindle control unit

� Parameters of serial
spindle control unit



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

357

Number Message Description

408 SPINDLE SERIAL LINK
START FAULT

This alarm is generated when the spindle con-
trol unit is not ready for starting correctly when
the power is turned on in the system with the
serial spindle.
The four reasons can be considered as fol-
lows:

1) An improperly connected optic cable, or
the spindle control unit’s power is OFF.

2) When the NC power was turned on under
alarm conditions other than SU–01 or
AL–24 which are shown on the LED dis-
play of the spindle control unit.
In this case, turn the spindle amplifier
power off once and perform startup again.

3) Other reasons (improper combination of
hardware)

4) The second spindle (when SRL2SP, bit 4
of parameter No.0071, is 1) is in one of
the above conditions 1) to 3).

Note) This alarm does not occur after the
system including the spindle control
unit is activated.

409 SPINDLE ALARM DETEC-
TION

A spindle amplifier alarm occurred in a system
with a serial spindle.  The alarm is indicated
as “AL–XX” (where XX is a number) on the
display of the spindle amplifier.  For details,
see Manuals for Serial spindle. Setting bit 7 of
parameter No.0397 causes the spindle ampli-
fier alarm number to appear on the screen.

 

750 First serial spindle:  Load meter reading (%)

751 First serial spindle:  Speed meter reading (rpm)

752 Second serial spindle:  Load meter reading (%)

753 Second serial spindle:  Speed meter reading (rpm)

To display the load and speed meter readings, the following parameters
must be specified correctly.
Maximum motor speed:  

Parameter Nos.6520 and 6660 (main)/Nos.6160 and 6340 (sub)
Load meter reading at maximum output:

Parameter Nos.6627 and 6767 (main)/Nos.6238 and 6418 (sub)

NOTE
The spindle switch function is used for main/sub switching.
Select main if the spindle switch function is not used.

Alarm and message

DIAGNOSIS SCREEN
� Load and speed meter

readings for the serial
spindle



B–61393E–2/029. SPINDLE SPEED FUNCTION

358

754 Master spindle motion error during spindle synchronization

755 Slave spindle motion error during spindle synchronization

756 Absolute value of synchronization error during spindle synchronization

The display for parameter Nos. 754 to 756 are in pulse units (one pulse =
360/4096 degrees)

� Position error display
during spindle
synchronization



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

359

This section describes spindle speed control.  It also explains the position
coder and the spindle speed arrival signal (SAR).

9.3
SPINDLE SPEED 
CONTROL

General



B–61393E–2/029. SPINDLE SPEED FUNCTION

360

The following chart summarizes spindle speed control.

Output to the PMC
(used for ladders)

Switching in the machine

←From the PMC

Machining program, etc.
↓

⋅ Processing for gear change
(S command → spindle motor speed con-
version)
Clamp the speed according to parameters.

⋅ Command output to the
spindle, spindle enable sig-
nal output, gain, and offset

Gear select signal output 
(M series)
(GR3O, GR2O, GR1O)

⋅ Spindle stop signal/spindle orientation signal

⋅ Spindle override signal 
(*SSTP/SOR, SPA to SPC (M), SPA to SPD (T))

Input the gear select
signal (GR1, GR2).

CNC output specification 
(result of speed conversion)
S12 bit code output (R12O to R01O)

Specify output polarity in the CNC.
(M03/M04 and parameter TCW, CMM
(No.0013#6, #7))

Thread cutting,
feed per rotation,
etc.

⋅ Position coder
feedback 
signal

SensorsInput the spindle amplifier
control signal from the
PMC, etc.

⋅ S command

⋅ S code/SF signal output .

⋅ Determine the output.
(Selected by the SIND signal)

←  Output specification by the PMC 
  (set to R12I to R01I)

⋅ Determination of output polarity
(Selected by the SSIN signal)

←  Polarity specification by the PMC 
  (set to SGN)

⋅ Control over the
start of cutting
feed.

Input the spindle
speed arrival
signal (SAR).

Monitor the arrival
spindle speed

Spindle
amplifier

Spindle
motor

Position
coder

Gear change
mechanism

Spindle

 Mechanical section of the machine

CNC PMC and machine

Output to the PMC 
(to change the machine gear).

Output to the PMC 
(to be used for ladders).

←From the PMC

←From the PMC

←

Command flow of
spindle speed control



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

361

The S command specifies the spindle speed entered from machining
programs, etc. for the CNC.

For constant surface speed control (during G96 mode), the CNC converts
the specified surface speed to the spindle speed.

In the M series without the constant surface speed control option, the CNC
specifies the gear stage for the desired spindle speed to the PMC
according to parameter Nos. 3741, 3742, and 3743, and the S command.

(GR3O, GR2O, GR1O <F152#2, #1, #0>)

With the spindle serial output or spindle analog output option, the spindle
control function in the CNC converts the S command value to the output
value for the spindle motor.  Unlike a system without such options, the
system with the options responds to the S command with the S code/SF
signals as follows to enable gear change and constant surface speed
control:

M series→ Outputs the S code.
The SF signal is output only when the CNC directs the PMC
to change the gear.

T series→ Outputs neither S code nor SF signal.
(This is because the S code is not always the spindle speed
when the constant surface speed control option is used.)

This signal sets the S command value in the CNC to 0.  If the CNC has
the spindle output specified (see descriptions on the SIND signal), this
signal sets the speed command for the spindle to 0.

Even if the function of the spindle stop signal is not used, the signal must
be set to logical 1 for the CNC to perform spindle speed control.

If the spindle orientation signal is logical 1 and the spindle stop signal is
logical 0, the spindle rotates in the direction specified by bit 5 (ORCW)
of parameter No.0013 at a constant speed specified by parameter
No.0108.

Because the spindle rotates at a constant speed regardless of the gear
stage, this signal can be used to rotate the spindle to drive the stopper or
pin during mechanical spindle positioning.

In the M series, specifying bit 5 (GST) of parameter No.0003 causes the
spindle motor to rotate at constant speed.  This function can be used for
gear shifting because it maintains a constant speed of the gear change
mechanism.

This signal specifies an override of 50% to 200% (T series)/50% to 120%
(M series) for the specified S value for spindle control.

However, the spindle speed override function is disabled when the CNC
is in the following state:

Tapping cycle (G84, G74) for the M series
Thread cutting (G32, G92, G76) for the T series

When the spindle speed control is performed but the spindle speed
override is not used, set the override value to 100%.

� S command

� S code/SF signal output

� Spindle stop signal 
(*SSTP)

� Spindle orientation 
signal (SOR)

� Spindle speed override 
signal 
(SPA to SPD (T series)/
SPA to SPC (M series))



B–61393E–2/029. SPINDLE SPEED FUNCTION

362

Although the S command contains the spindle speed, the object that is
actually controlled is the spindle motor.  Therefore, the CNC must have
some provision to detect the gear stage between the speed and spindle
motor.
There are two types of gear selection methods:

M type
The CNC selects a gear stage according to the range of speed for each gear
stage previously specified in a parameter, as directed by the S command,
and informs the PMC of the selected gear stage (one of the three gear
stages ) using the gear select signal output (GR3O, GR2O, GR1O).
Also, the CNC outputs the spindle speed based on the selected gear stage
(output as the gear select signal).

T type
The gear stage (one of the four gear stages ) being currently used by the
machine is input in response to the gear select signal inputs (GR1, GR2).
The machine determines which gear to use.
The CNC outputs the spindle speed that corresponds to the gear stage
input.

The M series system can use either M or T type.

M type ← Without constant surface speed control option.
T type ← With constant surface speed control.

The T series system can use only T type.

By specifying from S0 to S99999 in memory or MDI operation, the CNC
outputs a command corresponding to the spindle speed.  There is a
two-speed (GR1O and GR2O) or three-speed range (GR1O, GR2O,
GR3O), set  by parameter nos. 0541, 0539, and 0555, and the gear
selection signal is output simultaneously.  When the gear selection signal
is changed, the SF signal is output at the same time (parameter SFOUT
no. 0020#7).
The meaning of the gear signals is shown below:

Gear 2–stage Gear 3–state Remarks

GR1O Low Low
Low :Low Gear

GR2O High Middle Middle :Middle Gear

Hi h Hi h G
GR3O High

High :High Gear

The speed commands output to the spindle motor are as follows:

⋅ For the serial spindle, the speed commands are processed as values 0 to
16383 between the CNC and spindle control unit.

⋅ For the analog spindle, the speed commands are output to the analog
voltage signal SVC as analog voltages 0 to 10 V.

The following descriptions exemplify the analog spindle. However, they
can be applied to the serial spindle on the assumption that spindle motor
speed with analog voltage 10 V corresponds to the maximum spindle
motor speed.

� Processing for gear
changing

� Selection of gear change
system

� Details of M type 
(Output of GR1O, GR2O,
GR3O)



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

363

� M type gear change method A (Fig. 9.3.1 (a))

(GR3O)GR2O
(GR2O)GR1O

(GR1O)

10V

A B

C

C×
Vmax

4095
B×

Vmax

4095
A×

Vmax

4095
A×

Vmin

4095

Spindle motor speed command
(Analog voltage command)

Upper limit of
spindle speed
(Vc)

Spindle speed
command
(S code input)

For gear 2-stage

(  ) for gear 3-stage

Fig.9.3.1 (a) S code input and output voltage

Set the following values as parameters:

· Constant Vmax:  for upper limit of spindle speed (parameter No.0542)

Vmax=4095×
Upper limit of spindle speed

Spindle speed at command voltage 10V

· Constant Vmin;  for lower limit of spindle speed (parameter No.0543)

Vmin=4095× Lower limit of spindle speed

Spindle speed at command voltage 10V

· Spindle speed A (rpm) ; at command voltage 10V and low gear
(parameter No.0541)

· Spindle speed B (rpm) ; at command voltage 10V and high gear (or
middle-high gear) (parameter No.0539)

· Spindle speed C (rpm) ; at command voltage 10V and high gear
(parameter No.0555) (for gear 3–stage)

NOTE
If a specified voltage of 10 V is already higher than the
acceptable input voltage for the spindle drive system,
calculate the spindle speed that corresponds to 10 V using
a proportional calculation method and use it instead.  Now,
in response to the specified S code, the speed command
and gear select commands (G3O, G2O, G1O) are output to
the spindle motor as shown in Fig.9.3.1 (a).



B–61393E–2/029. SPINDLE SPEED FUNCTION

364

� Gear change point during tapping cycle mode (G84, G74)

In case of G84 (tapping cycle) or G74 (counter tapping cycle) the gear
shift speed is changed by parameter G84S (No.0012#6).  In this case,
gear shift (high–speed/low–speed) is performed at the speed set by
parameter Nos.0540 and 0556 (Fig. 9.3.1 (b)).

D : Gear shift point (parameter No.0540) for low/high speed change (or low/medium speed change) (set by
parameter as rpm value) during tapping.

E : Gear shift point (parameter No.0556) (3-stage gear) for medium/high speed change (set by parameter as
rpm value) during tapping.

GR2O

GR1O

10V

A B CD E

Spindle motor speed command
(analog voltage output)

Upper limit
voltage of
spindle 
motor speed
(Vc)

Spindle speed
command
(S code input)

Fig.9.3.1 (b) S code input and output analog voltage (in tapping)



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

365

� M type gear change method B (M series) (Fig. 9.3.1 (c))

The speed (rpm) at which the low-speed and the high-speed gears are
changed over can be set as a parameter (No.0585) by setting parameter
LGCM No.0035#6.  When a 3-step gear is used, it is possible to set the
speeds (rpm) for switching low-speed and medium-speed gears, and
medium-speed and high-speed gears, using parameters  Nos.0585, 0586.

GR3O

GR2OGR1O

10V

VC

VH

VL

A B C

Spindle speed
command
(S code input)

A×
Vmin

4095
C×

Vmax

4095
B×

Vmaxh

4095
A×

Vmaxl

4095

VC: Voltage corresponding to the upper limit of output value to spindle motor.

VH: Voltage corresponding to the upper limit of output value to spindle motor with high-speed gears (medium
speed gear for 3-step gear)

VL: Voltage corresponding to the upper limit of output value to spindle motor at low-speed gear 

Spindle motor speed command
(analog voltage output)

Fig.9.3.1 (c) M type gear change B

When using this function, set the following parameters:

· Constant Vmax (Parameter No.0542) related to the upper limit of
spindle motor speed (rpm)

Upper limit of spindle motor speed (rpm)

Spindle motor speed (rpm) when the  command voltage is 10V
Vmax = 4095×

· Constant Vmin (Parameter No.0543) related to the lower limit of
spindle motor speed (rpm)

Vmin = 4095×
Lower limit of spindle motor speed (rpm)

Spindle motor speed (rpm)  when the command voltage is 10V

· Constant Vmaxl (Parameter No.0585) related to the upper limit of
spindle motor speed (rpm) with low-speed gears

Vmaxl = 4095×
Upper limit of spindle motor  speed (rpm) with low-speed gears

Spindle motor speed (rpm) when the command voltage is 10V



B–61393E–2/029. SPINDLE SPEED FUNCTION

366

· Constant Vmaxh (Parameter No.0586) related to the upper limit of
spindle motor speed (rpm) with high-speed gears (medium-speed gear
for 3-step gear)

Vmaxh = 4095×
Upper limit of spindle motor speed (rpm) with high-speed gears (medium-speed gear for 3-step gear)

Spindle motor speed (rpm)  when the command voltage is 10V

· Spindle speed A (Parameter No.0541) (rpm) with low-speed gears
when the command voltage is 10V

· Spindle speed B (Parameter No.0539) (rpm) with high-speed gears
when the command voltage is 10V (medium-speed gear for 3-step)

· Spindle speed C (Parameter No.0555) (rpm) with high-speed gears
when the command voltage is 10V (3-step gear)

Spindle motor speed commands (0 to 10V) and gear selecting signals
(GR1O, GR2O, GR3O) are issued on each S code command as shown in
the figure:

CAUTION
1 In a tapping cycle when parameter G84S (No.0012#6) is

set, the gears are changed over at the gear changing point
for tapping.

2 For this function (parameter LGCM=1 (No.0035#6)), when
only one-step gear is used, the voltage corresponding to the
upper limit value to the spindle motor is calculated using
Vmaxl, and when 2-step gear is used, it is calculated
according to Vmaxh.  Therefore, set Vmaxl when only
one-step gear is used, Vmaxl and Vmaxh when 2-step gear
is used.

When S code is commanded, the I/O signal time chart is :

� When Gear select signal does not change

To next block

S code read

VL

Spindle speed
command output

0V

VH

Fig. 9.3.1 (d) Time chart when gear select signal does not change

In this case, the SF signal is not output and the CNC advances to the next
block automatically after the next spindle speed command is output.

� Time chart



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

367

� When Gear select signal change

Gear select signal

SF

S code read

0V

TFIN

TMF

TMF

To next block

FIN

VL

Spindle speed command
VH

GR3O
/GR2O
/GR1O

Fig.9.3.1 (e) Time chart when gear select signal changes

In this case, the gear select signal is output; after elapse of the time
constant set by parameter (TMF), the SF signal is output. After another
TMF elapse, the spindle speed command is output. On the PMC side,
change the gears by this signal, and return the FIN signal after the end of
gear change.  The time chart for SF and FIN signals is the same as in S
code output.  TMF, set by parameter No.0009#4 to #7, is common to M,
S and T functions.

Moreover, specifying bit 7 (SFOUT) of parameter No.0020 can specify
that the SF signal be output even if no gear change is used.

To perform the T type gear changing, the maximum spindle speed for each
gear select signal issued from the PMC side must be set by parameter Nos.
0540 – 0543.
The gear select signal is a 2 bit code signal (GR1, GR2).  The relationship
between the signal and gear number is :

GR1 GR2 Gear No. Parameter No. for max.spindle speed

0 0 1 No.0540

1 0 2 No.0541

0 1 3 No.0542

1 1 4 No.0543

The following descriptions exemplify the analog spindle.  Like the
descriptions of the M type, they also apply to the serial spindle on the
assumption that spindle motor speed with analog voltage 10 V
corresponds to the maximum spindle motor speed.

� Details of T type 
(Input of GR1, GR2)



B–61393E–2/029. SPINDLE SPEED FUNCTION

368

In addition, for the speed command output to the spindle motor, analog
voltages 0 to 10 V for analog spindle control correspond to digital data
0 to 16383 for serial spindle control.  However, it might be easier if you
consider them code signals from 0 to 4095 for convenience sake without
distinguishing between serial and analog spindles.

Assume that gear switching is two stage switching.  If the spindle speed
with the output voltage 10 V is 1000 rpm for the low speed gear (G1) and
2000 rpm for the high speed gear (G2), set these speeds by the parameter
Nos.0540, 0541. In this case, the analog voltage has the linear relationship
shown below.

When gear
2 selected

When gear
1 selected

Volt
0 V2 V1 10

600rpm

1000rpm

2000rpm
N

When spindle speed S=600 is given, V1 (for G1) or V2 (for G2) is
calculated inside the CNC and output to the machine side.

V1: 6(V)
V2: 3(V)

The value of output voltage V is calculated automatically from the
following equations:

V=
10N

R

R: Spindle speed at 10V output voltage

N: Spindle speed given by  S5-digits

This is equivalent to the G97 mode for constant surface speed control.

See Section 9.4 for operations during the constant surface speed control
mode (G96).

In addition, parameter No.0556 (upper limit to the spindle speed) can
specify speed clamping for all gear positions.



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

369

(Reference) Block Diagram for Analog Voltage Output

rpm/10V

X–axis pres-
ent value

Power magnetics cabinet

Gear change command

Speed
control

D-A
converter

Constant 
surface
speed control

Motor speed conversion

Full scale conversion

Gear change

r

[Surface speed]

S(m/min)
M code

CNC

GR1, GR2

gear select signal

(�������)

Spindle motor

SF signal is not sent.

Parameter

SVC

G96
G97

S (rpm)

With the constant surface speed control option equipped.

Spindle speed
command

Using the above processing for gear change, the CNC calculates the speed
command output to the spindle motor that is necessary to obtain the
specified spindle speed with the gear.

For either serial spindle or analog spindle control, the calculation results
are output as the S12 bit code signal from 0 to 4095 to the PMC.

(R01O to R12O<F172#0 to F173#3>)

After the calculation results are received, the SIND signal <G125#7>
determines which is to be used, the speed command output calculated by
the CNC or the data specified in the PMC.  Thus speed command output
control for the spindle motor is determined.  (See also Section 15.4.)

The speed command output to the spindle motor is determined as
described above, but the actually used output polarity is determined by the
CNC as follows:

⋅ If bit 7 (TCW) of parameter No.0013 = 0
→ Determined according to bit 6 (CWM) of parameter No.0013

⋅ If bit 7 (TCW) of parameter No.0013 = 1
→ Determined according to bit 6 (CWM) of parameter No.0013 and

M03/M04 given to the CNC

After that, the SSIN signal <G125#6> determines which is to be used, the
output polarity calculated by the CNC or the polarity specified in the
PMC.  In this way, the output polarity of the speed command output to
the spindle motor is determined.  (See also Section 15.4.)

Keep in mind the following:  Even with bit 7 (TCW) of parameter
No.0013 = 1, the CNC cannot determine the output polarity if it has not
issued M03/M04, and therefore, actual output does not work even if the
speed command output has been specified.

� Determination of output
R12O–R01O (Output)
R12I–R01I (Input)
SIND (Input)

� Determination of output
polarity SSIN/SGN (Input)



B–61393E–2/029. SPINDLE SPEED FUNCTION

370

According to the speed command output and the polarity determined so
far, the command is sent to the spindle control unit as follows:

⋅ For serial spindle → Digital data 0 to �16383
⋅ For analog spindle→ Analog voltage 0 to �10 V

After power is switched on, a nonzero command is output to the spindle
only when the following conditions are met:  A nonzero spindle speed
command is specified, and the output polarity is determined.

With bit 7 (TCW) of parameter No.0013 = 1, no command output is sent
to the spindle, because the output polarity is not determined until an
M03/M04 is issued.

The command output to the spindle is reset to 0 when a command to
specify so (such as *SSTP = 0 or S0 command) is issued.
M05, emergency stop, or reset does not cause the CNC to reset the
command output to the spindle to 0.

Another output related to spindle control is the spindle enable signal
ENB.

The ENB signal is logical 1 when a nonzero command output is sent to
the spindle.  If the command is logical 0, the ENB signal becomes logical
0.

When the analog spindle is being used, an offset voltage in the spindle
motor speed amplifier may cause the spindle motor to rotate at low speed
even if the command output (in this case, analog voltage) to the spindle
is zero.  The ENB signal can be used to stop the motor in such a case.

The analog spindle may require gain and offset voltage adjustment
depending on the spindle motor speed amplifier being used.

The following parameters are available for such adjustment.

⋅ Analog spindle as the first spindle
→ Gain adjustment data:  Parameter No.0516

Offset voltage compensation:  Parameter No.0577 (M)/0539 (T)

⋅ Analog spindle as the second spindle
→ Gain adjustment data:  Parameter No.0613

Offset voltage compensation:  Parameter No.0614

⋅ Analog spindle as the third spindle
→ Gain adjustment data:  Parameter No.0617

(valid for multispindle control)
Offset voltage compensation:  Parameter No.0618

The position coder is necessary for thread cutting or feed per rotation.
(For the M series, a software option must also be purchased.)

The position coder detects the actual spindle speed and the one–rotation
signal (used to detect a fixed point on the spindle for thread cutting).

Ideally, the position coder should be connected directly to the spindle
(with a gear ratio of 1:1).  If it is necessary to use a gear, select a gear ratio
from 1:1, 1:2, 1:4, and 1:8 that reduces the position coder speed.

When using a gear between the spindle and position coder, specify the
gear ratio in bits 6 and 7 (PSG1, PSG2) of parameter 0028 (M series)/bits
6 and 7 (PSG1, PSG2) of parameter 0003 (T series).

See Section 9.11 for position coder connection for rigid tapping.

� Command output to
spindle

� Requirement of output

� Requirement to stop
output

� Spindle enable signal
ENB <F149#4>

� Gain and offset

� Position coder feedback
signal



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

371

The spindle speed arrival signal SAR is an input signal used as a condition
to cause the CNC to start cutting feed.  This signal is used generally when
cutting feed should be started after the spindle reaches the specified speed.

In this case, a sensor is used to check the spindle speed.  The detected
speed is sent to the CNC via the PMC.

When the above operation is performed using the PC ladder regularly,
however, cutting feed may be started based on the SAR signal indicating
the previous spindle state (spindle speed before change), if the spindle
speed change command and the cutting feed command are issued at the
same time.

To avoid the above problem, monitoring the SAR signal can be deferred
for a time specified by parameter No.0110 after the S command or cutting
feed command was issued.

When using the SAR signal, set bit 2 (SCTO) of parameter No.0024 to
1.

Bit 6 (CSCT) of parameter No.0700 on the diagnosis screen is kept at 1
while this function is keeping the cutting feed block at a halt.

[Classification] Input signal

[Function] The command output to the spindle is held.

[Operation] When the spindle stop signal turns to “0” , the output voltage becomes 0V
and the enable signal ENB turns to “0” (M05 is not output). When this
signal turns to “1”, the analog voltage returns to its original value and the
ENB signal turns to “1”.

Input command

S××××
M03 M05 M04 S0

Miscellaneous function
processing

Spindle stop signal
*SSTP

���

���

Enable signal ENB

Analog voltage 0V

The above time chart is an example.  Actually, the time chart should meet
the specification of the spindle control unit.

· When this signal is not used, always set the signal to “1”.

· M03, M04, M05 are not processed inside the CNC.

� Speed arrival signal
(SAR)

Signal

Spindle stop signal 
*SSTP<G120#6>



B–61393E–2/029. SPINDLE SPEED FUNCTION

372

[Classification] Input signal

[Function] The spindle or the spindle motor is rotated at a constant speed.

[Operation] When the spindle orientation signal turns to “1” and the spindle stop
signal *SSTP turns to “0”, a spindle speed command which lets the
spindle rotate at the constant speed set by parameter No.0108 is output.
The enable signal ENB also turns to “1”.  This signal is disabled when the
spindle stop signal is “1”.
In M series, when the spindle speed for orientation is set by parameter
GST No.0003#5 and the SOR signal is input, the CNC outputs the spindle
speed command corresponding to the speed set to parameter 0108 with
an output polarity set by parameter ORCW (No.0013#5), but the gear
select signal does not change.  For example, if the SOR signal is turned
to “1” with high gear selected, and the speed set to parameter No.0108 is
in the low gear range, the gear select signal does not change and the
command output is calculated and output to obtain the set speed at high
gear.
When the spindle motor speed is set by parameter GST (No.0003#5)=1,
the command output is output regardless of gear select signal. When the
spindle motor speed is set, it is used for gear shift.
Example of usage is shown below:

Max. 70ms

M19
Input command

Miscellaneous function
processing

Spindle stop signal
*SSTP

Enable signal
ENB

Command output to
the spindle  0

Stop command Orientation
detection

M03

Spindle orientation signal 
SOR

Max. 70ms

RL:  Constant speed set by parameter No.0108

Spindle speed

0 rpm

Spindle orientation 
signal SOR<G120#5>



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

373

[Classification] Input signal

[Function] The spindle speed override signal specifies an override from 50% to 200%
(T)/from 50% to 120% (M) in 10% units for the S command sent to the
CNC.

[Operation] (M series)

Spindle override Machine contact statusp
value SPA SPB SPC

50% 1 1 1

60% 0 1 1

70% 0 1 0

80% 1 1 0

90% 1 0 0

100% 0 0 0

110% 0 0 1

120% 1 0 1

(T series)

Spindle override Machine contact statusp
value SPA SPB SPC SPD

50% 1 1 1 0

60% 0 1 1 0

70% 0 1 0 0

80% 1 1 0 0

90% 1 0 0 0

100% 0 0 0 0

110% 0 0 1 0

120% 1 0 1 0

130% 1 0 1 1

140% 1 1 1 1

150% 0 1 1 1

160% 0 1 0 1

170% 1 1 0 1

180% 1 0 0 1

190% 0 0 0 1

200% 0 0 1 1

1 : Contact is closed.
0 : Contact is opened.

Spindle speed override
signal 
SPA to SPD<G103#2 to
#5>(T series)/
SPA to SPC<G103#3 to
#5>(M series)



B–61393E–2/029. SPINDLE SPEED FUNCTION

374

The spindle speed override function is disabled (an override of 100% is
applied) under the following conditions:

⋅ Tapping cycle (G84, G74), M series
⋅ Thread cutting (G32, G92, G78), T series
→ When this function is not in use, specify an override of 100%.

[Classification] Input signal

[Function] The SAR signal initiates cutting feed.  In other words, if the signal is
logical 0, cutting feed will not start.

[Operation] Generally, this signal is used to inform the CNC that the spindle has
reached the specified speed.

For this purpose, the signal must be set to 1 only after the actual speed of
the spindle has reached the specified speed.

Setting parameter No.0110 with a wait time before the start of checking
the SAR signal inhibits cutting feed from starting under a condition of
SAR = 1 specified before the change of the spindle command.

To use the SAR signal, it is necessary to set bit 2 (SCTO) of parameter
No.0024 to 1.

The CNC checks the SAR signal under the following conditions:

(a) Bit 2 (SCTO) of parameter No.0024 is set to 1.

(b)Before starting distribution of the first feed (move command) block
after shifting from the rapid traverse mode to the cutting feed mode.
This checking is performed after the time set by parameter No.0110
has elapsed after the feed block is read.

(c) Before starting distribution of the first feed command block after an
S code is commanded.  The wait time for checking is the same as in
item (b).

(d)When an S code and feed are programmed in the same block, the S
code (or command output to the spindle) is output, and the SAR signal
is checked after a fixed time elapses. If the SAR signal is set to “1”,
feed begins.

CAUTION
According to the conditions of item (d) above, note that if the
circuit is so designed that SAR is turned to “0”
simultaneously with the output of an S code and the change
of spindle speed is gated with DEN signal, the operation will
stop. That is, the spindle speed does not reach the
commanded speed because the CNC is waiting for the DEN
signal and distribution is not started because the CNC is
waiting for the SAR signal.

Spindle speed arrival
signal SAR <G120#4>



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

375

[Classification] Output signal

[Function] Informs absence or presence of spindle output command.

[Output condition] The ENB signal becomes logical 0 when the command output to the
spindle becomes logical 0.  Otherwise, the signal is logical 1.

During analog spindle control, S0 may not be able to stop the spindle from
rotating at low speed because of an offset voltage in the spindle motor
speed control amplifier.  In such a case, the ENB signal can be used to
provide a condition to determine whether to stop the motor.

The ENB signal can be used also for serial spindle control.

[Classification] Output signal

[Function] The gear select signal specifies a gear stage to the PMC.

[Output condition] For details of this signal, see descriptions on the M type gear selection
method in General.

[Classification] Input signal

[Function] This signal informs the CNC of the gear stage currently selected.

[Output condition] For details of this signal, see descriptions on the T type gear selection
method in General.

Spindle enable signal
ENB<F149#4>

Gear selection signal
GR1O, GR2O, GR3O 
<F152#0 to #2>(M series)

Gear selection signal
GR1, GR2 
<G123#2, #3>(M series)/
<G118#2, #3>(T series)



B–61393E–2/029. SPINDLE SPEED FUNCTION

376

[Classification] Output signal

[Function] This signal converts the spindle speed command value calculated by the
CNC to code signals 0 to 4095.

[Output condition] The relationship between the spindle speed command value (calculated
by the CNC) and the value output by this signal is as shown below.

0

S12 bit code 
signal

4095

0
16383 (Digital data) ← Serial spindle
10V (Analog voltage) ← Analog spindle

This signal converts the spindle speed command value calculated by the
spindle control function of the CNC to data from 0 to 4095 (for both serial
and analog spindle control) and outputs the result.  Note that the
conversion result is not the actual output value.  (See Section 15.4.)

See Sections 9.1 and 15.4 for these signals.

See Section 15.4 for these signals.

S12–bit code signal
R01O to R12O 
<F172#0 to F173#3>

Other signals

Spindle speed function
code signal 
S11 to S28<F152>
(Output)
Spindle speed function
strobe signal
SF<F150#2>(Output)

Spindle speed output
control signal by PMC
SIND<G125#7>(Input)
R01l to R12l 
<G124#0 to G125#3> 
(Input)
SSIN<G125#6>(Input)
SGN<G125#5>(Input)



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

377

#7
G103

#6 #5
SPC

#4
SPB

#3
SPA

#2
SPD

#1 #0
(T series)

G103 SPC SPB SPA (M series)

G120 *SSTP SOR SAR

G123 GR2 GR1

R08IG124 R07I R06I R05I R04I R03I R02I R01I

SINDG125 SSIN SGN R12I R11I R10I R09I

G145 *SSTP3 *SSTP2 *SSTP1 SWS3 SWS2 SWS1 (T series)

#7
F149

#6 #5 #4
ENB

#3 #2 #1 #0

F150 SF

S28F152 S24 S22 S21 S18 S14 S12 S11

R08OF172 R07O R06O R05O R04O R03O R02O R01O

F173 R12O R11O R10O R09O

#7
0003

#6 #5
GST

#4 #3 #2 #1 #0
(T series)

[Data type] Bit

GST The SOR signal is used for:
0 : Spindle orientation
1 : Gear shift

#7
PG20003

#6
PG1

#5 #4 #3 #2 #1 #0
(T series)

PG20028 PG1 (M series)

[Data type] Bit

PG2, PG1 Gear ratio of spindle to position coder

Spindle speed

Number of position coder revolutions

Magnification PG2 PG1

�1   0   0

�2   0   1 Magnification=
�4   1   0

�8   1   1

Signal address

Parameter



B–61393E–2/029. SPINDLE SPEED FUNCTION

378

#7
0012

#6
G84S

#5 #4 #3 #2 #1 #0
(M series)

[Data type] Bit

G84S Gear switching method during tapping cycle (G84 and G74)
0 : Method A (Same as the normal gear switching method)
1 : Method B (Gears are switched during tapping cycle according to the

spindle speed set in parameters 0540 and 0556).

#7
TCW0013

#6
CWM

#5
ORCW

#4 #3 #2 #1 #0

[Data type] Bit

ORCW Voltage polarity during spindle orientation
0 : Positive
1 : Negative

TCW, CWM Voltage polarity when the spindle speed voltage is output

TCW CWM Voltage polarity

0 0 Both M03 and M04 positive

0 1 Both M03 and M04 negative

1 0 M03 positive, M04 negative

1 1 M03 negative, M04 positive

#7
SFOUT0020

#6 #5 #4 #3 #2 #1 #0
(M series)

[Data type] Bit

SFOUT The SF signal is output:
0 : When gears are switched
1 : Irrespective of whether gears are switched

#7
0029

#6 #5 #4
SFOB

#3 #2 #1 #0
(M series)

[Data type] Bit

SFOB When an S code command is issued in constant surface speed control,
0 : SF is output.
1 : SF is not output.

#7
0035

#6
LGCM

#5 #4 #3 #2 #1 #0
(M series)

[Data type] Bit

LGCM Gear switching method
0 : Method A (Parameters 0542 and 0543 for the maximum spindle speed

at each gear are used for gear selection.)
1 : Method B (Parameters 0585 and 0586 for the spindle speed at the gear

switching point are used for gear selection.)



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

379

#7
0049

#6 #5 #4 #3 #2 #1 #0
EVSF (T series)

[Data type] Bit

EVSF When the spindle control function (S analog output or S serial output) is
used, S codes and SF are:
0 : Not output for an S command.
1 : Output for an S command.

#7
0071

#6 #5 #4 #3 #2 #1
HISSC

#0
(T series)

[Data type] Bit

HISSC The sampling frequency to obtain the average spindle speed
0 : 4 (Normally, set to 0.)
1 : 1

0108 The spindle speed during spindle orientation or the spindle motor speed during
spindle gear shift

[Data type] Byte

[Valid data range] 0 to 255

Set the spindle speed during spindle orientation or the spindle motor
speed during gear shift.
When GST, #5 of parameter 0003, is set to 0, set the spindle speed during
spindle orientation in rpm.
When GST, #5 of parameter 0003, is set to 1, set the spindle motor speed
during spindle gear shift calculated from the following formula.

Set value = ×4095 (For an analog spindle)
Spindle motor speed during spindle gear shift

Maximum spindle motor speed

0110 Time elapsed prior to checking the spindle speed arrival signal

[Data type] Byte

[Unit of data] msec

[Valid data range] 0 to 225

Set the time elapsed from the execution of the S function up to the
checking of the spindle speed arrival signal.

0516 Data used for adjusting the gain of the analog output of spindle speed

[Data type] Word

[Unit of data] 0.1 %

[Valid data range] 700 to 1250

Set data used for adjusting the gain of the analog output of spindle speed.
[Adjustment method] (1)Assign standard value 1000 to the parameter.

(2)Specify the spindle speed so that the analog output of the spindle speed
is the maximum voltage (10 V).

(3)Measure the output voltage.



B–61393E–2/029. SPINDLE SPEED FUNCTION

380

(4)Assign the value obtained by the following equation to parameter
No.0516.

Set value= × 1000
Measured data (V)

10 (V)

(5)After setting the parameter, specify the spindle speed so that the analog
output of the spindle speed is the maximum voltage.  Confirm that the
output voltage is 10V.

NOTE
This parameter needs not to be set for serial spindles.

0539 Compensation value for the offset voltage of the analog output of the spindle speed (T series)

0577 Compensation value for the offset voltage of the analog output of the spindle speed (M series)

[Data type] Word
[Unit of data] Velo

[Valid data range] –1024 to+1024

Set compesation value for the offset voltage of the analog output of the
spindle speed.  
Set value =–8191�Offset voltage (V)/12.5

[Adjustment method] (1)Assign standard value 0 to the parameter.
(2)Specify the spindle speed so that the analog output of the spindle speed

is 0.
(3)Measure the output voltage.
(4)Assign the value obtained by the following equation to parameter

No.0539 (T)/0577 (M).

Set value=
12.5

–8191 × Offset voltage (V)

(5)After setting the parameter, specify the spindle speed so that the analog
output of the spindle speed is 0.  Confirm that the output voltage is 0V.

NOTE
This parameter need not to be set for serial spindles.

0540 Maximum spindle speed for gear 1

0541 Maximum spindle speed for gear 2

0542 Maximum spindle speed for gear 3

0543 Maximum spindle speed for gear 4

[Data type] Word
[Unit of data] rpm

[Valid data range] 0 to 32767
Set the maximum spindle speed corresponding to each gear.

NOTE
These parameters are valid when a T type gear is selected.



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

381

0540 Spindle speed when switching from gear 1 to gear 2 during tapping (M series)

0556 Spindle speed when switching from gear 2 to gear 3 during tapping (M series)

[Data type] Word

[Unit of data] rpm

[Valid data range] 0 to 32767

When method B is selected (G84S, #6 of parameter 0012, is set to 1) for
the tapping cycle gear switching method, set the spindle speed when the
gears are switched.

Max. speed (4095, 10V)

Spindle motor max. 
clamp speed 
(Parameter No.0542)

Spindle motor minimum
clamp speed 
(Parameter No.0543)

Spindle motor speed

Spindle speed
command 
(S command)

Gear 1
Max.
speed 
Parameter
No.0541

Gear 2
Max.
speed 
Parameter
No.0539

Gear 3
Max.
speed 
Parameter
No.0555

Gear 1–2 
change point 
parameter 
No.0540

Gear 2–3
change point 
parameter 
No.0556



B–61393E–2/029. SPINDLE SPEED FUNCTION

382

0542 Maximum clamp speed of the spindle motor (M series)

[Data type] Word

[Valid data range] 0 to 4095

Set the maximum clamp speed of the spindle motor.

Set value = ×4095
Maximum clamp speed of the spindle motor

Maximum spindle motor speed

Spindle motor speed

Max. speed (4095, 10V)

Spindle motor max.
clamp speed
(Parameter No.0542)

Spindle motor minimum
clamp speed 
(Parameter No.0543)

Spindle speed (S command)

0543 Minimum clamp speed of the spindle motor (M series)

[Data type] Word

[Valid data range] 0 to 4095

Set the minimum clamp speed of the spindle motor.

Set value = ×4095
Minimum clamp speed of the spindle motor

Maximum spindle motor speed



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

383

0556 Maximum spindle speed

[Data type] Word

[Unit of data] rpm

[Valid data range] 0 to 32767

This parameter sets the maximum spindle speed. 
When a command specifying a speed exceeding the maximum speed of
the spindle is specified , or the speed of the spindle exceeds the maximum
speed because of the spindle speed override function, the spindle speed is
clamped at the maximum speed set in the parameter.

WARNING
1 When 0 is set in this parameter, the speed of the spindle is

not clamped.
2 When spindle speed command control is applied using the

PMC, this parameter has no effect, and the spindle speed
is not clamped at the maximum speed.

NOTE
1 In the M series, this parameter is valid when the constant

surface speed control option is selected.
2 When the constant surface speed control option is selected,

the spindle speed is clamped at the maximum speed,
regardless of whether the G96 mode or G97 mode is
specified.



B–61393E–2/029. SPINDLE SPEED FUNCTION

384

0585 Spindle motor speed when switching from gear 1 to gear 2 (M series)

0586 Spindle motor speed when switching from gear 1 to gear 3 (M series)

[Data type] Word

[Valid data range] 0 to 4095

For gear switching method B, set the spindle motor speed when the gears
are switched.

Set value = ×4095
Spindle motor speed when the gears are switched

Maximum spindle motor speed

Spindle motor max. clamp speed Parameter  No.0542

Parameter  No.0586

Spindle speed 
command 
(S command)

Max. speed (4095, 10V)

Speed at gear 1–2 change point Parameter  No.0585

Spindle motor minimum clamp
speed

Parameter  No.0543

Spindle motor speed

Gear 1
max.
speed 
parameter
No.0541

Gear 2
max.
speed 
parameter
No.0539

Gear 3
max
speed 
parameter
No.0555

Gear 1–2
change point

Gear 2–3
change point

Speed at gear 2–3 change point

0613 PSANG2

PSANG2 Set data used for adjusting the gain of the second spindle.
The setting method is the same as that for the corresponding parameter for
the first spindle (parameter 0516).

0614 SPDLC2

SPDLC2 Set an offset compensation value for the spindle speed of the second
spindle.
The setting method is the same as that for the corresponding parameter for
the first spindle (parameter 0539).



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

385

0615 Maximum spindle speed for gear 1 of the second spindle (T series)

0616 Maximum spindle speed for gear 2 of the second spindle (T series)

[Data type] Word

[Unit of data] rpm

[Valid data range] 0 to 32767

Set maximum spindle speeds for the gears of the second spindle.

NOTE
These parameters are provided for multiple–spindle
control.

0617 PSANG3

PSANG3 Set the data used for adjusting the gain of the third spindle.
The setting method is the same as that for the corresponding parameter for
the first spindle (parameter 0516).

0618 Offset–voltage compensation value of the analog output of the third–spindle speed (T series)

[Data type] Word

[Unit of data] Velo

[Valid data range] –1023 to 1024

Set a compensation value for the offset voltage of the analog spindle speed
output of the second spindle when multiple–spindle control is applied.

0619 G3MAX1

0620 G3MAX2

G3MAX2, G3MAX1 Speeds of the first and second gears of the third spindle, respectively,
when 10 V is specified in the spindle speed command

[Valid data range] 1 to 19999

[Unit of data] rpm

CAUTION
This section mentioned a spindle speed control that should
be prepared on the CNC side.  But it is also necessary to
design the signals to the spindle control unit.
Consult the manual of the spindle control unit used and take
necessary actions on the spindle control unit.

Caution



B–61393E–2/029. SPINDLE SPEED FUNCTION

386

In 0–TTC, the additional tool post section (tool post No. 2) can have the
same spindle interface as a one–tool post lathe (see Section 9.2.).

Each spindle is controlled by a command issued by tool post 1 or 2.
Which spindle is controlled by which tool post can be switched by signals.

This section describes the configuration of 0–TTC and how it is
controlled.

In 0–TTC, there are two selectable configurations, a configuration in
which the entire system uses one spindle (one–spindle control) and a
configuration in which each spindle is controlled separately (two–spindle
control).  Parameter No. 0047#3 (2SP) is used to select a configuration.

The spindle interface for tool post 2 is not used.

The spindle command select signal SLSPA<G133#2> (input) specifies
the tool post whose spindle command is to be followed by the spindle.

9.4
SPINDLE SPEED 
CONTROL FOR 0–TTC

General

One–spindle control and
two–spindle control

One–spindle control

� Selection of the spindle
command



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

387

When a serial spindle is used, a position coder feedback signal is input to
both tool posts of the NC.  Either tool post can perform threading or feed
per rotation.

The optical cable from the spindle amplifier of the spindle (S1/P1) is
connected to connector COP5.  Connector COP6 is left unconnected.

Position coder #1

Spindle motor #1

P1

Spindle

Optical cable

Serial interface 
spindle amplifier #1

CNC

COP5 Power line

Velocity feedback signal

Position feedback signal

S1

Fig 9.4 (a) One spindle control (Serial spindle)

In addition, spindle amplifier #3 can be connected to spindle amplifier #1.

� Position coder feedback
signal (serial spindle)



B–61393E–2/029. SPINDLE SPEED FUNCTION

388

When an analog spindle is used, supplying the position coder feedback
signal to the position coder interface of tool post 2 via an external
distribution circuit makes it possible to use either tool post for thread
cutting and feed per rotation.

Position coder #1

Spindle motor #1

P1

Spindle

Analog interface 
spindle amplifier #1

CNC

M26 or M12 Power line

Velocity feedback signal

Position feedback signal
M27

S1

Fig 9.4 (b) One spindle control (Analog spindle)

The spindle interface for either tool post is used.

The spindle command select signals SLSPA <G133#2> and SLSPB
<G133#3> (input) specify the tool post whose spindle command is to be
followed by each spindle.

� Position coder feedback
signal (Analog)

Two–spindle control

� Selection of spindle
command



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

389

When the serial spindles are used on both tool posts, the position coder
feedback signals SLPCA<G1333#2> and SLPCB<G1333#3> (input)
direct each tool post to select which spindle’s position coder feedback
signal is used.  Therefore, it is possible to use the spindle of the other
system; for example, tool post 1 can perform thread cutting or feed per
rotation using the spindle connected to tool post 2.

The optical cable from the spindle amplifier of the first spindle (S1/P1)
is connected to connector COP5.  The optical cable from the spindle
amplifier of the second spindle (S2/P2) is connected to connector COP6.

Positon coder #1

Spindle 
motor #1

P1

First spindle

Serial interface 
spindle amplifier #1

CNC

COP5

Power line

Velocity feedback signlal

Position feedback signal

Second 
spindle

P2

Positon coder #2

Serial interface 
spindle amplifier #2

Power line

Velocity feedback signal

Position feedback signal

COP6

Optical cableOptical cable

S1

Spindle 
motor #2

S2

Fig 9.4 (c) Two spindle control (Serial spindle)

In addition, spindle amplifier #3 can be connected to spindle amplifier #1,
and spindle amplifier #4 can be connected to spindle amplifier #2.

� Position coder feedback
signal (When both are
serial spindle)



B–61393E–2/029. SPINDLE SPEED FUNCTION

390

If either tool post uses an analog spindle as the first spindle, the spindle
feedback signals SLPCA<G1333#2> and SLPCB<G1333#3> (input)
cannot cause the NC to select a position coder feedback signal.

If both tool posts use an analog spindle, switching the position coder
feedback signal inputs to the NC using an external circuit makes it
possible to use the spindle of the other system.

Position coder #1

Spindle motor
#1

P1

First spindle

Analog interface
spindle amplifier #1

CNC

M26 or M12

Power line

Velocity feedback
signal

Position feedback signal

Second 
apindle

Spindle motor
#2

P2

Position coder #2

Analog interface
spindle amplifier #2

Power line

Velocity feedback
signal

Position feedback signal

M28

M27 M27

S1 S2

Fig 9.4 (d) Two spindle control (Analog spindle)

� Position coder feedback
signal (when an analog
spindle is used)



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

391

If the first spindle is a serial spindle, the second and third spindles can also
be used in the 0–TTC.  (See Section 9.2.)

In the following chart, all spindles are connected under two–spindle
control.

Under one–spindle control, any spindle (SP1#2, SP2#2, SP3#2) of tool
post 2 cannot be used.

PC2#2 PC1#2 PC1#1  PC2#1

S#2 S#1

PC2SLC#2 PC2SLC#11st serial spindle

2nd serial spindle

1st serial spindle

2nd serial spindleFeedback
spindle
control
command

Feedback
spindle
control
command

COP6 COP5

SWS1#1
SIND1#1

SWS2#1
SIND2#1

M28 SWS3#2
SIND3#2

SWS3#1
SIND3#1

M26
or

M12

PC1#2 PC1#1

Spindle 1#2 Spindle 1#1

SLPCB SLPCA

Spindle 2#2 Spindle 2#1

PC2#2 PC2#1

SWS1#2

SIND1#2

SWS2#2

SIND2#2

Spindle 3#2 Spindle 3#1

  Analog spindle Analog spindle
POS–LSI        POS–LSI

PC Feedback signal

 SIC SIC

Sub axis card Memory card

PC Feedback signal

SLSPASLSPB
0 1 1 0

Fig. 9.4 (e) Spindle Configuration and Flow of Commands and Feedback Signals in the 0–TTC (with
All Spindles under Two–Spindle Control)

The second and third spindles should be controlled using the PMC or be
under multi–spindle control.  (See Section 15.4 or 9.10.)

If multispindle control is applied to both tool posts, the position coder
feedback signal for the second spindle of each tool post also becomes
usable.

2nd and 3rd spindles



B–61393E–2/029. SPINDLE SPEED FUNCTION

392

Optional functions for spindles are valid for both tool posts.  However,
you may want to use the optional functions for only one of the tool posts
because of relationships with the interface and PMC ladder.

Parameters are available to disable the following functions for individual
tool posts.

· Spindle serial output

· Spindle analog output

· Spindle positioning

[Classification] Input signal

[Function] Selects which tool post receives spindle command of which spindle.
SLSPA: Selects the spindle command for spindle connected to tool post

1.
SLSPB: Selects the spindle command for spindle connected to tool post

2.

The spindle command select signals are associated with the spindle com-
mands as follows:
(1) In the 1-spindle control mode

Signal input
SLSPA Command to spindle

0 Spindle command of tool post 1

1 Spindle command of tool post 2

NOTE
SLSPB is ineffective.

(2) In the 2-spindle control mode

Signal input Command to the
spindle connected to

Command to the
spindle connected to

SLPCA SLPCB
spindle  connected  to

tool post 1
spindle  connected  to

tool post 2

0 0 Spindle command of
tool post 1

Spindle command of
tool post 2

0 1 Spindle command of
tool post 1

Spindle command of
tool post 1

1 0 Spindle command of
tool post 2

Spindle command of
tool post 2

1 1 Spindle command of
tool post 2

Spindle command of
tool post 1

Options related to
spindles

Signal

Spindle command select 
signals 
SLSPA <G133#2>,
SLSPB <G133#3>



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

393

[Classification] Input signal

[Function] Selects which spindle sends the feedback signal of the position coder to
which tool post.

NOTE
This function is effective only in the 2-spindle control system
in which both tool posts use serial spindle.

SLPCA:  Selects the feedback signal for tool post 1.
SLPCB:  Selects the feedback signal for tool post 2.

The spindle feedback select signals are associated with the feedback
signals of the position coder as follows:

(1) In 1-spindle control mode
The feedback signal of the spindle connected to tool post 1 is always
sent to both tool posts; the SLPCA and SLPCB signals have no
meaning.

(2) In 2-spindle control mode

Signal input
Tool post 1 Tool post 2

SLPCA SLPCB
Tool  post  1 Tool  post  2

0 0 PC#1 PC#2

0 1 PC#1 PC#1

1 0 PC#2 PC#2

1 1 PC#2 PC#1

PC#1= Position coder feedback signal for the spindle connected to tool
post 1.

PC#2= Position coder feedback signal for the spindle connected to tool
post 2.

NOTE
The SLPCA and SLPCB signals are effective only in the
2-spindle control mode using two serial spindles.  In the
2-spindle control mode using analog spindles, the feedback
signal of spindle 1 is input to tool post 1, and the feedback
signal of spindle 2 is input to tool post 2, regardless of the
setting of the SLPCA and SLPCB signals.

Spindle feedback select
signals 
SLPCA <G1333#2> 
SLPCB <G1333#3>



B–61393E–2/029. SPINDLE SPEED FUNCTION

394

[Classification] Output signal

[Function] Indicates which tool post issued the latest spindle command.

[Output condition] The COSP signal turns to “1” when:

· Tool post 2 issues the spindle command.

The COSP signal turns to “0” when:

· Tool post 1 issues the spindle command, or neither of the tool posts
issues the spindle command.

[Use] In 1-spindle control mode, if this signal is input to the SLSPA signal
(spindle command select signal), the spindle speed specified by the latest
spindle command can always be output to the spindle, regardless of
whether it is from tool post 1 or 2.

#7
G133

#6 #5 #4 #3
SLSPB

#2
SLSPA

#1 #0

G1333 SLPCB SLPCA

F180 COSP

#7
0047

#6 #5 #4 #3
2SP

#2 #1 #0
(T series)

[Data type] Bit

2SP Specifies whether one or two spindles are controlled (0–TTC).
0 : One spindle (two tool posts)
1 : Two spindle (two tool posts)

#7
IGNSIC0381

#6 #5 #4 #3 #2 #1 #0
(0–TTC)

[Data type] Bit

IGNSIC For tool post 2, the S analog output function is:
0 : Used.
1 : Not used.

#7
EFCS0384

#6
EFSS

#5 #4 #3 #2 #1 #0
(0–TTC)

[Data type] Bit

EFSS For tool post 2, the S serial output function is:
0 : Used.
1 : Not used.

Spindle command signal
COSP <F180#5>

Signal address

Parameter



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

395

EFCS For tool post 2, the Cs contour control function is:
0 : Used.
1 : Not used.

NOTE
Set the parameters IGNSIC, EFSS, and EFCS for tool post 2.

· Selecting position coder feedback signals for both tool posts in the
0–TTC under multi–spindle control.

1st serial spindle

2nd serial spindle

1 st serial spindle

2nd serial spindle

PC1#2 PC1#1

Spindle 1#2 Spindle 1#1

Spindle 2#2 Spindle 2#1

PC2#2 PC2#1

Tool post 2 Tool  post 1

Table 9.4 lists the position coder feedback signals used for each tool post
in the above configuration.  These position coder feedback signals are
selected according to the following:
⋅ Spindle feedback select signals SLPCA <G1333#2> and SLPCB

<G1333#3>

⋅ Multi–spindle control
Second position coder select signals PC2SLC#1 <G146#7> and
PC2SLC#2 <G1346#7>

Table 9.4 Selection of Position Coder Feedback Signal in the 0–TTC
(— means position coder selection is indifferent on the tool post side)

Position coder
selected

SLPCA SLPCB PC2SLC#1 PC2SLC#2

PC1#1 ”0” — ”0” —

Tool
post

PC2#1 ”0” — ”1” —
ost
1 PC1#2 ”1” — — ”0”

PC2#2 ”1” — — ”1”

PC1#1 — ”1” ”0” —

Tool
post

PC2#1 — ”1” ”1” —
ost
2 PC1#2 — ”0” — ”0”

PC2#2 — ”0” — ”1”



B–61393E–2/029. SPINDLE SPEED FUNCTION

396

NOTE
1 The spindle commands include S code commands,

maximum speed command (G50S__), M03, M04, M05, and
constant surface speed control commands (G96 and G97)

2 Signals to operate the spindle control unit are not affected
by the spindle command select signals SLSPA<G133#2> or
SLSPB<G133#3>.  They may be processed in the PMC
ladder, as required.
(Example: G229#5SFRA is always a forward rotation

command for the first spindle control amplifier of
tool post 1.)

3 The machine tool builder should prepare an external circuit
to distribute and select position coder feedback signals for
the analog spindle.

Note



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

397

With the spindle serial output or analog output function, specifying the
surface speed (m/min or feet/min) directly in an S command makes it
possible to change the spindle output continuously so as to maintain a
constant surface speed at a programmed point.  (For the rapid traverse
command, however, the surface speed for the end point is output at the
beginning of rapid traverse.)

Spindle speed N

r

Surface speed S=2πr·N

Whether or not constant surface speed control is performed is selected by
G code.

G96: Constant surface speed control performed. S in the G96 mode is
m/min or feet/min.

G97: Constant surface speed control not performed. S in the G97 mode
is rev/min.

To perform constant surface speed control, the maximum spindle speed
for each gear select signal issued from the PMC side must be set by
parameter Nos.0540 – 0543.
The gear select signal is a 2 bit code signal (GR1, GR2).  The relationship
between the signal and gear number is :

GR1 GR2 Gear number

0 0 1

1 0 2

0 1 3

1 1 4

9.5
CONSTANT 
SURFACE SPEED 
CONTROL

General



B–61393E–2/029. SPINDLE SPEED FUNCTION

398

Assume that gear switching is two stage switching.  If the spindle speed
with the output 10 V is 1000 rpm for the low speed gear (G1) and 2000
rpm for the high speed gear (G2), set these speeds to the parameter nos.
0540, 0541, respectively.  In this case, the spindle output has the linear
relationship shown below:

When gear
2 selected

When gear
1 selected

(Volt)
0 V2 V1 10

600rpm

1000rpm

2000rpm
N

G2

G1

Spindle output

Here, S = 60 m/min is given as the surface speed; if the position of the
present X-axis cutter is 16 mm from the center, the spindle speed N
becomes 600 rpm (S = 2πr N).  Therefore, V1 (for G1) or V2 (for G2) is
calculated inside the CNC and output to the machine side.

V1: 6(V)
V2: 3(V)

The value of output voltage V is calculated automatically from the
following equations:

(i) G96

V=
10S

2πrR

R: Spindle speed (rpm) at 10V output voltage (that is , spindle speed set
by parameter Nos.0540 to 0543)

S: Surface speed (m/min) specified by S command

r: Radius value in the X-axis direction (m)

(ii)G97

V=
10N

R

R: Spindle speed at 10V output voltage (rpm)

N: Spindle speed given by S command (rpm)

Example of Spindle
Analog Output



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

399

The output to the spindle in spindle serial output is a digital data.

Therefore assume the following relation for calculation:
Spindle analog output (voltage) 10V = Spindle serial output
(digital data) 4095.

The above calculation becomes as follows:

The value of Spindle output D:

(i) G96

D=
4095S
2πrR

R: Spindle speed (rpm) at maximum spindle motor speed (that is , spindle
speed set by parameter Nos.0540 to 0543)

S: Surface speed (m/min) specified by S

r: Radius value in the X-axis direction (m)

(ii) G97

D=
4095N

R

R: Spindle speed at maximum spindle motor speed (rpm)

N: Spindle speed given by S command (rpm)

Refer to 9.3 “Spindle Control”.  

#7
0041

#6 #5
SSCA1

#4
SSCA0

#3 #2 #1 #0
(M series)

[Data type] Bit

SSCA, SSCA1 Set a reference axis for the calculation of constant surface speed control.

SSCA1 SSCA0 Axis

0 0 X

0 1 Y

1 0 Z

1 1 4

Spindle Serial Output

Signal

Gear selection signal 
(Input)
GR2, GR1
<G118#3, #2> (T series)
<G123#3, #2>(M series)

Parameter



B–61393E–2/029. SPINDLE SPEED FUNCTION

400

0540 Maximum spindle speed for gear 1

0541 Maximum spindle speed for gear 2

0542 Maximum spindle speed for gear 3

0543 Maximum spindle speed for gear 4

[Data type] Word

[Unit of data] rpm

0551 Minimum spindle speed in constant surface speed control mode (G96)

[Data type] Word

[Unit of data] rpm

[Valid data range] 0 to 32767

Set the minimum spindle speed in the constant surface speed control
mode (G96).  
The spindle speed in constant surface speed control is clamped to the
speed given by parameter.

0556 Maximum spindle speed

[Data type] Word

[Unit of data] rpm

[Valid data range] 0 to 32767

This parameter sets the maximum spindle speed. 
When a command specifying a speed exceeding the maximum spindle
speed is specified, or the spindle speed exceeds the maximum speed
because of the spindle speed override function, the spindle speed is
clamped at the maximum speed set in the parameter.

NOTE
1 In the M series, this parameter is valid when the constant

surface speed control option is selected.
2 When the constant surface speed control option is selected,

the spindle speed is clamped at the maximum speed,
regardless of whether the G96 mode or G97 mode is
specified.

������ Message Description

190 ILLEGAL AXIS SELECT

(M series)

In the constant surface speed control,
the axis specification is wrong. (See
bits 4 and 5 of parameter No. 0045.)
The specified axis command (P) con-
tains an illegal value.
Correct the program.

Alarm and message



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

401

CAUTION
1 If the spindle speed corresponding to the calculated surface

speed exceeds the speed specified in the spindle speed
clamp command (G50S_ for T series and G92S_ for M
series) during the G96 mode, the actual spindle speed is
clamped at the value specified in the spindle speed clamp
command.
If the specified spindle speed is lower than the value
specified in parameter No. 0551, the actual spindle speed
is clamped at the specified speed.

2 If the constant surface speed control function is provided for
a machining center system, it affects gear change under
normal spindle control.  (See Section 9.3.)

NOTE
Simultaneous use of multi–spindle control (T series)
enables constant surface speed control for spindles other
than the first spindle.  (See Section 9.10.)

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.10.3 CONSTANT SURFACE SPEED 
CONTROL (G96, G97)

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.10.3 CONSTANT SURFACE SPEED 
CONTROL (G96, G97)

Caution

Note

Reference item



B–61393E–2/029. SPINDLE SPEED FUNCTION

402

With this function, an overheat alarm (No. 704) is raised and the spindle
speed fluctuation detection alarm signal SPAL is issued when the spindle
speed deviates from the specified speed due to machine conditions.
This function is useful, for example, for preventing the seizure of the
guide bushing.
G26 enables spindle speed fluctuation detection.
G25 disables spindle speed fluctuation detection.

The function for detecting spindle speed fluctuation checks whether the
actual speed varies for the specified speed or not.  Sd or Sr, whichever is
greater, is taken as the allowable fluctuation speed (Sm).  An alarm is
activated when the actual spindle speed varies for the commanded speed
(Sc) under the condition that the variation width exceeds the allowable
variation width (Sm).

Sd: The allowable constant variation width which is independent of the
specified spindle speed (Sd is set with parameter 0564.)

Sr: The allowable variation width which is obtained by multiplying Sc
(commanded spindle speed) by r (constant ratio). (r is set with
parameter 0532.)

Sm: Sd or Sr, whichever is greater

If the specified spindle speed Sc changes, spindle speed fluctuation
detection starts when one of the conditions below is met:

⋅ The actual spindle speed falls in a range of (Sc – Sq) to (Sc + Sq)

where Sq = Sc � q/100

q: Percent tolerance of the target spindle speed, specified in parameter
No. 0531.  If the actual spindle speed is in a range of the specified speed
�q, it is assumed that the actual speed has reached the specified speed.

⋅ When time p specified in parameter No. 0712 elapses after the specified
speed Sc changes.

Parameter Nos. 0712, 0531, and 0532 can be rewritten also by program
(G26 PpQqRr).

9.6
SPINDLE SPEED 
FLUCTUATION 
DETECTION
 (T SERIES)

General

Detection of Spindle
Speed Fluctuation

Conditions to start 
spindle speed 
fluctuation detection



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

403

1. When an alarm is issued after a specified spindle speed is reached

Spindle speed

Check CheckNo check

Sr

Sr

Sq

Sq Sd

Sd

Specification of 
another speed

Start of check Alarm
Time

Specified 
speed

Actual speed

2. When an alarm is issued before a specified spindle speed is reached

Sr

Sr

Sd

Sd

Check

p

No checkCheck

Sq

Sq

Spindle speed

Specification of 
another speed

Start of check Alarm
Time

Specified 
speed

Actual speed

Specified speed :
(Speed specified by address S and five–digit value)×(spindle override)

Actual speed : Speed detected with a position coder

[Classification] Output signal

[Function] This signal indicates that the actual spindle speed is not within a tolerance
to the specified speed.

Signal

Spindle fluctuation 
detection alarm signal 
SPAL <F154#0>



B–61393E–2/029. SPINDLE SPEED FUNCTION

404

[Output condition] The signal becomes logical “1” when:

⋅ The actual spindle speed goes out of tolerance to the specified speed.

The signal becomes logical “0” when:

⋅ No alarm condition has been detected for spindle speed fluctuation.

⋅ An alarm condition is cleared by resetting the NC when the signal is
logical “1”.

#7
F035

#6 #5 #4 #3 #2 #1 #0
SPAL

#7
0049

#6 #5 #4 #3 #2
CHKSP

#1 #0

[Data type] Bit

CHKSP  When the SIND signal is on, the detection of spindle speed fluctuation is:
0 : Disabled
1 : Enabled

#7
0397

#6 #5 #4 #3 #2 #1 #0
SPLME

[Data type] Bit

SPLME When the spindle speed fluctuation detection function is used, the rates of
allowance (q) and fluctuation (r) those are set in parameter No. 0531 and
No. 0532, respectively are set in steps of:
0 : 1%
1 : 0.1%

0531 Ratio (q) of the fluctuation of spindle speed which is assumed to be the
specified spindle speed

[Data type] Word

�
	 �� ��� 1% 0. 1%

��� ��
�� 1 �� 100 1 �� 1000

NOTE
Unit of data depends on parameter No. 0397#0 SPLME (T
series only)

Set the ratio (q) of the spindle speed which is assumed to be the specified
spindle speed in the spindle speed fluctuation detection function.

Signal address

Parameter



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

405

0532 Spindle speed fluctuation ratio (r) for which no alarm is activated in the
spindle speed fluctuation detection function

[Data type] Word

��� �	 ���� 1% 0. 1% (� ������)

���� ��
� 1 �� 100 1 to 1000

NOTE
Unit of data depends on parameter No. 0397#0 SPLME.

Set the spindle speed fluctuation ratio (r) for which no alarm is activated in
the spindle speed fluctuation detection function.

0564 Spindle speed fluctuation value for which no alarm is activated in the
spindle speed fluctuation detection function

[Data type] Word

[Unit of data] rpm

[Valid data range] 0 to 32767

Set the allowable fluctuation speed for which no alarm is activated in the
spindle speed fluctuation  detection function.

0712 Time (p) elapsed from when the commanded spindle speed is changed to
the start of spindle speed fluctuation detection

[Data type] Two–word

[Unit of data] ms

[Valid data range] 0 to 999999

Set the time elapsed from when the specified spindle speed is changed to
the start of spindle speed fluctuation detection in the spindle speed
fluctuation detection function. That is, the fluctuation in the spindle speed
is not detected until the specified time elapses from when the specified
spindle speed is changed.

������ Message Description

704 OVERHEAT: SPINDLE Spindle overheat in the spindle fluc-
tuation detection

(1) If the cutting load is heavy, relieve the
cutting condition.

(2) Check whether the cutting tool is share.

(3) Another possible cause is a faulty
spindle amp.

Alarm and message



B–61393E–2/029. SPINDLE SPEED FUNCTION

406

NOTE
1 When an alarm is issued in automatic operation, a single

block stop occurs.
2 No check is made during spindle stop state (*SSTP = 0).
3 An alarm is issued one second later if the actual spindle

speed is found to be 0 rpm.

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.9.4 SPINDLE SPEED FLUCTUATION
DETECTION FUNCTION
 (G25, G26)

Note

Reference item



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

407

The PMC can read actual spindle speed.

[Classification] Output signal

[Function] These 16-bit binary code signals output  from the CNC to the PMC the
actual spindle speed obtained by feedback pulses from the position coder
mounted on the spindle.

[Operation] Spindle speed��
15

i�0

{2i � Vi} rpm

where Vi = 0 when ARi is “0” and Vi = 1 when ARi is “1”

#7
AR7F158

#6
AR6

#5
AR5

#4
AR4

#3
AR3

#2
AR2

#1
AR1

#0
AR0 (T series)

AR15F159 AR14 AR13 AR12 AR11 AR10 AR09 AR08 (T series)

NOTE
1 The AR0 - AR15 signals are always output.  Their values

change every 64 msec.
2 An absolute error of about 0.5 rpm exists as a measuring

error.

9.7
ACTUAL SPINDLE 
SPEED OUTPUT
(T SERIES)

General

Signal

Actual spindle speed 
signal AR0 to AR15 
<F158 to F159>

Signal address

Note



B–61393E–2/029. SPINDLE SPEED FUNCTION

408

This function positions the spindle using the spindle motor and position
coder.

The function has a coarser least command increment compared with the
Cs contour control function and has no interpolation capability with other
axes.  However, it can be installed with ease because the position detector
is a position coder.

Generally, the spindle positioning axes are clamped mechanically except
when positioning is under way.

In the turning process, the workpiece is rotated by the spindle to which
it is attached (spindle rotation mode), at the speed specified for the spindle
motor. The value for the spindle speed is input from the spindle controller
to the spindle amplifier.

When the optional spindle positioning function is activated, the spindle
is moved to a defined angle, and the workpiece is repositioned at that
angle. The specified move distance is input to the error counter, and the
velocity command is issued for the spindle motor through the spindle
amplifier. The position of the spindle is detected by the installed position
coder (Spindle positioning mode).

The spindle positioning function can perform the following operations:

� Release the spindle rotation mode and enter the spindle positioning
mode

Specifying a particular M code sets a reference position in the
spindle positioning mode. (This is called spindle orientation.)

� Position the spindle in the spindle positioning mode

Position an optional angle using address C (H), and position a
semi-fixed angle using a specific M code parameter.

� Release the spindle positioning mode and enter the spindle rotation
mode

Specifying a particular M code parameter changes the spindle to
the spindle rotation mode.

· Least command increment

360

4096
� 0.088 deg

· Least input increment

0.001 deg

· Maximum command value

±9999.999 deg

9.8
SPINDLE 
POSITIONING 
(T SERIES)

General



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

409

Any axis in the control axis group can be used as the third axis.

Orientation is required in advance if spindle positioning is first performed
after the spindle motor is used as a normal spindle, or when spindle
positioning is interrupted. The orientation stops the spindle in a constant
position.  The orientation position can be sifted in the range of�180deg
for analog spindle and in the range from 0 to 360� for serial spindle.

To specify orientation, use the M code whose parameter no. 0587. 
The orientation direction is specified by using parameters ZM3 no. 0003
#2 for  analog or RETRN no. 6500#3 for serial spindles.

The spindle moves at rapid traverse set by parameter No. 0520 until it
reaches the orientation enable speed (shown below).  After the spindle
crosses that speed point,  it performs orientation at the speed set by
parameter no. 0586. When a serial spindle is used, orientation speed
depends on the spindle.

⋅ Orientation enable speed
RPD>9�(loop gain) KPPM
Loop gain: Parameter no. 0584 (unit: 1/sec)
Set rapid traverse speed at above value.

(Example)

When the loop gain parameter no. 0584 is set to 20 [1/sec], the orientation
speed is:

RPD>9�20�1000�(360/4096)=15820 [deg /min]

The serial spindle stops at the orientation position as soon as the command
is issued. The lower limit to the rapid traverse speed value does not need
to be specified for the serial spindle to reach the orientation enable speed.

The analog spindle stops after the spindle speed is changed from rapid
traverse to the FL speed. The rapid traverse speed lower limit must be
specified for the analog spindle, or obtaining the orientation enable speed
need not be specified for the serial spindle.  However, it must be specified
for the analog spindle.

The orientation position is regarded as a program origin. It is possible to
modify the  program  origin using the coordinates system or automatic
coordinates system settings (parameter APRS no. 0010#7)

The command system comes in two types: The first positions a semi-fixed
angle; the second positions an optional angle.

A 2-digit numerical value following the M address is used for the
command. There are six positioning angle values (Mα to M(� + 5)),
where� is set by parameter no. 0589. Indexing angle β also requires prior
parameter setting data no. 0590. Rotation can be done in any direction,
using parameter SDRT data no. 0031#1.

Selecting a spindle
positioning axis

Switching to spindle
positioning mode
(Spindle orientation)

� Orientation speed

� Program origin

Command system

� Semi-fixed angle 
positioning by M code



B–61393E–2/029. SPINDLE SPEED FUNCTION

410

M–code Indexing angle eg) when �=30�

Mα β 30°

M (α+1) 2β 60°

M (α+2) 3β 90°

M (α+3) 4β 120°

M (α+4) 5β 150°

M (α+5) 6β 180°

Numerical value following either the C or H address is used to command
the position. C and H addresses are commanded in G00 mode.

(Example) C-1000
H4500

(i) Minimum setting unit :
0.001deg

(ii) Maximum command value:
�9999.999 deg

(iii) Decimal point input:  A numerical value with decimal point can be
entered. The decimal point location is in “degrees”, for instance: 
C35.0=C35 degrees

When address C is used, the ADRC bit (bit 4 of parameter 0029) must be
set to 1.

Semi–fixed angle positioning (specified with M code) must always be
specified using incremental values.

For arbitrary angle positioning, use address C to specify the position of
the end point relative to the program origin (absolute) or use address H
to specify the distance between the start and end points (incremental).

180°

90°

B

A

Program origin

� Optional angle
positioning by C or H
address

� Absolute and
incremental commands



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

411

G code system A G code system B, C

Command method
Address used

Command of
A–B on the

above 
illustration

Address used
and G–code

Command of
A–B on the

above 
illustration

Absolute 
command

Direct the end
position by the
distance from the
program 
origin.

C C180.0 ; G90,C G90C180.0 ;

Incremental 
command

Command by the
distance between
the start and end
positions.

H H90.0 ; G91,C G91C90.0 ;

Spindle positioning is done at the rapid traverse rate specified by
parameter No. 0520, to which linear acceleration deceleration are applied.
Overrides of 100%, 50%, 25% and F0 (parameter No. 0585) are also
applied.

A specific M code (parameter no. 0588) must be set when the mode is
changed from spindle positioning to normal spindle rotation.

[Classification] Input signal

[Function] When this signal is 1, the CNC orients and positions the spindle.

[Classification] Output signal

[Function] This signal specifies that spindle mechanical clamping be released in a
spindle positioning sequence.

When this signal is output, unclamp the spindle on the machine (release
the brakes or extract the pin).

[Output condition] Refer to the sequence (time chart) in this section.

[Classification] Input signal

[Function] This signal indicates that unclamping the spindle is complete in response
to the spindle unclamp signal SUCLP.

� Spindle positioning 
feedrate

� Spindle positioning reset

Signal

Spindle stop complete
signal SPSTP 
<G123#6>

Spindle unclamp signal
SUCLP <F164#1>

Spindle unclamp 
completion signal 
*SUCPF <G123#4>



B–61393E–2/029. SPINDLE SPEED FUNCTION

412

[Classification] Output signal

[Function] This signal specifies that the spindle be clamped mechanically in a spindle
positioning sequence.

When this signal turns to 1, clamp the spindle on the machine (apply the
brakes or insert the pin).

[Output condition] Refer to the sequence (time chart) in this section.

[Classification] Input signal

[Function] This signal indicates that clamping the spindle is complete in response to
the spindle clamp signal SCLP.

Refer to 9.3 “Spindle Control.”

Refer to the manual of serial spindle.

The spindle loop gain multiplier corresponding to the gear currently
selected by this signal is used. When the serial spindle is used, input gear
selection signals CTH1A and CTH2A, as well.

Relationship between the selected gear and spindle gear selection signal

Analog spindle

GR2 GR1 Selected gear

   0    0 1st gear

   0    1 2nd gear

   1    0 3rd gear

   1    1 4th gear

Serial spindle

CTH1A CTH2A Selected gear

   0    0 HIGH

   0    1 MEDIUM HIGH

   1    0 MEDIUM LOW

   1    1 LOW

Spindle clamp signal 
SCLP <F164#0>

Spindle clamp 
completion signal *SCPF
<G123#5>

Other related signals

Gear selection signal 
GR1, GR2, <G118#2, #3>

CTH1A, CTH2A 
<G229#3, #2>



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

413

[Classification] Output signal

[Function] This signal indicates that the spindle orientation for the spindle
positioning has been completed.

[Output condition] When spindle orientation is complete, this signal turns to 1.  When spindle
positioning is performed or cleared, it turns to 0.

#7
G123

#6
SPSTP

#5
*SCPF

#4
*SUCPF

#3 #2 #1 #0

G229 CTH1A CTH2A

#7
F148

#6 #5 #4 #3 #2
ZP3

#1 #0

F164 SUCLP SCLP

Spindle orientation
completion signal ZP3
<F148#2>

Signal address



B–61393E–2/029. SPINDLE SPEED FUNCTION

414

� Spindle Orientation

POSITION   LOOP
INITIALIZE
Spindle enable on

M code

M F

SPSTP

SUCLP

*SUCPF

Spindle 
movement

ZP3

SCLP

*SCPF

FIN

Spindle enable off

⇒ POSITION LOOP INITIALIZE is performed within the CNC.
⇒ Spindle ENABLE ON/OFF specifies that the PMC ladder direct the

spindle control unit to run or stop the spindle motor.

(Example) For serial spindles, the ladder should contain the following
command or something like that:

ENABLE ON, and SFRA<G229#5>⇒  1
ENABLE OFF, and SFRA<G229#5>⇒  0

For details, refer to the manual for the spindle control unit you actually
use.

Sequence (Time chart)



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

415

� Spindle Positioning by M code

Spindle enable on

M code

M F

SPSTP

SUCLP

*SUCPF

Spindle 
movement

SCLP

*SCPF

FIN

Spindle enable off



B–61393E–2/029. SPINDLE SPEED FUNCTION

416

� Spindle Positioning by Address C,H

Spindle enable ON

SPSTP

SUCLP

*SUPCF

Spindle 
movement

SCLP

*SCPF

Spindle enable
OFF

� Spindle Positioning Reset

M code

M F

SPSTP

SUCLP

FIN

POSITION CODER  INITIALIZE

*SUPCF

⇒  POSITION CODER INITIALIZE is performed only in the CNC.



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

417

#7
0003

#6 #5 #4 #3
ZM3

#2 #1 #0

[Data type] Bit axis

ZM3 The direction of reference position return and the direction of initial
backlash at power–on
0 : Positive direction
1 : Negative direction

#7
0006

#6 #5
DMR3

#4 #3 #2
GRD3

#1 #0

[Data type] Bit

DMR3 Setting of delection multiply
Set this parameter to “111” (=4) for spindle positioning.

GRD3 Set the size of the reference counter
Set this parameter to “1001” (=10000) for spindle positioning.

#7
APRS0010

#6 #5 #4 #3 #2 #1 #0

[Data type] Bit

APRS Automatic setting of a coordinate system when the manual reference
position return is performed
0 : Not set automatically
1 : Set automatically

#7
0029

#6 #5 #4
ADRC

#3 #2 #1 #0

ADRC 0: For chamfering, corner R, or direct drawing dimension programming,
address C or R is used as in the standard specifications.  (Address C
cannot be used for the third axis.)

1: For chamfering or corner R, address 1 or K is used instead of address
C.  For direct drawing dimension programming, address C or R, with
a comma, is used.

#7
0030

#6 #5 #4 #3 #2 #1 #0
ADW30

ADW30 Names the third axis:
0: B.
1: C.

NOTE
When a serial spindle is used, this parameter is invalid for
the spindle positioning axis.

Parameter



B–61393E–2/029. SPINDLE SPEED FUNCTION

418

#7
0031

#6 #5 #4 #3 #2 #1
SDRT

#0
SNRL

[Data type] Bit

SNRL Resetting the system in the spindle positioning mode
0 : Does not releases the mode.
1 : Releases the mode

SDRT The positioning direction for the spindle using a M code is
0 : The positive direction
1 : The negative direction

NOTE
Three types of spindle positioning operations can occur:
(1)The spindle rotation mode is cleared, then the mode is

switched to the spindle positioning mode.
(2)Spindle positioning is performed in the spindle

positioning mode.
(3)The spindle positioning mode is cleared, then the mode

is switched to the spindle rotation mode.
Operations (1) to (3) are specified using separate M codes.
(1)Specified using M codes for performing spindle

orientation. 
(See parameter No. 0587)

(2)Specified using M codes for specifying a spindle
positioning angle.  (See parameter No. 0588)

(3)Specified using M codes for clearing spindle positioning
operation. (See parameter No. 0589.)

0102 Command multiply for third axis (CMR)

[Data type] Byte

� When command multiply is 1/2 to 1/27

Set value= 1

(Command multiply)

+100 [Valid data range:  102 to 127]

� When command multiply is 0.5 to 48

Set value = 2 � command multiply  [Valid data range:  1 to 96]

Set this parameter to 2 for spindle positioning.

0502 In–position width for third axis

[Data type] Word

[Unit of data] Detection unit

[Valid data range] 0 to 32767

Set the in–position width for third axis.



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

419

0506 Positioning deviation limit for third axis in movement

[Data type] Two–word

[Unit of data] Detection unit

[Valid data range] 0 to 99999999

Set the positioning deviation limit in movement for third axis.

0510 Grid shift for third axis

[Data type] Two–word

[Unit of data] Detection unit

[Valid data range] –32767 to + 32767

Set a grid shift for third axis.

NOTE
Set this parameter when the analog spindle is used.  When
the serial spindle is used, set the value to No. 6573.

0520 Rapid traverse rate for third axis

[Data type] Word

Set the rapid traverse rate when the rapid traverse override is 100% for
third axis.

For spindle positioning.

[Unit of data] 10 deg/min

[Valid data range] 30 to 12000

0524 Time constant of rapid traverse linear acceleration/deceleration for third axis

[Data type] Word

[Unit of data] ms

[Valid data range] 0 to 4000

Set time constant of rapid traverse linear acceleration/deceleration for
third axis.

0537 Backlash compensating value for third axis

[Data type] Word

[Unit of data] Detection unit

[Valid data range] 0 to  +255

Set the backlash compensation value for third axis.



B–61393E–2/029. SPINDLE SPEED FUNCTION

420

0580 Servo loop gain multiplier of the spindle for gear 1

0581 Servo loop gain multiplier of the spindle for gear 2

0582 Servo loop gain multiplier of the spindle for gear 3

0583 Servo loop gain multiplier of the spindle for gear 4

[Data type] Word

Set the servo loop gain multipliers of the spindle for gears 1 to 4.

The multipliers are used to convert the amount of the position deviation to
the voltage used in the velocity command.  Assign the data obtained from
the following equation to the parameters.

Loop gain multiplier = 2048000� E� A/L

where;
E: Voltage required to rotate the spindle motor at 1000 rpm in the velocity

command

L: Rotation angle of the spindle per one motor rotation (normally 360)

A: Unit used for the detection (degree)

Example) Let E be 2.2 V, L be 360 degrees, and A be 0.088
degrees/pulse.

Loop gain multiplier = 2048000� 2.2 � 0.088/360 =
1101

NOTE
1 When the voltage specified for the spindle motor is 10 V at

a spindle speed of 4500 rpm, E is regarded as 2.2 V.
2 The above parameters No. 0580 to No. 0584 are for analog

spindles

0584 Servo loop gain of the spindle

[Data type] Word

[Unit of data] 0.01 sec–1

[Valid data range] 1 to 9999

Set the servo loop gain of the spindle in the spindle positioning mode.

0585 F0 rate of rapid traverse override for spindle

[Data type] Word

Set the F0 rate of the rapid traverse override for spindle.

For spindle positioning.

[Unit of data] deg/min

[Valid data range] 600 to 15000



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

421

0586 FL rate at the spindle orientation

[Data type] Word

Set feedrate (FL rate) after deceleration when the reference position return
is performed for spindle.

For spindle positioning.

[Unit of data] deg/min

[Valid data range] 600 to 15000

NOTE
When serial spindle is used, this parameter becomes
invalid.

0587 M code specifying the spindle orientation

[Data type] Word

[Unit of data] Integer

[Valid data range] 6 to 97

Set an M code to change the spindle rotating mode to the spindle
positioning mode.  Setting the M code performs the spindle orientation.
Spindle positioning can be specified from the next block.

0588 M code releasing the spindle positioning mode

[Data type] Word

[Unit of data] Integer

[Valid data range] 6 to 97

Set the M code to release the spindle positioning mode and to change the
mode to the spindle rotating mode.

0589 M code for specifying a spindle positioning angle

[Data type] Word

[Unit of data] Integer

[Valid data range] 6 to 92

Two methods are availablel for specifying spindle positioning.  One
method uses address C for arbitrary–angle positioning.  The other use an
M code for half–fixed angle positioning.  This parameter sets an M code
for the latter method.

Six M code from M� to M(�+5) are used for half–fixed angle positioning,
when� is the value of this parameter.

The table below indicates the relationship between the M codes and
positioning angles.



B–61393E–2/029. SPINDLE SPEED FUNCTION

422

M code Positioning angle Example:  Positioningangle when � = 30�

Mα θ 30°

M    (α+1) 2θ 60°

M    (α+2) 3θ 90°

M    (α+3) 4θ 120°

M    (α+4) 5θ 150°

M    (α+5) 6θ 180°

NOTE
θ represents the basic angular diplacement set in
pamrameter No. 0590.

0590 M code for specifying a spindle positioning angle

[Data type] Word

[Unit of data] deg

[Valid data range] 1 to 60

This parameter sets a basic angular displacement used for half–fixed
angle positioning using M codes.

0595 Positioning deviation limit for third axis in the stopped state

[Data type] Word

[Unit of data] Detection unit

[Valid data range] 0 to 32767

Set the positioning deviation limit in the stopped state for third axis.

0710 Coordinate value of the reference position used when automatic coordi-
nate system setting is performed for third axis

[Data type] Two–word

Set the coordinate value of the reference position on each axis  to be used
for setting a coordinate system automatically.

For spindle positioning.

[Unit of data] 0.001 deg

[Valid data range] –99999999 to 99999999



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

423

#7
6500

#6 #5 #4 #3
RETRN

#2 #1 #0

[Data type] Bit

RETRN Reference position return direction of spindle.
0 : CCW (Counter clockwise)
1 : CW (Clockwise)

NOTE
The direction for spindle orientation (or reference position
return) in spindle positioning using a serial spindle is
determined by this parameter.

6544 Velocity loop proportion gain in servo mode (High gear)

6545 Velocity loop proportion gain in servo mode ( Low gear)

[Data type] Word

[Valid data range] 0 to 32767

This parameter sets a velocity loop proportional gain in servo mode
(spindle positioning, rigid tapping, etc.)

NOTE
Set this parameter when serial spindle is used.

6552 Velocity loop integral gain in servo mode (High gear)

6553 Velocity loop integral gain in servo mode (Low gear)

[Data type] Word

[Valid data range] 0 to 32767

This parameter sets a velocity loop integral gain in servo mode (spindle
positioning, rigid tapping, etc.)

NOTE
Set this parameter when serial spindle is used.



B–61393E–2/029. SPINDLE SPEED FUNCTION

424

6556 Gear ratio (HIGH)

6557 Gear ration (MEDIUM HIGH)

6558 Gear ratio (MEDIUM LOW)

6559 Gear ratio (LOW)

[Data type] Word

[Unit of data] Motor speed per spindle rotation� 100

[Valid data range] 0 to 32767

These parameters set the gear ration between the spindle and AC spindle
motor.

NOTE
Set the gear ration between spindle and AC spindle motor
when the spindle positioning is performed with serial
spindle.  For which gear is used, it depends on the
clutch/gear signal (serial spindle) CTH1A, CTH2A.

6565 Position gain in servo mode (HIGH)

6566 Position gain in servo mode (MEDIUM HIGH)

6567 Position gain in servo mode (MEDIUM LOW)

6568 Position gain in servo mode (LOW)

[Data type] Word

[Unit of data] 0.01 sec–1

[Valid data range] 0 to 32767

This parameter sets a servo loop gain in servo mode.  
(spindle positioning, rigid tapping, etc.)

NOTE
When the spindle positioning by a serial spindle is
performed, set the position control loop gain in place of
parameter No. 0584.  For which gear is used, it depends on
the clutch/gear signal (serial spindle) CTH1A, CTH2A.



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

425

������ Message Description

053 TOO MANY ADDRESS
COMMANDS

In the chamfering and corner R com-
mands, two or more of I, K and R are
specified.  Otherwise, the character
after a comma(”,”) is not C or R in di-
rect drawing dimensions program-
ming.  Or comma (“,”) was specified
with parameter No. 0029#4=1.
Modify the program.

056 NO END POINT &
ANGLE IN CHF/CNR

Neither the end point nor angle is spe-
cified in the command for the block
next to that for which only the angle is
specified (A).  In the chamfering or
corner R command, I(K) is comman-
ded for the X(Z) axis.  
Modify the program.

135 SPINDLE ORIENTATION
PLEASE

Without any spindle orientation , an
attept was made for spindle indexing.
Perform spindle orientation.

136 C/H–CODE & MOVE
CMD IN SAME BLK.

A move command of other axes was
specified to the same block as spindle
indexing addresses C, H.  Modify the
program.

137 M–CODE & MOVE CMD
IN SAME BLK.

A move command of other axes was
specified to the same block as M–
code related to spindle indexing.
Modify the program.

194 SPINDLE COMMAND IN
SYNCHRO–MODE

A contour control mode, spindle posi-
tioning (Cs–axis control) mode, or rig-
id tapping mode was specified during
the serial spindle synchronous control
mode. Correct the program so that the
serial spindle synchronous control
mode is released in advance.

195 FIRST SPINDLE MODE
CHANGE FAULT

This alarm is generated if the system
does not properly terminate a mode
change.  The modes include the Cs
contouring, spindle positioning, rigid
tapping, and spindle control modes.
The alarm is activated if the spindle
control unit does not respond correct-
ly to the mode change command is-
sued by the NC.

409 FIRST SPINDLE ALARM
DETECTION (AL–XX)

This alarm indicates in the NC that an
alarm is generated in the spindle unit
of the system with the serial spindle.
The alarm is displayed in form AL–XX
(XX is a number).  The alarm number
XX is the number indicated on the
spindle amplifier. The CNC holds this
number and displays on the screen.

Alarm and message



B–61393E–2/029. SPINDLE SPEED FUNCTION

426

WARNING
1 Feed hold is invalid during spindle positioning.
2 Dry run, machine lock, and auxiliary function lock are not

available during spindle positioning.
3 Specify parameter no. 0589 even if semi-fixed angle

positioning is not used; otherwise M codes (M00 to M05) do
not work.

CAUTION
1 Spindle positioning stops when emergency stop is applied;

restart with orientation operation.
2 The spindle positioning function and the serial spindle Cs

contour control function cannot be used together. If both
functions are specified, positioning has priority.

NOTE
1 Direct spindle positioning with an independent block. X- and

Y-axis positioning cannot be commanded to the sample
block.

2 Spindle positioning cannot be done by manual operation.
3 Automatic drift compensation is not effective for spindle

positioning. To adjust the amount of drift compensation for
each axis, set values manually and adjust the spindle
amplifier to minimize the spindle motor rotation at a voltage
of 0 V.  (parameter no. 0539).  Insufficient adjustment
causes poor positioning accuracy.  Drift compensation is not
needed with a serial spindle.

4 The machine coordinates for the spindle positioning axis
are displayed in pulses units.

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.9.5 SPINDLE POSITIONING 
FUNCTION

Warning

Caution

Note

Reference item



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

427

The Cs contour control function positions the serial spindle using the
spindle motor in conjunction with a dedicated detector mounted on the
spindle.

This function can perform more accurate positioning than the spindle
positioning function, and has an interpolation capability with other servo
axes.

Least input increment: 0.001 [deg]
Least command increment: 0.001 [deg]

�9999.999 [deg]

Rapid traverse rate: 30 to 2400 [deg/min]
(parameter no.0520(T)/0521(M))

Cutting feedrate (feed per minute):
1 to 15000 [deg/min] (for machines that use millimeters)
0.01 to 600 [deg/min] (for machines that use inches)

NOTE
The units in which the following parameters are specified,
in inch output, can be multiplied by ten for the rotation axis
alone, provided the ROT10 bit (bit 7 of parameter No. 0032)
is specified accordingly:  jog feedrate, cutting feed clamp
value, F0 feedrate for rapid traverse override, and the FL
feedrate at reference position return. (T series)

The speed of the serial spindle is controlled by the spindle speed control
function, while the spindle positioning is controlled by the Cs contouring
control function (“spindle contour control”).  Spindle speed control
rotates the spindle using the velocity command, while the spindle contour
control rotates the spindle using the move command.

Switching between spindle speed control and spindle contour control is
performed by the DI signal from the PMC.

In the Cs contour control mode, the Cs contour control axis can be
operated either manually or automatically, in the same way as normal
servo axes.

(For a reference position return, see the relevant description in this
section.)

The axis used for Cs contour control must be set as an axis of the axes
controlled by the CNC. For Cs contour control, the T series uses the third
axis while the M series uses the fourth axis.  The axis of Cs contour control
must be set as a rotation axis (T series: by specifying the LIN3 bit (bit 2
of parameter 0032) to 0; M series:  by specifying the ADLN bit (bit 2 of
parameter 0011) to 0).

9.9
Cs CONTOUR 
CONTROL

General

� Increment system

� Maximum command
value

� Feedrate

Explanations

Setting the Cs contour
control axis



B–61393E–2/029. SPINDLE SPEED FUNCTION

428

Only one set of this setting can be used for each control path.  The spindle
that operates under Cs contour control is a serial spindle as the first
spindle.

The address for the move command in Cs contour control is the axis name
specified in parameter (No. 0030#0, 0069#5, #6 for T series/No.0008#2
to #4 for M series).  This address is arbitrary.

When the second auxiliary function option is provided, address B cannot
be used for the name of the contour axis.  For the T series machines, when
either address C is used for the name of the contour axis, clear ADRC
(parameter no. 0029#4) to “0”.

Up to three servo axes can be specified for linear interpolation against the
Cs contour control axis.

� Switching from spindle speed control to Cs contour control

The serial spindle is put in the Cs contour control mode by setting
the DI signal CON (G123#7) for M series to “1” or COFF(G123#0)
for T series to “0”.  When the mode is switched while the spindle
is rotating, the spindle stops immediately to perform the change.

� Switching from Cs contour control to spindle speed control

Turning the DI signal CON (G123#7) for M series to “0” or COFF
(G123#0) for T series to “1” puts the serial spindle in spindle speed
control mode.  Confirm that the move command for the spindle has
been completed, then specify the switch.  If it is switched while the
spindle is moving, the machine enters interlock, or excessive
position deviation alarm occurs.

After the serial spindle is switched from spindle speed control to Cs
contour control mode, the current position is undefined.  Return the
spindle to the reference position.

The reference position return of the Cs contour control axis is as follows:

� In manual mode

After the serial spindle enters the Cs contour control mode, move
the spindle in the direction of the reference position by turning on
the feed axis and direction select signal.  The spindle starts the
movement to the reference position; when it reaches that position,
the reference position return completion signal (ZPn (F148)) turns
to “1”.
Turning any feed axis and direction select signal to “1” moves the
tool in the reference position direction.

� In the automatic mode

After the serial spindle enters the Cs contour control mode, the
spindle returns to the reference position when G00 or G28 is
specified.  Under certain conditions, the G00 command returns the
spindle to the reference position, depending upon the setting of
parameter CZRN no. 0065#1:

Command Address

Setting Axes that 
interpolate with Cs 
contour axis

Switching spindle 
speed control/Cs 
contour control

Reference Position 
Return of Cs Contour 
Control Axis



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

429

(i) G00 command

When parameter CZRN no. 0065#1 is “0” and the serial
spindle is put in the Cs contour control mode, if the G00
command is given before returning the spindle to the
reference position, the serial spindle returns to the reference
position and indexes it before moving to the commanded
position.  After positioning at the reference position, the
reference position return completion signal (ZPn(F148))
turns to “1”.  When the G00 command is issued after the serial
spindle has returned to the reference position at least once,
normal positioning operation is executed.

Returning to the reference position using the G00 command
differs from using the G28 command or the manual method.
The serial spindle can be positioned at any point using the
G00 command, while the latter two methods always return the
serial spindle to the reference position.

(ii) G28 command

After the serial spindle is put in the Cs contour control mode,
issuing the G28 command stops the spindle motor, then
moves the spindle to the midpoint.  The spindle then returns
to the reference position.  At this point, the reference position
return completion signal (ZPn (F094)) turns to “1”.  When the
serial spindle has returned to the reference position once while
in the Cs contour control mode, the G28 command positions
the spindle at the reference position without moving to the
midpoint and ZPn comes on.

� Interruption of reference position return

(i) Manual operation

Return to the reference position can be interrupted by reset-
ting, emergency stop, or turning “0” the feed axis and direc-
tion select signal.  When the interrupted return operation is re-
sumed, start from the beginning.

(ii) Automatic operation

Return to the reference position can be interrupted by reset-
ting, emergency stop, or feed hold.  When the interrupted re-
turn operation is resumed, start from the beginning.

If a reference position return is performed on the Cs contour control axis,
the axis can be operated in the same way as a normal NC axis.

In the spindle speed control mode, on the other hand, it does not operate
as the Cs contour control axis, and P/S alarm 197 occurs during automatic
operation.

In the spindle speed mode, inhibit manual operation of the Cs contour
control axis using the PMC ladder.

Operation of Cs contour 
control axis 
(Manual/Automatic)



B–61393E–2/029. SPINDLE SPEED FUNCTION

430

0802 Position deviation amount of 1st spindle (T series)

0803 Position deviation amount of 1st spindle (M series)

Position deviation amount of the position loop for the 1st spindle.

This diagnostic display shows information obtained from the serial
spindle control unit.  This diagnosis displays position error of the spindle
contour axis during spindle contour control.

[Classification] Input signal

[Function] This signal specifies that with the Cs contour control function, the first
serial spindle be switched between the spindle speed control and Cs
contour control modes.

(M series) When this signal turns to ”1”, the spindle mode changes
from speed control to Cs contour control.
If the spindle is moving at the time of the change, it stops
immediately.  Turning the signal to “0” changes the spindle
mode from Cs contour control back to speed control.

(T series) When this signal turns to “0”, the spindle mode changes
from speed control to Cs contour control.
If the spindle is moving at the time of the change, it stops
immediately. Turning the signal to “1” changes the spindle
mode from Cs contour control back to speed control.

[Classification] Output signal

[Function] This signal indicates the axis is under Cs contour control.

[Output condition] Spindle speed control mode→ 0

Cs contour control mode→ 1

Display of Position Error
of Cs Contour Control
Axis

DGN No.

Signal

Spindle contour control 
change signal 
CON <G123#7> (M series)
COFF <G123#0>(T series)

Spindle contour control 
change completion 
signal FSCSL <F178#1>



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

431

Spindle speed control Cs contour control Spindle speed control

Gear change and 
operation of spindle 
motor must be 
completed

Switching internal control Switching internal control

CON(M)

FSCSL

COFF(T)

NOTE
Any mechanical gear change needed and inputs for GR1,
GR2, CTH1A, and CTH2A must be completed before the
CON (M) or COFF(T) signal selects Cs contour control
mode.
A servo excessive error may be generated if the spindle
motor is not ready for operation.  (Signal SRVA, SFRA
<G229#5, #4> or other required signals must be
appropriately processed on the machine side).

Refer to 9.3 “Spindle speed Control”.  

Refer to the manual of serial spindle.

These signals determine what parameter (loop gain, etc.) to be used for
each gear position.

Time Chart

Other signals

Gear select signal (Input)
GR1, GR2, <118#2, #3> (T)
<G123#2, #3> (M)
Gear select signal 
(Output)
GR3O, GR2O, GR1O 
<F152#2, #1, #0> 
(M series)

Clutch/Gear signal 
(Serial spindle) 
CTH1A, CTH2A 
<G229#3, #2>



B–61393E–2/029. SPINDLE SPEED FUNCTION

432

CTH1A and CTH2A are the gear select signals for the serial spindle, but
GR1 and GR2 must also be set.  Do not change these signals while in the
Cs contour control mode.

Relationship between gears selected and spindle gear select signals

�
�	�� ���
�	�
����	 ���
�	�

T/M series with CSSC M series without CSSC
����	 ���
�	�

GR2 GR1 Gear selection GR3O GR2O GR1O Gear selection CTH1A CTH2A Gear selection

0 0 1st stage 0 0 1 1st stage 0 0 1st stage

0 1 2nd stage 0 1 0 2nd stage 0 1 2nd stage

1 0 3rd stage 1 0 0 3rd stage 1 0 3rd stage

1 1 4th stage 1 1 4th stage

CSSC:  Constant surface speed control

NOTE
When the M series does not include the constant surface
speed control option, GR1 and GR2 do not need to be input.
Input CTH1A and CTH2A when gears are changed using
GR10, GR2O and GR3O.

[Classification] Output signal

[Function] This signal indicates that a reference position return has been made for the
Cs contour control axis.

[Output condition] If a manual reference position return or automatic reference position
return by G28 is performed during the Cs contour control mode, this
signal becomes logical 1 when the Cs contour control axis reaches the
reference position.

�Feed axis and direction select signal

�Manual handle feed axis select signal

The Cs contour control axis can be manually operated in the same way as
normal servo axes, except for a manual reference position return.  In the
spindle speed control mode, however, manual operations for the Cs
contour control axis must be inhibited using the PMC ladder, etc.

Cs contour control axis 
reference position return
completion signal
ZP3 <F148#2> (T series)
ZP4 <F148#3> (M series)

Signals on manual
operation



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

433

#7
G118

#6 #5 #4 #3
GR2

#2
GR1

#1 #0
(T series)

G123 COFF (T series)

CONG123 GR2 GR1 (M series)

MRDYAG229 SFRA SRVA CTH1A CTH2A

#7
F148

#6 #5 #4 #3
ZP4

#2
ZP3

#1 #0

F152 GR3O GR2O GR1O

F178 FSCSL

The following describes major parameters.

In addition, parameters such as axis feedrate, acceleration/deceleration,
and display can be used.  Also, digital servo parameters (Nos. 8300 or
later (T)/Nos. 8400 or later (M)) for the Cs contour axis are not required
to be set.

#7
0008

#6 #5 #4
ADW2

#3
ADW1

#2
ADW0

#1 #0
(M series)

[Data type] Bit

ADW0, ADW1, Sets the name of the fourth axis as indicated below:

ADW2 
��

��	�

��

��	�

��

��	�
Name

0 0 0 A

0 0 1 B

0 1 0 C

0 1 1 U

1 0 0 V

1 0 1 W

1 1 0 A

1 1 1 A

NOTE
1 Multiple axes must not have identical axis names.
2 When an optional second miscellaneous function is

provided, address B cannot be used.  To use address C with
the T series, set the ADRC bit (bit 4 of parameter 0029) to
0.

Any axis name can be assigned to an axis for Cs contour control.

Signal address

Parameter



B–61393E–2/029. SPINDLE SPEED FUNCTION

434

#7
APRS0010

#6 #5 #4 #3 #2 #1 #0

[Data type] Bit

APRS Automatic setting of a coordinate system when the manual reference
position return is performed
0 : Not set automatically
1 : Set automatically

#7
0011

#6 #5 #4 #3 #2
ADLN

#1 #0
(M series)

[Data type] Bit

ADLN Type of fourth axis
0 : Rotation axis
1 : Linear axis

NOTE
Inch/metric conversion cannot be made to the rotation axis.
The machine coordinate values are rounded in 0° to 360°.
Automatic reference position return (G28, G30) is made in
the manual reference position return direction and the move
amount does not exceed one rotation.

Set the rotation axis for Cs contour control axis

#7
0030

#6 #5 #4 #3 #2 #1 #0
ADW30 (T series)

[Data type] Bit

ADW30 Names the third axis:
0 : B.
1 : C.

#7
CNRST0031

#6 #5 #4 #3 #2 #1 #0

[Data type] Bit

CNRST When reference position return is completed, relative coordinate value of
Cs contour control axis is
0 : Not cleared
1 : Cleared



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

435

#7
ROT100032

#6 #5 #4 #3 #2
LIN3

#1 #0

LIN3 Specifies whether the third axis is a linear ro rotation axis, as follows.
0 : Rotation axis
1 : Linear axis

Set the rotation axis for the Cs contour control axis.

ROT10 Specifies the measurement unit of parameters for the upper limit to the
cutting feedrate rapid traverse F0 rate and the FL rate for a reference
position return during inch output, as follows:
0 : 0.1 degrees/min
1 : 1 degrees/min

#7
0065

#6 #5 #4 #3 #2 #1
CZRN

#0

[Data type] Bit

CZRN The first positioning command by G00 after the serial spindle is switched
to Cs axis contouring control performs:
0 : Positioning after returning to the reference position.
1 : Normal positioning

0102 Command multiply for third axis (CMR) (T series)

0103 Command multiply for fourth axis (CMR) (M series)

[Data type] Byte
� When command multiply is 1/2 to 1/27

Set value= 1

(Command multiply)
+100 [Valid data range:  102 to 127]

� When command multiply is 0.5 to 48

Set value = 2� command multiply  [Valid data range:  1 to 96]

0271 Number of the servo axis for third axis (T series)

0272 Number of the servo axis for fourth axis (M series)

[Data type] Byte

Set the servo axis for third or fourth control axis.

Generally, the same number shall be assigned to the control axis and the
corresponding servo axis.

Set 255 as the number of servo axis to the Cs contour control axis.



B–61393E–2/029. SPINDLE SPEED FUNCTION

436

0279 Setting of third axis in the basic coordinate system (T series)

0280 Setting of fourth axis in the basic coordinate system (M series)

[Data type] Byte

Only one axis can be set for each of the three basic axes X, Y, and Z, but
two or more parallel axes can be set.

Set value Meaning

0 Neither the basic three axes nor a parallel axis

1 X axis of the basic three axes

2 Y axis of the basic three axes

3 Z axis of the basic three axes

5 Axis parallel to the X axis

6 Axis parallel to the Y axis

7 Axis parallel to the Z axis

Set 0 to the Cs contour control axis.

0502 In–position width for third axis (T series)

0503 In–position width for fourth axis (M series)

[Data type] Word

[Unit of data] Detection unit

[Valid data range] 0 to 32767

Set the in–position width for third or fourth axis.

0506 Positioning deviation limit for third axis in movement (T series)

0507 Positioning deviation limit for fourth axis in movement (M series)

[Data type] Two–word

[Unit of data] Detection unit

[Valid data range] 0 to 999999999

Set the positioning deviation limit in movement for third or fourth axis.

0520 Rapid traverse rate for third axis (T series)

0521 Rapid traverse rate for fourth axis (M series)

[Data type] Word

[Unit of data] 1 deg/min

[Valid data range] 30 to 24000 (IS–A, IS–B)
30 to 12000 (IS–C)

Set the rapid traverse rate when the rapid traverse override is 100% for
third or fourth axis.



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

437

(T series)0524 Time constant used in linear acceleration/deceleration in rapid traverse for
third axis

(M series)0525 Time constant used in linear acceleration/deceleration in rapid traverse for
fourth axis

[Data type] Word

[Unit of data] ms

[Valid data range] 0 to 4000

Set the time constant used in linear acceleration/deceleration in rapid
traverse for fourth or third axis.

0537 Backlash compensation value used for rapid traverse for third axis (T series)

0538 Backlash compensation value used for rapid traverse for fourth axis (M series)

[Data type] Word

[Unit of data] Detection unit

[Valid data range] �9999 to +9999

Set the backlash compensation value for third or fourth axis.

0595 Positioning deviation limit for third axis in the stopped state (T series)

0596 Positioning deviation limit for fourth axis in the stopped state (M series)

[Data type] Word

[Unit of data] Detection unit

[Valid data range] 0 to 32767

Set the positioning deviation limit in the stopped state for third or fourth
axis.

(T series)0710 Coordinate value of the reference position used when automatic coordi-
nate system setting is performed

(M series)0711 Coordinate value of the reference position used when automatic coordi-
nate system setting is performed

[Data type] Two–word

Set the coordinate value of the reference position on each axis  to be used
for setting a coordinate system automatically.



B–61393E–2/029. SPINDLE SPEED FUNCTION

438

6565 Gear ratio (HIGH)

6566 Gear ratio (MEDIUM HIGH)

6567 Gear ratio (MEDIUM LOW)

6568 Gear ratio (LOW)

[Data type] Word

[Unit of data] (Number of motor rotations to one spindle rotation)� 100

[Valid data range] 0 to 32767

Set the gear ratio between spindle and AC spindle motor.

NOTE
For which gear ratio is used in actual spindle operation, it
depends on clutch/gear signal (serial spindle) CTH1A,
CTH2A.

6569 Position gain at Cs contour control (High gear)

6570 Position gain at Cs contour control (Medium High gear)

6571 Position gain at Cs contour control (Medium Low gear)

6572 Position gain at Cs contour control (Low gear)

[Data type] Word

[Unit of data] 0.01 sec–1

[Valid data range] 0 to 32767

Set the position gain at Cs contour control.

NOTE
For which position gain is used in actual spindle operation,
it depends on clutch/gear signal (serial spindle) CTH1A,
CTH2A.



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

439

6635 Grid shift value at Cs contour control

[Data type] Two–word

[Unit of data] 1 pulse unit (360000 p/rev)

[Valid data range] –360000 to +360000

Set the number of pulses from an issue of one–rotation signal to the
machine zero point in Cs contour control.

NOTE
This parameter can substitute for parameter 0510 (T series)
or 0511 (M series).  The parameter determines the position
of reference position return under Cs contour control by the
serial spindle.

6780 Loop gain of the servo axis that interpolates with Cs contour control axis
during interpolation (1st gear)

6781 Loop gain of the servo axis that interpolates with Cs contour control axis
during interpolation (2nd gear)

6782 Loop gain of the servo axis that interpolates with Cs contour control axis
during interpolation (3rd gear)

6783 Loop gain of the servo axis that interpolates with Cs contour control axis
during interpolation (4th gear)

[Data type] Word
[Unit of data] 0.01 sec–1

[Valid data range] 0 to 9999
Set the servo loop gain of the servo axis that interpolates with Cs contour
control axis on each spindle gear.

6784 Loop gain of the  X axis that interpolates with Cs contour control axis dur-
ing interpolation (1st gear)

6785 Loop gain of the X axis that interpolates with Cs contour control axis dur-
ing interpolation (2nd gear)

6786 Loop gain of the X axis that interpolates with Cs contour control axis dur-
ing interpolation (3rd gear)

6787 Loop gain of the X axis that interpolates with Cs contour control axis dur-
ing interpolation (4th gear)

[Data type] Word
[Unit of data] 0.01 sec–1

[Valid data range] 0 to 9999
Set the servo loop gain of the servo axis that interpolates with Cs contour
control axis on each spindle gear.



B–61393E–2/029. SPINDLE SPEED FUNCTION

440

6788 Loop gain of the Z axis (T)/Y axis (M) that interpolates with Cs contour
control axis during interpolation (1st gear)

6789 Loop gain of the Z axis (T)/Y axis (M) that interpolates with Cs contour
control axis during interpolation (2nd gear)

6790 Loop gain of the Z axis (T)/Y axis (M) that interpolates with Cs contour
control axis during interpolation (3rd gear)

6791 Loop gain of the Z axis (T)/Y axis (M) that interpolates with Cs contour
control axis during interpolation (4th gear)

[Data type] Word
[Unit of data] 0.01 sec–1

[Valid data range] 0 to 9999
Set the servo loop gain of the Z axis (T)/Y axis (M) that interpolates with
Cs contour control axis on each spindle gear.

6792 Loop gain of the Z axis (M) that interpolates with Cs contour control axis
during interpolation (1st gear)

6793 Loop gain of the Z axis (M) that interpolates with Cs contour control axis
during interpolation (2nd gear)

6794 Loop gain of the Z axis (M) that interpolates with Cs contour control axis
during interpolation (3rd gear)

6795 Loop gain of the Z axis (M) that interpolates with Cs contour control axis
during interpolation (4th gear)

[Data type] Word

[Unit of data] 0.01 sec–1

[Valid data range] 0 to 9999

Set the servo loop gain of the Z axis (M) that interpolates with Cs contour
control axis on each spindle gear.
For T series, set the same values that set to the parameter Nos.6569 to
6572.



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

441

6796 Loop gain of the fourth axis (T) that interpolates with Cs contour control
axis during interpolation (1st gear)

6797 Loop gain of the fourth axis (T) that interpolates with Cs contour control
axis during interpolation (2nd gear)

6798 Loop gain of the fourth axis (T) that interpolates with Cs contour control
axis during interpolation (3rd gear)

6799 Loop gain of the fourth axis (T) that interpolates with Cs contour control
axis during interpolation (4th gear)

[Data type] Word

[Unit of data] 0.01 sec–1

[Valid data range] 0 to 9999

Set the servo loop gain of the fourth axis (T) that interpolates with Cs
contour control axis on each spindle gear.
For T series, set the same values that set to the parameter Nos. 6569 to
6572.

������ Message Description

194 SPINDLE COMMAND IN
SYNCHRO–MODE

A contour control mode, spindle positioning
(Cs–axis control) mode, or rigid tapping
mode was specified during the serial
spindle synchronous control mode. Correct
the program so that the serial spindle syn-
chronous control mode is released in ad-
vance.

195 FIRST SPINDLE MODE
CHANGE FAULT

This alarm is generated if the system does
not properly terminate a mode change.  The
modes include the Cs contouring, spindle
positioning, rigid tapping, and spindle con-
trol modes.  The alarm is activated if the
spindle control unit does not respond cor-
rectly to the mode change command issued
by the NC.

197 C–AXIS COMMANDED IN
SPINDLE MODE

The program specified a movement along
the Cs contour control axis when the signal
CON (G123#7) for M series was off or the
signal COFF (G123#0) for T series was on.
Correct the program, or consult the PMC
ladder diagram to find the reason the signal
is not turned on.

409 FIRST SPINDLE ALARM
DETECTION (AL–XX)

This alarm indicates in the NC that an
alarm is generated in the spindle control
unit of the system with the serial spindle.
The alarm is displayed in form AL–XX (XX
is a number).  The alarm number XX is the
number indicated on the spindle amplifier.
The CNC holds this number and displays
on the screen.

Alarm and message



B–61393E–2/029. SPINDLE SPEED FUNCTION

442

WARNING
In the spindle contour control mode, do not switch the
spindle gears.  When the gears need to be changed put the
system in the spindle speed control mode first.

NOTE
In the T series machines, the spindle contour control
function and the spindle positioning function cannot be
used at the same time. If both functions are specified
simultaneously, the spindle positioning function takes
precedence.

FANUC CONTROL MOTOR 
AMPLIFIER � series
DESCRIPTIONS (B–65162E)

11.6 Cs Contour Control Func-
tion

FANUC AC SPINDLE MOTOR 
series (Serial interface)
DESCRIPTIONS (B–65042E)

Appendix 3.2 Cs Contour Control Func-
tion Start–up 
Procedure

Warning

Note

Reference item



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

443

In addition to the conventional (first) spindle, two other (second and third)
spindles can be controlled. These additional spindles allow two-stage
gear changes. An S code is used for a command to any of these spindles;
which spindle is selected is determined by a signal from the PMC.  The
second and third spindle can change gears in 2 stages.

When the second spindle is used, one position coder interface channel is
added. Which position coder is selected is determined by a PMC signal.
(The conventional and additional position coders are referred to as the
first position coder and second position coder, respectively, throughout
the remainder of this discussion.)

Selection between 1st position coder and 2nd position coder is made by
a signal from PMC.

Two multi-spindle control methods are available. Type A allows the
SIND function (controlling the spindle motor speed based on the PMC)
to be used only for the first spindle. Type B allows the SIND function to
be used for each of the three spindles independently.

An S command is sent as a speed command to each spindle selected, using
a spindle selection signal (SWS1 to SWS3 <G145#0-#2>). Each spindle
rotates at the specified speed. If a spindle is not sent a spindle selection
signal, it continues to rotate at its previous speed. This allows the spindles
to rotate at different speeds at the same time.

Each spindle also has a spindle stop signal (*SSTP1 to *SSTP3
<G145#3-#5>) to stop its rotation; an unused spindle can still be stopped.

There is a spindle enable signal to control each spindle; ENB <F149#4>
controls the first spindle, while ENB2 and ENB3 <F164#2, #3> control
the second and third spindles, respectively.

The PMC signal PC2SLC <G146#7> is used to select between the first
and second position coders.

When parameter MSPDB (No. 0070#2)=0, TYPE-A is used.

When the first spindle is selected with the SWS1 signal, the SIND signal
<G125#7> is used to determine whether the spindle analog voltage is
controlled by the PMC or CNC; then signals R01I to R12I <G125#3 to
G124#0> are used to set that spindle’s analog voltage. These signals do
not affect the second and third spindles.

The PMC-based polarity (rotation direction) control signals SGN and
SSIN <G125#5,#6> will function for any spindle selected by SWS1 to
SWS3.

The concept of Type A multi-spindle control is outlined below.

9.10
MULTI-SPINDLE
CONTROL (T SERIES)

General

Control

Basic control (Common
to TYPE-A and TYPE-B)

Multi-spindle control 
(TYPE-A)



B–61393E–2/029. SPINDLE SPEED FUNCTION

444

S command

Hold 1

Hold 2

Hold 3

First spindle

SIND

SWS 1

SWS 2

SWS 3

* SSTP 1

* SSTP 2

* SSTP 3

Second spindle

Third spindle

Select Type B control by setting parameter MSPDB no. 0070#3 to “1”.

Each spindle has its own SIND, SSIN and SGN signals.  
Each signal functions regardless of selection state of the spindle selection
signals (SWS1 to SWS3).

When either the spindle selection signals (SWS1 to SWS3) or the SIND
signal for the first, second or third spindle is set to “1”, the polarity
(rotation direction) control signals SSIN, SGN will function.

The concept of Type B multi-spindle control outlined below.

First spindle

S command

Hold 1

Hold 2

Hold 3

SIND

* SSTP 1

* SSTP 2

* SSTP 3

SWS 1

SWS 2

SWS 3

SIND2

SIND3

Second spindle

Third spindle

Multi-spindle control 
(TYPE-B)



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

445

The multi–spindle control function can control the following
combinations of spindles:

1) Three analog spindles

2) One serial spindle (used as the first spindle) and two analog spindles

3) Two serial spindles (used as the first and second spindles) and one
analog spindle (used as the third spindle)

In any of the above configurations, the second or third spindle may be left
unconnected.

See the table below:

Spindle configuration for multi–spindle control

Three analog spindles

Function requirements Multi–spindle control, spindle speed command with
four or five digits
(The serial spindle interface should not be used.)

Hardware requirements Analog interface board
(For the NC unit, control unit B must be used to con-
nect the analog interface board.)

Spindle connection First spindle → M26 or M12 connector
(on the memory board)

Second spindle → M121 connector V01
(on the analog interface board)

Third spindle → M121 connector V02 or M122 
(on the analog interface board)

Position coder connec-
tion

First position coder → M27 connector 
(on the memory board)

Second position coder → M124 connector 
(on the analog interface
board)

One serial spindle (used as the first spindle) and
two analog spindles 

(used as the second and third spindles)

Function requirements Multi–spindle control, SRLMSP bit (bit 2 of serial
spindle interface parameter 0071) set to 0

Hardware requirements Analog interface board
(For the NC unit, control unit B must be used to con-
nect the analog interface board.)

Spindles to be controlled

Connection of the
spindles



B–61393E–2/029. SPINDLE SPEED FUNCTION

446

One serial spindle (used as the first spindle) and
two analog spindles 

(used as the second and third spindles)

Spindle connection First spindle → COP5 optical connector 
(on the memory board)

Second spindle → M121 connector V01 
(on the analog interface board)

Third spindle → M121 connector V02 or M122 
(on the analog interface board)

Position coder 
connection

First position coder
When the ISRLPC bit (bit 0 of parameter 0071) is set to:

0 → COP5 optical connector
(on the memory board)

1 → M27 connector 
(on the memory board)

Second position coder → M124 connector
(on the analog interface
board)

Two serial spindles
(used as the first and second spindles) 

and one analog spindle
(used as the third spindle)

Function requirements Multi–spindle control, SRLMSP bit (bit 2 of serial
spindle interface parameter 0071) set to 1

Hardware requirements Interface for the spindle speed command with four or
five digits (when the third spindle is used)
(No analog interface board is necessary.  Therefore,
either control unit A or B can be used for the NC unit.)

Spindle connection First spindle → COP5 optical connector 
(on the memory board)

Second spindle → CN11B optical connector
(on the first spindle control unit)

Third spindle → M26 or M12 connector
(on the memory board)

Position coder 
connection

First position coder
When the ISRLPC bit (bit 0 of parameter 0071) is set to:

0 → COP5 optical connector (The data
output by the position coder con-
nected to the first spindle control unit
is captured using the optical cable.)

1 → M27 connector
(Both the COP5 optical connector
and the M27 connector are provided
on the memory board.)

Second position coder
When the SSMPC bit (bit 3 of parameter 71) is set to:

0 → M27 connector
1 → CN11B optical connector

(The data output by the position
coder connected to the second
spindle control unit is captured using
the optical cable.)

(The M27 connector is provided on the memory board
while the CN11B optical connector is provided on the
first spindle control unit.)

In any of the three configurations, control method type A or B can be
selected by specifying the MSPDB bit (bit 3 of parameter 70).



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

447

NOTE
Connection when a serial spindle interface is used
When a serial spindle interface is used, the NC and the
amplifier unit for spindle control are connected using a
single optical cable (COP5 on the NC and CN11A on the
spindle control unit).  The position coder and other detectors
are not directly connected to the NC unit but are instead
connected to the amplifier unit for spindle control.  The
information obtained from the position coder or other
detectors is supplied from the amplifier unit used for spindle
control to the NC along the optical cable.
When two serial spindles are connected, the CN11B
connector of the first amplifier unit used for spindle control
and the CN11A connector of the second amplifier unit used
for spindle control are connected.  The position coders and
other detectors are connected to the amplifier units for
spindle control in the same way as when a single serial
spindle is used.  The information detected by the second
spindle control amplifier unit is supplied from the first spindle
control amplifier unit to the NC, using the optical cable.

The control function for keeping the surface speed constant can be used
with any of the three spindles if the spindle speed is within the range
allowable for this function.  (When the position coder is required, it can
be installed on the 1st or 2nd spindle).  The spindle selection signal
(SWS1 to SWS3) for the spindle must stay set at “1” during machining
using this function.

When the spindle speed fluctuation detection function is combined with
multi-spindle control, two position coders can be used. Monitor the states
of the second position coder selection signal (PL2SLC) and spindle
selection signals (SWS1 to SWS3).

The actual spindle speed output function conveys speed information
obtained from the selected position coder specified by the 2nd position
coder selection signal (PC2SLC) to the PMC.
When the parameter HSO (No. 0070#2)=1, the difference of the feedback
pulses between the 1st and 2nd position coder can be output irrespective
of the state of 2nd position coder selection signal (PC2SLC).

When the spindle motor is used for positioning, as in the case of spindle
positioning or Cs contour control, the first spindle functions as the
positioning spindle. Switching to the positioning mode and positioning
command are possible irrespective of the state of the selection signal of
the first spindle (SWS1).  This means that the first spindle cannot be
controlled as a spindle in positioning mode, but the second and third
spindles can be controlled as usual.

Relationship with other
optional functions

� Constant surface speed
control

� Spindle speed
fluctuation detection

� Actual spindle speed
output

� Spindle positioning or
Cs contour control



B–61393E–2/029. SPINDLE SPEED FUNCTION

448

Polygon turning rotates a tool axis in phase with the spindle.  To perform
polygon turning when multi-spindle control issued, select the spindle and
the position coder associated with the spindle.

During spindle synchronization or simplified synchronization control,
the second spindle operates in phase with the first spindle. Multi-spindle
control for the first and third spindles can be used during synchronization
control, but multi-spindle control for the second spindle is disabled.

Using the spindle selection signal (SWS1 to SWS3), rigid tapping can use
which the three spindles as the rigid tap spindle. There are certain
restrictions:

� Set the SWS1 to SWS3 signals before directing rigid tapping;

� Do not switch the SWS1 to SWS3 signals during rigid tapping; and

� Use the appropriate ENB signal (either ENB or ENB2) for the selected
spindle as the ENB signal for the rigid tapping PMC sequence.

The spindles not used for rigid tapping can be rotated at a speed specified
before rigid tapping starts, or can be stopped.

In rigid tapping, the first spindle and the first position coder form a
position loop, while the second and third spindles and the second position
coder form another position loop, irrespective of the status of the position
coder select signal (PC2SLC).  When the SRLMSPD bit (bit 2 of
parameter 0071) is set to 1, that is, when serial spindles are used as the first
and second spindles and an analog spindle as the third spindle, the
position loops are formed independently of the status of the position coder
select signal (PC2SLC) and the setting of the SSMPC bit (bit 3 of
parameter 0071) used for selecting the second position coder.  One of the
position loops is formed by the first spindle and the position coder
connected to the first spindle control unit, while the other is formed by the
second spindle and the position coder connected to the second spindle
control unit.  The actual spindle speed display depends on the status of the
position coder select signal (PC2SLC) and the setting of the SSMPC bit
(bit 3 of parameter 0071), used for selecting the second position coder.

Refer to 9.4 “Spindle Control for 0–TTC”.

[Classification] Input signal

[Function] Controls whether S command specified to the NC is output to the spindle
or not in multi-spindle.

SWS1 1 : Outputs a speed command to the first spindle.
0 : Outputs no speed command to the first spindle.

� Polygon turning

� Spindle synchronization,
simplified
synchronization control

� Rigid tapping

� 0–TTC

Signal

Spindle Selection Signal
SWS1, SWS2, SWS3
<G145#0, #1, #2>



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

449

SWS2 1 : Outputs a speed command to the second spindle.
0 : Outputs no speed command to the second spindle.

SWS3 1 : Outputs a speed command to the third spindle.
0 : Outputs no speed command to the third spindle.

[Classification] Input signal

[Function] Effective only to multi-spindle, each spindle can be stopped by this signal.

*SSTP1 1 : Does not set 0 rpm for output to the first spindle.
0 : Sets 0 rpm for output to the first spindle.

*SSTP2 1 : Does not set 0 rpm for output to the second spindle.
0 : Sets 0 rpm for output to the second spindle.

*SSTP3 1 : Does not set 0 rpm for output to the third spindle.
0 : Sets 0 rpm for output to the third spindle.

[Classification] Input signal

[Function] Gear selection signals for 2nd and 3rd spindle when multi–spindle is
equipped (2–stage).  Use GR1 and GR2 <G118#2, #3> for the 1st spindle
and up to 4–stage gears can be used.

GR21 1 : Selects the second-stage gear for the second spindle.
0 : Selects the first-stage gear for the second spindle.

GR31 1 : Selects the second-stage gear for the third spindle.
0 : Selects the first-stage gear for the third spindle.

[Classification] Input signal

[Function] Position coder selection signal used for control.

PC2SLC 1 : Uses feedback pulses obtained by the second position coder for
control.

0 : Uses feedback pulses obtained by the first position coder for control.

When the second position coder is not installed, do not switch this signal
and always select the first position coder.

Individual spindle stop
signal *SSTP1, *SSTP2, 
*SSTP3 <G145#3, #4, #5>

Gear selection signal 
GR21 <G145#6> 
GR31 <G145#7>

2nd position coder
selection signal 
PC2SLC <G146#7>



B–61393E–2/029. SPINDLE SPEED FUNCTION

450

[Classification] Output signal

[Function] These signals inform PMC of whether or not to perform output to the
second and third spindles in multi–spindle control.

The signals are used as a condition to stop the analog spindle, and are also
used for a PMC ladder sequence that is associated with rigid tapping.  (See
Section 9.11.)

[Output condition] ENB2 1 : Outputs a value other than 0 to the second spindle control unit.
0 : Outputs 0 to the second spindle control unit.

ENB3 1 : Outputs a value other than 0 to the third spindle control unit.
0 : Outputs 0 to the third spindle control unit.

1st spindle SIND, SSIN, SGN, <G125#7, #6, #5> (Input)
R12I to R01I<G125#3 to G032#0> (Input)

2nd spindle SIND2, SSIN2, SGN2, <G107#7, #6, #5> (Input)
R12I2 to R01I2<G107#3 to G106#0> (Input)

3rd spindle SIND3, SSIN3, SGN3, <G109#7, #6, #5> (Input)
R12I3 to R01I3<G109#3 to G108#0> (Input)

[Classification] Input signal

[Function] The spindle motor of each spindle can be controlled by issuing commands
from the PMC.  The speed command and polarity (rotation direction) of
a spindle motor can be controlled.  Usually, CNC commands are used to
specify a speed and polarity.  By using these signals, whether commands
issued from the CNC or PMC are to be used for this control can be
selected.  Even when multi–spindle control is not being used, the signals
can be used to control the second and third spindles.

When multi–spindle control is being used, and TYPE–A is selected (bit
3 (MSPDB) of parameter No. 0070 is set to 0), the signals for the second
and third spindles cannot be used.

For details of each signal, see Section 15.4.

NOTE
The addresses of the SIND signals for spindles (G106 to
G109) may also be used for the external key input signals.
When the multi–spindle function is used, the external key
input function cannot be used.

Spindle enable signal
ENB2<F164#2>
ENB3<F164#3>

Spindle control signal by
PMC



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

451

#7
R08I2G106

#6
R07I2

#5
R06I2

#4
R05I2

#3
R04I2

#2
R03I2

#1
R02I2

#0
R01I2

SIND2G107 SSIN2 SGN2 R12I2 R11I2 R10I2 R09I2

R08I3G108 R07I3 R06I3 R05I3 R04I3 R03I3 R02I3 R01I3

SIND3G109 SSIN3 SGN3 R12I3 R11I3 R10I3 R09I3

G120 *SSTP

R08IG124 R07I R06I R05I R04I R03I R02I R01I

SINDG125 SSIN SGN R12I R11I R10I R09I

GR31G145 GR21 *SSTP3 *SSTP2 *SSTP1 SWS3 SWS2 SWS1

PC2SLCG146 GR2 GR1

F164 ENB3 ENB2

The parameters for the 1st spindle and the 1st position coder are the same
as usual. This section describes the parameters which are added by this
function.

#7
P2SG20064

#6
P2SG1

#5 #4 #3 #2 #1 #0

[Data type] Bit

P2SG2, P2SG1 Gear ratio of spindle to second position coder

Number of spindle revolutions

Number of position coder revolutions

Magnification P2SG2 P2SG1

�1   0   0

�2   0   1 Magnification=
�4   1   0

�8   1   1

#7
0070

#6 #5 #4 #3 #2
MSPDB

#1 #0

MSI In multi–spindle control, the SIND signal is valid
0 : Only when the first spindle is valid (SIND signal for the 2nd, 3rd

spindle becomes ineffective)
1 : For each spindle irrespective of whether the spindle is selected (Each

spindle has its own SIND signal).

Signal address

Parameter



B–61393E–2/029. SPINDLE SPEED FUNCTION

452

#7
0071

#6 #5 #4
SRL2SP

#3
SSMPC

#2
SRLMSP

#1 #0
ISRLPC

[Data type] Bit

ISRLPC When a serial spindle is used:
1: The position coder signal connected to the M27 connector is captured.

0:  The position coder signal being fed along the optical cable is captured.

SRLMSP When a serial spindle is used, the spindle configuration for multi–spindle
control is set as follows:
1: The first and second spindles are serial, while the third spindle is

analog.

0: The first spindle is serial, while the second and third spindles are
analog and are connected to the analog interface board.

SSMPC When a serial spindle is used with the multi–spindle function and when
the SRLMSP bit (bit 2 of parameter 71) is set to 1 (see above):
1:  The position coder signal connected to the second spindle control unit,

which is set as the second position coder, is captured.

SRL2SP The number of serial spindles to be connected is:
1: 2.

0: 1.

0556 Maximum spindle speed

[Data type] Word

[Unit of data] rpm

[Valid data range] 0 to 32767

This parameter sets the maximum spindle speed. 
When a command specifying a speed exceeding the maximum speed of
the spindle is specified , or the speed of the spindle exceeds the maximum
speed because of the spindle speed override function, the spindle speed is
clamped at the maximum speed set in the parameter.

WARNING
1 When 0 is set in this parameter, the speed of the spindle is

not clamped.
2 When spindle speed command control is applied using the

PMC, this parameter has no effect, and the speed of the
spindle is not clamped.

3 When the multi–spindle control option is selected (T series),
set the maximum speed for each spindle in the following
parameters:

NOTE
When the constant surface speed control option is selected,
the spindle speed is clamped at the maximum speed,
regardless of whether the G96 mode or G97 mode is
specified.



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

453

0613 PSANG2

PSANG2 Set the gain adjustment data for the second spindle.  The setting method is
the same as that for the first spindle (parameter 516).

0614 SPDLC2

SPDLC2 Set the spindle speed offset compensation value for the second spindle.
The setting method is the same as that for the first spindle (parameter
539).

0615 Maximum spindle speed for gear 1 of the second spindle

0616 Maximum spindle speed for gear 2 of the second spindle

[Data type] Word

[Unit of data] rpm

[Valid data range] 0 to 32767

Set the maximum spindle speed for each gear of the second spindle.

NOTE
These parameters are used for the multi–spindle control.

0617 Data for adjusting the gain of the analog output of the third–spindle speed

[Data type] Word

[Unit of data] 0.1%

[Valid data range] 700 to 1250

Set the data used for adjusting the gain of the analog output of the third
spindle speed.

NOTE
This parameter is used for controlling the multi–spindles.

0618 Offset voltage compensation value of the analog output of the third spindle speed

[Data type] Word

[Unit of data] Velo

[Valid data range] –1024 to 1024

[Method of adjustment] Set the offset voltage compensation value of the analog output of the third
spindle speed.
1) Set 0 (standard setting) to this parameter.
2) Command a spindle speed that makes the spindle speed analog output 0.
3) Measure output voltage.
4) Set the following value to parameter No. 0618.  

Setting value =
12.5

–8191 � offset voltage (V)

5) After the parameter has been set, command a spindle speed whose
analog output becomes 0 and confirm the voltage becomes 0V.



B–61393E–2/029. SPINDLE SPEED FUNCTION

454

0619 Maximum spindle speed for gear 1 of the third spindle

0620 Maximum spindle speed for gear 2 of the third spindle

[Data type] Word

[Unit of data] rpm

[Valid data range] 0 to 32767

Set the maximum spindle speed for each gear of the third spindle.

NOTE
These parameters are used for muliti–spindle control.

WARNING
Do not switch between the first and second position coders
while a function that uses position coder feedback
information is being executed. That is, PMC signal PC2SLC
<G146#7> cannot be used while, for instance, a command
for feed per rotation or thread cutting is taking place.

CAUTION
1 If the primary spindle stop signal *SSTP for stopping all

selected (SWS1 to SWS3) spindles’ rotation is cleared, the
speed command is restored. A spindle not selected by
SWS1 to SWS3 and rotating at its previous speed, which is
stopped using its respective command *SSTP1 to *SSTP3,
cannot be restored to that speed when the signal is cleared.

2 Type A multi-spindle control differs from Type B in the
relationship between the SWS1 and SIND signals for the
first spindle. In Type A, SIND functions only when SWS1 is
set to “1”. In Type B, SIND functions whether SWS1 is “1”
or “0”; each spindle is selected by either of its respective
SWS or SIND signals being set to “1”.

Warning

Caution



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

455

NOTE
1 The spindle orientation signal, spindle speed override

signals, and spindle stop signal *SSTP only function for
selected signals.

2 The S 12-bit code signals R01O to R12O outputs the state
of a selected spindle. If two or more spindles are selected
at the same time, the states of the first, second, and third
spindles are output in this order.

3 The multi-spindle function allows two position coder
interfaces to be used. But the number of actual speed
indications on the CNC screen does not change. The speed
based on the feedback information of the selected position
coder is displayed.

4 An SOR command has priority over S commands and
SIND-based rotation control from the PMC, and will cause
all selected spindle to perform orientation rotation.

Note



B–61393E–2/029. SPINDLE SPEED FUNCTION

456

In a tapping cycle (M series: G84/G74, T series: G84/G88), synchronous
control is applied to the tapping operation of a tapping axis and the
operation of the spindle.

This capability eliminates the need to use a tool such as a float tapper, thus
enabling higher–speed, higher–precision tapping.

Whether a tapping cycle is an ordinary tapping cycle or rigid tapping cycle
is determined by the miscellaneous function code for rigid tapping M29.
(A different M code can be used by setting the parameters accordingly, but
M29 is used in the description given here.)

By setting the parameters, G codes for tapping cycles can be changed to
G codes for rigid tapping only.  In this case, the CNC specifies M29
internally.

To perform rigid tapping, the following must be added to the ordinary
connections:

· Connection of a position coder to the spindles (described in 9.11.2)

· Addition of a sequence to the PMC (described in 9.11.6 and 9.11.7)

· Setting of related parameters (described in 9.11.8)

This section provides an example of M series connection.

To avoid duplicate descriptions, assume the following unless noted
otherwise:

⋅ G code for a tapping cycle
M series:  G84 (G74)  T series:  G84 (G88)

⋅ Gear selection method
M series:  M–type or T–type gear selection method 
T series:  T–type gear selection method only

⋅ M series:  Up to three stages  T series:  Up to four stages 
(Shared by the second spindle.  Up to two stages for the second
spindle.)

CAUTION
1 The description given in this section covers up to the fourth

axis.
2 In the case of the M series, when both the CT3G (bit 1 of

parameter 0077) and the VALT (bit 6 of parameter 0037) are
set to 1, the maximum spindle speed for the third gear is set
in parameter 0617.

The descriptions given in this section (such as spindle gear switching and
M–type/T–type) are based on the explanation given in Section 9.3.  Refer
to Section 9.3 as necessary.

9.11
RIGID TAPPING

9.11.1
General



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

457

The differences in the specifications for rigid tapping for the M series and
T series are described below.

The tapping cycle G84 and the reverse tapping cycle G74 can be used to
specify M series rigid tapping.

A tapping axis can be arbitrarily selected from the basic axes X, Y, and
Z, as well as axes parallel to the basic axes, by setting the corresponding
parameters accordingly (bit 6 (FXY) of parameter No. 0057).

The spindle operations of G84 and G74 are reversed with respect to each
other.

The first spindle allows rigid tapping, even if the spindle is an analog or
serial spindle.

The face tapping cycle G84 and the side tapping cycle G88 can be used
to specify T series rigid tapping.

Depending on the rigid tapping command, rigid tapping can be performed
along the Z–axis (when G84 is used) or the X–axis (when G88 is used).

A reverse tapping cycle, like that supported by M series, is not available.

In addition to rigid tapping using the first spindle (either analog or serial),
rigid tapping using the second spindle (serial) and third spindle (analog)
is also possible when multi–spindle control is being used.

For 0–TTC, rigid tapping can be performed using a combination of the
spindle and tapping axis selected in each path.

Rigid tapping using a mixture of paths is not allowed.

Specification of 
M series/T series
� Rigid tapping of M series

� Rigid tapping of T series



B–61393E–2/029. SPINDLE SPEED FUNCTION

458

As shown in the figure below a gear can be inserted between the spindle
and spindle motor, and between the spindle and position coder.

Spindle control

Spindle amplifier Spindle motor

Spindle

Gear ratio n:m

�4

Error
counter

Gear ratio q:p

1024 p/rev

Position
coder

(The 512 pulses/rev position coder is incorporated into some
spindle motors.  When the serial spindle is used, the system
carries out conversion from 512 pulses/rev to 1024 pulses/rev.)

Up to three gear stages (M series) or four gear stages (1st spindle of T
series), two gear stages (2nd or 3rd spindle of T series) can be provided
between the spindle and the spindle motor.  The gear ratio is arbitrary.  The
spindle move distance per spindle motor rotation is different, based on the
gear ratio.  The speed command to the spindle motor must be adjusted.
See (2), below, for additional information regarding a spindle motor
incorporating a position coder.

The position coder is used to detect the position of the spindle.
The gear ratio for the spindle and position coder is specified in the parame-
ter sets Nos. 0663 to 0668 (M)/Nos.0427 to 0434 (T), or parameter set
PSG1 and PSG2 No. 0028#6, 7(M)/No.0003#6, #7(T), parameter P2SG1
and P2SG2 No.0064#6, 7 for 2nd spindle of T series. Which parameter
set to use is specified by parameter VALPC No.0063#3
(M)/No.0063#6(T).

This is used if the gear ratio for the spindle motor and position coder
(built-in or separate) is not 1:1, 1:2, 1:4, or 1:8, set VALPC to 1 and set
the gear ratio using parameter Nos.0663 to 0668 (M)/Nos.0427 to
0434(T).

When position coder is mounted on a spindle, the gear ratio for the spindle
motor and position coder cannot be changed by shifting the spindle motor
and spindle gears. Parameters Nos. 0663 to 0665(M)/Nos.0427 to
0430(T) must all specify the same value for the teeth of the individual
spindle gears. Parameters Nos.0666 to 0668(M)/Nos. 0431 to 0434(T)
must all specify the same value for the teeth of individual position coder
gears.

9.11.2
Connection Among 
Spindle, Spindle Motor,
and Position Coder

(1) Gear between spindle 
and spindle motor

(2) Gear between spindle 
and position coder

⋅ Arbitrary gear ratio
(VALPC=1)



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

459

The 1024 or 512 pulses/rev position coder is built into the spindle motor.
For the 512 pulses/rev version, specify double the number of teeth on each
gear for the position coder. (Double the number of teeth need not be
specified for the serial spindle.)

The M series allows up to three stages, regardless of which gear selection
method has been selected.  (Parameter 0663 to 0668.)

The T series supports up to four stages for the first spindle and up to two
stages for the second or third spindle (parameters 0427 to 0434).

Example)

Spindle
motor

Built–in position coder

1st gear set 30 : 70

2nd gear set50 : 50

3rd gear set 70 : 30

Parameter No. Set value

M
series

T 
series

512p/rev
Position

coder

1024p/re
v 

Position
coder

Meaning

0663 0427 70 Number of teeth of the 1st gear
for the spindle side

0664 0428 50 Number of teeth of the 2nd gear
for the spindle side

0665 0429 30 Number of teeth of the 3rd gear
for the spindle side

0666 0431 60 Note) 30 Number of teeth of the  1st gear
for the position coder side

0667 0432 100 Note) 50 Number of teeth of the 2nd gear
for the position coder side

0668 0433 140 Note) 70 Number of teeth of the 3rd gear
for the position coder side

NOTE
Double value setting is not required for serial spindle.



B–61393E–2/029. SPINDLE SPEED FUNCTION

460

If the gear ratio is either 1:1, 1:2, 1:4, and 1:8, it is set using parameters
PSG1 and PSG2 (No.0027#6, #7(M)/No.0003#6, #7(T)). This applies if
the position coder is mounted in a spindle or built into a spindle motor
when only one stage gear is provided.  .
For 2nd spindle of T series, set it to parameters P2SG1 and P2SG2
(No.0064#6, #7).

Parameter Gear ratio

PG2 PG1 Spindle Positioncoder
Detection unit

0 0 1 1 360/4096=0.08789 deg

0 1 1 2 360/4096�2=0.17578 deg

1 0 1 4 360/4096�4=0.35156 deg

1 1 1 8 360/4096�8=0.70313 deg

The spindle motor building in the 512 pulses/rev position coder uses the
values set forth in the following table. A serial spindle does not require
double-value setting; use the same values as for the spindle motor
building in the 1024 pulses/rev position coder.

Gear ratio Parameter Gear ratio
of spindle Detection

Built–in
position

d

Spindle
motor Spindle PSG2 PSG1

of  spindle
to position

coder

unit
(deg)

coder
512p/rev

1 1 0 1 1:2 0.17578
512p/rev

2 1 1 0 1:4 0.35156

4 1 1 0 1:8 0.70313

If the M type gear selection method is selected, the CNC determines
whether gears need changing using the gear change specification
mentioned in section 9.3. If the gears need to be changed, the CNC
generates the S function code read signal SF (F150#2) and gear selection
signals GR1O, GR2O, and GR3O (F152#0-#2) to notify the PMC.
Change gears using the PMC, based on these signals.

If the T type gear selection method is selected, the CNC does not process
gear changes. When the CNC has the S function code, it outputs signal
SF and S function code signals S11 to S58 (F185 to F187) to the PMC.
Using the PMC, determine whether gears need changing, and make the
change if needed. Input gear selection signals GR1 and GR2 <G123#2,
#3(M)/G118#2, #3(T)>, GR21 <G145#6> for 2nd spindle of T series, or
GR31 <G145#7> for 3rd spindle of T series for the selected gear, and
notify the CNC of them.

To perform rigid tapping with the serial spindle, enter the clutch/gear
selection signals CTH1 and CTH2 (G229#3,#2 for the first spindle, and
G223#3, #2 for the second spindle) from the PMC. Notify the serial
spindle control unit of these signals via the CNC, irrespective of the gear
selection method.

� Gear ratio is 1:1, 1:2, 1:4,
1:8 (VGR=0)

(3) Rigid tapping and
machines with
multiple gears



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

461

Changing gears during rigid tapping requires a different process from that
for gear changes during normal machining. As described above, changing
gears conforms to the gear change specifications mentioned in section 9.3
when the M type gear selection method has been selected. With the T type
gear selection method, changing gears conforms to the logic programmed
in the PMC.
Regardless of the option’s selection, if the range in which the spindle
speed specified by the S function code does not correspond to the
currently selected gear, the gears are changed. 
The following tables list the spindle speed ranges for each gear during
normal machining (assuming no machine restrictions) and rigid tapping:

Gear
Spindle speed range (normal machining)

Gear
Lower limit Upper limit

Low–
speed
gear

1 revolution Maximum low–speed gear speed =

Maximum spindle motor speed � L%
Low–speed gear ratio

Medium
speed
gear

Maximum low–speed
gear speed + 1 revo-

lution

Maximum medium–speed gear speed =

Maximum spindle motor speed � L%
Medium speed gear ratio

High–
speed
gear

Maximum medium–
speed gear speed +1

revolution

Maximum high–speed gear speed =

Maximum spindle motor speed � L%
High–speed gear ratio

NOTE
The table shows sample spindle speed ranges for a spindle
having three gears. In the table, L% is a spindle motor
protection constant (up to 100), provided to caluculate the
maximum speed. (Different L values can be specified for
individual gears if gear change method B is selected for M
type gear selection (when the LGCM (bit 6 of parameter
0035) is set to 1.

Gear
Spindle speed range (during rigid tapping)

Gear
Lower limit Upper limit

Low–
speed
gear

1 revolution Maximum low–speed gear speed

Basic spindle motor speed +α
=                                                             

Low–speed gear ratio

Medium
speed
gear

Maximum low–speed
gear speed + 1 revo-

lution

Maximum medium–speed gear speed

Basic spindle motor speed +α
=                                                              

Medium–speed gear ratio

High–
speed
gear

Maximum medium–
speed gear speed +1

revolution

Maximum high–speed gear speed

Basic spindle motor speed +α
=                                                             

High–speed gear ratio



B–61393E–2/029. SPINDLE SPEED FUNCTION

462

NOTE
This table show an example of three gears.  For the basic
spindle motor speed, refer to the spindle motor description
manual.  “+ a” means that the spindle motor speed may
slightly exceed the basic spindle motor speed.

If the M type gear selection method is used, use gear change method B
(bit 6 (G84S) of parameter No. 0012 = 1) in the tapping cycle to specify
the following:

The table above shows the maximum low-speed gear speed during rigid
tapping for low-/medium-speed gear change position D (parameter No.
0540).

The table above shows the maximum medium-speed gear speed during
rigid tapping for medium-/high-speed gear change position E (parameter
No. 0556).

If the T type gear selection method is used, add the rigid tapping logic to
the logic programmed in the PMC.
See Section 9.3, “Spindle Control” for details of the spindle gear change
specifications.

The loop gain can be specified for each gear. Specify “0” for parameter
No. 0615(M)/No.0406(T) and specify loop gains for each gear for
parameter Nos. 0669 to 0671(M)/ Nos.0407 to 0410(T). Unless “0” is
specified for parameter No.0615(M)/No.0406(T), the loop gains for each
gear are disabled, and the loop gain common to all gears, the value of
parameter No.0615 (M)/No.0406(T), is enabled.

Specify the time constant and the maximum spindle speed for each gear.
Use parameters Nos.0692, 0693, and 0613(M)/Nos.0415 to 0418 (T) to
specify the time constant.
Use parameters Nos.0694, 0695 and 0617 (M)/Nos.0423 to 0426(T) to
specify the maximum spindle speed.

For M type gear selection method, set the maximum spindle speed to
parameter No. 0617, irrespective of the number of gear stages used.

Setting bit 5 (RGCTO) of parameter No.0035(M)/bit3(RGCTO) of
parameter No.0029(T) to “1” enables setting of the extraction time
constant for each gear set.  Specify the extraction time constant for each
gear in parameter Nos.0400 to 0402(M)/Nos.0419 to 0422(T).

If bit 3 (VSLRC) of parameter No.0063 (M)/bit 6 (VSLRC) of parameter
No.0063(T) is set to “1”, the gear ratio for the spindle and position coder
can be set to anywhere between 1:32767 and 32767:1 in one-increment
units for three gear sets with M series, four gear sets with T series, or two
gear sets with 2nd position coder of T series.  However 1:8 to 8:1 is the
recommended value.



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

463

In rigid tapping mode, the tapping axis is fed at a rate specified by F; the
spindle speed is S�360(deg/min).  Override is invalid for both of them.
An override of up to 200% can be applied to withdrawal operations by
setting bit 4 (RGDOV) of parameter No. 0063 to “1”, and setting an
appropriate override value in parameter No.0258(M)/No.0254(T). The
time constant for withdrawal operations can be modified by bit 5
(RGCTO) of parameter No.0035(M)/bit3(RGCTO) of parameter
No.0029(T); when it is set to “1”, the values in parameter Nos.0400 to
0402 (M)/Nos.0419 to 0422 (T) are used as the time constant for
withdrawal.

Linear acceleration/deceleration is valid for rigid tapping.

Override is invalid for rigid tapping. Fixed override can be applied to
withdrawal operations by setting bit 4 (RGDOV) of parameters No. 0063
or parameter No.0258 (M)/No.0254(T).

Dry run is valid for G84 (G74). When the dry run is applied to the tapping
axis speed of G84 (G74), tapping is performed. The spindle speed will
match the dry run speed.

Machine lock is valid for G84 (G74).
When G84 (G74) is executed with the machine locked, however the
tapping axis and the spindle do not move.

When the reset operation is performed during rigid tapping, the mode is
reset.  The spindle motor goes to the ordinary mode, but G84 (G74) mode
is not reset.

The feed hold, interlock, and single block functions are effective for G84
(G74).
The feed hold and single block functions in rigid tapping mode can be
nullified by setting bit 2 (RGMFH) of parameter No.0388 (M)/bit 3
(RGMFH) of parameter No. 0397 (T) to “1”.
As with the machine lock signal, the feed hold and single block functions
are also effective for the spindle indirectly, through tapping axis
operations.

G84 (G74) can be executed only in the MEM and MDI modes.

Rigid tapping cannot be performed in the manual feed mode.

In rigid tapping mode, the backlash is compensated for the lost motion at
forward and reverse spindle rotations.  Set it using parameter No.0255
(M)/Nos. 0214 to 0217 (T).  The backlash compensation is normally made
for the tapping axis.

9.11.3
Rigid Tapping
Specification

� Feed rate

� Acceleration and
deceleration

� Override

� Dry run

� Machine lock

� Reset

� Feed hold, interlock, and
single block

� Operation mode

� Manual feed

� Backlash compensation



B–61393E–2/029. SPINDLE SPEED FUNCTION

464

For rigid tapping adjustment, the parameter screen displays information
related to rigid tapping.

The following information items are displayed, when rigid tapping is
executed:

· Spindle position deviation→ Diagnosis No.627(M)/No.0435(T)

· Number of command pulses distributed to the spindle 
(momentary value)→ Diagnosis No.628(M)/No.0436(T)

· Cumulative number of command pulses distributed to the spindle
→ Diagnosis No.799(M/T)

⋅ Momentary error difference between the spindle and tapping axis
→ Diagnosis No.696(M)/No.0437(T)

⋅ Maximum error difference between the spindle and tapping axis
→ Diagnosis No.697(M)/No.0438(T)

Diagnosis No.696 (M)/No.0437(T) is cleared to “0” when rigid tapping
mode is set or canceled, and diagnosis No.697 (M)/0438(T) is cleared to
“0” in the positioning of the rigid tapping cycle.
The following figure shows the tapping axis as the Z axis.

9.11.4
Display Data on the
Diagnosis



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

465

Z–axis
error

Ze
Zc

Zc =
Speed

60
× 1

Gain
× 1

Detection unit
�  102  (Theoretical value)

Ze =  Z–axis error counts (measured value)

Spindle
error

Se

Sc

Sc =
Speed � 360

60
× 1

Gain
× 1

Detection unit
�  102  (Theoretical value)

Se =  Spindle error counts (measured value)

Speed : mm/min or inch/min

Gain : 0.01 s-1

Detection unit :mm, inch, or deg

Speed : rpm

�Z=
Ze

Zc
�  100  [%]

�S=
Se

Sc
�  100  [%]

The error difference between the spindle and Z axis
can be obtained by �S–�Z.  This value is sampled
at intervals of 64 ms.



B–61393E–2/029. SPINDLE SPEED FUNCTION

466

0435 SPINDLE MOTION ERROR (T series)

0627 SPINDLE MOTION ERROR (M series)

Spindle position deviation during rigid tapping

[Data type] Word

[Unit] Pulse

0436 SPINDLE MOTION PULSE (T series)

0628 SPINDLE MOTION PULSE (M series)

Number of pulses distributed to the spindle during rigid tapping

[Data type] Word

[Unit] Pulse

0437 RIGID ERROR (T series)

0696 RIGID ERROR (M series)

Momentary error difference between the spindle and tapping axis during
rigid tapping (signed)

[Data type] Word

[Unit] %

0438 RIGID ERROR (MAX) (T series)

0697 RIGID ERROR(MAX) (M series)

Maximum error difference between the spindle and tapping axis during
rigid tapping (absolute value)

[Data type] Word

[Unit] %

0799 SPINDLE PULSE(SUM)

Cumulative number of pulses distributed to the spindle during rigid
tapping

[Data type] Two–word

[Unit] Pulse

Diagnosis screen
� Spindle position

deviation

� Number of pulses
distributed to the spindle

� Error difference between
the spindle and tapping
axis (momentary value)

� Error difference between
the spindle and tapping
axis (maximum)

� Cumulative number of 
pulses distributed to the 
spindle during rigid 
tapping



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

467

The rigid tapping command format for the T series is described below.
For an explanation of the command format used with the M series, refer
to Section II.4.2 of the “Operator’s Manual for Machining Center
(B–61404E) ”.

G84
G88

Front tapping cycle
Side tapping cycle

M code for C–axis
clamping

Number of repeats
Cutting feedrate

Dwell time at the bottom face of a
tapped hole and upon R point return

Specifies the position of an R point
Specifies the position of the bottom
face of a tapped hole

Specifies a tapping position.

G�� X(Z)__ C__ Z(X)__ R__ P__ F__ K__ (M��) ;

The rigid tapping mode can be specified by using any of three methods:

� Specification of M29S**** before specifying a tapping cycle
� Specification of M29S****in the same block
� Enabling rigid tapping to be performed without specifying M29S****

When using the third method, specify S**** either before or in a block
containing G84 (G88).

Thus, the spindle stops, after which the tapping cycle specified next is
placed in rigid tapping mode.

Rigid tapping mode can be canceled by G80;.  Note, however, that a G
code for another canned cycle, or a group 01 G code can also cancel rigid
tapping mode.

When rigid tapping is terminated by a command issued to cancel rigid
tapping mode, the spindle stops.  (Output to the spindle is equivalent to
the specification of S0.)

A reset (by means of the RESET button or an external reset) can also
cancel rigid tapping mode.  Note, however, that canned cycle mode is not
canceled by a reset.

� Specifying M29 before a block containing G84 (G88)
M29 S****;    

G��X(Z)__C__Z (X)__R__P__F__K__  (M��)  ;

X(Z)__C__;

X(Z)__C__;

   ·

   ·

G80;

9.11.5
Command Format

Command format for the
T series

Rigid
tapping
mode



B–61393E–2/029. SPINDLE SPEED FUNCTION

468

� Specifying M29 and G84 (G88) in the same block (Note, however, that
M29 and M�� for C–axis clamping cannot be specified in the same
block.)

G��X(Z)__Z(X)__R__P__F__K__M29****;

X(Z)_C__;

X(Z)__C__;

   ·

   ·

G80;

� Converting G84 (G88) to a G code for rigid tapping (by setting bit 3
(G84RGD) of parameter No. 0076 to 1)

G��X(Z)__C__Z(X)__R_P_F_K_S**** (M��);

X(Z)__C__;

X(Z)__C__;

   ·

   ·

G80;

NOTE
1 In feed per minute mode,  F_/S**** determines a thread

lead.  In feed per rotation mode, F_ specifies a thread lead.
2 S**** must specify a value that does not exceed the value

set in the maximum spindle speed parameter (No. 0423 to
0426) for the gear to be used.  Otherwise, P/S alarm No. 200
is issued in a block containing G84 (G88).

3 F_ must specify a value that does not exceed the maximum
cutting feedrate.  When 0 is specified, P/S alarm No. 201 is
issued.

4 Between M29 and G84 (G88), S and a command for
movement along an axis must not be specified.  Further,
M29 must not be specified in a tapping cycle.  Otherwise,
P/S alarm Nos. 203 and 204 are issued, respectively.

Rigid
tapping
mode

Rigid
tapping
mode

Notes on the T series



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

469

���⋅��� � ������� 	�	
�

      Rapid traverse
      Z (X) axis feed
      
P     Dwell

G84 (G88) (G98 mode) G84 (G88) (G99 mode)

Spindle
stop

Spindle
stop

Motion 1

Motion 2

Spindle CW Spindle CW

Motion 3

Spindle stop P PSpindle stop

Motion 5

Spindle CCW Spindle CCW

Z (X) point ��������	

Spindle 
stop

Spindle 
stop

R pointR point

Motion 4

Motion 6

Initial point

CAUTION
During cutting feed along the Z–axis (X–axis), the feedrate
override is assumed to be 100%.  The spindle speed
override is also assumed to be 100%.  For a retract motion
(motion 5), a fixed override of up to 200% can be applied by
specifying bit 4 (RGDOV) of parameter No. 0063 and
parameter No. 0258 (RGOVR).

NOTE
G code system A does not include G98 (return to initial level)
and G99 (return to R point level).  Return to the initial level
is always used.



B–61393E–2/029. SPINDLE SPEED FUNCTION

470

Rigid tapping is classified into two types: rigid tapping in feed per
rotation mode (G99) and rigid tapping in feed per minute mode (G98).

Example)

The example below specifies rigid tapping in feed per rotation mode for
cutting a thread with a lead of 1 mm at a spindle speed of 1,000 rpm.

O0001 ;    
G99 ;    

⋅
⋅
⋅

M29 S1000 ;  
G84 Z–100.    R–20.    F1. ;    

⋅
⋅
⋅

G80 ;

The example below specifies rigid tapping in feed per minute mode for
cutting the same thread at the same spindle speed as above.  (In feed per
minute mode, F/S determines the thread lead.)

O0002 ;   
G98 ;    

⋅
⋅
⋅

M29 S1000 ;    
G84 Z–100.    R–20.    F1000 ;    

⋅
⋅
⋅

G80 ;

Units of F

Metric input Inch input Remarks

G98 1 mm/min 0.01 inch/min A fractional value
can be specified.

G99 0.0001 mm/ rev 0.000001 inch/rev A fractional value
can be specified.

NOTE
1  G98 and G99 are modal G codes.  Upon power–up, G99

(feed per rotation mode) is set.
2 Even in feed per rotation mode, a pulse distribution

command is converted to a feed per minute command.
Thus, feed per rotation mode does not strictly implement
feed per rotation.  Accordingly, even if the spindle stops for
some reason, the tapping axis (Z–axis or X–axis) does not
stop.

Rigid tapping in feed per
rotation mode



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

471

[Classification] Input signal

[Function] When M29 (miscellaneous function for preparation for rigid tapping) is
specified, the PMC enters rigid tapping mode, then turns on this signal
to notify the CNC.
1 : The PMC enters in rigid tapping mode.
0 : The PMC does not enter rigid tapping mode.
For an explanation of placing the PMC in rigid tapping mode, see the
description of the interface with the PMC, given later.
This signal posts whether the PMC has entered rigid tapping mode.  If this
signal is not set to 1, even when M29 is specified, a P/S alarm is issued in a
G84 (G74) block.

[Classification] Output signal

[Function] During rigid tapping, these signals notify the PMC of whether the spindle
is rotating in the forward or reverse direction.

During rigid tapping, the spindle is:
RGSPP 1 : Rotating in the forward direction (CW).

0 : Not rotating in the forward direction.
RGSPM 1 : Rotating in the reverse direction (CCW).

0 : Not rotating in the reverse direction.
[Output condition] These signals are output when the spindle is rotating in rigid tapping

mode.  This means that, even in rigid tapping mode, these signals are not
output, for example, when the spindle is being positioned to a hole
position, or a dwell operation is in progress at the bottom of a hole or at
an R point.

These signals are not output in the feed hold state or single block stop
state.  When the spindle is placed in the interlock stop state, machine lock
state, or Z–axis ignore state, however, the spindle is not regarded as
having stopped; these signals are output.

These signals are valid only in rigid tapping mode.  In normal spindle
control, these signals are not output; both RGSPP and RGSPM are set to
“0”.

9.11.6
Signal

9.11.6.1
Signals for the rigid
tapping function

Rigid tapping signal 
RGTPN <G123#1>

Spindle rotation 
direction signals
RGSPM, RGSPP 
<F165#1, #0>
(M series)



B–61393E–2/029. SPINDLE SPEED FUNCTION

472

[Classification] Output signal

[Function] These signals post whether the spindle output is 0.  In rigid tapping mode,
these signals are used to cancel rigid tapping in a PMC sequence
associated with rigid tapping.

For details, see the explanation of the interface with the PMC, given later.

[Classification] Output signal

[Function] These signals send S codes specified for the CNC, in BCD format, to the
PMC.

[Output condition] When an S code is specified, the specified value is output, in binary
format, with the signals.  Upon the completion of output, the SF signal
is set to “1”.

Before rigid tapping can be performed, however, parameter setting is
required to output these signals, as described below.
M series: SF output depends on the gear selection method, as described

below.

[1] M–type gear selection method

SF output depends on bit 7 (SFOUT) of parameter No. 0020.

[2] T–type gear selection method
SF output depends on the setting of bit 4 (SFOB) of parameter No.
0029.

T series: The following parameter needs to be set to output S codes and
SF:  Bit 0 (EVSF) of parameter No. 0049 = 1

In rigid tapping, when SF is to be used by the PMC to read an S code
output signal for gear switching or output switching, set the above
parameters as required.

9.11.6.2
Signals related to S code
output

Spindle enable signal 
ENB <F149#4>

Second and third spindle
enable signals 
ENB2 <F164#2>
ENB3 <F164#3>
(T series)

Spindle–speed function 
code signals 
(BCD output)
S11 to S58
<F185#0 to F187#3>

Spindle–speed function 
strobe signal 
SF <F150#2>



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

473

NOTE
The timing charts, given later, give examples of gear
switching by setting the parameters as follows:
M series:  SFOUT = 0, SFOB = 0
T series:  EVSF = 1

[Classification] Output signal

[Operation] When M–type gear selection is being used, these signals are used in a
PMC sequence for rigid tapping.

The signals post, to the PMC, information about a spindle gear to be used,
according to the value of S**** specified at the execution of G84 (G74).

As gear switching becomes necessary, the states of the signals change
together with the SF signal.

The PMC should perform gear switching according to the information
posted by the signals.
Reference information: The table below indicates the relationship

between the output signals and gear selection.

GR3O GR2O GR1O

1st (low) speed gear 0 0 1

2nd (medium) speed gear 0 1 0

3rd (high) speed gear 1 0 0

9.11.6.3
Signals related to gear
switching

Gear selection signals 
(output)
GR3O, GR2O, GR1O
<F152#2, #1, #0>
(M series)



B–61393E–2/029. SPINDLE SPEED FUNCTION

474

[Classification] Input signal

[Operation] When T–type gear selection is being used, these signals are used in a PMC
sequence for rigid tapping.

The signals post, to the CNC, information about a spindle gear to be used.
Reference information: The table below shows the relationship

between the output signals and spindle gear
selection.

GR2 GR1

1st (low) speed gear 0 0

2nd (medium)
speed gear

0 1

3rd (high) speed
gear

1 0

4th (high) speed
gear

1 1

[Classification] Input signal

[Operation] When rigid tapping with the second or third spindle is being performed
(for the T series only), the signal is used in a PMC sequence.

The signal notifies the CNC of spindle gear information when the second
or third spindle has been selected.
The input signal is related to gear selection as described below.

GR21 1 : The second stage is currently selected as the second or third spindle
gear.
0 : The first stage is currently selected as the second or third spindle gear.

GR21
GR31

1st speed gear 0

2nd speed gear 1

When a serial spindle is used, the serial spindle clutch/gear selection
signals (G229#3, #2 for the first spindle, and G233#3, #2 for the second
spindle) must be set in addition to the setting of the gear selection signal
described above.

Gear selection signals 
(input)
GR2, GR1 
<G123#3, #2>
(M series)
<G118#3, #2> (T series)

← In M series rigid tapping, the specifi-
cation of the 4th (high) speed gear

is invalid.  If specified, the system

assumes that the 3rd (high) speed

gear has been specified.

Gear selection signal 
(input)
GR21 <G145#6>
GR31 <G145#7>
(T series)



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

475

See the description of the signals related to gear switching, given above.

[Classification] Input signal

[Operation] SWS1, SWS2, and SWS3 are used to transfer spindle commands when
the multi–spindle control option is used.  In rigid tapping, the signals can
be shared to select a spindle to be used for rigid tapping.

To select a spindle to be used for rigid tapping, set the signals as indicated
below.

Spindle used for rigid Signal statep g
tapping SWS3 SWS2 SWS1

P/S 205 0 0 0

First spindle 0 0 1

2 0 1 0

1 0 1 1

3 1 0 0

1 1 0 1

2 1 1 0

1 1 1 1

WARNING
These signals must be applied before the command for rigid
tapping (M29 S....; G84 X...) is specified.  The states of
these signals must not be changed before rigid tapping has
been completed.

9.11.6.4
Signals related to 
second and third spindle
rigid tapping (T series)

Gear selection signal 
(input)
GR21 <G145#6>
GR31 <G145#7>
(T series)

Signals related to 
multi–spindle control 
(T series)

Spindle selection signals
SWS1, SWS2, SWS3
<G145#0, #1, #2>



B–61393E–2/029. SPINDLE SPEED FUNCTION

476

[Classification] Input signal

[Operation] These signals are used to stop each spindle when the multi–spindle
control option is used.  In a PMC sequence for rigid tapping, the ENB,
ENB2, and ENB3 signals are used.  Accordingly, the logic of the signals
used for a spindle selected to perform rigid tapping must match the logic
of the spindle stop signal *SSTP.

*SSTP1 1 : The output to the first spindle does not specify 0 rpm.
0 : The output to the first spindle specifies 0 rpm.

*SSTP2 1 : The output to the second spindle does not specify 0 rpm.
0 : The output to the second spindle specifies 0 rpm.

*SSTP3 1 : The output to the third spindle does not specify 0 rpm.
0 : The output to the third spindle specifies 0 rpm.

[Classification] Input signal

[Operation] This signal is used to select the second position coder when the
multi–spindle control option is being used.  Note, however, that it cannot
be used with a spindle selected to perform rigid tapping.

1 : Control is exercised using a feedback pulse signal from the second
position coder.

0 : Control is exercised using a feedback pulse signal from the first
position coder.

For rigid tapping, this signal is not used.  Instead, a position loop is
constructed by combining the first spindle with the first position coder, or
by combining the second or third spindle with the second position coder.

However, the display of the actual speed is switched by this signal, even
during rigid tapping.

Spindle–by–spindle stop
signals
*SSTP1, *SSTP2, *SSTP3
<G145#3, #4, #5>

Second position coder 
selection signal 
PC2SLC <G146#7>



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

477

#7
G118

#6 #5 #4 #3
GR2

#2
GR1

#1 #0
(T series)

G123 GR2 GR1 (M series)

G123 PGTPN

GR31G145 GR21 *SSTP3 *SSTP2 *SSTP1 SWS3 SWS2 SWS1 (T series)

PC2SLCG146 (T series)

#7
F149

#6 #5 #4
ENB

#3 #2 #1 #0

F150 SF

F152 GR3O GR2O GR1O (M series)

F164 ENB3 ENB2 (T series)

F165 PGSPM RGSPP (M series)

S28F185 S24 S22 S21 S18 S14 S12 S11

S48F186 S44 S42 S41 S38 S34 S32 S31

F187 S58 S54 S52 S51

The following describes some notes in designing the interface with the
PMC.

The PMC must manage rigid tapping mode as follows:  rigid tapping

mode is set using M29, and is canceled upon the issue of a reset or at the

falling edge of the spindle enable signal ENB in rigid tapping mode.  ENB

is used during rigid tapping in this way, so the spindle stop signal *SSTP

must not be set to “0”.

However, *SSTP and SOR may be used for gear switching.  To do so,
ensure that the PMC does not cancel rigid tapping mode on a falling edge
of ENB while *SSTP is “0”.

In rigid tapping using the second or third spindle with the T series, the
ENB2 or ENB3 signal must be used for rigid tapping mode management.

When the SIND signal is set to “1”, spindle output is controlled by the

signals (SSIN, SGN, R1I to R12I) output from the PMC.

At this time, the effect of ENB is as described above.  In addition, when
rigid tapping mode is canceled in a block containing G80;, the momentary
rotation of the spindle, caused by a delay in the PMC processing, can
result.  Accordingly, the PMC’s control over spindle output must be
disabled in rigid tapping mode by setting SIND to “0”.

9.11.6.5
Signal addresses

9.11.6.6
Notes on interface with
the PMC

Rigid tapping mode 
management and ENB 
(or ENB2, ENB3)

Controlling spindle
output by the PMC



B–61393E–2/029. SPINDLE SPEED FUNCTION

478

For the same reason, the PMC’s control over second or third spindle
output must be disabled in rigid tapping mode by setting SIND2 or SIND3
to “0”.

When T–type gear selection is used, the PMC must determine whether

gear switching is to be performed, and subsequently perform gear

switching as required.  For this purpose, each time a spindle–speed

function code is specified, the spindle–speed function code read signal

(SF) and spindle–speed function code signals (S11 to S58) must be output

to the PMC.  The required parameter settings are described below.

⋅ M series:  Set bit 4 (SFOB) of parameter No. 0029 to 0 to output SF.
⋅ T series:  Set bit 0 (EVSF) of parameter No. 0049 to 1 to output SF.

In general, a block containing M29 (miscellaneous function for

preparation for rigid tapping) specifies S����, S���� being output when

a block containing G84 (G74) is executed.  This means that gear switching

is performed in the block specifying G84 (G74).

M29 (miscellaneous function for preparation for rigid tapping) and S****
specify rigid tapping mode.  When M29 is accepted by the PMC, the
following processing must be performed:

� Stop the spindle when it is rotating.
� Check that the spindle has stopped completely, then set the rigid

tapping signal RGTPN <G123#1> to on.
� Activate the spindle motor.  Activate the motor so that a positive speed

command rotates the spindle in the forward direction (CCW when
viewed from the – side of the tapping axis).

� Return FIN at least 250 ms after activation.

NOTE
The condition “at least 250 ms after activation” results from
there being no way of checking the completion of spindle
motor activation.  Therefore, this wait period serves as an
alternative.  The time required for activation to be completed
varies with the spindle motor and amplifier.  Therefore, this
value of 250 ms is given as a guideline only.

In an M29 block, S**** is not executed, merely being read in.  S**** is
executed in a G84 block.  Spindle output is equivalent to the specification
of S0.

The timing chart is shown in the chart indicating the execution of G84
(G74).

When M29S****; is specified, S**** is read in, spindle output being
equivalent to the specification of S0;.  S**** is output when G84 (G74)
is executed.  Thus, the processing described below is performed.

T–type gear selection
method

Gear switching timing

When rigid tapping mode
is specified

Execution of G84 (G74)



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

479

When using a machine that features multiple gear stages for use with the
spindle motor and spindle, and S���� is outside the previously selected
gear range, the spindle–speed function strobe signal SF <F150#2> and
gear selection signals (output) GR3O, GR2O, GR1O <F152#2, #1, #0>
are output to the PMC.

At this time, perform gear switching at the PMC.

The spindle–speed function strobe signal SF <F150#2> and
spindle–speed function code signals S11 to S58 <F185#0 to F187#3> are
output to the PMC.  (However, parameter setting is required to enable
output of the S codes and SF signal.  See the description of bit 0(EVSF)
of parameter No. 0049.)

At this time, the PMC must determine whether gear switching is to be
performed, and perform gear switching as required.  The selected gear
must be reflected in the gear selection signals (input) GR2 and GR1
<G123#3, #2> (M)/<G118#3, #2> (T) for notification to the CNC.

From GR2 and GR1, the CNC determines which gear is selected.

However, note the difference between the M series and T series, as
described below.

M series: Up to three gear stages are supported.  If the fourth stage is
selected, the system assumes that the third gear has been
selected.

T series: Up to four gear stages are supported for the first spindle, and
up to two gear stages for the second spindle.  (The gear
selection for the second or third spindle is notified to the CNC
by the signal GR21 <G145#6> or GR31 <G154#7>.)

An S code is output in the first block (positioning to tapping position) of
G84 (G74) execution.  However, the spindle motor position loop is closed
in the next block (R point positioning).  Accordingly, spindle speed offset
must be adjusted accurately until the position loop has been closed in the
second block of G84 (G74) execution after the PMC activates the spindle
motor with M29.  Otherwise, the spindle motor may rotate slightly.  (This
applies only to an analog spindle.  No offset adjustment is required for a
serial spindle.)

Rigid tapping mode may be specified by specifying M29 before G84,
specifying M29 and G84 in the same block, or by specifying G84 as a G
code for rigid tapping.  In each case, PMC processing is the same.  (The
M29 code is always output.)

� When M–type gear
selection is used

� When T–type gear
selection is used



B–61393E–2/029. SPINDLE SPEED FUNCTION

480

The timing chart for rigid tapping specification depends on the method
used to specify rigid tapping mode, the gear selection method (M–type or
T–type), and whether to perform gear switching.

From the table, find the appropriate timing chart (Fig. 9.11.7.1 (a) to Fig.
9.11.7.3 (d)) and apply the information it contains as necessary.

Gear 
Specification method

selection
method
M–type
T–type

Gear
switching M29 is specified before

G84 (G74).

M29 and G84 (G74) are
specified in the same

block.

By parameter setting,
G84 (G74) is specified as

a G code for rigid
tapping.

M–type
Not performed Fig.  9.11.7.1 (a) Fig.  9.11.7.2 (a) Fig.  9.11.7.3 (a)

M–ty e
Performed Fig.  9.11.7.1 (b) Fig.  9.11.7.2 (b) Fig.  9.11.7.3 (b)

T–type
Not performed Fig.  9.11.7.1 (c) Fig.  9.11.7.2 (c) Fig.  9.11.7.3 (c)

T–ty e
Performed Fig.  9.11.7.1 (d) Fig.  9.11.7.2 (d) Fig.  9.11.7.3 (d)

NOTE
For more information about the M/T type gear selection
method, see Section 9.3 SPINDLE CONTROL.  Note the
following:
T series: T–type only
M series: M–type when constant surface speed control

is not being used.
T–type  when constant surface speed control

is being used.

9.11.7
Timing Charts for Rigid
Tapping Specification



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

481

M type gear selection method

M29

First block

G84 (G74)

ENB
To be masked to the second
block

Spindle
output

SF

GR1O

GR2O

GR3O

*SSTP

SOR

RGTAP
or
RGTPN

FIN

Rotation

Excitation

SFR

Position loop

250ms

or more

Fig. 9.11.7.1 (a) Gear is not changed

Second block

9.11.7.1
When M29 is specified before G84 (G74)



B–61393E–2/029. SPINDLE SPEED FUNCTION

482

M29

First block

G84 (G74)

ENB

Spindle
output

SF

GR1O

GR2O

GR3O

*SSTP

SOR

250ms

or more

RGTAP
or

RGTPN

FIN

Rotation
Gear change

Excitation SFR

Position loop

To be masked to the
second block

Note This time chart show an example where the gear has shifted from low to middle gear.  One of the gear select signals (GR1O,

GR2O, GR3O) has turned from “1” to “0”, and one of the two remaining signals has turned from “0” to “1”.  This changes

the gear.

*Gear
change
motion

Fig. 9.11.7.1 (b) When gear change is performed (From low to middle gear)

Second block



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

483

T type gear selection method

M29

RTAP
First bllock

G84 (G74)

ENB

Spindle
output

SF

S code
output

GR1

GR2

*SSTP

SOR

250ms

or more

RGTAP
or

RGTPN

FIN

Rotation

Excitation SFR

Position loop

To be masked to the second block

Fig. 9.11.7.1 (c) Gear change is not performed

Second block



B–61393E–2/029. SPINDLE SPEED FUNCTION

484

M29

First block

G84 (G74)

ENB

Spindle
output

SF

S code output

GR1

GR2

*SSTP

SOR

250ms

or more

RGTAP
or

RGTPN

FIN

Rotation
Gear change

Excitation SFR

Position loop

To be masked to the
second block

Note This time chart shows an example where the gear has changed from low to middle gear.  The PMC selects a required gear

through an S code output and selects the gear using the GR1 and GR2 signals to inform CNC of the selected gear.

*Gear
change
motion

Fig. 9.11.7.1 (d) When gear–change is performed (low to middle gear)

Second block



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

485

M type gear selection

M29

First block

G84 (G74)

ENB
To be masked to the second block

Spindle
output

SF

GR1O

GR2O

GR3O

*SSTP

SOR

250ms

or more

RGTAP
or

RGTPN

FIN

Rotation

Excitation SFR

Position
loop

Fig. 9.11.7.2 (a) When gear–change is not performed

Second block

9.11.7.2
M29 and G84 (G74) are specified in the same block



B–61393E–2/029. SPINDLE SPEED FUNCTION

486

M29

First block

G84 (G74)

ENB

Spindle
output

SF

GR1O

GR2O

GR3O

*SSTP

SOR

250ms

or more

RGTAP
or

RGTPN

FIN

Rotation
Gear change

Excitation SFR

Position loop

To be masked to the
second block

Note This time chart shows an example where the gear has shifted from middle high gear.  One of the gear select signals (GR1O,

GR2O, GR3O) has turned from “1” to “0”, and one of the two remaining signals has tuned from “0” to “1”.  This changes

the gear.

Fig. 9.11.7.2 (b) When gear–change is performed (middle to high)

Second block



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

487

T type gear selection method

M29

First block

G84 (G74)

ENB

Spindle
output

SF

S code
output

GR1

GR2

*SSTP

SOR

250ms

or more

RGTAP
or

RGTPN

FIN

Rotation

Excitation SFR

Position loop

To be masked to the
second block

Fig. 9.11.7.2 (c) When gear change is not performed

 Second block



B–61393E–2/029. SPINDLE SPEED FUNCTION

488

M29

First block

G84 (G74)

ENB

Spindle
outpout

SF

S code out-
put

GR1

GR2

*SSTP

SOR

250ms

or more

RGTAP
or

RGTPN

FIN

Rotation
Gear change

Excitation SFR

Position loop

To be masked to the
second block

Note This time chart shows an example where the gear has changed from middle to high gear.  The PMC selects a required gear

through an S code output and selects the gear using the GR1 and GR2 signals to inform CNC of the selected gear.

Fig 9.11.7.2 (d) When gear–change is performed (middle to high gear)

Second block



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

489

M type gear selection

M29

First block

G84 (G74) M29 is commanded
internally.

ENB
To be masked to the
second block

Spindle
output

SF

GR1O

GR2O

GR3O

*SSTP

SOR

250ms

or more

RGTAP
or

RGTPN

FIN

Excitaiton SFR

Position loop

Rotation

Fig. 9.11.7.3 (a) When gear–change is not performed

Second block

9.11.7.3
Specifying G84 (G74) for rigid tapping by parameters



B–61393E–2/029. SPINDLE SPEED FUNCTION

490

M29

First block

G84 (G74) M29 is commanded
internally.

ENB

Spindle
output

SF

GR1O

GR2O

GR3O

*SSTP

SOR

250ms

or more

RGTAP
or 

RGTPN

FIN

Rotation
Gear change

Excitation SFR

Position loop

To be masked to the
second block

Note This time chart shows an example where the gear has shifted from high to low gear.  One of the gear select signals (GR1O,

GR2O, GR3O) has turned from “1” to “0”, and one of the two remaining signals has turned from “0” to “1”.  This changes

the gear.

Fig. 9.11.7.3 (b) When gear change is performed (high to low gear)

Second blcok



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

491

T type gear selection method

M29

First block

G84 (G74) M29 is commanded
internally.

ENB

Spindle
outoput

SF

S code
output

GR1

GR2

*SSTP

SOR

250ms

or more

RGTAP
or

RGTPN

FIN

Rotation

Excitation SFR

Position loop

To be masked to the second block

Fig. 9.11.7.3 (c) When gear change is not performed

Second block



B–61393E–2/029. SPINDLE SPEED FUNCTION

492

M29

First block

G84 (G74) M29 is commanded
internally

ENB

Spindle
output

SF

S code
output

GR1

GR2

*SSTP

SOR

250ms

or more

RGTAP
or

RGTPN

FIN

Rotation
Gear change

Excitation SFR

Position loop

To be masked to the
second blcok

Note This time chart shows an example where the gear has changed from high to low gear.  The PMC selects a required gear

through an S code output and inputs the selected gear using the GR1 and GR2 signals to inform CNC of the selected gear.

Fig. 9.11.7.3 (d) When gear–change is performed (high to low gear)

Second block



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

493

When rigid tapping is completed, the mode is canceled if a G code (such
as G80, canned cycle G code, or Group 01 G code) is issued.
The spindle output is produced in the same way as executing S0.  Cancel
the PMC rigid tapping  mode at the falling edge of the ENB signal (ENB2
or ENB3 signal for 2nd or 3rd spindle of T series) by de-energizing the
spindle; then turn off the rigid tapping mode signal. The system goes to
the next block after confirming that the signal is off.

When gear change is performed using *SSTP and SOR, the ENB signal
can be either “1” or “0”. Do not cancel the PMC’s rigid tapping mode at
the falling edge of the ENB signal under these circumstances. The
position loop is also canceled.

When the CNC is reset, the PMC’s rigid tapping mode must be canceled.
When RGTPE (parameter no. 0040#2(M)/0041#0(T)) is “1”, the system
goes directly to the next block without checking that the rigid tapping
signal is “0”. Set CRG to “1” for systems in which the rigid tapping signal
is always “1”.

G80

(or G code of group 01)

ENB, ENB2, or ENB3

Spindle output

RGTAP
or

RGTPN

Rotation

Excitation

Position loop

9.11.7.4
Timing to cancel rigid
tapping mode



B–61393E–2/029. SPINDLE SPEED FUNCTION

494

WARNING
1 If rigid tapping mode is canceled by a  Group 01 G code,

such as G00 or G01, the block containing the G code is
executed at the same time the ENB signal is turned to “0”.
Therefore, if a block contains an M code for controlling the
spindle, an error may occur during processing in the PMC.

2 When RGTPE (Parameter No.0040#2(M)/0041#0(T)) is 1,
if the next block contains an M code for controlling the
spindle, an error may occur during processing in the PMC,
when:

⋅ Rigid tapping mode is canceled by issuing G80
⋅ Rigid tapping mode is canceled by issuing a Group 01 G

code , such as G00 or G01

NOTE
Rigid tapping mode is canceled as described above
regardless of the gear selection method of M–type or
T–type.



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

495

#7
PSG20003

#6
PSG1

#5 #4 #3 #2 #1 #0
(T series)

PSG20028 PSG1 (M series)

[Data type] Bit

PSG2, PSG1 Gear ratio of spindle to position coder

Magnification PSG2 PSG1

�1 0 0

�2 0 1

�4 1 0

�8 1 1

#7
0012

#6
G84S

#5 #4 #3 #2 #1 #0
(M series)

[Data type] Bit

G84S Gear switching method during tapping cycle (G84, G74)
0 : Method A (Same as normal gear switching method)
1 : Method B (Gears are switched during tapping cycle according to the

spindle speed set in parameters 0540 and 0556)

#7
SFOUT0020

#6 #5 #4 #3 #2 #1 #0
(M series)

[Data type] Bit

SFOUT: The SF signal is output:
0 : When gears are switched
1 : Irrespective of whether gears are switched

#7
0029

#6 #5 #4
SFOB

#3 #2 #1 #0
(M series)

[Data type] Bit

SFOB: When an S code command is issued in constant surface–speed control,
0 : SF is output.
1 : SF is not output:

9.11.8
Parameter

Number of spindle revolutions

Number of position coder revolutions

Magnification�



B–61393E–2/029. SPINDLE SPEED FUNCTION

496

#7
0029

#6 #5 #4 #3
RGCTO

#2 #1 #0
(T series)

0035 RGCTO (M series)

[Data type] Bit

RGCTO Cutting time constant in rigid tapping
0 : Uses a same parameter during cutting and extraction (Parameter Nos.

0613, 0692, and 0693 (M)/Nos. 0415 to 0418(T))
1 : Not use a same parameter during cutting and extraction

Parameter Nos. 0613, 0692, and 0693(M)/Nos.0415 to 0418(T):
Time constant during cutting

Parameter Nos. 0400 to 0402(M)/Nos.0419 to 0422(T):  Time
constant during extraction

0041 RGTPE (T series)
#7 #6 #5 #4 #3 #2 #1 #0

0040 RGTPE (M series)

[Data type] Bit

RGTPE Rigid mode when a rigid mode cancel command is specified (G80, G01
group G code, reset, etc.)
0 : Canceled after rigid mode signal RGTPN <G123#1> is set to 0.
1 : Canceled before rigid mode signal RGTPN <G123#1> is set to 0.

#7
0049

#6 #5 #4 #3 #2 #1 #0
EVSF (T series)

[Data type] Bit

EVSF When the spindle control function (S analog output or S serial output) is
used, S codes and SF are:
0 : Not output for an S command.
1 : Output for an S command.

#7
0057

#6
FXY

#5 #4 #3 #2 #1 #0
(M series)

[Data type] Bit

FXY The drilling axis in the drilling canned cycle is:
0 : Always the Z–axis
1 : The axis selected by the program

NOTE
For the M series, this parameter enables rigid tapping to be
performed by using the basic axis (X, Y, or Z) perpendicular
to a plane specified in the program, or any axis parallel to
that basic axis, as the tapping axis.



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

497

#7
0063

#6
VSLPC

#5 #4
RGDOV

#3 #2 #1 #0
(T series)

RGDOV VSLPC (M series)

[Data type] Bit

VSLPC Any gear ratio between spindle and position coder in rigid tapping
0 : Not used  (The gear ratio is set in parameter Nos.0028#6,

#7(M)/0003#6, #7(T).)
1 : Used  (The gear ratio is set by parameter Nos. 0663 to 0668(M)/0427

to 0434(T).)

RGDOV Override during extraction in rigid tapping
0 : Invalidated
1 : Validated (The override value is set in parameter No.

0258(M)/0254(T).)

#7
0076

#6 #5 #4 #3
G84RGD

#2 #1 #0

[Data type] Bit

G84RGD Method for specifying rigid tapping
0 : An M code specifying the rigid tapping mode is specified prior to the

issue of the G84 (or G74) command. (See parameter No.
0256(M)/0253(T)).

1 : An M code specifying the rigid tapping mode is not used.  (G84
cannot be used as a G code for the tapping cycle; G74 cannot be used
for the reverse tapping cycle.)

0214 Spindle backlash in rigid tapping (First gear) (T series)

0215 Spindle backlash in rigid tapping (Second gear) (T series)

0216 Spindle backlash in rigid tapping (Third  gear) (T series)

0217 Spindle backlash in rigid tapping (Fourth   gear) (T series)

0255 Spindle backlash in rigid tapping (M series)

[Data type] Byte

[Unit of data] Detection unit

[Valid data range] 0 to 127

These parameters set the spindle backlash in rigid tapping.

0253 M code that specifies a rigid tapping mode (T series)

0256 M code that specifies a rigid tapping mode (M series)

[Data type] Byte

[Valid data range] 0 to 255

This parameter sets the M code that specifies the rigid tapping mode.

NOTE
If 0 is set, 29 (M29) is assumed.



B–61393E–2/029. SPINDLE SPEED FUNCTION

498

0254 Override value during rigid tapping extraction (T series)

0258 Override value during rigid tapping extraction (M series)

[Data type] Byte

[Unit of data] 10 %

[Valid data range] 0 to 20

The parameter sets the override value during rigid tapping extraction.

NOTE
The override value is valid when bit 4 (RGDOV) of
parameter No. 0063 is “1”.

#7
0388

#6 #5 #4 #3
RGORT

#2 #1 #0
PCTPH (M series)

NOTE
When this parameter is set, the power must be turned off
before operation is continued.

[Data type] Bit

PCTPH Rigid tapping
0 : Used as a high–speed peck tapping cycle
1 : Not used as a high–speed peck tapping cycle

RGORT When rigid tapping is started:
0 : Spindle orientation is not performed.

1 : Spindle orientation is performed.

NOTE
This parameter can be used only for a serial spindle.
The spindle orientation is a zero return in the serial spindle
servo mode.

0397 RGMFH (T series)
#7 #6 #5 #4 #3 #2 #1 #0

0388 RGMFH (M series)

[Data type] Bit

RGMFH Feed hold and single block in rigid tapping
0 : Invalidated
1 : Validated



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

499

0399 SIG (T series)
#7 #6 #5 #4 #3 #2 #1 #0

0388 SIG (M series)

[Data type] Bit

SIG When gears are changed for rigid tapping, the use of SIND <G124 and
G125> is
0 : Not permitted.
1 : Permitted.

0400 In–position width of tapping axis in rigid tapping (T series)

0618 In–position width of tapping axis in rigid tapping (M series)

[Data type] Word

[Unit of data] Detection unit

[Valid data range] 1 to 32767

This parameter sets the in–position width of a tapping axis in rigid
tapping.

0401 In–position width of spindle in rigid tapping (T series)

0619 In–position width of spindle in rigid tapping (M series)

[Data type] Word

[Unit of data] Detection unit

[Valid data range] 0 to 32767

This parameter sets the in–position width of a spindle in rigid tapping.

CAUTION
The broad in–position width deteriorates the screw
precision.

0402 Limit value of position deviation during movement along the tapping axis for rigid
tapping0620

(T series)

(M series)

[Data type] Word

[Unit of data] Detection unit

[Valid data range] 1 to 23767

This parameter sets the limit of positional deviation during movement
along the tapping axis for rigid tapping.

CAUTION
The units are multiplied by 10 when a high–resolution
detector is used.



B–61393E–2/029. SPINDLE SPEED FUNCTION

500

0403 Return or clearance in peck tapping cycle (M series)

[Data type] Word

[Unit of data]

Increment system IS–A IS–B IS–C Unit

Metric input 0.01 0.001 0.0001 mm

Inch input 0.001 0.0001 0.00001 inch

[Valid data range] 0 to 32767

This parameter sets the return or clearance in the peck tapping cycle.

When bit 0(PCTPH) in parameter No. 0388
is 0 (High–speed peck tapping cycle)

When bit 0(PCTPH) in parameter No. 0388
is 1 (Peck tapping cycle)

q  :  Cutting
d  :  Return

ÄÄq
R
point

d

Z
point

dÄÄq

ÄÄ
ÄÄ

q

q  :  Cutting 
d  :  Clearance

R
point

Z
point

d

d

ÄÄq

ÄÄq

ÄÄ
ÄÄ

q

0403 Limit value of spindle positioning deviation during movement in rigid tapping (T series)

0621 Limit value of spindle positioning deviation during movement in rigid tapping (M series)

[Data type] Word

[Unit of data] Detection unit

[Valid data range] 1 to 32767

This parameter sets the limit value of a spindle  positioning deviation
during movement in rigid tapping.

Limit value =   
60 � G � �

S � 360 � 100 � 1.5

where

S: Maximum spindle speed in rigid tapping

(Setting value of parameter Nos. 0617, 0694, and 0695 (M)/Nos. 0423
to 0426(T))

G: Loop gain of rigid tapping axis

(Setting value of parameter Nos. 0615, and 0669 to 0671 (M)/
Nos.0406 to 0410(T))

�: Detection unit



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

501

Example)

  1: 1: 2

When the spindle motor, spindle, and position coder are
connected as shown left, let the variables be as follows:

S = 3600
G = 3000
L = 360� 

(One spindle rotation per spindle motor rotaion)
� = La / 4096

= 720�/4096
= 0.17578�

La= 720�
(One position coder rotation requires two spindle 
rotations =360� � 2)
4096=Detection pulse per positioncoder rotation

60�3000�0.17578

3600�360�100�1.5
Setting value =

= 6144

SPINDLE 
MOTOR

Spindle
Position
coder

NOTE
The detection unit is a=La/2048 when the position coder
built–in spindle motor uses a position coder of 512 pulses
per revolution.

0404 Limit value of tapping axis positioning deviation during stop in rigid tapping (T series)

0622 Limit value of tapping axis positioning deviation during stop in rigid tapping (M series)

[Data type] Word

[Unit of data] Detection unit

[Valid data range] 1 to 32767

This parameter sets the limit value of a tapping axis positioning deviation
during stop in rigid tapping.

0405 Limit value of spindle positioning deviation during stop in rigid tapping (T series)

0623 Limit value of spindle positioning deviation during stop in rigid tapping (M series)

[Data type] Word

[Unit of data] Detection unit

[Valid data range] 1 to 32767

This parameter sets the limit value of a spindle positioning deviation
during stop in rigid tapping.



B–61393E–2/029. SPINDLE SPEED FUNCTION

502

0406 Position control loop gain of spindle and tapping axis in rigid tapping (Common in
each gear)

(T series)

(M series)0615

[Data type] Word

[Unit of data] 0.01 s–1

[Valid data range] 1 to 9999

This parameter sets the position control loop gain of a spindle and tapping
axis in rigid tapping.

The loop gain setting significantly influences the screw precision.
Perform a cutting test to adjust the loop gain and its multiplier to the
optimum values.

NOTE
To change the loop gain for every gear, set this parameter
value to “0” and set the loop gain for every gear to parameter
Nos. 0669 to 0671 (M)/No.0407 to 0410 (T). If this
parameter value is not “0”, the loop gain for every gear is
invalidated.  This parameter then becomes a loop gain that
is used in common for all gears.

0407 Position control loop gain of spindle and tapping axis in rigid tapping 
(First gear)

(T series)

(M series)0669

0408 Position control loop gain of spindle and tapping axis in rigid tapping 
(Second gear)

(T series)

(M series)0670

0409 Position control loop gain of spindle and tapping axis in rigid tapping 
(Third gear)

(T series)

(M series)0671

0410 Position control loop gain of spindle an tapping axis in rigid tapping 
(Fourth gear)

(T series)

[Data type] Word

[Unit of data] 0.01 s –1

[Valid data range] 1 to 9999

These parameters set the position control loop gain of a spindle and
tapping axis for every gear in rigid tapping.

NOTE
To set the loop gain for every gear, set parameter No.
0615(M)/0406(T) to “0”.



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

503

0411 Spindle loop gain multiplier in the rigid tapping mode (for gear 1) (T series)

0616 Spindle loop gain multiplier in the rigid tapping mode (for gear 1) (M series)

0412 Spindle loop gain multiplier in the rigid tapping mode (for gear 2) (T series)

0624 Spindle loop gain multiplier in the rigid tapping mode (for gear 2) (M series)

0413 Spindle loop gain multiplier in the rigid tapping mode (for gear 3) (T series)

0625 Spindle loop gain multiplier in the rigid tapping mode (for gear 3) (M series)

0414 Spindle loop gain multioplier in the rigid tapping mode (for gear4) (T series)

[Data type] Word

[Unit of data]

[Valid data range] 0 to 32767

Set the spindle loop gain multipliers for gears 1 to 4 in the rigid tapping
mode.  The thread precision depends on the multipliers.  Find the most
appropriate multipliers and 100P gain by conducting the cutting test.

NOTE
These parameters are used for analog spindles.
These parameters are used for analog spindles.

Loop gain multiplier = 2048 �       � � � 1000
where;
E:  Voltage in the velocity command at 1000 rpm
L:  Rotation angle of the spindle per one rotation of the
spindle motor
�:  Unit used for the detection

E

L

Example)

SPINDLE 
MOTOR

Spindle
Position
coder

  1: 1: 2

When the spindle motor, spindle, and position coder are
connected as shown left, let the variables be as follows:

E = 1.667 (V)
(A motor speed of 6000 rpm corresponds to 10
V.)

L = 360°
(One rotation of the spindle corresponds to one
rotation of the spindle motor.)

� = La/4096
= 720°/4096
= 0.17578

La = 720°
(One rotation of the position coder corresponds
to two rotations of the spindle = 360°�2.)
4096 = The number of detected pulses per 
rotation of the position coder



B–61393E–2/029. SPINDLE SPEED FUNCTION

504

� Gear ratio between the spindle and the position coder
1:1 0.08789 degrees. . . . . . . . . . . 

1:2 0.17578 degrees. . . . . . . . . . . 

1:4 0.35156 degrees. . . . . . . . . . . 

1:8 0.70313 degrees. . . . . . . . . . . 

Thus, Loop gain multiplier 
= 2048 � 1.667/360 � 0.17578 � 1000 = 1667

NOTE
When the position coder which is built in a spindle motor
sends 512 pulses per rotation, the unit used for the
detection, a, is La/2048.

0415 Acceleration/deceleration time constant for every gear in rigid tapping
 (First gear)

(T series)

(M series)0692

0416 Acceleration/deceleration time constant for every gear in rigid tapping
 (Second gear)

(T series)

(M series)0693

0417 Acceleration/deceleration time constant for every gear in rigid tapping
 (Third gear)

(T series)

(M series)0613

0418 Acceleration/deceleration time constant for every gear in rigid tapping
(Fourth gear)

(T series)

[Data type] Word

[Unit of data] ms

[Valid data range] 0 to 4000

These parameters set the spindle and tapping axis’s time constant for
every gear during linear acceleration/deceleration in rigid tapping.

Set the time required until a spindle speed reaches the maximum spindle
speed (parameter Nos. 0617, 0694, and 0695 (M)/Nos. 0423 to 0426(T)).
The actual time constant is a proportional value between the maximum
spindle speed and the specified spindle speed.

0419 Acceleration/deceleration time constant during extraction in rigid tapping
 (First gear)

(T series)

(M series)0400

0420 Acceleration/deceleration time constant during extraction in rigid tapping
 (Second gear)

(T series)

(M series)0401

0421 Acceleration/deceleration time constant during extraction in rigid tapping
 (Third gear)

(T series)

(M series)0402

0422 Acceleration/deceleration time constant during extraction in rigid tapping
(Fourth gear)

(T series)

[Data type] Word

[Unit of data] ms



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

505

[Valid data range] 0 to 4000

These parameters set the linear acceleration/deceleration time constant of
a spindle and tapping axis for every gear during extraction in rigid
tapping.

NOTE
The time constant is valid when parameter RGTO
(No.0035#5 (M)/0029#3(T)) is “1”.

0423 Maximum spindle speed in rigid tapping (First gear) (T series)

0694 Maximum spindle speed in rigid tapping (First gear) (M series)

0424 Maximum spindle speed in rigid tapping (Second gear) (T series)

0695 Maximum spindle speed in rigid tapping (Second gear) (M series)

0425 Maximum spindle speed in rigid tapping (Third gear) (T series)

0696 Maximum spindle speed in rigid tapping (Third gear) (M series)

0426 Maximum spindle speed in rigid tapping (Fourth gear) (T series)

[Data type] Two–word

[Unit of data] rpm

[Valid data range] Spindle and position coder gear ratio

1 : 1      0 to 7400

1 : 2      0 to 9999

1 : 4      0 to 9999

1 : 8      0 to 9999

These parameters set the maximum spindle speed for every gear in rigid
tapping.

NOTE
In a system having one–stage gear, set the same value as
parameter No. 0694 to parameter No. 0617. In a system
having two–stage gear, set the same value as parameter
No. 0695 to parameter No. 0617. If it is not set as such, P/S
alarm no. 200 will be informed.
These are applicable to M series.



B–61393E–2/029. SPINDLE SPEED FUNCTION

506

0427 Number of gear teeth on the spindle side in rigid tapping (First gear) (T series)

0663 Number of gear teeth on the spindle side in rigid tapping (First gear) (M series)

0428 Number of gear teeth on the spindle side in rigid tapping (Second  gear) (T series)

0664 Number of gear teeth on the spindle side in rigid tapping (Second  gear) (M series)

0429 Number of gear teeth on the spindle side in rigid tapping (Third  gear) (T series)

0665 Number of gear teeth on the spindle side in rigid tapping (Third  gear) (M series)

0430 Number of gear teeth on the spindle side in rigid tapping (Fourth gear) (T series)

[Data type] Word

[Valid data range] 1 to 32767

These parameters set the number of gear teeth on the spindle side for every
gear when any gear ratio is set in rigid tapping.

NOTE
This parameter is valid when parameter VALPC
(No.0063#3(M)/0063#6(T)), is “1”.
Set the same value to parameters when the spindle has a
position coder.

0431 Number of gear teeth on the position coder side in rigid tapping (First gear) (T series)

0666 Number of gear teeth on the position coder side in rigid tapping (First gear) (M series)

0432 Number of gear teeth on the position coder side in rigid tapping (Second gear) (T series)

0667 Number of gear teeth on the position coder side in rigid tapping (Second gear) (M series)

0433 Number of gear teeth on the position coder side in rigid tapping (Third gear) (T series)

0668 Number of gear teeth on the position coder side in rigid tapping (Third gear) (M series)

0434 Number of gear teeth on the position coder side in rigid tapping (Fourth gear) (T series)

[Data type] Word

[Valid data range] 1 to 32767

These parameters set the number of gear teeth on the position coder side
for every gear when any gear ratio is set in rigid tapping.

NOTE
This parameter is valid when parameter VALPC
(No.0063#3(M)/0063#6(T)), is “1”.
Set the same value to above parameters when the spindle
has a position coder.
A spindle motor incorporating the position coder uses a
position coder with 2048 pulses per revolution.  In this case,
set the value that is two times as many as the actual number
of gear teeth (because of conversion to 4096 pulses per
revolution).



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

507

0540 Spindle speed when switching from gear 1 to gear 2 during tapping (M series)

0556 Spindle speed when switching from gear 2 to gear 3 during tapping (M series)

[Data type] Word

[Unit of data] rpm

[Valid data range] 0 to 32767

When method B is selected (G84S,#6 of parameter 0012, is set to 1) for
the tapping cycle gear switching method, set the spindle speed when the
gears are switched.

Spindle speed
command 
(S command)

Max. output (4095, 10V)

Spindle motor

min. clamp speed 
(Parameter No. 0543)

Max. speed 
at gear1 
parameter 
No. 0541

Spindle motor
max. clamp speed 
(Parameter No. 0542)

Speed at gear 1–2 
change point 
Parameter 
No.0540

Spindle motor speed

Max. speed 
at gear2 
parameter 
No. 0539

Max. speed 
at gear3 
parameter 
No. 0555

Speed at gear 2–3 
change point 
Parameter 
No. 0556



B–61393E–2/029. SPINDLE SPEED FUNCTION

508

������ Message Description

200 ILLEGAL S CODE COM-
MAND

In the rigid tapping, an S value is out
of the range or is not specified.
The maximum value for S which can
be specified in rigid tapping is set in
parameter. Change the setting in the
parameter or modify the program.

201 FEEDRATE NOT FOUND
IN RIGID TAP

In the rigid tapping, no F value is spe-
cified.
Correct the program.

202 POSITION LSI OVER-
FLOW

In the rigid tapping, spindle distribu-
tion value is too large.

203 PROGRAM MISS AT
RIGID TAPPING

In the rigid tapping, position for a rigid
M code (M29) or an S command is
incorrect. Modify the program.

204 ILLEGAL AXIS OPERA-
TION

In the rigid tapping, an axis movement
is specified between the rigid M code
(M29) block and G84 or G74 block for
M series (G84 or G88 block for T
series).  Modify the program.

205 RIGID MODE DI SIGNAL
OFF

Rigid tapping signal (DGNG061#0) is
not 1 when G84 or G74 block for M
series (G84 or G88 block for T series)
is executed though the rigid M code
(M29) is specified.  Consult the PMC
ladder diagram to find the reason the
signal  is not turned on. Modify the
program.

206 CAN NOT CHANGE
PLANE (RIGID TAP)

(M series)

Plane changeover was instructed in
the rigid mode.
Correct the program.

4n0 SERVO ALARM: n–TH
AXIS – EXCESS ERROR

The position deviation value when the
n–th axis (axis 1–8 of rigid tapping
axis) stops is larger than the set
value.
Note) Limit value must be set to
parameter for each axis.

4n1 SERVO ALARM: n–TH
AXIS – EXCESS ERROR

The position deviation value when the
n–th axis (axis 1–8 of rigid tapping
axis) moves is larger than the set
value. 
Note) Limit value must be set to
parameter for each axis.

4n3 SERVO ALARM: n–th
AXIS – LSI OVERFLOW

The contents of the error register for
the n–th axis (axis 1–8 of rigid tapping
axis) are beyond the range of –231 to
231.  This error usually occurs as the
result of an improperly set parame-
ters.

9.11.9
Alarm and Message



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

509

CAUTION
1 When using an analog spindle, set the spindle speed offset

value parameter (No. 0577(M)/0539(T)) accurately.  For the
standard system, a value within –8191 to 8191 must be
specified in this parameter.  To perform rigid tapping, a value
within –1023 to 1023 must be specified.
If the spindle speed offset is set inaccurately, the spindle is
stopped and placed in in–position wait state when tapping
is started.
In rigid tapping with a serial spindle, no setting is required
for parameter No.0577(M)/0539(T).  Be sure to set 0.

2 When the threading and synchronous feed functions are
enabled, the actual spindle speed during rigid tapping is
indicated correctly.  When an arbitrary gear ratio is used (by
setting parameter VLPC (No.0063#3(M)/0063#6(T)) to 1),
however, the actual spindle speed will not be indicated
correctly in normal spindle mode.
When the T series is used, for example, information about
the actual spindle speed is important for lathe machining.
So, be particularly careful when using an arbitrary gear
between the spindle and position coder.

NOTE
1 A spindle pitch error is not compensated for in rigid tapping

mode.  Drift compensation is not made with an analog
spindle.

2 The maximum number of pulses that can be distributed to
the spindle is:
⋅ 32,767 pulses per 8 msec for a serial spindle
⋅ 4,096 pulses per 8 msec for an analog spindle 

(This information is displayed by setting parameter
(No.0627(M)/0436(T)).)

These values vary with the position coder gear ratio setting
and rigid tapping specification.  If a value greater than the
maximum allowable number is specified, P/S alarm No. 202
is issued.

9.11.10
Caution and Notes

����	� ��� �	��� 	�

�
������



B–61393E–2/029. SPINDLE SPEED FUNCTION

510

CAUTION
1 When the spindle orientation function is to be used at the

same time
The spindle orientation function positions the spindle by
using sensors and the PMC, without being directly
controlled by the CNC.
The CNC has no direct control over this processing, instead
following the specifications of the spindle orientation
function being used.

2 When the spindle positioning function is to be used at the
same time
When the spindle positioning function is to be used together
with rigid tapping, rigid tapping mode must not be specified
in spindle indexing mode, and spindle indexing mode must
not be specified in rigid tapping mode.  (Spindle positioning
and rigid tapping cannot be performed simultaneously for a
single spindle.)
This restriction does not apply, however, when
multi–spindle control is applied; rigid tapping can be
performed using the second or third spindle.
The spindle positioning function is effective for the first
spindle only.  This means that when spindle indexing is
performed with the first spindle, rigid tapping can be
specified with the second or third spindle.

3 When the Cs contouring control function for the serial
spindle is used together with the rigid tapping function, the
same motor is used for spindle rotation control, Cs
contouring control, and rigid tapping modes. The following
points must be noted:
(1)Whether to enter Cs contouring control mode or spindle

rotation control mode is selected by the CON (Cs
contouring control switch signal) signal; however, the
system can enter rigid tapping mode regardless of the
state of the CON signal.  When the rigid tapping mode is
canceled the system enters spindle rotation control
mode or Cs contouring control mode according to the
state of the CON signal.

(2)Since the system can change to rigid tapping mode
directly from the Cs contouring contorl mode, use of the
Cs contouring control function enables the tapping tool
to be positioned before rigid tapping begins. Accurate
positioning is not guaranteed. If the rigid tapping cycle
executes gear change or output range changing,
positioning is valid.

Cautions on using 
functions such as the 
spindle positioning 
function at the same 
time



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

511

CAUTION
(3)Although the system can change to rigid tapping mode

directly from Cs contouring contorl mode, positions
designated in Cs contouring control mode are not
preserved if riged tapping mode is canceled by G80.
When the system is changed to rigid tapping mode from
Cs contouring control mode, then returns to the Cs
contouring control mode, G00 or G28 must be issued to
position the tapping tool.

(4)In systems with the serial spindle Cs contouring control
function, the spindle motor is in a state called servo mode
when it is operating in rigid tapping mode.  In servo mode,
it can accept jogging and manual handling feed.  To
prevent this, nullify jogging and manual handling feed of
the Cs contouring axis in the PMC during rigid tapping.

(5)When the multi–spindle control is also available and the
rigid tapping is performed on the second or third spindle,
the rigid tapping can be specified to the second or third
spindle during the Cs contouring control of the first
spindle.

In rigid tapping, the loop gain of the tapping axis is switched so that the
loop gains for position control of the tapping axis and spindle match each
other.

This switching processing is specified by parameter Nos.0615, and 0669
to 0671(M)/Nos.0406 to 0410(T).  The contents of the processing vary
with whether the spindle is an analog or serial spindle, as described below.

⋅ When the spindle is an analog spindle, the loop gains of the spindle and
tapping axis are switched according to the values set in these
parameters.

⋅ When the spindle is a serial spindle, the loop gain of the tapping axis
is switched according to the values set in these parameters.  The loop
gain of the spindle depends on the values set in the serial spindle
parameters and applied gear signals (CTH2, CTH1).

Accordingly, to perform rigid tapping with a serial spindle, the loop gain
for position control of the spindle must be set in the serial spindle
parameters used for rigid tapping.

When multi–spindle control is being used, rigid tapping can also be
performed for the second spindle.  For the serial spindle used for rigid
tapping, set the parameters indicated below.

The parameters indicated below are the major serial spindle parameters
required for the setting and adjustment needed to use a serial spindle.

For details of the serial spindle parameters, refer to the “FANUC AC
Spindle Motor series (Serial Interface) DESCRIPTIONS (B–65042E) or
FANUC AC SPINDLE MOTOR� series PARAMETER MANUAL
(B–65160E).

Position control loop 
gain switching and serial
spindle parameters



B–61393E–2/029. SPINDLE SPEED FUNCTION

512

6544 Proportional gain of the velocity loop in servo mode (gear 1, gear 2)

6545 Proportional gain of the velocity loop in servo mode (gear 3, gear 4)

[Data type] Word

[Valid data range] 0 to 32767

Set a proportional gain for the velocity loop in a servo mode (such as rigid
tapping mode).

6552 Integral gain of the velocity loop in the servo mode (gear 1, gear 2)

6553 Integral gain of the velocity loop in the servo mode(gear 3, gear 4)

[Data type] Word

[Valid data range] 0 to 32767

Set an integral gain of the velocity loop in a servo mode (such as rigid
tapping mode).

6565 Position gain in the servo mode (HIGH) (CFPGH)

6566 Position gain in the servo mode (MEDIUM HIGH) (CFPGMH)

6567 Position gain in the servo mode (MEDIUM LOW) (CFPGML)

6568 Position gain in the servo mode (LOW) (CFPGL)

[Unit of data] 0.01 sec –1

[Valid data range] 0 to 65535

Set a servo loop gain in a servo mode (such as rigid tapping mode).

CAUTION
Set a loop gain for spindle position control in rigid tapping
using a serial spindle.  In these parameters, basically, set
the same values as those set in parameter Nos. 0615 and
0669 to 0671(M)/Nos.0406 to 0410(T) (loop gains for
position control of the tapping axis).

Which serial spindle parameter (i.e., loop gain) is actually used to operate
the spindle depends on the serial spindle clutch/gear selection signals
CTH1 and CTH2 (G229#3, #2 for the first spindle, and G233#3, #2 for
the second spindle).  Accordingly, which parameter is to be used must be
determined by considering the gear switching and PMC software.

The table below indicates the relationship between the spindle gear
selection signals and selected gear numbers.



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

513

CTH1 CTH2 Gear selected Parameter No. to be used

0 0 HIGH 6565
6544 6552

0 1 MEDIUM HIGH 6566
6544 6552

1 0 MEDIUM LOW 6567
6545 6553

1 1 LOW 6568
6545 6553

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.13.2 RIGID TAPPING

CONNECTION MANUAL 
(This manual)

9.3 SPINDLE SPEED CON-
TROL

CONNECTION MANUAL 
(This manual)

9.10 MULTI–SPINDLE

FANUC AC SPINDLE MOTOR 
series (Serial Interface) 
DESCRIPTIONS (B–65042E)

Appen-
dix 3.5

SERIAL SPINDLE RIGID
TAPPING TECHNICAL
MANUAL

9.11.11
Reference item



B–61393E–2/029. SPINDLE SPEED FUNCTION

514

When rigid tapping is stopped, either as a result of an emergency stop or
a reset, the tap may cut into the workpiece.  The tap can subsequently be
drawn out by using a signal.  This function automatically stores
information relating to the tapping that was executed most recently.
When a tap return signal is input, only the rigid tapping cycle return
operation is executed, based on the stored information.  The tap is pulled
towards the R point.  When a return value of α is set in a parameter, the
amount by which the tap is pulled back can be increased by α.

� �

� �

� �

� �

�

2nd return completion
point

1st return completion
point

α

α

LL

Return completion
pointR point

Z point (α=0) (when α is set)

Initial point

Tapping
stopped
point

(1)Start
Reset the CNC, then select MDI mode.  Turning the tapping return
start signal (RTNT) on starts rigid tapping return.

(2)Completion
Upon the completion of rigid tapping return, the tapping return
completion signal (RTPT) is turned on, causing the CNC to
automatically enter the reset state.  Turning the tapping return start
signal off also turns the tapping return completion signal off.

(3)Stop
During tapping return, turning the tapping return start signal off stops
tapping return, thus placing the CNC in the reset state.  To resume rigid
tapping return, restart rigid tapping return.  Rigid tapping return can
also be stopped by means of a reset or feed hold.

9.12
RIGID TAPPING 
RETURN (M SERIES)

Overview

Procedure



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

515

(4)Resume
Once rigid tapping return has been stopped, it can be resumed by
performing the same operation as that used for starting rigid tapping
return.  If rigid tapping return has been completed, however, the start
operation does not restart tapping return.  If return value α is set,
however, the start operation performs tapping return using α only.

(1)Start and completion

Tapping return
start signal (RTNT)

M29 command

Spindle enable
signal (ENB)

Rigid tapping
signal (RGTAP)

M29 completion
signal (FIN)

Spindle excitation

Return movement

Tapping return
completion signal
(RTPT)

In the reset state, turning the tapping return start signal (RTNT) on in MDI
mode causes the rigid tapping M command to be output.  For tapping
return, specify neither gear switching nor orientation.  Signal SF is also
output if no S command has been specified after power–on.

Upon the completion of tapping return, the spindle enable signal (ENB)
is turned off, in the same way as at the end of ordinary rigid tapping.
Therefore, perform the same sequence as that used for canceling rigid
tapping.  Once tapping return has been completed, the tapping return
completion signal (RTPT) is turned on and the CNC enters the reset state.

Time chart



B–61393E–2/029. SPINDLE SPEED FUNCTION

516

(2) Stopping tapping return

Tapping return
start signal (RTNT)

Spindle enable
signal (ENB)

Rigid tapping
signal (RGTAP)

Spindle excitation

Return movement

When tapping return is stopped, the spindle enable signal is turned off, in
the same way as for ordinary rigid tapping.  Therefore, perform the
sequence for canceling rigid tapping.  Also, the CNC enters the reset state
automatically when tapping return is stopped.

[Classification] Input signal

[Function] Draws out the tap, which has cut into the workpiece as a result of rigid
tapping being stopped, to the R point.

[Operation] Setting this signal to 1 enables rigid tapping return.  Rigid tapping return
is not, however, started merely by setting this signal to 1.  See the time
chart for details of the actual rigid tapping return procedure.  If this signal
is set to 0 before the tapping return completion signal (RTPT) is set to 1,
rigid tapping return is stopped.  Rigid tapping return is terminated
normally if this signal is set to 0 after the tapping return completion signal
(RTPT) is set to 1.  Tapping return can be resumed after being stopped.

[Classification] Output signal

[Function] Used to post notification of the completion of rigid tapping return.

[Output condition] This signal is set to 1 upon the completion of rigid tapping return.
This signal is set to 0 when rigid tapping return has not been completed
or when it has not been started.

Signal

Tapping return start
signal RTNT <G123#6>

Tapping return
completion signal RTPT
<F192#6>



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

517

#7
G123

#6
RTNT

#5 #4 #3 #2 #1 #0
(M series)

F192 RTPT (M series)

0378 Override for rigid tapping return

Sets an override value to be applied to rigid tapping return.  No override
is applied if 0 is set.

[Valid data range] 0 to 20

[Unit of data] 10%

NOTE
This parameter is enabled only when the parameter used to
enable tool extraction (RGDOV:  bit 4 of No. 0063) is set to
1.

0960 Return value α for rigid tapping return

Sets an extra return value for rigid tapping return.  The tool will be pulled
beyond the R point by α. If rigid tapping return has already been
completed, the tool is pulled by α only.

[Valid data range] 0 to 99999999

[Unit of data] Input increments

CAUTION
An override can be applied to rigid tapping return, provided
it is enabled with the corresponding parameter (bit 4
(RGDOV) of No. 0063 = 1).

Signal address

Parameter

Caution



B–61393E–2/029. SPINDLE SPEED FUNCTION

518

NOTE
1 Turning the tapping return start signal (RTNT) on starts

tapping return only when the CNC is placed in both the reset
state and MDI mode.

2 The machining data for tapping return is maintained until a
rigid tapping command is subsequently specified, even if
the power is turned off.  Tapping return can, therefore, be
specified even if the power has been turned off after rigid
tapping.

3 Rigid tapping return is not performed if the input increments
(inches or mm) selected when tapping return is specified
differ from those selected when the machining data for
tapping return was stored.

4 If rigid tapping is stopped as a result of an emergency stop,
the position on the tapping axis (Z–axis) is maintained but
the spindle position is lost.  In such a case, therefore, the
positional relationship between the spindle and tapping axis
is not guaranteed when operation is resumed.

5 Rigid tapping return is performed based on the tapping axis
(Z–axis) commands accumulated for tapping.  If rigid
tapping is stopped as a result of an emergency stop,
therefore, rigid tapping return may fail to draw the tapping
tool completely out of the workpiece.  In such a case, set
return value α.

6 During tapping return, switching the mode to manual mode
stops tapping return.

7 For tapping return, the CNC internally activates a return
program.  Tapping return may, therefore, cause some G
codes or M/F/S codes to be overwritten (G80/G84/G74,
G94/G95, G30).

Note



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

519

This function enables the synchronous control of two spindles.  It also
enables the control of the rotation phase of a spindle, allowing
non–standard workpieces as well as rods to be held by either of the two
spindles.

In spindle synchronous control, the spindle to which an S command is
issued is called the master spindle.  A spindle which ignores any S
command that is issued for it, instead rotating synchronously with the
master spindle, is called the slave spindle.

The table below shows the synchronous spindle configuration.

Master spindle Slave spindle

T series/M series First serial spindle Second serial spindle

0–TTC First serial spindle at
tool post 1

First serial spindle at
tool post 2

For details of synchronous–spindle connection, see the description of
serial spindles.

The following description relates to this CNC.

� Synchronous control of spindle phase is executed when the signal for
controlling the spindle phases in synchronization is entered in spindle
synchronization control mode (after output of the signal indicating
that the synchronous control of spindle speed has been completed).
The signal indicating that the synchronous control of spindle phase is
completed is output when the difference between the error pulses of
the two spindles does not exceed the number of pulses specified in
parameter 0303 of the NC function.  
The positions of spindle phase synchronization can be specified in
spindle parameter 6534 on each of tool post 1 and tool post2 with
0–TTC.
When the two spindles are subject to spindle–phase
synchronous–control (until the spindle–phase synchronous–control
completion signal, FSPPH <F178#3>, turns to “1”), they are not
synchronized with each other.
Do not specify spindle–phase synchronous control while the two
spindles are holding a workpiece.  Specifying this item causes phase
synchronous control to start automatically.

� PMC signal, SYCAL <F178#4> is provided to monitor a
synchronization errors between spindles for which spindle
synchronization control or synchronous control of spindle phase is in
effect.  The synchronization error between the two spindles is always
monitored.  The SYCAL signal is set to 1 when the error (the absolute
value of the error pulse) specified in parameter 0576 of tool post 1 is
exceeded, and set to 0 when not exceeded.

9.13
SPINDLE 
SYNCHRONOUS 
CONTROL

General

Synchronous–spindle 
configuration

Supplementary 
description



B–61393E–2/029. SPINDLE SPEED FUNCTION

520

� Constant surface speed control can be executed in synchronization
control even while a workpiece is being held with the two spindles. 
However, if the speed is to change in excess of the specified time
constant, the speed changes within the extent specified by time
constant.

� The maximum speed in synchronization control is determined by the
maximum speed of the spindle motor of master spindle (parameter
6520).

(Example) Maximum speed of the spindle motor of tool post 1:  6000 rpm
Maximum speed of the spindle motor of tool post 2:  4500 rpm

In the example above, a maximum spindle speed of 6,000 rpm is specified
for a spindle of tool post 1, although a spindle–speed command can
specify up to 12 bits, 4096.  If 6,000 rpm is specified while synchronous
control is specified, an overspeed alarm is issued for a spindle of tool post
2.  Therefore, do not specify a value of more than 4,500 rpm in this case.

� Like the conventional spindle speed (S) command for which 4 or 5
digits are issued for the first spindle, the signal for specifying spindle
speed can be generated when spindle synchronization control or
synchronous control of spindle phase are in the process of being put
into effect.  The SIND, SSIN SSGN, R01l to R12l, *SSTP, and SOR
signals are effective as usual.

However, in the usual mode of spindle rotation control, spindle speed
can be controlled by the PMC function when the following conditions
are satisfied:  The SIND signal is set to 1 and the SSIN, SSGN, and
R01l to R12l signals are provided.  When spindle synchronization
control is in the process of being put into effect, something other than
the R01l to R12l signals is required to control the spindle speed in
synchronization.  The maximum spindle gear speed must be properly
set in parameters 0540 to 0543.  When the value set in the parameter
corresponding to the selected gear is 0, the rotations of the spindles are
not synchronized even if a command is entered in the R01I to R12I
signals.

� The S command for the master spindle and the PMC control signal for
spindle control become effective when issued before spindle
synchronization control or synchronous control of spindle phase are
put into effect.  The S command issued in synchronization control
becomes effective for the first spindle immediately after
synchronization control is canceled.

� The load may change due to cutting (or threading).  When the load
changes in spindle synchronization control, the spindle speed may
change and the signal indicating that the synchronous control of
spindle speed is completed may go off temporarily.

� Parameters No. 0080 #6 (for the master spindle) and #7 (for the slave
spindle) are used to set the direction of rotation of the first spindle and
second spindle, respectively.

� The gear ratio of the spindle to the position coder must be set to
one–to–one.

� In spindle synchronization control , the compensation value for
spindle speed offset (parameter 0577(M)/0539(T)) is disabled.



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

521

� A spindle–phase synchronous control command is effective only in
synchronous spindle control mode.  The specified phase can be
repeatedly changed under synchronous control.

[Classification] Input signal

[Function] Selects spindle synchronous control mode for serial interface spindles.

[Operation] Setting this signal to 1 selects spindle synchronous control mode.
Setting this signal to 0 cancels spindle synchronous control mode.

[Classification] Input signal

[Function] Selects spindle phase synchronous control mode for serial interface
spindles. Input this signal after the system has entered the spindle speed
synchronous state (FSPSY <<F178#2> = 1). Once the system has entered
the spindle phase synchronous state (FSPPH <<F178#3> = 1), setting this
signal to 0 does not cause the spindle phase to shift, because the CNC
monitors the rising edge of this signal. Phase alignment is performed even
if this signal is set to 1 in the spindle phase synchronous state.

[Operation] Setting this signal to 1 selects spindle phase synchronous control mode.
Setting this signal to 0 selects spindle phase synchronous control mode.

[Classification] Output signal

[Function] Indicates that spindle synchronous control (rotational speed) has been
completed for serial interface spindles.

[Output condition] This signal is set to 1 in the following case:

1. In spindle synchronous control mode, when the two spindles have
reached the rotational speeds specified with the spindle synchronous
speed command signal and the difference between the speeds of these
spindles does not exceed the value specified with parameter No. 6533

Signal

Spindle synchronous
control signal
SPSYC<G146#2>

Spindle phase
synchronous control
signal
SPPHS<G146#3>

Spindle synchronous
speed control
completion signal
FSPSY<G178#2>



B–61393E–2/029. SPINDLE SPEED FUNCTION

522

This signal is set to 0 in the following cases:

1. In spindle synchronous control mode, when the rotation speeds of the
two spindles are less than those specified with the spindle synchronous
speed command signal

2. In spindle synchronous control mode, when the difference between the
speeds of these spindles exceeds the value specified with parameter
No. 6533

3. When spindle synchronous control mode is not selected

[Classification] Output signal

[Function] Indicates that spindle phase synchronous control (phase control) has been
completed for serial interface spindles.

[Output condition] This signal is set to 1 in the following case:

1. In spindle synchronous control mode, when phase alignment using the
spindle phase synchronous control signal (SPPHS <<G146#3>) has
been completed after the two spindles have reached the rotational
speeds specified with the spindle synchronous speed command signal,
and the difference between the numbers of error pulses for these
spindles does not exceed the value specified with parameter No. 0303

This signal is set to 0 in the following cases:

1. In spindle synchronous control mode, when phase alignment between
the two spindles has not been completed

2. In spindle synchronous control mode, when the difference between the
numbers of error pulses for the two spindles exceeds the value
specified with parameter No. 0303

3. When spindle synchronous control mode is not selected

[Classification] Output signal

[Function] Indicates that the difference between the numbers of error pulses for the
two spindles exceeds the value specified with parameter No. 0576, in
spindle synchronous control mode for serial interface spindles.

[Output condition] This signal is set to 1 in the following case:

1. In spindle synchronous control mode, when the difference between the
numbers of error pulses for the two spindles exceeds the value
specified with parameter No. 0576 after spindle synchronous control
has been completed

Spindle phase
synchronous control
completion signal
FSPPH<G178#3>

Spindle synchronous
control alarm signal
SYCAL<G178#4>



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

523

This signal is set to 0 in the following cases:

1. In spindle synchronous control mode, when the difference between the
numbers of error pulses for the two spindles does not exceed the value
specified with parameter No. 0576

2. When spindle synchronous control mode is not selected

#7
G146

#6 #5 #4 #3
SPPHS

#2
SPSYC

#1 #0

F178 SYCAL FSPPH FSPSY

#7
SP2ENG0080

#6
SP1ENG

#5 #4 #3 #2 #1 #0

[Data type] Bit

SP1ENG In controlling the spindle synchronization, the direction of the first
spindle (master spindle) motor rotation is:
0 : The direction indicated by the command sign
1 : The opposite direction to that indicated by the command sign

SP2ENG In controlling the spindle synchronization, the direction of the 2nd
spindle (slave spindle) motor rotation is:
0 : The direction indicated by the command sign
1 : The opposite direction to that indicated by the command sign

0303 Error pulse between two spindles when synchronizing phases in the
serial spindle synchronization control mode

[Data type] Byte

[Unit of data] Pulse

[Valid data range] 0 to 255

Set the difference in error pulses between two spindles when synchroniz-
ing phases in the serial spindle synchronization control mode.

When the difference in error pulse between two spindles is within the
value set in this parameter, the spindle phase synchronization completion
signal FSPPH <F178#3> becomes “1”.

This parameter is used to check the difference in phase in synchronization
control and to confirm the completion of synchronization in the serial
spindle synchronization control mode.

Signal address

Parameter



B–61393E–2/029. SPINDLE SPEED FUNCTION

524

0576 Allowable error count for the error pulses between two spindles in the
serial spindle synchronization control mode

[Data type] Word

[Unit of data] Pulse

[Valid data range] 0 to 32767

Set the allowable error count for the error pulses between two spindles in
the serial spindle synchronization control mode.

This parameter is used to output the inter–spindle phase error detection
signal SYCAL in the serial spindle synchronization control mode.  The
SYCAL <F178#4> signal becomes “1” when a phase error exceeding the
value set in this parameter is found.

������ Message Description

194 SPINDLE COMMAND IN
SYNCHRO–MODE

A contour control mode, spindle positioning
(Cs–axis control) mode, or rigid tapping
mode was specified during the serial
spindle
synchronous control mode. Correct the pro-
gram so that the serial spindle synchronous
control mode is released in advance.

NOTE
Signal SYCAL <F178#4> is used for monitoring a phase
shift in synchronous control.  The processing performed
when a phase shift is detected depends on the
specifications determined by the machine tool builder.

FANUC AC SPINDLE MOTOR 
series (Serial interface) 
DESCRIPTIONS (B–65042E)

Appendix 3.3 Start–up procedure for
spindle synchronization
control

FANUC CONTROL MOTOR 
AMPLIFIER � series 
DESCRIPTIONS (B–65162E)

11.7 Spindle synchronization
control

Alarm and message

Note

Reference item



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

525

For spindle synchronous control for serial interface spindles of the
0–TTC, this function can apply control such that the ratio between the
spindle speeds on tool posts 1 and 2 becomes 1:n (n = 1, 2, 3, ...).

This function requires the specification of the spindle synchronous
control option for serial interface spindles.  See also Section 9.13,
”Spindle Synchronous Control” as well as this section.  Setting signal
SBRT to 1 in serial interface spindle synchronous mode causes the spindle
on tool post 2 to rotate at the speed obtained by multiplying the speed of
the spindle at tool post 1 by the magnification set in parameter SBRATIO.

Setting signal SBRT to 0 restores normal spindle synchronous mode.

If the speed of the spindle on tool post 2 exceeds the value set in parameter
RTSMAX, signal RSMAX is set to 1 and the speed of the spindle on tool
post 2 is clamped to the value set in parameter RTSMAX.  At this time,
the speed ratio between the two spindles is maintained.

To check the synchronization between the spindles on the two tool posts
during spindle speed ratio control, the signals FSPPH and SYCAL used
for spindle synchronous control for serial spindles can also be used.

[Function] This signal places the CNC in spindle speed ratio control mode.

[Function] This signal is used to post notification of the speed of the spindle on tool
post 2 being clamped to RTSMAX during spindle speed ratio control.

9.14
CONTROLLING THE 
SPINDLE SPEED 
RATIO FOR SERIAL 
INTERFACE 
SPINDLES (0–TTC)

General

Signal

Spindle synchronous
polygon code signal
SBRT <G146#6>

Serial spindle
synchronization polygon
signal
RSMAX <F189#7>



B–61393E–2/029. SPINDLE SPEED FUNCTION

526

#7
G146

#6
SBRT

#5 #4 #3 #2 #1 #0

#7
RSMAXF189

#6 #5 #4 #3 #2 #1 #0

0249 SBRAITO

[Data type] Byte

This parameter sets the magnification to be applied to the speed of the
spindle on tool post 2 during spindle speed ratio control.
(Valid data range:  1 to 9)

0877 RTSMAX

[Data type] Two–word

This parameter sets the maximum value for the speed of the spindle on
tool post 2 during spindle speed ratio control.
(Valid data range:  0 to 19999 rpm)

Signal address

Parameter



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

527

This function stops the spindle at a specified position.  The spindle can
be stopped in either of the following two ways.

· The spindle is mechanically stopped by using stoppers.

· The spindle is stopped by applying a function of the spindle control
unit.

To mechanically stop the spindle by using, for example, a  stopper, rotate
the spindle at a constant low speed and drive a stopper or pin into the
spindle.  The spindle can be rotated at a constant speed by applying either
of the following methods.

· Spindle orientation signal (See 9.3, “Spindle Control.”)

· Spindle output control by the PMC (See 15.4.)

Some spindle control units can position the spindle motor by using
sensors and position coders.  The CNC itself does not control positioning
by using these units.

In serial spindle orientation by a position coder, the stop position is
specified either by a parameter or by the PMC (spindle orientation
function with the stop position externally set).

[Classification] Input signal

[Function] This command is used for specifying a stop position with an absolute
position within one rotation in the following equation:

=
4096
360

� � (2i Pi)
#n

i=0

where
Pi = 0 when SHAi = 0
Pi = 1 when SHAi = 1

9.15
SPINDLE 
ORIENTATION
General

Mechanical stop

Using the spindle 
control unit

Serial spindle orientation
by a position coder

Signal

Spindle orientation 
signals with the stop 
position externally set

SHA00 to SHA11 for the 
first spindle 
<G110, G111>

SHB00 to SHB11 for the 
second spindle 
<G112, G113>



B–61393E–2/029. SPINDLE SPEED FUNCTION

528

#7
SHA07G110

#6
SHA06

#5
SHA05

#4
SHA04

#3
SHA03

#2
SHA02

#1
SHA01

#0
SHA00

G111 SHA11 SHA10 SHA09 SHA08

SHB07G112 SHB06 SHB05 SHB04 SHB03 SHB02 SHB01 SHB00

G113 SHB11 SHB10 SHB09 SHB08

#7
0080

#6 #5 #4 #3
MORCM2

#2
MORCM1

#1 #0

[Data type] Bit

MORCM1: Whether the stop–position external–setting type orientation function is
used by the first spindle motor
0 : Not used
1 : Used

MORCM2 Whether the stop–position external–setting type orientation function is
used by the second spindle motor
0 : Not used
1 : Used

CAUTION
1 To perform spindle orientation by using the spindle control

unit, the signals of the spindle control unit  must be used.
To perform serial spindle orientation by using a position
coder (to perform serial spindle orientation with the stop
position set externally), the serial spindle control unit signals
must be used.

2 When the spindle orientation function of stop position
external setting type is used, the stop position parameters
in spindle orientation with a position coder (Nos. 6531 and
6071) are invalid.

NOTE
Spindle orientation with the spindle positioning function
differs from that described in this section.  For details, see
Section 9.8, “Spindle Positioning.”

Signal address

Parameter

Caution

Note



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

529

FANUC AC SPINDLE MOTOR 
series (Serial Interface) 
DESCRIPTIONS (B–65042E)

VIII. POSITION CODER METHOD
SPINDLE ORIENTATION

FANUC CONTROL MOTOR 
AMPLIFIER � series 
DESCRIPTIONS (B–65162E)

11.1
12.1

POSITION CODER METHOD
SPINDLE ORIENTATION
MAGNETIC SENSOR
METHOD SPINDLE ORIENTA-
TION

Reference item



B–61393E–2/029. SPINDLE SPEED FUNCTION

530

Spindle output switching switches between the two windings, one for low
speed and the other for high speed, incorporated into the special spindle
motors.  This ensures that the spindle motor demonstrates stable output
characteristics over a wide range.

Since spindle output switching is a function of the spindle control unit,
see also the manual for the spindle control unit being used.

This section describes the relationship between spindle output switching
and the spindle control function in the CNC.

To switch the spindle output characteristics, the windings are usually
switched using a relay.  Prior to the completion of winding switching, the
spindle rotates free from drive.

Output switching changes the relationship between a speed command,
issued from the CNC to the spindle, and the output characteristics of the
spindle motor.  However, the relationship between the speed command
and spindle motor speed is not changed.

During actual machining, the spindle is usually controlled in the
following way.

(1)Constant spindle speed during cutting, such as milling
(2)Continuously changing spindle speed during cutting, such as in

constant surface speed control
(3)Controlling the position loop including the spindle motor during rigid

tapping, spindle positioning, Cs contour control, etc.

For applications such as those in (1), we recommend switching the output
characteristics for low speed and high speed by  using the spindle motor
speed detection signal of the spindle control unit.

For applications such as those described in (2) and (3), the spindle shall
not rotate with no drive applied during cutting or positioning.  It is
necessary for the output characteristics to be switched appropriately
before machining or for output switching to be masked by using a PMC
ladder sequence.

Spindle output switching ensures that the spindle motor demonstrates
stable characteristics over a wide range, and eliminates the mechanical
spindle gear switching mechanism.

In creating a PMC ladder sequence for output switching, however, using
the gear switching of the CNC’s spindle control function (see 9.3) may
facilitate programming.

Note the following points when using gear switching for CNC spindle
control for output switching with a machine tool having no mechanical
gear switching mechanism.

9.16
SPINDLE OUTPUT 
SWITCHING

General

Operation of 
output–switchable 
spindle motor

Output switching timing

Output switching and 
gear switching



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

531

� When gear selection output signals, GR2O and GR1O <F152 #0, #1>,
are used (for machining centers in which constant surface speed
control is not provided and GTT, bit 4 of parameter No. 3706, is set
to 0)

Set two gears, which are almost the same.

(Example: Value of parameter No. 0541 = Maximum spindle speed
– 1, value of No. 0539 = Maximum spindle speed)

When parameter No. 0541 is equal to parameter No. 0539, the CNC
judges that one gear is used, and does not output the GR2O signal.

The parameters related to gear switching points, G845, bit 6 of
parameter No. 0012, and LQCM, bit 6 of parameter No. 0036,
parameter Nos. 0540 and 0585 can be used.

In usual spindle control, depending on the speed at switching points,
the speed specified by the spindle speed command may differ slightly
from the actual speed in the area where the maximum spindle speed
is set to the maximum speed�1.  (This is because the spindle motor
speed, specified by the speed command, is calculated based on the
settings of parameter Nos. 0541, 0589, and 0555.)

This does not apply to rigid tapping.  (Because the machine tool is
controlled using the feedback signal from the detector in the position
loop.)

� When gear selection input signals, GR1 and GR2 <G118 #2, #3>, are
used (for lathes or machining centers in which constant surface speed
control is provided).

Parameter settings are read according to the input signal information.
Unlike the GR2O and GR1O signals, these signals do not require
special parameter settings.

Example) When parameter Nos. 0540 and 0541 are set to the maximum
spindle speed.

Create a PMC sequence that specifies the following. 
For gear 1, set GR1 and GR2 to 0.
For gear 2, set GR2 to 0 and set GR1 to 1.

The PMC must determine the switching timing on the basis of some
information.

CONNECTION MANUAL 
(This manual)

9.3
9.11

SPINDLE CONTROL
RIGID TAPPING

FANUC AC SPINDLE MOTOR 
series (Serial Interface)
DESCRIPTIONS (B–65042E)

XIII OUTPUT SWITCHING
CONTROL

FANUC CONTROL MOTOR 
AMPLIFIER � series 
DESCRIPTIONS (B–65162E)

11.9 OUTPUT SWITCHING
CONTROL

Reference item



B–61393E–2/029. SPINDLE SPEED FUNCTION

532

This function is used to prevent inaccurate threading due to varying
feedback pulses while the spindle is rotating at low speed in
feed–per–rotation mode.  When the direction of any pulse returned in a
certain step is opposite to the direction of rotation as predetermined by the
PMC, the number of those pulses is stored.  The difference between the
number of stored pulses and the feedback pulses returned in the next step
is used for determining the feedrate (Fig. 9.17).

Spindle

Feedback

Stored
pulse

Feedback pulse

Feedback pulse

Number of pulses
for controlling the
feedrate

Fig.9.17

1 This function is enabled when bit 7 of parameter 0074 is set
accordingly.

2 This function is turned on or off by a signal (G105#7).

3 When the direction of any spindle feedback pulse returned in a certain
step is opposite to the direction of rotation specified by the PMC, the
feedback pulses in that step are stored.  The system internally assumes
the feedback of that step to be 0.  (Signal G105#6)

4 If the feedback pulses of the next step have a predetermined direction
of rotation, the difference between the number of these pulses and
those stored in 3, above, is used as the number of feedback pulses for
this step.

1 To enable the function, set the PLCREV bit (bit 7 of parameter 0074)
to 1.

2 Set a direction of rotation of the spindle for this function from the PMC
by using the KILPLUS signal (G105#6).  Set this signal before setting
the function ON/OFF signal PLCRVO (G105#7) to 1.
If the direction of a returned feedback pulse is opposite to the direction
of rotation set by KILPLUS, the feedback pulse is disabled.

3 When the function ON/OFF signal PLCRVO (G105#7) is set to 1, this
function is activated.

9.17
POSITION CODER 
FEEDBACK
CONTROL FUNCTION
(0–TC)

General

Operating procedure



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

533

[Function] This signal disables spindle feedback pulses of a given direction.  (The
signal is valid when the PLCREV bit (bit 7 of parameter 0074) is set to
1.)

[Operation] A feedback pulse having a direction specified by KILPLUS is disabled.

[Function] When KILPLUS is set to 1, positive direction feedback pulses are
disabled.  When KILPLUS is set to 0, negative direction feedback pulses
are disabled.  (This signal is valid when both the PLCREV bit (bit 7 of
parameter 0074) and the PLCRVON signal (G105#7) are set to 1.)

#7
PLCRVONG105

#6
KILPLUS

#5 #4 #3 #2 #1 #0

#7
PLCREV0074

#6 #5 #4 #3 #2 #1 #0

PLCREV 1 : A spindle feedback pulse having a direction opposite to that specified
by the PMC is invalid.

0 : All spindle feedback pulses are valid, irrespective of their direction.

CAUTION
Set the rotation direction selection signal (G105#6) before
setting the signal of G105#7.

NOTE
1 When the number of feedback pulses having a direction

opposite to that specified by the PMC exceeds 3275, the
number of stored pulses is reset to 0.  Then, the remaining
pulses are counted.

2 When there is a feedback pulse having a direction opposite
to that specified by the PMC, SACT also goes to 0.

Signal

Position coder feedback
control signal 
PLCRVON<G105#7>

Position coder feedback
direction selection
signal 
KILPLUS<G105#6>

Signal address

Parameter

Caution



B–61393E–2/029. SPINDLE SPEED FUNCTION

534

In serial spindle simple synchronous control mode, the  second spindle
is controlled based on the spindle control commands for the first spindle.
This function enables the second spindle to use Cs contour axis control,
rigid tapping, and Cs axis control (all of which are optional functions),
which were previously supported only for the first spindle.  The first and
second spindles cannot, however, be controlled independently.  The
second spindle is controlled using the same commands as those for the
first spindle.  In simple synchronous control mode, synchronization
between the first and second spindles may not be guaranteed, for example,
in spindle control mode or during reference position return in Cs contour
axis control mode.

This function requires a software option for serial interfaces.  The PMC
is required for control.  As hardware, two spindle systems, both of which
support the connection of two spindles, are required.

Simple synchronous control mode is selected by inputting the ESRSYC
signal from the PMC.

In spindle mode, the second spindle rotates based on the same commands
as those specified for the first spindle.  When the first and second spindle
units have the same configuration (such as the maximum motor speed and
gear ratio between the motor and spindle), the first and second spindles
rotate at the same speed.  (Synchronization between the first and second
spindles is not guaranteed, however.  This function merely assures that the
motor speeds are the same.)

When this function is used in combination with the Cs contour axis
control option, contouring control can also be applied to the second
spindle.  This means that the second spindle can perform the same
operation as that of the first spindle, not that the two spindles can be
operated independently.  Only a conventional position display is provided
(which displays only the data for the first spindle).  Reference position
return is also performed in the conventional way.  Check for return to the
reference position is, however, performed for both axes, so that the
reference position return completion signal (T series: ZP3, M series: ZP4)
is not turned on until reference position return has been completed for
both axes.  Spindle mode and contouring mode can be switched while
simple synchronous control is applied.

When this function is used in combination with the rigid tapping option,
rigid tapping can also be performed for the second spindle.  This means
that the second spindle can perform the same operation as that being
performed by the first spindle, not that the two spindles can be operated
independently.  Data is displayed in the conventional way, including the
spindle positional deviation, specified with parameter No. 0627.

9.18
SERIAL SPINDLE 
SIMPLE
SYNCHRONOUS
CONTROL

General



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

535

When this function is used in combination with the Cs axis control option,
Cs axis control can also be applied to the second spindle.  This means that
the second spindle can perform the same operation as that being
performed by the first spindle, not that the two spindles can be operated
independently.  Only the conventional position display is provided, in the
same way as for Cs contour axis control.  Orientation is also performed
conventionally.  The completion of orientation is, however, checked for
both spindles.  The spindle indexing sequence also progresses after
checking the completion of indexing for both spindles.

In simple synchronous control mode, commands can be specified in the
same way as ordinary commands for the main spindle, regardless of
whether spindle mode, Cs contour axis control mode, rigid tapping mode,
or Cs axis control mode is selected.  Simple synchronous control does not
require modification of any conventional PMC signal address or
sequence.  Simple synchronous control can be enabled or disabled merely
by turning the ESRSYC signal on or off.

Even during simple synchronous control, a function that is directly
specified from the PMC (such as spindle orientation) controls the two
spindles independently.  Specifically, PMC control for the following
areas is always performed independently for the first and second spindles
regardless of whether simple synchronous control mode is selected:  DGN
DI G229 to G232 and DO F281 to F284 for the first spindle and DGN DI
G233 to G236 and DO F285 to F288 for the second spindle.

While simple synchronous control is applied, synchronization between
the two spindles is not guaranteed in spindle mode.  In Cs contour axis
control mode, rigid tapping mode, or Cs axis control mode, however,
synchronization between the two spindles can be guaranteed by matching
the position gains for the two spindles, except in the following cases:
During reference position return in Cs contour axis control mode or
orientation in Cs axis control mode, or when commands for the spindles
are directly specified from the PMC (such as spindle orientation).

While simple synchronous control is applied, errors are monitored for the
control applied to the first spindle and that applied to the second spindle.
This includes in–position check and the monitoring of excessive errors
during movement, or upon the stop, of the tool.  The same parameters as
those for the first spindle are, however, also used for the second spindle,
and alarms issued upon the occurrence of an error are displayed without
discriminating between the first and second spindles.

While simple synchronous control is applied, the positional deviation and
other data for the first spindle are displayed in the conventional positions.
For the second spindle, only the error (positional deviation) is displayed
at DGN No. 755.

PMC signal SYCAL is provided to monitor mutual errors for the two
spindles while simple synchronous control is applied.  The error between
the two spindles is constantly monitored.  The SYCAL signal is turned
on if the error exceeds the value set in parameter No. 576 (set using the
absolute value of the number of error pulses; detection units vary
depending on whether Cs contour axis control, rigid tapping, or Cs axis
control mode is selected).  The SYCAL signal is turned off once the error
falls below the set value.  This signal is invalid in spindle mode.



B–61393E–2/029. SPINDLE SPEED FUNCTION

536

If this function is used in combination with the serial spindle synchronous
control option, the ESRSYC signal can be turned on only while
synchronous control is not applied.  The synchronous control signal
(SRSYC) also cannot be turned on while simple synchronous control is
applied.  If the synchronous control signal and simple synchronous
control signal are turned on simultaneously, the mode selected first is
maintained and the CNC issues a PS alarm (No. 194).  This alarm remains
active until the most–recently input signal (SRSYC or ESRSYC) is
turned off and the CNC is reset.

In other than synchronous control mode, no restriction is imposed on the
time at which the ESRSYC signal is turned on.  When the first spindle is
used in spindle mode or Cs contour axis control mode, turning on the
ESRSYC signal immediately initializes the second spindle to the same
mode.

In rigid tapping mode or Cs axis control mode, however, turning on the
ESRSYC signal does not place the spindles in simple synchronous
control mode, even though no alarm is issued.  Simple synchronous
control mode is set upon the initialization of the first spindle to spindle
or Cs contour axis control mode after rigid tapping or Cs axis control
mode has been canceled.  Once simple synchronous control mode has
been set, a rigid tapping or Cs axis control command causes the second
spindle to be initialized to rigid tapping or Cs axis control mode, in the
same way as for the first spindle.

No restriction is imposed on the time at which the ESRSYC signal is
turned off.  Turning off the ESRSYC signal immediately initializes the
second spindle to spindle mode, regardless of the previous mode.  The
first spindle maintains the previous mode.

The following table summarizes the state transition of the first and second
spindles according to the ESRSYC and synchronous control (SRSYC)
signals:

Change of simple
synchronous
control signal

ESRSYC
0�1

ESRSYC
1�0

State transition of
first spindle

SP�SP
(main-
tained)

CT�CT
(main-
tained)

*1

SV�SV
(main-
tained)

*2

SP�SP
(main-
tained)

CT�CT
(main-
tained)

SV�SV
(main-
tained)

State transition of
second spindle

SP�SP
*3

SP�CT
*1’

SP�SP
*2’

SP�SP
*4

CT�SP
*4

SV�SP
*4

When used in
combination with
the synchronous
control option

SRSYC = 1 (during synchro-
nous control)
�PS194 alarm is issued.

SRSYC = 0 (not during syn-
chronous control)
�The state changes as listed
above.

SRSYC = 1 (during synchro-
nous control)
�PS194 alarm is released by
resetting the CNC.

SRSYC = 0 (not during syn-
chronous control)
�The state changes as listed
above.

Supplementary
description



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

537

In the above table:
SP indicates spindle mode.
CT indicates Cs contour axis control mode (contouring mode).
SV indicates rigid tapping mode (M series) or Cs axis control mode

(T series).

*1, *1’: The second spindle is initialized to contouring mode.  At this 
time, however, the position of the second spindle is undefined,
so that reference position return must be performed for both the
first and second spindles.  A conventional reference position 
return command can be used.  (Refer to the specifications of 
reference position return for serial spindle Cs contour axis 
control.)

*2, *2’: When the first spindle is used in rigid tapping mode or Cs axis
control mode, the input of the ESRSYC signal is internally 
masked in the CNC, so that simple synchronous control mode
is not set.  Once the first spindle has been initialized to spindle
or contouring mode after the cancellation of rigid tapping or Cs
axis control mode, the second spindle enters simple s
ynchronous control mode, being initialized in the same way as
the first spindle.  Once simple synchronous control mode has 
been set, initialization to rigid tapping or Cs axis control mode,
command execution for that mode, and release from the mode
are performed for both the first and second spindles.

*3 The mode is not changed, but the second spindle is initialized to
spindle mode.  After initialization to spindle mode, the second
spindle rotates at the speed specified for the second spindle, so
that the speed may vary when the signal state changes.

*4 The second spindle is initialized to spindle mode, regardless of
the previous mode.  The first spindle maintains the previous 
mode.

This function stops the first and second spindles in simple synchronous
control mode, regardless of whether spindle, Cs axis, Cs contour axis, or
rigid tapping mode is selected.

In spindle mode, this function has the same effect as the S0 command.
In other modes, this function reduces the pulse distribution to 0.  This
function also disables spindle orientation for the Cs axis and reference
position return for the Cs contour axis.

Because this function stops spindle rotation only, it can be used to
continue machining by stopping only that spindle which becomes
unnecessary during two–spindle control, or to apply parking to the first
spindle so that Cs contour control, Cs axis control, or rigid tapping is
apparently performed with the second spindle.

Parking function



B–61393E–2/029. SPINDLE SPEED FUNCTION

538

CAUTION
1 While the tool is moving in a mode which involves a position

loop, such as Cs contour control, Cs axis control, and rigid
tapping, applying parking causes the actual machine
position to shift from the coordinate system.  This does not
cause an excessive error alarm because it is caused by
parking.  Take particular care, therefore, when using the
parking signal.

2 The parking signal takes effect immediately in simple
synchronous control mode.  If the parking signal is input
during reference position return in Cs contour control mode
or spindle orientation in Cs axis control mode, however,
operation is continued until reference position return or
spindle orientation has been completed.  Only then is
parking applied.

3 While both the first and second spindles are in the parking
state, do not specify reference position return in Cs contour
control mode or spindle orientation in Cs axis control mode.
The specified positioning operation cannot be completed
while both axes are placed in the parking state.

4 Even when the first spindle has completed reference
position return and reference position return completion
signal ZP3 (ZP4 for the M series) has been turned on,
turning on the simple synchronous control signal causes
ZP3 (ZP4 for the M series) to be turned off (because the
second spindle is not positioned to the reference position).
The parking signal input (on/off) is not, however, related to
the state of the reference position return completion signal.
For example, performing reference position return with the
first axis placed in the parking state does not result in the first
spindle being manipulated, but ZP3 (ZP4 for the M series)
is turned on upon the completion of reference position
return for the second spindle.

NOTE
If parking is applied to a spindle in a mode which involves
a position loop, such as Cs contour control, Cs axis control,
or rigid tapping, the spindle is stopped at the current
position, and an excessive error alarm is issued if it is moved
from that position by any external force.  (In simple
synchronous control mode, errors are constantly monitored
for both spindles, regardless of the parking state.)



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

539

[Classification] Input signal

[Function] This signal selects serial spindle simple synchronous control mode.

[Classification] Input signal

[Function] These signals apply parking for the corresponding spindle while serial
spindle simple synchronous control is applied.

[Operation] The spindle specified with PKESS1 or PKESS2 is placed in the stop state
(parking state).

[Function] This signal is used to post notification of the synchronization error
between the two spindles exceeding the set value (parameter No. 576).

[Output condition] This signal is output when the synchronization error between the two
spindles exceeds the value set in parameter No. 576.

#7
G104

#6 #5 #4
ESRSYC

#3 #2 #1 #0

PKESS2G138 PKESS1

F178 SYCAL

Signal

Spindle simple
synchronous control
signal
ESRSYC <G104#4>

Parking signals
PKESS2, PKESS1
<G138#7, #6>

Synchronization error
detection signal
SYCAL <F178#4>

Signal address



B–61393E–2/029. SPINDLE SPEED FUNCTION

540

#7
0071

#6 #5 #4
SRL2SP

#3 #2 #1 #0

[Data type] Bit

SRL2SP 1: Two serial spindles are connected.
0 : One serial spindle is connected.

NOTE
If the option for serial spindle synchronous control is used,
this parameter is automatically set upon power–on.  Once
this parameter has been set, the following operations
become possible:
1) Checking the connection of the second serial spindle

amplifier and communicating with it.
2) Controlling the second spindle in asynchronous control

mode (SIND2).
Serial spindle synchronous control cannot, however, be
used simultaneously with the external key input function,
because the addresses used for SIND2 are shared with
those for external key input.

When using the simple synchronous control function, this parameter must
be set to 1 because two serial spindles are required.

0576 SYCEALM

[Data type] Word

SYCEALM Allowable number of error pulses between the two spindles in serial
spindle synchronous control mode, or allowable number of error pulses
between the two spindles in serial spindle simple synchronous control
mode
Valid data range:  0 to 32767

NOTE
This parameter is used to output the signal (SYCAL) used
to detect the phase error between the two spindles in serial
spindle synchronous control mode.  The signal is turned on
if the phase error detected between the two spindles
exceeds the value set in this parameter.
When using this parameter to detect error pulses in simple
synchronous control mode, particular care regarding the
mode in which the spindle is being used is necessary.  (This
parameter is invalid in spindle mode.  In Cs contour axis
control mode, rigid tapping mode, or Cs axis control mode,
this parameter is valid but the detection units corresponding
to one pulse vary with the mode.)

Parameter



B–61393E–2/02 9. SPINDLE SPEED FUNCTION

541

0754 SRLERRS1

SRLERRS1 Motion error for the main spindle in synchronous control mode or simple
synchronous control mode

0755 SRLERRS2

SRLERRS2 Motion error for the second spindle in synchronous control mode or
simple synchronous control mode

0756 SRLSYCERR

SRLSYCERR Absolute value of the synchronization error between the main spindle and
second spindle in synchronous control mode or simple synchronous
control mode

The above three DGN values are displayed in pulse units.  In synchronous
control mode, one pulse is equivalent to an error of 360/4096 degrees.

In simple synchronous control mode, the detection units corresponding
to one pulse vary depending on whether Cs contour axis control, rigid
tapping, or Cs axis control mode is selected, as well as the detector type
and the method used to mount it.

P/S alarm

Alarm No. Description

��� Contouring, Cs axis control, or rigid tapping mode, or a sim-
ple synchronous control command, has been specified in
serial spindle synchronous control mode.
(Specify the mode or command after canceling synchro-
nous control mode.)
Alternatively, a synchronous control command has been
specified in simple synchronous control mode.
(Specify the command after canceling simple synchronous
control mode.)

System alarm

Alarm No. Description

��� In serial spindle control, the connection of the second
spindle has been specified but the CNC cannot communi-
cate with the second serial spindle amplifier.
(Check that the second amplifier is connected and has
been started.)

Display of positional
deviation in spindle
synchronous control
mode or simple
synchronous control
mode
(DGNOS 0754 to 0756)

Alarm and message



B–61393E–2/029. SPINDLE SPEED FUNCTION

542

NOTE
1 In simple synchronous control mode, the same rotation or

move commands are issued to both the first and second
spindles.  If the direction of rotation specified for a spindle
must be reversed for some reason, the PMC (SFR and SRV
signals) or serial spindle parameters can be used,
depending on the selected mode.

2 In simple synchronous control mode, both the first and
second spindles are monitored.  For example, if a simple
synchronous control command is specified in Cs contour
axis control mode when the second spindle is not excited,
a VRADY OFF alarm may be issued.  Therefore, also pay
careful attention to the PMC used to control the second
spindle.

3 SYCAL is not a latched signal; it is turned on and off while
constantly monitoring whether the error between the two
spindles falls within the allowable range, as specified with
a parameter.

Note



B–61393E–2/02 10. TOOL FUNCTIONS

543

10 TOOL FUNCTIONS



10. TOOL FUNCTIONS B–61393E–2/02

544

(M series)

Selection of tools can be done by commanding tool numbers with up to
an 4-digit numeral after address T.

(T series)

Selection of tools and offset amounts can be done by commanding tool
numbers and offset numbers with up to an 4-digit numeral after address
T.  The offset number is specified with the last one or two digits of the T
code.  The tool number is specified with the  remaining digits after
excluding the one or two digits used to  specify the offset number.

When the last one digit is used to specify the offset number: 
(Parameter T2D (No.0014#0)=1)

T�  �

Offset number

Tool number

When the last two digits are used to specify the offset number: 
(Parameter T2D (No.0014#0)=0)

T�� ��

Offset number

Tool number

When a T code is specified, the code signal and strobe signal correspond-
ing to the specified tool number are issued.  The machine selects a tool
according to the issued signals.  The code signal is held until another T
code is specified.

In a block, no more than one T code can be specified.

See Section 8.1.

#7
0013

#6 #5 #4 #3 #2 #1
GOFU2

#0
(T series)

[Data type] Bit

GOFU2 Geometry offset number of tool offset (When the option of tool
geometry/wear compensation is selected, it is effective.)
0 : Is the same as wear offset number
1 : Specifies the geometry offset number by the tool selection number

10.1
TOOL FUNCTION

General

Signal

Parameter



B–61393E–2/02 10. TOOL FUNCTIONS

545

#7
0014

#6 #5 #4 #3 #2 #1 #0
T2D (T series)

[Data type] Bit

T2D Offset number of tool offset (Wear offset number when option of tool
geometry/wear compensation is selected)
0 : Specified using the lower two digits of a T code
1 : Specified using the lower one digit of a T code

������ Message Description

030 ILLEGAL OFFSET NUM-
BER

(T series)

The offset number in T function speci-
fied for tool offset is too large.
Modify the program.

043 ILLEGAL T–CODE COM-
MAND

(M series)

In a system using the DRILL–MATE
with an ATC, a T code was not speci-
fied together with the M06 code in a
block. Alternatively, the Tcode was out
of range.

CAUTION
When a move command and a tool function are specified in
the same block, the commands  are executed in one of the
following two ways:
(i) Simultaneous execution of the move command and tool

function commands.
(ii) Executing tool function commands upon completion of

move command execution.
The selection of either (i) or (ii) depends on the sequence
program of PMC.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.10.1 TOOL SELECTION FUNCTION

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.10.1 TOOL SELECTION FUNCTION

CONNECTION MANUAL 
(This manual)

8 AUXILIARY FUNCTION

Alarm and message

Caution

Reference item



10. TOOL FUNCTIONS B–61393E–2/02

546

10.2
TOOL COMPENSATION VALUE/
NUMBER OF TOOL COMPENSATION/
TOOL COMPENSATION MEMORY

Tool compensation values include tool geometry compensation values
and tool wear compensation values (Fig. 10.2 (a)).
The geometry compensation and wear compensation can be unified to the
tool compensation.

Geometry
compensation
value

Wear 
Compensation
value

ÇÇÇ
ÇÇÇ
ÇÇÇ
ÇÇÇ

ÇÇÇ

(a) Geometry and wear com-
pensation are discriminated

Tool com-
pensation
value

ÇÇ
ÇÇ
ÇÇ
ÇÇ

ÇÇ

(b) Geometry and were compensa-
tion are not discriminated

Reference position

Nominal
com-
pensation
point

Fig. 10.2(a) Geometric compensation and wear compensation

Tool compensation values can be entered into CNC memory from the
CRT/MDI panel or from a program.
A tool compensation value is selected from the CNC memory when the
corresponding code is specified after address H or D in a program. 
The value is used for tool length compensation, cutter compensation, or
the tool offset.

Tool offset amount range which can be set is as follows:

Increment
system

Tool compensation 
(Geometry compensation) Tool wear compensation

system
Metric input Inch input Metric input Inch input

IS-B

IS-C

�999.999mm

�999.9999mm

�99.9999inch

�99.99999inch

�99.999mm

�99.9999mm

�9.9999 inch

�9.99999inch

The memory can hold 32, 64, 99, or 200 sets of tool compensation values.

One of the tool compensation memory A/B/C can be selected according
to offset amount.
� Tool compensation memory A

There is no difference between geometry compensation memory and
wear compensation memory in this tool compensation memory A.
Therefore, amount of geometry offset and wear offset together is set
as the offset memory.  There is also no differences between cutter
compensation (D code) and tool length compensation (H code).

General (M series)

� Range of tool
compensation value

� Number of tool
compensation

� Tool compensation
memory



B–61393E–2/02 10. TOOL FUNCTIONS

547

� Tool compensation memory B

Memory for geometry compensation and wear compensation is
prepared separately in tool compensation memory B.  Geometry
compensation and wear compensation can thus be set separately.
There is no difference between cutter compensation (D code) and tool
length compensation (H code).

� Tool compensation memory C

Memory for geometry compensation as well as wear compensation is
prepared separately in tool compensation memory C.  Geometry com-
pensation and wear compensation can thus be set separately.  Separate
memories are prepared for cutter compensation (for D code) and for
tool length compensation (for H code).
No separate memory will be added for each compensation type.
Instead, the existing memory is dividend into two, the first for D code
and the second for H code.  So, the quantity of compensation values
of each type is halved, as listed below.

The above description is summarized as follows:

Tool compensation
memory Compensation amount

A
Tool compensation amount 
(Geometry compensation value + Wear 
compensation value)

B
Geometry compensation value

B
Wear compensation value

Geometry compensation value for H code

C
Geometry compensation value for D code

C
Wear compensation value for H code

Wear compensation value for D code



10. TOOL FUNCTIONS B–61393E–2/02

548

Tool compensation values include tool geometry compensation values
and tool wear compensation values (Fig. 10.2 (b)).
Tool compensation can be specified without differentiating compensation
for tool geometry from that for tool wear (Fig. 10.2 (c)).

X axis
geometry
offset
value

X axis
wear
offset
value

Point on the program

Imaginary tool

Actual
tool

Point on the program

Offset
value on
X axis

Offset
value on
Z axis

Fig. 10.2 (b) Difference the 
tool geometry offset from tool
wear offset

Fig.10.2 (c) Not difference the tool
geometry offset from tool wear
offset

Z axis
wear
offset
value

Z axis 
geometry
offset
value

Tool compensation values can be entered into CNC memory from the
CRT/MDI panel or from a program.
A tool compensation value is selected from the CNC memory when the
corresponding code is specified after address T in a program. 
The value is used for tool offset or tool nose radius compensation.

Tool offset amount range which can be set is as follows:

Increment system

Tool compensation 
(geometry compensation, wear compensation)y

Metric input Inch input

IS-B

IS-C

�999.999 mm

�999.9999 mm

�99.9999 inch

�99.99999 inch

The memory can hold 16 or 32 sets of tool compensation values.

There are two types of tool offset amount memory, which can be selected
according to offset amount.

� Tool geometry/wear compensation option not specified

There is no difference between geometry offset memory and wear
offset memory.  Therefore, amount of geometry offset and wear offset
together is set as the offset memory.

� Tool geometry/wear compensation option specified

Memory for geometry compensation and wear compensation is
prepared separately.  Geometry compensation and wear compensation
can thus be set separately.

General (T series)

� Range of tool
compensation value

� Tool compensation
number

� Tool compensation
memory



B–61393E–2/02 10. TOOL FUNCTIONS

549

The above description is summarized as follws:

Tool compensation
memory Compensation amount

Without geometry/
wear compensation

Tool compensation amount (Geometry compensation
value + Wear compensation value)

With geometry/wear
Geometry compensation

g y
compensation Wear compensation

#7
0001

#6 #5 #4
ORC

#3 #2 #1 #0
(T series)

[Data type] Bit

ORC Tool offset value
0 : Set by the diameter specification (Can be set in only the axis under

diameter programming)
1 : Set by the radius specification

#7
0013

#6 #5 #4 #3 #2 #1
GOFU2

#0
(T series)

[Data type] Bit

GOFU2 Geometry offset number of tool offset (When the option of tool geometry/
wear compensation is selected, it is effective.)
0 : Is the same as wear offset number
1 : Specifies the geometry offset number by the tool selection number

#7
0015

#6 #5 #4 #3 #2 #1
NWCH

#0
(T series)

[Data type] Bit

NWCH Characters G and W in the display of tool wear/geometry compensation
amount
0 : The characters are displayed at the left of each number.
1 : The characters are not displayed.

#7
0075

#6 #5 #4 #3
WNPT

#2 #1 #0
(T series)

[Data type] Bit

WNPT Imaginary tool tip direction used for tool nose radius compensation, when
the geometry/wear compensation option is equipped, is the direction
specified by:
0 : Geometry offset number
1 : Wear offset number

Parameter



10. TOOL FUNCTIONS B–61393E–2/02

550

#7
0078

#6 #5 #4 #3 #2 #1
NOINOG

#0
NOINOW

[Data type] Bit

NOINOW Setting the tool wear compensation value by MDI key input is:
0 : Not disabled
1 : Disabled

NOINOG Setting the tool geometry compensation value by MDI key input is:
0 : Not disabled
1 : Disabled

0728 Maximum value of incremental input for tool wear compensation (T series)

[Data type] Two–word

Increment system IS–A IS–B IS–C Unit

Metric input 0.01 0.001 0.0001 mm

Inch input 0.001 0.0001 0.00001 inch

Increment system IS–A IS–B IS–C

Metric input 0 to 99999 0 to 999999 0 to 9999999

Inch input 0 to 99999 0 to 999999 0 to 9999999

This parameter sets the maximum value of tool wear compensation at an
incremental input. If the incremental value exceeds the set value, the
following alarm or warning message is indicated:

Input by G10 P/S 32 offset value is out of range by G10

0729 Maximum value of tool wear compensation (T series)

[Data type] Two–word

Increment system IS–A IS–B IS–C Unit

Metric input 0.01 0.001 0.0001 mm

Inch input 0.001 0.0001 0.00001 inch

Increment system IS–A IS–B IS–C

Metric input 0 to 99999 0 to 999999 0 to 9999999

Inch input 0 to 99999 0 to 999999 0 to 9999999

This parameter sets the maximum value of tool wear compensation. The
following alarm or warning will be informed when the tool wear
compensation (absolute value) exceeding this setting value is set.
 Input by G10 P/S 32 offset value is out of range by G10

������ Message Description

032 ILLEGAL OFFSET VALUE
IN G10

In setting an offset amount by G10 or
in writing an offset amount by system
variables, the offset amount was ex-
cessive.

[Unit of data]

[Valid data range]

[Unit of data]

[Valid data range]

Alarm and message



B–61393E–2/02 10. TOOL FUNCTIONS

551

NOTE
In the 0–TTC, the number of specified tool compensation
values equals the number of tool compensations for each
tool post.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II 14.7 TOOL COMPENSATION VALUES,
NUMBER OF COMPENSATION
VALUES, AND ENTERING VAL-
UES FROM THE PROGRAM (G10)

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II 14.4 TOOL COMPENSATION VALUES,
NUMBER OF COMPENSATION
VALUES, AND ENTERING VAL-
UES FROM THE PROGRAM (G10)

Note

Reference item



10. TOOL FUNCTIONS B–61393E–2/02

552

When tools are classified into several groups, average tool life (No. of
uses or time) is designated for each group.  Whenever a tool is used, the
usage time is subtracted from the tool life; when the tool life expires, the
next tool in the group is selected. The tool sequence within a group is
arranged in advance.

The end of a tool’s life is reported by tool change signal TLCH or
individual tool change signal TLCHI.  Tool change signal TLCH is set to
1 at the end of the life of the last tool of a group.  Individual tool change
signal TLCHI is set to 1 at the end of the life of the current tool.

[Classification] Output signal

[Function] Reports the end of the life of the last tool of a group.

[Output condition] The signal is set to 1 when:

· The life of the last tool of a group ends, after tool change has been
performed each time the end of the life of each tool in a group is
detected.

The signal is set to 0 when:

· Tool–change reset is completed for all groups in which no available
tools remain.

NOTE
The TLCH signal turns to “1” when the CNC is reset by M02
or M30, for instance after the tool life, based on the
frequency of times used, is reached. When tool life is
specified by usage time, TLCH turns to “1” when the tool life
limit is reached. The signal will change during machine
operation, but machining will continue until the end of the
program.

[Classification] Input signal

[Function] Clears all executable data, including the life count of the group, *, and @.

To clear the data, specify a group number by external device after
replacing the worn–out tools that are displayed on the CRT.  The data can
also be cleared from the MDI.

10.3
TOOL LIFE 
MANAGEMENT

General

Signal

Tool change signal 
TLCH <F188#0>

Tool change reset signal
TLRST <G139#7>



B–61393E–2/02 10. TOOL FUNCTIONS

553

[Output condition] When the signal is set to 1, the control unit operates as follows:

· Clears all executable data, including the life count of the group.

If the same group is specified after machining is resumed, the first tool in
the group is selected.

NOTE
Tool change reset signal TLRST is valid only when the
automatic operating signal OP is “0”.

[Classification] Output signal

[Function] Reports the end of the life of the current tool.  The following processing
can be programmed:  A running program is interrupted by a tool-change
program when the signal turns to “1”.  Execution of the interrupted
program is resumed when the tool is changed.

[Output condition] The signal is set to “1 ”when:

· The end of the life of the current tool is detected.

The signal is set to “0” when:

· Individual tool-change reset is executed.

[Classification] Input signal

[Function] Sets the individual tool change signal TLCHI to “0”.

[Operation] When the signal is set to “1”, the control unit operates as follows:

· Sets the individual tool change signal to “0”.

NOTE
1 These signals are valid only when tool life management is

performed on the basis of the tool life calculated in terms of
time or cutting length.

2 Individual tool change signal TLCHI is not cleared by reset.

[Classification] Input signal

[Function] A tool which has not reached its lifespan may be changed by one of two
methods:

Individual tool change
signal TLCHI <F192#0>
(M series)

Individual tool change
reset signal TLRSTI
<G140#4> (M series)

Tool skip signal 
TLSKP <G140#0>



10. TOOL FUNCTIONS B–61393E–2/02

554

(i) Designate the group number for the tool by external device then turn
the tool skip signal TLSKP to “1”. The next T-code command will pass
over the first tool in the group for which the skip was designated, and
select the second tool.

(ii)Turn the TLSKP signal to “1” without designating a group number,
and the machine will skip to the next tool in the group currently in use.

Either of these methods is set using parameter SIG no. 0039#3. Tool life
is counted from zero. When the TLSKP signal is “1” and the last tool in
the group is being used, the TLCH signal turns to “1”.

[Operation] When the signal is set to “1”, the control unit operates as follows:

· Selects the next tool in the group for which a skip is specified with the
next T code.

· Assumes the number of the group to which the current tool belongs.

CAUTION
The cycle start lamp signal (STL) and feed hold lamp signal
(SPL) must both be “0” before inputting the TLSKP signal.

[Classification] Output signal

[Function] Reports that a new tool of a certain group is selected.
This signal can be used when, for example, a compensation value is to be
measured automatically when a new tool is selected.

The new tool select signal is issued at the same timing as TF (tool function
strobe signal).

[Output condition] The signal is set to “1” when:

· A new tool of a certain group is selected.

The signal is set to “0” when:

· The completion signal is set to “1”.

New tool selecting
signal TLNW

Tool function 
strobe signal TF

T code output

End signal FIN

New tool select signal
TLNW <F188#1>



B–61393E–2/02 10. TOOL FUNCTIONS

555

[Classification] Output signal

[Function] Reports that the remaining tool life has reached the set value.

[Operation] The signal is output when the counter value becomes equal to the
remaining tool life that is specified in parameter No. 0489 as the time
allowed until a new tool must be selected.

[Classification] Output signal

[Function] Reports that a tool group in which the operating life of all tools had
expired was selected.

[Operation] The signal is output when a command is issued to a tool group in which
the operating life of all tools has expired.

[Classification] Input signal

[Function] When the TLRST and TLSKP signals are both input, the tool group
number must be given in advance, using the tool group number selection
signals TL01 to TL64.
Command the following value in binary form:

Tool group number to be specified –1

[Operation] A specified tool group is selected.

Remaining tool life
expired signal
TLCHB <F192#2>

All tools’ life expired
signal
TLCHE<F192#1>

Tool group number 
select signal 
TL01 to TL64 
<G139#0 to #6>



10. TOOL FUNCTIONS B–61393E–2/02

556

#7
TLRSTG139

#6
TL64

#5
TL32

#4
TL16

#3
TL08

#2
TL04

#1
TL02

#0
TL01

G140 TLRSTI TLSKP (M series)

F192 TLCHB TLCHE TLCHI

F188 TLNW TLCH

#7
0039

#6 #5
IGSK

#4
GRST

#3
TLSK

#2
TCTM

#1
TST2

#0
GST1 (T series)

M6TCD IGIN IGSK GRST TLSK TCTM GST2 GST1 (M series)

[Data type] Bit

GST1, GST2 This parameter sets the combination of the number of tool life groups
which can be entered, and the number of tools which can be entered per
group as shown in the table below.

Lower side ranges in M series column are for the tool life management of
512 pairs.

GST2 GST1
M series T series

GST2 GST1
Group count Tool count Group count Tool count

0 0 1 to 16
1 to 64

1 to 16
1 to 32

1 to 16 1 to 16

0 1 1 to 32
1 to 128

1 to 8
1 to 16

1 to 32 1 to 8

1 0 1 to 64
1 to 256

1 to 4
1 to 8

1 to 64 1 to 4

1 1 1 to 128
1 to 512

1 to 2
1 to 4

1 to 16 1 to 16

TCTM Tool life
0 : Specified by the number of times
1 : Specified by time

TLSK Group number is
0 : Not input using the tool group number selection signal during tool

skip  (The current group is specified.)
1 : Input using the tool group signal during tool skip

GRST Tool exchange reset signal
0 : Clears only the execution data of a specified group
1 : Clears the execution data of all entered groups

IGSK Input of the tool skip signal when a tool that is not considered tool life
management is selected.
0 : Skips the tool of the group used last or of the specified group (using

TLSK, #3 of parameter No. 0039).
1 : Ignores a tool skip signal

IGIN Tool back number
0 : Not ignored
1 : Ignored

Signal address

Parameter



B–61393E–2/02 10. TOOL FUNCTIONS

557

M6TCD T code in the same block as M06
0 : Judged as a back number
1 : Judged as a next tool group command

#7
M6TST0041

#6 #5 #4 #3 #2 #1 #0
(M series)

[Data type] Bit

M6TST When a T code is specified in the same block as M06
0 : The T code is processed as a return number or as a group number

selected next.  Either is set by parameter M6TCD No. 0039#7.
1 : The tool group life is counted immediately.

0336 Tool life count restart M code

[Data type] Byte

[Valid data range] 0 to 255 (not including 01, 02, 30, 98, and 99)
When zero is specified, it is ignored.

When the life is specified by the number of times, the tool exchange signal
is output when a tool life count restart M code is specified if tool life of at
least one tool group is expired.  A tool in life is selected in the specified
group when a T code command (tool group command) is specified after
the tool life count restart M code is specified.  A tool life counter is then
incremented by one.

When the life is specified by time, a tool in life is selected in the specified
group when a T code command (tool group command) is specified after
the tool life count restart M code is specified.

0489 Remaining tool life allowed until a new tool is selected

[Data type] Word

[Valid data range] 0 to 9999 times (if the tool life is specified in the number of times that the
tool is used)
0 to 4300 minutes (if the tool life is specified in minutes)

The signal TLCHB<F192#2> is issued when the tool life counter reaches
a parameter–specified value.

0599 Tool life management ignored number

[Data type] Word

[Valid data range] 0 to 9999

This parameter sets the tool life management ignored number.

When the set value is subtracted from a T code, a remainder is used as the
tool group number of tool life management when a value exceeding the set
value is specified in the T code.



10. TOOL FUNCTIONS B–61393E–2/02

558

������ Message Description

150 ILLEGAL TOOL GROUP
NUMBER

Tool Group No. exceeds the maximum al-
lowable value.
Modify the program.

151 TOOL GROUP NUMBER
NOT FOUND

The tool group commanded in the machin-
ing program is not set.
Modify the value of program or parameter.

152 NO SPACE FOR TOOL
ENTRY

The number of tools within one group ex-
ceeds the maximum value registerable.
Modify the number of tools.

153 T–CODE NOT FOUND In tool life data registration, a T code was
not specified where one should be. Correct
the program.

154 NOT USING TOOL IN LIFE
GROUP

(M series)

When the group is not commanded, H99 or
D99 was commanded.
Correct the program.

155 ILLEGAL T–CODE IN M06

(M series)

In the machining program, M06 and T code
in the same block do not correspond to the
group in use. Correct the program.

ILLEGAL T–CODE IN M06

(T series)

In the machining program, M06 and T code
in the same block do not correspond to the
group in use. Correct the program.

156 P/L COMMAND NOT FOUND P and L commands are missing at the head
of program in which the tool group is set.
Correct the program.

157 TOO MANY TOOL GROUPS The number of tool groups to be set ex-
ceeds the maximum allowable value. (See
parameter No. 0039 bit 0 and 1) Modify the
program.

158 ILLEGAL TOOL LIFE DATA The tool life to be set is too excessive.
Modify the setting value.

159 TOOL DATA SETTING IN-
COMPLETE

During executing a life data setting pro-
gram, power was turned off. 
Set again.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.10.2 TOOL LIFE MANAGEMENT 
FUNCTION

OPERATOR’S MANUAL
(For Machining Center)
(B–61394E)

II.10.3 TOOL LIFE MANAGEMENT 
FUNCTION

Alarm and message

Reference item



B–61393E–2/02 10. TOOL FUNCTIONS

559

When the tool is moved, the tool path can be shifted by the radius of the
tool.
To make an offset as large as the radius of the tool, first create an offset
vector with a length equal to the radius of the tool (start–up).  The offset
vector is perpendicular to the tool path.  The tail of the vector is on the
workpiece side and the head points to the center of the tool. 
If a linear interpolation, corner offset (cutter compensation B only), or
circular interpolation command is specified after start–up, the tool path
can be shifted by the length of the offset vector during machining. 
To return the tool to the start point at the end of machining, cancel the
cutter compensation mode.

Corner offset

Circular 
interpolation

ÇÇ
ÇÇ
ÇÇ

Start up

Linear
interpolation

Linear  interpolation

Corner offset
Circular interpolation

Circular
interpolation

R2

R1

Y axis

X axis

Fig.10.4.1  (a) Outline of Cutter Compensation B

Start position

Offset vector

Cutter
compensation
cancel

Tool center path

Programmed path

Linear
interpolation

Circular
interpolation

10.4
CUTTER 
COMPENSATION

10.4.1
Cutter 
Compensation B, C 
(M Series)

General



10. TOOL FUNCTIONS B–61393E–2/02

560

ÇÇÇ
ÇÇÇ
ÇÇÇ

Start–up

Cutter 
compensation 
cancel

Fig.10.4.1 (b)  Outline of Cutter Compensation C



B–61393E–2/02 10. TOOL FUNCTIONS

561

#7
0016

#6 #5 #4 #3 #2
SUPM

#1 #0
(M series)

[Data type] Bit

SUPM Start up or cancel in cutter compensation C
0 : Type A
1 : Type B

#7
0036

#6
OFRD

#5 #4 #3 #2 #1 #0
(M series)

[Data type] Bit

OFRD Offset number of tool length compensation, cutter compensation and tool
offset
0 : Specifies the tool length compensation, cutter compensation and tool

offset using H codes
1 : Specifies the tool length compensation using an H code, and cutter

compensation C using a D code

#7
0062

#6 #5 #4 #3 #2
G40V

#1 #0
(M series)

[Data type] Bit

G40V When G40, G41, and G42 are specified independently,
0 : The start up and cancel operation conforms to the standard

specification.
1 : Moves by a distance corresponding to the offset vector which is

vertical to the next block movement.

0557 Limit value that ignores the vector when a tool moves on the outside of a corner
during cutter compensation C

(M series)

[Data type] Word

Increment system IS–A IS–B IS–C Unit

Metric input 0.01 0.001 0.0001 mm

Inch input 0.001 0.0001 0.00001 inch

[Valid data range] 0 to 16383

This parameter sets the limit value that ignores a slight movement
occurring when a tool moves on the outside of the corner during cutter
compensation C.

Parameter

[Unit of data]



10. TOOL FUNCTIONS B–61393E–2/02

562

������ Message Description

033 NO SOLUTION AT CRC A point of intersection cannot be de-
termined for cutter compensation C.
Modify the program.

034 NO CIRC ALLOWED IN
ST–UP /EXT BLK

The start up or cancel was going to
be performed in the G02 or G03 mode
in cutter compensation C. Modify the
program.

035 CAN NOT COMMANDED
G39

G39 is commanded in cutter com-
pensation B cancel mode or on the
plane other than offset plane. Modify
the program.

036 CAN NOT COMMANDED
G31

Skip cutting (G31) was specified in
cutter compensation mode.
Modify the program.

037 CAN NOT CHANGE
PLANE IN CRC

G40 is commanded on the plane oth-
er than offset plane in cutter com-
pensation B. The plane selected by
using G17, G18 or G19 is changed in
cutter compensation C mode. Modify
the program.

038 INTERFERENCE IN CIR-
CULAR BLOCK

Overcutting will occur in cutter com-
pensation C because the arc start
point or end point coincides with the
arc center. 
Modify the program.

041 INTERFERENCE IN CRC Overcutting will occur in cutter com-
pensation C.   Two or more blocks are
consecutively specified in which func-
tions such as the auxiliary function
and dwell functions are performed
without movement in the cutter com-
pensation mode. Modify the program.

042 G45/G48 NOT ALLOWED
IN CRC

Tool offset (G45 to G48) is comman-
ded in cutter compensation. Modify
the program.

OPERATOR’S MANUAL
(For Machining Center)

II.14.4 CUTTER COMPENSATION B
(For Machining Center)
(B–61404E) II.14.5,

14.6
CUTTER COMPENSATION C

Alarm and message

Reference item



B–61393E–2/02 10. TOOL FUNCTIONS

563

It is difficult to produce the compensation necessary to form accurate parts
when using only the tool offset function due to tool nose roundness in
taper cutting or circular cutting.  The tool nose radius compensation
function compensates automatically for the above errors.

ÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇ
ÇÇÇÇÇÇÇÇ

Workpiece

Insufficient
depth of
cutting

Shape processed without tool
nose radius compensation

Tool path without compensation

Tool path with compensation

Tool nose

Fig. 10.4.2 Tool path of tool nose radius compensation

R

#7
0075

#6 #5 #4 #3
WNPT

#2 #1 #0

[Data type] Bit

WNPT Imaginary tool tip direction used for tool nose radius compensation, when
the geometry/wear compensation option is equipped, is the direction
specified by:
0 : Geometry offset number
1 : Wear offset number

0557 Limit value that ignores the vector when a tool moves on the outside of a corner
during too nose radius compensation

(T series)

[Data type] Word

Increment system IS–A IS–B IS–C Unit

Metric input 0.01 0.001 0.0001 mm

Inch input 0.001 0.0001 0.00001 inch

10.4.2
Tool Nose Radius 
Compensation 
(T Series)

General

Parameter

[Unit of data]



10. TOOL FUNCTIONS B–61393E–2/02

564

[Valid data range] 0 to 16383

This parameter sets the limit value that ignores a slight movement
occurring when a tool moves on the outside of a corner during tool nose
radius compensation.

������ Message Description

033 NO SOLUTION AT CRC A point of intersection cannot be de-
termined for tool nose radius com-
pensation. Modify the program.
Modify the program.

034 NO CIRC ALLOWED IN
ST–UP /EXT BLK

The start up or cancel was going to
be performed in the G02 or G03 mode
in tool nose radius compensation.
Modify the program.

035 CAN NOT COMMANDED
G31

Skip cutting (G31) was specified in
tool nose radius compensation mode.
Modify the program.

037 CAN NOT CHANGE
PLANE IN NRC

The offset plane is switched in tool
nose radius compensation.
Modify the program.

038 INTERFERENCE IN CIR-
CULAR BLOCK

Overcutting will occur in tool nose ra-
dius compensation because the arc
start point or end point coincides with
the arc center. 
Modify the program.

039 CHF/CNR NOT AL-
LOWED IN NRC

Chamfering or corner R was specified
with a start–up, a cancel, or switching
between G41 and G42 in tool nose
radius compensation.  The program
may cause overcutting to occur in
chamfering or corner R.  Modify the
program.

040 INTERFERENCE IN
G90/G94 BLOCK

Overcutting will occur in tool nose ra-
dius compensation in canned cycle
G90 or G94.  Modify the program.

041 INTERFERENCE IN NRC Overcutting will occur in tool nose ra-
dius compensation.
Modify the program.

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.14.2, 
14.3

TOOL NOSE RADIUS COM-
PENSATION

Alarm and message

Reference item



B–61393E–2/02 11. PROGRAM COMMAND

565

11PROGRAM COMMAND



11. PROGRAM COMMAND B–61393E–2/02

566

Numerical values can be entered with a decimal point.  A decimal point
can be used when entering a distance, time, or speed.  Decimal points can
be specified with the following addresses:
X, Y, Z, U, V, W, A, B, C, I, J, K, Q, R, and F M series. . . . . . . . . . . . . . . . 
X, Y, Z, U, V, W, A, B, C, I, J, K, R, and F. T series. . . . . . . . . . . . . . . 

There are two types of decimal point notation:  calculator�type notation
and standard notation.
When calculator�type decimal notation is used, a value without decimal
point is considered to be specified in millimeters.  When standard decimal
notation is used, such a value is considered to be specified in least input
increments.  Select either calculator�type or standard decimal notation by
using the CPRD (bit 7 of parameter 0015).  Values can be specified both
with and without decimal point in a single program.

Program command Pocket calculator
type decimal point

programming

Standard type decimal
point programming

X1000
Command value with-
out decimal point

1000mm
Unit : mm

1mm

Unit : Least input increment
(0.001 mm)

X1000.0
Command value with
decimal point

1000mm
Unit : mm

1000mm
Unit : mm

#7
CPRD0015

#6 #5 #4 #3 #2 #1 #0

[Data type] Bit

CPRD When a decimal point is omitted in an address that can include a decimal
point
0 : The least input increment is assumed.
1 : The unit of mm, inches, or s is assumed.  (Pocket calculator type

decimal point programming)

11.1
DECIMAL POINT 
PROGRAMMING/
POCKET
CALCULATOR 
TYPE DECIMAL 
POINT
PROGRAMMING

General

Parameter



B–61393E–2/02 11. PROGRAM COMMAND

567

������ Message Description

007 ILLEGAL USE OF DEC-
IMAL POINT

Decimal point “ ·  ” input error (A deci-
mal point was input after an address
with which it can not be used.  Or two
decimal points were input.)
Modify the program.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.8.4 DECIMAL POINT PROGRAMMING

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.8.3 DECIMAL POINT PROGRAMMING

Alarm and message

Reference item



11. PROGRAM COMMAND B–61393E–2/02

568

There are three G code systems : A,B, and C (Table 11.2).  Select a G code
system using bits 5 (GSPC) and 1 (GSPG) of parameter 0036.

Table 11.2 G code list (1/2)

G code
Gro p F nction

A B C
Group Function

G00 G00 G00 Positioning (Rapid traverse)

G01 G01 G01
01

Linear interpolation (Cutting feed)

G02 G02 G02
01

Circular interpolation/Helical interpolation CW

G03 G03 G03 Circular interpolation/Helical interpolation CCW

G04 G04 G04 Dwell

G05 G05 G05 00 High-speed cycle cutting

G10 G10 G10 Data setting

G17 G17 G17 XpYp plane selection

G18 G18 G18 16 ZpXp plane selection

G19 G19 G19 YpZp plane selection

G20 G20 G70
06

Input in inch

G21 G21 G71
06

Input in mm

G22 G22 G22
09

Stored stroke check function on

G23 G23 G23
09

Stored stroke check function off

G25 G25 G25
08

Spindle speed fluctuation detection off

G26 G26 G26
08

Spindle speed fluctuation detection on

G27 G27 G27 Reference position return check

G28 G28 G28
00

Return to reference position

G30 G30 G30
00

2nd reference position return

G31 G31 G31 Skip function

G32 G33 G33
01

Thread cutting

G34 G34 G34
01

Variable lead thread cutting

G36 G36 G36 Automatic tool compensation X

G37 G37 G37 00 Automatic tool compensation Z

G39 G39 G39 Corner circular interpolation

G40 G40 G40 Tool nose radius compensation cancel

G41 G41 G41 07 Tool nose radius compensation left

G42 G42 G42 Tool nose radius compensation right

G50 G92 G92 Coordinate system setting, max. spindle speed setting

G52 G52 G52 00 Local coordinate system setting

G53 G53 G53 Machine coordinate system setting

G54 G54 G54 Workpiece coordinate system 1 selection

G55 G55 G55 Workpiece coordinate system 2 selection

G56 G56 G56
14

Workpiece coordinate system 3 selection

G57 G57 G57
14

Workpiece coordinate system 4 selection

G58 G58 G58 Workpiece coordinate system 5 selection

G59 G59 G59 Workpiece coordinate system 6 selection

11.2
G CODE SYSTEM 
(T SERIES)

General



B–61393E–2/02 11. PROGRAM COMMAND

569

Table 11.2 G code list (2/2)

G code
FunctionGroup

A
FunctionGroup

CB

G65 G65 G65 00 Macro calling

G66 G66 G66
12

Macro modal call

G67 G67 G67
12

Macro modal call cancel

G68 G68 G68 Mirror image for double turrets ON or balance cutting mode

G69 G69 G69 04 Mirror image for double turrets OFF or balance cutting
mode cancel

G70 G70 G72 Finishing cycle

G71 G71 G73 Stock removal in turning

G72 G72 G74 Stock removal in facing

G73 G73 G75
00 Pattern repeating

(Other than 0–GCC and 00–GCC)

G74 G74 G76 End face peck drilling(Other than 0–GCC and 00–GCC)

G75 G75 G77 Outer diameter/internal diameter drilling(Other than 0–GCC and 00–GCC)

G76 G76 G78 Multiple threading cycle(Other than 0–GCC and 00–GCC)

G71 G71 G72 Traverse grinding cycle (For 0–GCC and 00–GCC)

G72 G72 G73
01

Traverse direct constant–demension grinding cycle 
(For 0–GCC and 00–GCC)

G73 G73 G74 Oscilation grinding cycle (For 0–GCC and 00–GCC)

G74 G74 G75 Oscilation direct constant–dimension grinding cycle(For 0–GCC and 00–GCC)

G80 G80 G80 Canned cycle for drilling cancel

G83 G83 G83 Cycle for face drilling

G84 G84 G84
10

Cycle for face tapping

G86 G86 G86
10

Cycle for face boring

G87 G87 G87 Cycle for side drilling

G88 G88 G88 Cycle for side tapping

G89 G89 G89 Cycle for side boring

G90 G77 G20 Outer diameter/internal diameter cutting cycle

G92 G78 G21 01 Thread cutting cycle

G94 G79 G24 Endface turning cycle

G96 G96 G96
02

Constant surface speed control

G97 G97 G97
02

Constant surface speed control cancel

G98 G94 G94
05

Per minute feed

G99 G95 G95
05

Per revolution feed
 G90 G90

03
Absolute programming

 G91 G91
03

Incremental programming

 G98 G98
11

Return to initial level (See Note 6 )

 G99 G99
11

Return to R point level (See Note 6 )

G107 G107 G107 00 Cylindrical interpolation

G112 G112 G112
21

Polar coordinate interpolation mode

G113 G113 G113
21

Polar coordinate interpolation mode cancel

G250 G250 G250
20

Polygonal turning cancel

G251 G251 G251
20

Polygonal turning



11. PROGRAM COMMAND B–61393E–2/02

570

NOTE
1 If the CNC enters the clear state (see bit 6 (CLER) of

parameter 0045) when the power is turned on or the CNC
is reset, the modal G codes change as follows.
(1) G codes marked with       in Table 11.2 are enabled.
(2) When the system is cleared due to power�on or reset,

whichever specified, either G20 or G21, remains
effective.

(3) G22 is set when the system is cleared due to power�on.
When the system is cleared due to reset, whichever
specified, either G22 or G23, remains effective.

(4) Setting bit 6 (G01) of parameter 0011 determines which
code, either G00 or G01, is effective.

(5) Setting bit 7 (G91) of parameter 0030 determines which
code, either G90 or G91, is effective.

2 G codes of group 00 except G10 and G11 are single�shot
G codes.

3 Alarm 010 is displayed when a G code not listed in the G
code list is specified or a G code without a corresponding
option is specified.

4 G codes of different groups can be specified in the same
block.
If G codes of the same group are specified in the same
block, the G code specified last is valid.

5 If a G code of group 01 is specified in a canned cycle, the
canned cycle is canceled in the same way as when a G80
command is specified.  G codes of group 01 are not affected
by G codes for specifying a canned cycle.

6 When G code system A is used for a canned cycle, only the
initial level is provided at the return point.

7 G codes are displayed for each group number.

#7
0011

#6
G01

#5 #4 #3 #2 #1 #0

[Data type] Bit

G01 Mode entered when the power is turned on or when the control is cleared
0 : G00 mode (positioning)
1 : G01 mode (linear interpolation)

#7
G910030

#6 #5 #4 #3 #2 #1 #0

[Data type] Bit

G91 When the power is turned on or when the control is cleared
0 : G90 mode (absolute command)
1 : G91 mode (incremental command)

Note

Parameter



B–61393E–2/02 11. PROGRAM COMMAND

571

#7
0036

#6 #5
GSPC

#4 #3 #2 #1
GSP

#0

[Data type] Bit

GSP Type of the special G code system
1 : Type B
0 : Type A

GSPC Type of the special G code system
1 : Type C
0 : Type A

#7
0045

#6
CLER

#5 #4 #3 #2 #1 #0

[Data type] Bit

CLER Reset button on the CRT/MDI panel, external reset signal, reset and
rewind signal, and emergency stop signal
0 : Cause reset state.
1 : Cause clear state.

For the reset and clear states, refer to APPENDIX E of operator’s manual

(B–61394E).

������ Message Description

010 IMPROPER G–CODE An unusable G code or G code corre-
sponding to the function not provided is
specified. Modify the program.

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.3 PREPARATORY FUNCTION 
(G FUNCTION)

(B–61394E)
APPENDIX E STATUS WHEN TURNING

POWER ON, WHEN CLEAR
AND WHEN RESET

Alarm and message

Reference item



11. PROGRAM COMMAND B–61393E–2/02

572

A program consists of the following components:

Table 11.3 Program components

Components Descriptions

Tape start Symbol indicating the start of a program file

Leader section Used for the title of a program file, etc.

Program start Symbol indicating the start of a program

Program section Commands for machining

Comment section Comments or directions for the operator

Tape end Symbol indicating the end of a program file

Tape start % TITLE ;
O0001 ;

M30 ;
%

(COMMENT)Program section

Leader section

Program start

Comment section

Tape end

Fig.11.3 Program configuration

11.3
PROGRAM
CONFIGURATION

General



B–61393E–2/02 11. PROGRAM COMMAND

573

�Setting entry
TVON When a program is registered to memory, a TV check on it is:

0 : Not performed.
1 : Performed.

#7
0018

#6
TVC

#5 #4 #3 #2 #1 #0

TVC A TV check on comments in a program is:
0 : Performed.
1 : Not performed.

#7
0019

#6
NEOP

#5 #4 #3 #2 #1 #0

[Data type] Bit

NEOP With an M02, M30, or M99 block, program registration is assumed to be:
0 : Completed
1 : Not completed

#7
0063

#6 #5 #4 #3 #2
M198P

#1 #0

[Data type] Bit

M198P Address P of the block including M198 in the subprogram call function
0 : Indicating a file number
1 : Indicating a program number

0248 M code that calls the program entered in file

[Data type] Byte

[Valid data range] 0, and 1 to 255
This parameter sets the M code for calling a program in a file stored.

NOTE
The M code is judged to be M198 when  zero is specified as
the setting value.

#7
EORRE0396

#6 #5 #4 #3 #2 #1 #0

[Data type] Bit

EORRE When the end�of�record mark (%) is read during program execution:
0 : P/.S alarm No.0008 occurs.

(Automatic operation is stopped, and the system enters the alarm
state.)

1 : No alarm occurs.
(Automatic operation is stopped, and the system is reset.)

Parameter



11. PROGRAM COMMAND B–61393E–2/02

574

������ Message Description

001 TH PARITY ALARM TH alarm (A character with incorrect
parity was input).

002 TV PARITY ALARM TV alarm (The number of characters
in a block is odd). This alarm will be
generated only when the TV check is
effective (when setting parameter
TVON is set to 1).

008 END OF RECORD The end of record (%) was specified.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.12 PROGRAM CONFIGURATION

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.12 PROGRAM CONFIGURATION

Alarm and message

Reference item



B–61393E–2/02 11. PROGRAM COMMAND

575

Either inch or metric input can be selected  by G code.

�Setting entry

INCH Unit of input
0 : In mm
1 : In inches

#7
0001

#6 #5 #4 #3 #2 #1 #0
SCW

NOTE
When this parameter is set, the power must be turned off
before operation is continued.

[Data type] Bit

SCW Least command increment on the linear axis
0 :  In mm (metric system machine)
1 :  In inches (inch system machine)

#7
0063

#6 #5 #4 #3 #2 #1
PRSTIN

#0
MTDSPI

[Data type] Bit

MTDSPI Machine position is:
0 : Not displayed according to the unit of input.

(Regardless of whether input is made in mm or inches, the machine
position is displayed in mm for millimeter machines, or in inches for
inch machines.)

1 : Displayed according to the unit of input.
(When input is made in mm, the machine position is displayed in mm,
and when input is made in inches, the machine position is displayed in
inches accordingly.)

PRSTIN Coordinates at the reference position when a coordinate system is set
automatically
0 : Value set in parameter 0708 to 0711 is used.
1 : For input in mm, the value set in parameter 0708 to 0711 is used, or for

input in inches, the value set in parameter 0815 to 0818 is used.

11.4
INCH/METRIC
CONVERSION

General

Parameter



11. PROGRAM COMMAND B–61393E–2/02

576

#7
0077

#6 #5 #4 #3 #2 #1 #0
MICRF (T series)

[Data type] Bit

MICRF Cutting feedrates at feed per minute is specified by F commands
0 : In units of 1 mm/min for millimeter machines or 0.01 inches/min for

inch machines.
1 : In unit of 0.001 mm/min for millimeter machines or 0.00001

inches/min for inch machines.

NOTE
M series are not equipped with this parameter. Cutting
feedrates are specified by F commands in units of 0.001
mm/min for millimeter machines or 0.00001 inches/min for
inch machines.

Coordinate value of the reference position used when automatic coordinate system
setting is performed

0708 – 0711

[Data type] Two–word

Increment system IS–A IS–B IS–C Unit

Linear axis
(Metric input)

0.01 0.001 0.0001 mm

Linear axis
(Inch input)

0.001 0.0001 0.00001 inch

Rotation axis 0.01 0.001 0.0001 deg

[Valid data range] – 99999999 to 99999999

Set the coordinate value of the reference position on each axis used for
setting a coordinate system automatically.

Coordinate value of the reference position on each axis used for setting a
coordinate system automatically when input is performed in inches

0815 – 0818

[Data type] Two–word

Increment system IS–A IS–B IS–C Unit

Inch input 0.001 0.0001 0.00001 inch

[Valid data range] – 99999999 to 99999999

Set the coordinate value of the reference position on each axis used for
setting a coordinate system automatically when input is performed in
inches.

NOTE
This parameter is valid when PRSTIN in parameter 0063#1
is set to 1.

[Unit of data]

[Unit of data]



B–61393E–2/02 11. PROGRAM COMMAND

577

WARNING
When switching inch input (G20) to metric input (G21) and
vice versa, the tool compensation value must be re–set
according to the least input increment.

NOTE
1 When the least input increment and the least command

increment systems are different, the maximum error is half
of the least command increment.  This error is not
accumulated.

2 Reference position return is performed at a low speed for
the first G28 command after the inch input is switched to the
metric input or vice versa.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.8.3 INCH/METRIC CONVERSION(G20,
G21)

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.8.2 INCH/METRIC CONVERSION(G20,
G21)

Warning

Note

Reference item



11. PROGRAM COMMAND B–61393E–2/02

578

This function can convert the machining profile to a data group that can
be distributed as pulses at high�speed by the macro compiler and macro
executor.  The function can also call and execute the data group as a
machining cycle using the CNC command (G05 command).

G05 P10��� L��� ;

P10��� is number of the cutting cycle to be called first:
   P10001 to P10999  
L��� is repetition count of the cutting cycle 
(L1 applies when this parameter is omitted.) :  
   L1 to L999

Call and execute the data for the high speed cutting cycle specified by the
macro compiler and macro executor using the above command.
Cycle data can be prepared for up to 999 cycles.  Select the machining
cycle by address P.  More than one cycle can be called and executed in
series using the cycle connection data in the header.
Specify the repetition count of the called machining cycle by address L.
The repetition count in the header can be specified for each cycle.
The connection of cycles and their repetition count are explained below
with an example.

Example)  Assume the following:
Cycle 1   Cycle connection data 2   Repetition count 1
Cycle 2   Cycle connection data 3   Repetition count 3
Cycle 3   Cycle connection data 0   Repetition count 1
G05 P10001 L2 ;
The following cycles are executed in sequence: 
  Cycles 1, 2, 2, 2, 3, 1, 2, 2, 2, and3

Four axes maximum can be controlled.  Four axes can be controlled
simultaneously.

Set the number of pulses per cycle in parameter 0055#4 to #6 as a macro
variable (#20000 to #85535) for high speed cycle cutting using the macro
compiler and macro executor.
The unit for the number of pulses is the least input increment.

11.5
HIGH SPEED CYCLE
CUTTING

General

� Format

� Number of control axes

� Pulse distribution



B–61393E–2/02 11. PROGRAM COMMAND

579

Data for the high speed cycle cutting is assigned to variables (#20000 to
#85535)  for the high–speed cycle cutting by the macro compiler and
macro executor.

Configuration of the high speed cycle cutting data

Number of registered cycles

Header of cycle 1

Header of cycle 2

#20000

#20001

#20017

#20033 Header of cycle 3

Data group of cycle 1

Data group of cycle 2

Data group of cycle 3

Specify the number of cycles (number of headers) of high�speed cycle
cutting data.  Values from 1 to 999 can be specified.

The header for high�speed cycle cutting data has the following
configuration:

Total number of fixed data items for the 5th axis

Total number of fixed data items for the 4th axis

Cycle repetition count#20001/20017/20033..

Cycle connection data#20002/20018/20034..

Number of data items#20003/20019/20035..

Data type#20004/20020/20036..

Variable assigned to the 1st axis data#20005/20021/20037..

#20006/20022/20038..

#20007/20023/20039..

#20008/20024/20040..

#20009/20025/20041..

#20010/20026/20042..

#20011/20027/20043..

#20012/20028/20044..

#20013/20029/20045..

#20014/20030/20046..

#20015/20031/20047..

Header configuration

#20016/20032/20048..

Variable assigned to the 2nd axis data

Variable assigned to the 3rd axis data

Variable assigned to the 4th axis data

Variable assigned to the 5th axis data

Variable assigned to the 6th axis data

Total number of fixed data items for the 1st axis

Total number of fixed data items for the 2nd axis

Total number of fixed data items for the 3rd axis

Total number of fixed data items for the 6th axis

� Configuration of high–
speed cycle cutting data

� Number of Registered
Cycles

� Header



11. PROGRAM COMMAND B–61393E–2/02

580

Specify the repetition count for the cycle.  Values from 0 to 32767 can be
specified.  When 0 or 1 is specified, the cycle is executed once.

Specify the number (1 to 999) of the cycle to be executed after the cycle.
When no connection cycle exists because of the last cycle, specify 0.

Specify the number of data items per cycle.  Valid values are from 1 to
32767.
When a fixed data item is specified, the fixed data is repeated for the
specified number of times in one cycle.

– – – –– – r4 r3 r2 r1 – – t4 t3 t2 t1
15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0

The bits from t1 to t4, corresponding to the 1st to 6th axes, have the fol-
lowing meanings:
0:  Distribution data is always constant.
1:  Distribution data is variable or fixed.
When the distribution data is variable or fixed, the bits from r1 to r4, corre-
sponding to the 1st to 4th axes, have the following meanings:
0:  Distribution data is read forward.
1:  Distribution data is read backwards.
Because the data consists of bits, it is necessary to use a binary�coded dec-
imal value when setting it using the macro compiler and macro executor.
Example)
When constant data is assigned to the 1st and 2nd axes and variable data is
assigned to the 3rd and 4th axes, #20004=12; (t4 and t3: 1, t2 and t1: 0)

⋅Constant data
When the corresponding data type bit (t4 to t1) is 0, specify
“distribution data value”.

⋅Variable data
When the corresponding data type bit (t4 to t1) is 1 and the total number
of fixed data items = 0, specify “(Storing start data variable No. of the
distribution data)/10”.

⋅Fixed data
When the corresponding data type bit (t4 to t1) is 1 and the total number
of fixed data items is other than 0, specify “(Storing start data variable
No. of the distribution data)/10”.
The applicable value for the variable data and fixed data is 2001 to
8553.  It is not possible to start storing data in the executable format
from a variable No. that is not a multiple of 10.
To read the distribution data backwards, set the variable No. of the data
to be distributed last.  For example, to read the distribution data in
#25000 to #25999 backwards, set 2500 as the data assignment variable.

Set the length of the fixed data for the cycle.
The first address of the fixed data must be specified by the data
assignment variable.  When the total number of fixed data items = 0 and
the corresponding data type bit (t4 to t1) is 1, the data is regarded as a
variable data.

�
�����	����

� Cycle repetition count

� Cycle connection data

� Number of data items

� Data type

� Variables assigned to
data for the 1st to 4th
axes

� Total number of fixed
data items for the first to
4th axes



B–61393E–2/02 11. PROGRAM COMMAND

581

#7
0055

#6
IT2

#5
IT1

#4
IT0

#3 #2 #1 #0
CSP (T series)

IT2 IT1 IT0 (M series)

[Data type] Bit

CSP Cs contouring control function dedicated to a piston lathe is
0:   Not used.
1:   Used.

IT0, IT1, IT2
IT2 IT1 IT0

0 0 0 Interpolates the G05 data in 8ms

0 0 1 Interpolates the G05 data in 2ms

0 1 0 Interpolates the G05 data in 4ms

0 1 1 Interpolates the G05 data in 1ms

1 0 0 Interpolates the G05 data in 16ms

1 1 1 Interpolates the G05 data in 0.5ms

0597 Maximum number of simultaneously controlled axes when G05 is specified during
high–speed cycle cutting or No. of controlled axes in high–speed remote buffer

[Data type] Word

[Unit of data] 1 to 4
This parameter sets the maximum number of simultaneous control axes
when G05 is specified during high�speed cycle cutting or sets the number
of control axes in a high�speed remote buffer.

Parameter



11. PROGRAM COMMAND B–61393E–2/02

582

������ Message Description

115 ILLEGAL VARIABLE
NUMBER

The header contents are improper in a
high–speed cycle cutting.  This alarm is
given in the following cases:
1. The header corresponding to the spe-

cified cutting cycle number called is
not found.

2. The cycle connection data value is
out of the allowable range (0 – 999).

3. The number of data in the header is
out of the allowable range (0 –
32767).

4. The storing start data variable number
of executable format data is out of the
allowable range (#20000 – #85535).

5. The storing data variable number of
executable format data is out of the
allowable range (#85535).

6. The storing start data variable number
of executable format data is over-
lapped with the variable number used
in the header.

Modify the program.

178 G05 COMMANDED IN
G41/G42 MODE

G05 was commanded in the G41/G42
mode.
Correct the program.

179 PARAM. (NO. 0597)
SETTING ERROR

The number of controlled axes set by the
parameter 0597 exceeds the maximum
number. Modify the parameter setting val-
ue.

WARNING
Single block stop, dry run, feedrate override, automatic
acceleration/deceleration and handle interruption are
disabled during high�speed cycle cutting.

Alarm and Message

Warning



B–61393E–2/02 11. PROGRAM COMMAND

583

NOTE
1 Use of the high–speed cycle cutting function requires

expanded RAM and limits the maximum specifiable size of
part program memory to within 80 m in terms of tape length.

2 Set the total number of distribution data items for one cycle
to a multiple of the following values, according to the
distribution cycle.  This does not apply when the distribution
cycle is 16 ms or 8 ms.  
If the total number is not a multiple of one of the following
values, movement in the remaining cycle becomes zero.

    Distribution cycle  4 ms:  Multiple of 2
    Distribution cycle  2 ms:  Multiple of 4
    Distribution cycle  1 ms:  Multiple of 8

For example, when all 41 data items (distribution cycle: 2
ms) are specified, movement is zero in the remaining 3 ms.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.20 HIGH SPEED CYCLE CUTTING

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.20 HIGH SPEED CYCLE CUTTING

Note

Reference Item



11. PROGRAM COMMAND B–61393E–2/02

584

Although subprograms are useful for repeating the same operation, the
custom macro function also allows use of variables, arithmetic and logic
operations, and conditional branches for easy development of general
programs such as pocketing and user–defined canned cycles.  A
machining program can call a custom macro with a simple command, just
like a subprogram.

O0001 ;

    :

    :

    :

G65 P9010 R50.0 L2 ;

    :

    :

M30 ;

Machining program Custom macro

O9010 ;

#1=#18/2 ;

G01 G42 X#1 Y#1 F300 ;

G02 X#1 Y–#1 R#1 ;

    :

    :

    :

M99 ;

This means that a function of general use can be formed when
programming a certain function as a custom macro. That is, programs can
be written using variables for data that might change or be unknown. This
can be further applied to group technology.
Similar workpieces can be collected as a group and a universal custom
macro body can be programmed using variables applicable to each group.
In this way, programming is not required for the workpieces in the group.
The programmer only need to assign actual values to the variables.

r β

α

Bolt hole circles as shown in the above figure can be made easily.
Once a custom macro body for the bolt hole circle is programmed and
registered, the CNC can operate as if it has the bolt hole circle cutting
function.

11.6
CUSTOM MACRO

11.6.1
Custom Macro

General



B–61393E–2/02 11. PROGRAM COMMAND

585

Programmers can use the bolt hole circle function by using the following
command only:
(Example of calling bolt hole circle)
 G65 Pp Rr A α Bβ  Kk ;
  P :Macro number of bolt hole circle
  r : Radius
  α : Start angle
  β : Angle between circles
  k � Number of circles

(Specification Custom Macro B)

[Classification] Input signal

[Function] No function is provided for the control unit. These signals can be read by
a custom macro as a type of system variable, and are used for interface
signals between custom macros and the PMC.
These signals correspond to system variables as indicated below.

Signals Q’ty Variables Correspondenceof values

UI000
UI001
UI002
UI003

:
UI014
UI015

1
1
1
1
:
1
1

#1000
#1001
#1002
#1003

:
#1014
#1015

“0” at “0” and
 “1” at “1”

UI000 to UI015 16 #1032 16–bit  binary code
*1

*1 Variable value   #1032 ��
15

i�0

{#[1000 � i] � 2i}

Signal

Custom Macro Input
Signal
UI000 to UI015
<G130, G131>



11. PROGRAM COMMAND B–61393E–2/02

586

[Classification] Output signal

[Function] No function is provided for the control unit. These signals can be read or
written by a custom macro as a type of system variable, and are used for
interface signals between custom macros and the PMC.

These signals correspond to system variables as indicated below.

Signals Q’ty Variables Correspondence ofvalues

UO000
UO001
UO002
UO003

:
UO014
UO015

1
1
1
1
:
1
1

#1100
#1101
#1102
#1103

:
#1114
#1115

“0” at “0” and
 “1” at “1”

UO000 to UO015
UO100 to UO115

16
32

#1132
#1133

16–bit  binary code *1
32–bit binary code *2

*2 Variable value #1133 ��{
30

i�0

2i � Vi}–2
31
� V31

Where Vi=0 when UO1i is 0 and Vi=1 when UO1i is 1

*1 Variable value #1132 ��
15

i�0

{#[1100 � i] � 2i}

These system variables can be used on the left side of an assignment
statement as well as on the right side.
The value assigned to the system variable used on the left side last is used
for the value of the system variable to be assigned on the right side.

#7
UI007G130

#6
UI006

#5
UI005

#4
UI004

#3
UI003

#2
UI002

#1
UI001

#0
UI000

UI015G131 UI014 UI013 UI012 UI011 UI010 UI009 UI008

#7
UO007F162

#6
UO006

#5
UO005

#4
UO004

#3
UO003

#2
UO002

#1
UO001

#0
UO000

UO015F163 UO014 UO013 UO012 UO011 UO010 UO009 UO008

UO107F196 UO106 UO105 UO104 UO103 UO102 UO101 UO100

UO115F197 UO114 UO113 UO112 UO111 UO110 UO109 UO108

UO123F198 UO122 UO121 UO120 UO119 UO118 UO117 UO116

UO131F199 UO130 UO129 UO128 UO127 UO126 UO125 UO124

Custom Macro Output
Signal
UO000 to UO015
<F162, F163>
UO100 to UO131
<F196 to F199>

Signal address



B–61393E–2/02 11. PROGRAM COMMAND

587

#7
0011

#6 #5
SBKM

#4 #3 #2 #1 #0

[Data type] Bit

SBKM Custom macro statement
0 : Not  stop the single block
1 : Stops the single block

#7
LOCC0040

#6
COMC

#5
TMCR

#4 #3 #2 #1
DPOSUP

#0

[Data type] Bit

DPOSUP Reading zero when data is output using a DPRNT command
0 : Outputs a space
1 : Outputs no data

TMCR Custom macro (subprogram)
0 : Not called using a T code
1 : Called using a T code

COMC Custom macro B’s common variables Nos. 100 through 149
0 : Cleared to “vacant” by reset
1 : Not cleared by reset

LOCC Custom macro B’s local variables #1 through #33
0 : Cleared to “vacant” by reset
1 : Not cleared by reset

#7
0057

#6 #5 #4
CROUT

#3 #2 #1 #0

[Data type] Bit

CROUT In BPRNT or DPRNT, after the data is outputted in ISO code:
0 : Only the “LF” is outputted.
1 : “LF” and “CR” are outputted.

Parameter

� Setting for single block
stop

� Other settings



11. PROGRAM COMMAND B–61393E–2/02

588

#7
*70042

#6
*6

#5
*5

#4
*4

#3
*3

#2
*2

#1
*1

#0
*0

=70043 =6 =5 =4 =3 =2 =1 =0

#70044 #6 #5 #4 #3 #2 #1 #0

[70053 [6 [5 [4 [3 [2 [1 [0

]70054 ]6 ]5 ]4 ]3 ]2 ]1 ]0

[Data type] Bit 
These parameters are used to input/output macro statements.

The numeral of a suffix indicates the bit position in a code.

*0 to *7 Set the hole pattern of an EIA code indicating *.
=0 to =7 Set the hole pattern of an EIA code indicating =.
#0 to#7 Set the hole pattern of an EIA code indicating #.
[0 to [7 Set the hole pattern of an EIA code indicating [.
]0 to ]7 Set the hole pattern of an EIA code indicating ].

0 : Corresponding bit is 0
1 : Corresponding bit is 1.

0248 M code that calls the program entered in file

[Data type] Byte

[Valid data range] 0, and 1 to 255
When the subprogram call function is used, this parameter sets the M code
for calling a program in a file stored on the external input/output device.

NOTE
The M code is judged to be M198 when  zero is specified as
the setting value.

� Setting when macro
statement is input/output
with EIA code

� Setting an M code that
calls a program entered
in a file



B–61393E–2/02 11. PROGRAM COMMAND

589

0220 G code that calls the custom macro of program number 9010

0221 G code that calls the custom macro of program number 9011

0222 G code that calls the custom macro of program number 9012

0223 G code that calls the custom macro of program number 9013

0224 G code that calls the custom macro of program number 9014

0225 G code that calls the custom macro of program number 9015

0226 G code that calls the custom macro of program number 9016

0227 G code that calls the custom macro of program number 9017

0228 G code that calls the custom macro of program number 9018

0229 G code that calls the custom macro of program number 9019

[Data type] Word

[Valid data range] 1 to 9999
These parameters set the G codes that call the custom macros of program
numbers 9010 through 9019.

NOTE
Setting value 0 is invalid.  No custom macro can be called
by G00.

0240 M code that calls the subprogram of program number 9001

0241 M code that calls the subprogram of program number 9002

0242 M code that calls the subprogram of program number 9003

[Data type] Two–word

[Valid data range] 1 to 99999999
These parameters set the M codes that call the subprograms of program
numbers 9001 through 9003.

NOTE
Setting value 0 is invalid.  No custom macro can be called
by M00.

� Setting G codes that call
custom macros of
program Nos.9010 to
9019

� Setting M codes that call
subprograms of program
Nos.9001 to 9009



11. PROGRAM COMMAND B–61393E–2/02

590

0230 M code that calls the sub program of program number 9020

0231 M code that calls the sub program of program number 9021

0232 M code that calls the sub program of program number 9022

0233 M code that calls the sub program of program number 9023

0234 M code that calls the sub program of program number 9024

0235 M code that calls the sub program of program number 9025

0236 M code that calls the sub program of program number 9026

0237 M code that calls the sub program of program number 9027

0238 M code that calls the sub program of program number 9028

0239 M code that calls the sub program of program number 9029

[Data type] Two–word

[Valid data range] 1 to 99999999
These parameters set the M codes that call the sub programs of program
numbers 9020 through 9029.

NOTE
Setting value 0 is invalid.  No custom macro can be called
by M00.

� Setting M codes that call
custom macros of
no.9020 to 9029



B–61393E–2/02 11. PROGRAM COMMAND

591

������ Message Description

076 ADDRESS P NOT
DEFINED

Address P (program number) was not
commanded in the block which in-
cludes an M98, G65, or G66 com-
mand. Modify the program.

077 SUB PROGRAM
NESTING ERROR

The subprogram was called in five
folds. Modify the program.

078 NUMBER NOT FOUND A program number or a sequence
number which was specified by ad-
dress P in the block which includes an
M98, M99, M65 or G66 was not found.
The sequence number specified by a
GOTO statement was not found.
Otherwise, a called program is being
edited in background processing. Cor-
rect the program, or discontinue the
background editing.

110 DATA OVERFLOW The absolute value of fixed decimal
point display data exceeds the allow-
able range.
Modify the program.

111 CALCULATED DATA
OVERFLOW

The result of calculation is out of the
allowable range (–1047 to –10–29, 0,
and 10–29 to 1047).

112 DIVIDED BY ZERO Division by zero was specified. (in-
cluding tan 90�)

113 IMPROPER COMMAND A function which cannot be used in
custom macro is commanded.
Modify the program.

114 FORMAT ERROR IN
MACRO

There is an error in other formats than
<Formula>.
Modify the program.

115 ILLEGAL VARIABLE
NUMBER

A value not defined as a variable
number is designated in the custom
macro, or the header contents are im-
proper in a high–speed cycle cutting.
This alarm is given in the following
cases:
High speed cycle machining
1. The header corresponding to the speci-

fied machining cycle number called is
not found.

2. The cycle connection data value is out
of the allowable range (0 to 999).

3. The number of data in the header is out
of the allowable range (0 to 32767).

4. The storing start data variable number
of executable format data is out of the
allowable range (#20000 to #85535).

5. The storing data variable number of
executable format data is out of the al-
lowable range (#85535).

6. The storing start data variable number
of executable format data is overlapped
with the variable number used in the
header.

Modify the program.

116 WRITE PROTECTED
VARIABLE

The left side of substitution statement
is a variable whose substitution is in-
hibited. Modify the program.

Alarm and message



11. PROGRAM COMMAND B–61393E–2/02

592

������ DescriptionMessage

118 PARENTHESIS NESTING
ERROR

The nesting of bracket exceeds the
upper limit (quintuple).
Modify the program.

119 ILLEGAL ARGUMENT The SQRT argument is negative, BCD
argument is negative, or other values
than 0 to 9 are present on each line of
BIN argument.
Modify the program.

122 DUPLICATE MACRO
MODAL–CALL

The macro modal call is specified in
double.
Modify the program.

123 CAN NOT USE MACRO
COMMAND IN DNC

Macro control command is used dur-
ing DNC operation.
Modify the program.

124 MISSING END
STATEMENT

DO – END does not correspond to 1 :
1. Modify the program.

125 FORMAT ERROR IN
MACRO

<Formula> format is erroneous.
Modify the program.

126 ILLEGAL LOOP NUMBER In DOn, 1� n � 3 is not estab-
lished. Modify the program.

127 NC, MACRO STATEMENT
IN SAME BLOCK

NC and custom macro commands
coexist.
Modify the program.

128 ILLEGAL MACRO
SEQUENCE NUMBER

The sequence number specified in the
branch command was not 0 to 9999.
Or, it cannot be searched. Modify the
program.

129 ILLEGAL ARGUMENT
ADDRESS

An address which is not allowed in
<Argument Designation > is used.
Modify the program.

199 MACRO WORD
UNDEFINED

Undefined macro word was used.
Modify the custom macro.

CAUTION
Machine tool builders: You are requested to attach your
custom macro program tape or program list to the CNC unit
without fail.
If it is necessary to replace part program storage memory
due to a failure, FANUC servicemen or end user in charge
of maintenance should know the contents of your custom
macro for the purpose of repairing the trouble immediately.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.15 and 16 CUSTOM MACRO A/B

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.15 and 16 CUSTOM MACRO A/B

Caution

Reference item



B–61393E–2/02 11. PROGRAM COMMAND

593

When a program is being executed, another program can be called by
inputting an interrupt signal (UINT) from the machine.  This function is
referred to as an interruption type custom macro function.  Program an
interrupt command in the following format:

M96 P���� ;

M97 ;

Enables custom macro interrupt

Disables custom macro interrupt

Use of the interruption type custom macro function allows the user to call
a program during execution of an arbitrary block of another program.
This allows programs to be operated to match situations which vary from
time to time.

(1) When a tool abnormality is detected, processing to handle the
abnormality is started by an external signal.

(2) A sequence of machining operations is interrupted by another ma-
chining operation without the cancellation of the current operation.

(3) At regular intervals, information on current machining is read.

Listed above are examples like adaptive control applications of the
interruption type custom macro function.

Interrupt 
signal
(UINT)*

Interrupt 
signal
(UINT)*

Interrupt 
signal
(UINT)*

M96
Pxxxx;

N����;

M97
;

M99 (P����);

O xxxx;

Fig 11.6.2   Interruption type custom macro function

When M96Pxxxx is specified in a program, subsequent program
operation can be interrupted by an interrupt signal (UINT) input to
execute the program specified by Pxxxx.
When the interrupt signal (UINT, marked by * in Fig. 11.6.2) is input
during execution of the interrupt program or after M97 is specified, it is
ignored.

11.6.2
Interruption Type
Custom Macro

General



11. PROGRAM COMMAND B–61393E–2/02

594

[Classification] Input signal

[Function] This signal calls and executes a program in memory. During execution,
a program in automatic operation is suspended.
To enable this signal to be accepted, a particular miscellaneous function
must be specified in a command program for automatic operation. In
addition, automatic operation must already be started to accept this signal.
The particular miscellaneous function code is set by parameter 0056,
0246 and 0247.

#7
G140

#6 #5 #4 #3
UINT

#2 #1 #0

#7
MUSR0056

#6
MCYL

#5
MSUB

#4
MPRM

#3
MTSE

#2
MBLK

#1
MSKT

#0

[Data type] Bit

MSKT Absolute coordinates at that time during custom macro interrupt
0 : Not set to the skip coordinates (system variables #5061 and later)
1 : Set to the skip coordinates (system variables #5061 and later)

MBLK Custom macro interrupt
0 : Performed by interrupting an in–execution block (Custom macro

interrupt type I)
1 : Performed after an in–execution block is completed (Custom macro

interrupt type II)

MTSE Custom macro interrupt signal UINT
0 : Edge trigger method (Rising edge)
1 : Status trigger method

MPRM Custom macro interrupt valid/invalid M code
0 : M96/M97
1 : M code set using parameters (Nos. 0246 and 0247)

MSUB Interrupt program
0 : Uses a dedicated local variable  (Macro–type interrupt)
1 : Uses the same local variable as in the main program (Subprogram–

type interrupt)

Signal

Interrupt Signal for
Custom Macro
UINT<G140#3>

Signal address

Parameter

� Various Setting for
Custom Macro



B–61393E–2/02 11. PROGRAM COMMAND

595

MCYL Custom macro interrupt
0 : Not performed during cycle operation
1 : Performed during cycle operation

MUSR Interrupt–type custom macro
0 : Not used
1 : Used

0246 M code that validates a custom macro interrupt

0247 M code that invalidates a custom macro interrupt

[Data type] Byte type

[Valid data range] 0 to 255

These parameters set the custom macro interrupt valid/invalid M codes.

NOTE
These parameters can be used when MPR, #4 of parameter
No. 0056, is 1.  M96 is used as a valid M code and M97 is
used as an invalid M code when MPRM is 0, irrespective of
the state of this parameter.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.16.11 INTERRUPTION TYPE CUSTOM
MACRO

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.16.11 INTERRUPTION TYPE CUSTOM
MACRO

� Setting M code that
makes interruption
effective and ineffective

Reference item



11. PROGRAM COMMAND B–61393E–2/02

596

In 0–TTC, common variables are provided separately for each tool post;
variable #n used with a tool post 1 is different from variable #n used with
tool post 2. By parameter setting (No. 0047#5(VR1), #6(VR5) and No.
0218), however, some or all of common variables #100 to # 149 and #500
to #531 can be made usable commonly by tool post 1 and tool post 2 so that
such variables can be written or read for either tool post. Such variables are
referred to as custom macro variables common between tool posts.

#7
0047

#6
VR5

#5
VR1

#4 #3 #2 #1 #0

[Data type] Bit

VR1, VR5 Specify the first number for custom macro variables common to both tool
posts in the 0–TTC.

VR5 VR1 First number for custom macro variables com-
mon to both tool posts

0 0 None (no common custom macro variable is used.)

0 1 No. 100

1 0 No. 500

1 1 Nos. 100 and 500

0218 Number of custom macro variables common between tool posts

[Data type] Byte

[Unit of data] Number of custom macro variables

[Valid data range] 0 to 50

This parameter specifies the number of variables commonly used for both
tool posts 1 and 2 (custom macro variables common between tool posts)
that are part of custom macro variables 100 to 149 and 500 to 532.
The custom macro variables common to tool posts can be written or read
for either of the tool posts.

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.24.5 CUSTOM MACRO VARI-
ABLES COMMON TO
TOOL POSTS

11.6.3
Custom Macro
Variables Common
between Tool Posts
(0–TTC)

General

Parameter

� Setting the no. of custom
macro variables
common between tool
posts

Reference item



B–61393E–2/02 11. PROGRAM COMMAND

597

Canned cycles make it easier for the programmer to create programs.
With a canned cycle, a frequently–used machining operation can be
specified in a single block with a G function; without canned cycles,
normally more than one block is required.  In addition, the use of canned
cycles can shorten the program to save memory.

A canned cycle consists of a sequence of six operations.

Operation 1 Positioning a hole position
Operation 2 Rapid traverse up to point R level
Operation 3 Hole machining
Operation 4 Operation at the bottom of a hole
Operation 5 Retraction to point R level
Operation 6 Rapid traverse up to the initial point

Operation 1

Operation 2

Operation 3

Operation 4

Operation 5

Operation 6

Rapid traverse
Feed

Initial level

Point R level

Fig. 11.7 (a) Canned cycle operation sequence

11.7
CANNED CYCLE 
(M SERIES)/CANNED
CYCLE FOR HOLE
MACHINING 
(T SERIES)

General



11. PROGRAM COMMAND B–61393E–2/02

598

In some canned cycles, a spindle command to rotate the spindle in reverse
direction may be output.

The following canned cycles require spindle control:

M series T series

Reverse tapping cycle G74 Face tapping cycle (G84)

Fine boring cycle G76 Side tapping cycle (G88)

Tapping cycle G84

Boring cycle G86

Back boring cycle G87

Boring cycle G88

For spindle control, the following normal miscellaneous functions are

used:

See the description of the miscellaneous functions.

M03: CW spindle rotation

M04: CCW spindle rotation

M05: Spindle stop

M19: Spindle orientation (M series)

When the rotation direction of the spindle is to be switched from one

direction to the other (for example, when M04 is output during M03

operation), a parameter can specify whether to send M05 at the time

switching.

Timing charts are described in the following page:

SPINDLE CONTROL



B–61393E–2/02 11. PROGRAM COMMAND

599

Note) It is possible to not output
M05 code by using parame-
ter FXCS (No.0012#4).

Next block
(G99 mode)

FIN FIN

MF MF

M03M05

FIN FIN

MF MF

M05 M04

Z

X, Y

Z

Z

� G74 (Counter tapping cycle)

FIN FIN

MF MF

M19M05

FIN FIN

MF MF

M03 M03

Z

Z

Z

Return to ini-
tial level in
G98 mode

X, Y

X, Y

Z
Z

FIN FIN

MF MF

M04M05

FIN FIN

MF MF

M05 M03

Z

Dwell Dwell

(Note) (Note)

Next block
(G98 mode)

� G76 (Fine boring cycle)

� G84 (tapping cycle)

X or Y

X
or Y

Next block
(G98 mode)

Next block (G99 mode)

Note) It is possible to not output
M05 code by using parame-
ter FXCO (No.0012#5).

Note) It is possible to not output
M05 code by using parame-
ter FXCS (No.0012#4).

Dwell

(Note)

(Note) (Note)

Dwell Dwell

Next block
(G99 mode)

Next block
(G98 mode)

Fig.11.7 (b) Canned cycle for M series (1/2)



11. PROGRAM COMMAND B–61393E–2/02

600

FIN FIN FIN

MF MF

M03M03M05

MF

Next block
(G98 mode)

Return to initial level in G98 mode

X, Y

Z
Z

FINFIN

MF MFMFMFMF

M05 M1
9 M03 M05 M19

MF

M03

FINFINFIN FIN

Z
Z

Z

X, Y

(Note) It is possible to not output M05 code using pa-
rameter FXCO (No.0012#5).
Back boring cycle is not used in G99 mode but in
G98 mode.

FIN

M03

MF

Z

FIN

M05

MF

Z
Z

Return to initial level in G98 mode or
R point level in G99 mode.

Z

X, Y

� G86 (Boring cycle)

Dwell

(Note)

Next block (G99 mode)

X or Y

X or Y

X or Y

(Note)

Dwell

Manual feed Cycle start

� G88 (Boring cycle)

� G87 (Back boring cycle)

Fig.11.7 (b) Canned cycle for M series (2/2)



B–61393E–2/02 11. PROGRAM COMMAND

601

X, C
(Z, C)

Z

(X)

Z
(X)

FIN FIN

MF MF

M04M05

FIN FIN

MF MF

M05 M03

ZZ

(X)
Dwell

(Note 1)

� G84 (Face tapping cycle)
G88 (Side tapping cycle)

Next block
(G98 mode)

Next block
(G99 mode)

(Note 2)

Dwell

(Note 1) (Note 2)

(Note 1) When parameter TAPM 
(No. 0031#2)=0, M05 is not output.

(Note 2) Another M code may be used by 
parameter No. 0212 and 0213.

Fig 11.7 (c) Canned cycle for T series

When an M code specified in parameter No.0204 for C–axis
clamp/unclamp is coded in a program, the CNC issues the M code for
C–axis clamp after the tool is positioned and before the tool is fed in rapid
traverse to the point–R level. The CNC also issues the M code (M code
C–axis clamp +1) for C–axis unclamp after the tool retracts to the point–R
level. The tool dwells for the time specified in parameter No. 0591.

During a tapping cycle, the tapping signal is output.  The tapping signal
is also output while the G code of the tapping cycle is valid.

During tapping, cutting feedrate override is always set to 100%.

When the feed hold key is pressed during tapping, the movement is not
stopped immediately but the movement is stopped when the tool is
returned to level R.

In M series, the TAPDRN (bit 5 of parameter No.0065) specifies whether
dry run is valid during tapping.

� M code used for C–axis
clamp/unclamp (T series)

Tapping signal

Override

Feed hold

Dry run



11. PROGRAM COMMAND B–61393E–2/02

602

[Classification] Output signal

[Function] Reports that the system is in tapping mode.

[Output condition] The signal is set to 1 when:
–  The system is in tapping cycle mode.

G74, G84:  M series
G84, G88:  T series

–  The system is in tapping mode.
G63:  M series

The signal is set to 0 when:
–  The system is in neither tapping cycle mode nor tapping mode.
–  A reset or emergency stop is specified.

#7
F149

#6 #5
TAP

#4 #3 #2 #1 #0

#7
0002

#6 #5
PMXY2

#4
PMXY1

#3 #2 #1 #0
(M series)

[Data type] Bit

PMXY2, PMXY1 Set the axis and direction in which the tool in drilling canned cycle G76 or
G87 is got free.  RD2 and RD1 are set as shown below by plane selection.

PMXY2 PMXY1 G17 G18 G19

0 0 +X +Z +Y

0 1 –X –Z –Y

1 0 +Y +X +Z

1 1 –Y –X –Z

#7
0011

#6 #5 #4
MCF

#3 #2 #1 #0
(M series)

[Data type] Bit

MCF G81
0 : Specifies a drilling canned cycle
1 : Specifies an external operation command

Signal

Tapping signal 
TAP<F149#5>

Signal address

Parameter



B–61393E–2/02 11. PROGRAM COMMAND

603

#7
0012

#6 #5
FXCO

#4
FXCS

#3 #2 #1 #0
(M series)

[Data type] Bit

FXCS When a spindle rotates from the forward to the reverse direction and vice
versa in tapping cycles G84 and G74 for M series (G84 and G88 for t
series), befor M04 or M03 is output:
0 : Outputs M05
1 : Not output M05

FXCO In drilling canned cycles G76 and G87:
0 : Outputs M05 before an oriented spindle stops
1 : Not output M05 before an oriented spindle stops

#7
0031

#6 #5 #4
RTCT

#3
ILVL

#2
TAPM

#1 #0

[Data type] Bit

TAPM When a spindle rotates from the forward to the reverse direction and vice
versa in tapping cycles G84 and G74 for M series (G84 and G88 for T
series), befor M04 or M03 is output:
0 : Not output M05
1 : Outputs M05

ILVL Initial point position in drilling canned cycle
0 : Not updated by reset
1 : Updated by reset

RTCT For drilling, G83 and G87
0 : Make a return by a specified escape amount.
1 : Make a return to the R point level.

#7
0057

#6
FXY

#5 #4 #3 #2 #1 #0
(M series)

[Data type] Bit

FXY The drilling axis in the drilling canned cycle is:
0 : Always the Z–axis
1 : The axis selected by the program

0204 C–axis clamp M code in drilling canned cycle (T series)

[Data type] Byte

[Valid data range] 0 to 99

This parameter sets the C–axis clamp M code in a drilling canned cycle.



11. PROGRAM COMMAND B–61393E–2/02

604

0212 Spindle forward–rotation M code in drilling canned cycle (T series)

[Data type] Byte

[Valid data range] 0 to 255

This parameter sets the spindle forward–rotation M code in a drilling
canned cycle.

NOTE
M03 is output when “0” is set.

0213 Spindle reverse–rotation M code in drilling canned cycle (T series)

[Data type] Byte

[Valid data range] 0 to 255

This parameter sets the spindle reverse–rotation M code in a drilling
canned cycle.

NOTE
M04 is output when “0” is set.

0591 Dwell time when C–axis unclamping is specified in drilling canned cycle (T series)

[Data type] Word

[Unit of data] ms

[Valid data range] 0 to 32767

This parameter sets the dwell time when C–axis unclamping is specified
in a drilling canned cycle.

0592 Return value of canned cycle G83 for drilling (T series)

0531 Return value of high–speed peck drilling cycle G73 (M series)

[Data type] Word

Increment system ���� ���� ���� Unit

Metric input 0.01 0.001 0.0001 mm

Inch input 0.001 0.0001 0.00001 inch

[Valid data range] 0 to 32767

For M series, this parameter sets the return value in high–speed peck
drilling cycle G73 (G83 for T series).

[Unit of data]



B–61393E–2/02 11. PROGRAM COMMAND

605

q  :  Depth of cut

d  :  Return value

Z point

G73 for M series

R point

q

d

d
q

q

Fig. 11.7 (d) High–speed peck drilling cycle (G73) for M series

For T series, this parameter sets the return or clearance value in drilling
canned cycle G83.

q  :  Depth of cut

d  :  Clearance value

q  :  Depth of cut

d  :  Return value

Parameter No. 0031#4 RTCT=0 

(High speed peck drilling cycle)
Parameter No. 0031#4 RTCT=1 

(Peck drilling cycle)

G83 for T series

R point

Z point

q

q

q

d

d

R point

Z point

q

q

q

d

d

Fig. 11.7 (e) Drilling canned cycle (G83) for T series



11. PROGRAM COMMAND B–61393E–2/02

606

0532 Clearance canned cycle G83 (M series)

[Data type] Word

Increment system ���� ���� ���� Unit

Metric input 0.01 0.001 0.0001 mm

Inch input 0.001 0.0001 0.00001 inch

[Valid data range] 0 to 32767
This parameter sets the clearance value in peck drilling cycle G83.

G83 (M series)

q  :  Depth of cut

d  :  Clearance value

R point

Z point

q

q

q

d

d

Fig. 11.7 (f) Peck drilling cycle (G83)

��
�	� Message Description

044 G27–G30 NOT AL-
LOWED IN FIXED CYCLE
(M series)

One of G27 to G30 is commanded in
a canned cycle mode. 
Modify the program.

NOTE
A parameter FXY (No.0057#6) can be set to the Z axis
always used as the drilling axis. When FXY=0, the Z axis is
always the drilling axis. (M series)

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.13.1 CANNED CYCLE

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.13.3 CANNED CYCLE FOR DRILLING

[Unit of data]

Alarm and message

Note

Reference item



B–61393E–2/02 11. PROGRAM COMMAND

607

A tool with an overload torque detection function can change the spindle
speed and cutting feedrate during peck drilling, using an overload torque
detection signal received from the tool as a skip signal.  Such peck drilling
enables small–diameter peck drilling.  The sequence chart of a
small–diameter peck drilling cycle is shown below.

Tool (1)

(2)

(3)

(6)

(5)

Q

�

Overload
torque Overload

torque Dwell

R point

Z point

� : The first minute escape amount used in moving back to the R point, and an amount of
clearance at the start point (end point of the previous cycle) of the second and subse-
quent cycles

Q : Cutting depth per cycle

: Movement at a rapid traverse rate

: Movement at a parameter– or program–specified rate

: Movement at a program–specified cutting feedrate

The steps of the small–diameter peck drilling cycle are as follows:

(1)Position along the X– and Y–axes.

(2)Position to the R point along the Z–axis.

(3)Cut along the Z–axis (maximum cutting depth Q).

(4)Repeat the following steps until the hole bottom along the Z–axis is
reached.

� Reverse (→ minute escape amount ∆).
� Reverse (→ R point).
� Advance (R point → start point + clearance ∆).
� Cut (cutting depth Q + ∆).

(5)Dwell at the hole bottom.

(6)Return to the R point (or initial point) along the Z–axis.

11.8
SMALL–DIAMETER
PECK DRILLING 
CYCLE (M SERIES)

General



11. PROGRAM COMMAND B–61393E–2/02

608

(1)A small–diameter peck drilling cycle is executed by issuing a G83
after a small–diameter peck drilling cycle M code.  The
small–diameter peck drilling cycle in progress signal is output when
R point positioning along the drill axis begins, and kept output until
a return to the R point/initial level is completed.

(2)A skip signal (X008#7) is used as the overload torque detection signal.
The skip signal is valid only when the drill is moving forward or
cutting between the R and Z points.  If the skip signal is input when
the drill is moving forward or cutting, the drill starts to move backward
immediately.

(3)Cutting conditions are changed for each pecking cycle (advance → cut
→ reverse) during one G83 cycle.

� Changing the cutting feedrate

A cutting feedrate specified in a program using an F code is
changed for each of the second and subsequent cutting cycles.
Parameter No. 307 specifies the ratio of a change to be used when
a skip signal has been received during the previous cutting cycle.
Parameter No. 308 specifies that to be used when a skip signal has
not been received during the previous cutting cycle.

Cutting feedrate�F�α

(First cutting cycle) α = 1.0
(Second and subsequent cutting cycles)α = α � β ÷100

where β  is a change ratio for one cutting cycle
If a skip signal is input during the previous cutting cycle:

β = parameter No. 307
If a skip signal is not input during the previous cutting cycle:

β = parameter No. 308
If the cutting feedrate change ratio (α) becomes less than a value
specified in parameter No. 309, no further change will be made to
the cutting feedrate.

� Changing the spindle speed

A spindle speed specified in a program using an S code is changed
for each of the second and subsequent cutting cycles.  Parameter
No. 305 specifies the ratio of a change to be used when a skip signal
has been received during the previous cutting cycle.  Parameter No.
306 specifies that to be used when a skip signal has not been
received during the previous cutting cycle.

Spindle speed �S�γ

(First cutting cycle) γ = 1.0
(Second and subsequent cutting cycles)γ = γ � δ ÷100

where  δ is a change ratio for one cutting cycle
If a skip signal is input during the previous cutting cycle:

δ= parameter No. 305
If a skip signal is not input during the previous cutting cycle:

δ= parameter No. 306
If the cutting feedrate is clamped at the lowest limit, no change will
be made to the spindle speed.

Specification



B–61393E–2/02 11. PROGRAM COMMAND

609

(4)During pecking, advance and reverse movements are performed as
cutting feed rather than rapid positioning.

(5) If pecking advance and reverse feedrates are specified using an I code,
the same format as for F codes is used.  An I code specified using a G83
remains valid until a G80 is issued or a reset occurs.

[Classification] Input signal

[Function] Used as a spindle overload torque detection signal during the execution
of a small–diameter peck drilling cycle.

[Operation] If the drill is moving forward or cutting between the R and Z points during
the execution of a small–diameter peck drilling cycle, setting the skip
signal to 1 causes the drill to move backward.

[Classification] Output signal

[Function] Indicates the operating status of a small–diameter peck drilling cycle.

[Operation] The signal is 1 during the execution of a small–diameter peck drilling
cycle.  It is 0 when a small–diameter peck drilling cycle is not being
executed.

#7
SKIPX008

#6 #5 #4 #3 #2 #1 #0
(M series)

PECK2F180 (M series)

Signal

Skip signal
SKIP <X008#7>

Small–diameter peck
drilling cycle execution
in progress signal
PECK2 <F180#7>

Signal address



11. PROGRAM COMMAND B–61393E–2/02

610

#7
CHGNRM0398

#6
CHGSKP

#5 #4 #3 #2 #1 #0

CHGSKP If an overload torque signal is received:
1 : The feedrate and spindle speed will be changed.

0 : Neither the feedrate nor spindle speed will be changed.

CHGNRM If a cutting depth per cycle is completed before an overload torque signal
is received:
1 : The feedrate and spindle speed will be changed.

0 : Neither the feedrate nor spindle speed will be changed.

0304 PECK_M

Specify a small–diameter peck drilling cycle M code.

[Valid data range] 3 to 999

0305 SSOPR1

Specify a percentage at which the spindle speed is to be changed when the
drill is caused to move back as directed by an overload torque signal.

[Valid data range] 0 to 255%

0306 SSOPR2

Specify a percentage at which the spindle speed is to be changed when the
drill is caused to move back without receiving an overload torque signal.

[Valid data range] 0 to 255%

0307 FROPR1

Specify a percentage at which the cutting feedrate is to be changed when
the drill is caused to move back as directed by an overload torque signal.

[Valid data range] 0 to 255%

0308 FROPR2

Specify a percentage at which the cutting feedrate is to be changed when
the drill is caused to move back without receiving an overload torque
signal.

[Valid data range] 0 to 255%

Parameter



B–61393E–2/02 11. PROGRAM COMMAND

611

0309 FROLMT

Specify a lower limit to the percentage of the after–change cutting
feedrate to the specified cutting feedrate.

[Valid data range] 0 to 255%

0327 PEKMCV

Specify a custom macro common variable number used to output the total
number of times that the drill reverses during cutting.  If 0 is specified,
no output is made.

[Valid data range] 100 to 149

0328 SKPMCV

Specify a custom macro common variable number used to output the total
number of times that the drill reverses during cutting as directed by an
overload signal.  If 0 is specified, no output is made.

[Valid data range] 100 to 149

0492 PEKFD1

Specify the speed at which the drill moves back to the R point if I is
omitted.

[Valid data range] 1mm/min (mm input)
0.01inch/min (inch input)

0493 PEKFD2

Specify the speed at which the drill moves to the previous machined point
if I is omitted.

[Valid data range] 1mm/min (mm input)
0.01inch.min (inch input)

0941 DLTPRM

Specify the first minute escape amount to be used in moving back to the
R point during a cycle, and a clearance amount at the start point of the
second and subsequent cutting cycles.

[Valid data range] Least input increment



11. PROGRAM COMMAND B–61393E–2/02

612

The following self–diagnosis information is displayed on the diagnosis
screen.  Parameter Nos. 520 and 521 are reset using a G83 command.

No. 520 : Total number of times the drill reverses during cutting after
a G83 is issued.

No. 521 : Total number of times the drill reverses as directed by an
overload signal during cutting after a G83 is issued.

No. 522 : Coordinate from which the drill began to reverse
 (in least input increments).

No. 523 : Difference between the previous coordinate from which the
drill began to reverse and the current coordinate from 
which the drill began to reverse (in least input increments).

NOTE
1 A small–diameter peck drilling cycle M code is issued in an

M code–only block before a G83 is issued.  The M code is
processed internally; it will not be output.

2 The advance and reverse movements are
accelerated/decelerated according to the cutting feedrate
acceleration/deceleration time constant.  For the reverse
movement, a position check is performed at the R point.

3 When the drill is moving forward, if a skip signal is received,
the drill is caused to move backward.

4 During a small–diameter peck drilling cycle, changing the
spindle speed during pecking requires a 4– or 5–digit S
command.

5 The R point must be separated by a specified clearance
amount (∆) from the workpiece plane.

Self–diagnosis

Note



B–61393E–2/02 11. PROGRAM COMMAND

613

Upon completion of positioning in each block in the program, an external
operation function signal can be output to allow the machine to perform
specific operation.

G81 IP_ ;  (The IP_ is axis move command )

Every time positioning for the IP_ move command is completed, the CNC
sends an external operation signal to the machine.  An external operation
signal is output for each positioning operation until canceled by G80 or
a group 01 G code.

No external operation signals are output during execution of a block that
contains neither X nor Y.

1 Once positioning for a move command has been completed, the CNC
sets the external operation signal EF to 1.

2 When the EF signal is set to 1, the PMC executes drilling or another
operation.  Once the operation has been completed, the PMC sets
completion signal FIN to 1.

3 The CNC resets the EF signal to 0 upon the elapse of the time (TFIN)
specified in parameter No.0009 after the FIN signal is set to 1.

4 When the EF signal is set to 0, the PMC resets the FIN signal to 0.

5 The CNC starts executing the next block.

The timing diagram is shown below:

EF

G81 command

Positioning

Machine operation

FIN

Next block

TFIN

Fig. 11.9  Timing diagram of basic procedure

11.9
EXTERNAL MOTION
FUNCTION 
(M SERIES)

General

Basic procedure



11. PROGRAM COMMAND B–61393E–2/02

614

[Classification] Output signal

[Function] Reports that the positioning of G81 has been completed in the external
motion function, and that a special external operation is required.

[Output condition] For details of the output condition and procedure, see the “basic
procedure”, described previously.
For details of completion signal FIN, see section 8.1.

#7
F150

#6 #5 #4 #3 #2 #1
EF

#0

#7
0011

#6 #5 #4
MCF

#3 #2 #1 #0

[Data type] Bit

MCF G81:
0 : Specifies a drilling canned cycle
1 : Specifies an external operation command

CAUTION
1 When this function is used, canned cycles (G73, G74, G76,

and G82 to G89) cannot be used.
2 When the high–speed M, S, T, or B interface is used, the

signals used by this function are transferred in high–speed
mode.  See Section 8.4.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.13.8 EXTERNAL MOTION FUNCTION

Signal

External Operation
Signal
EF<F150#1> (M series)

Signal address

Parameter

Caution

Reference item



B–61393E–2/02 11. PROGRAM COMMAND

615

This option canned cycles to make CNC programming easy.  For instance,
the data of the finish work shape describes the tool path for rough
machining.  And also, a canned cycles for the thread cutting is available.
The following example shows stock removals in turning type I.
If a finished shape of A to A’ to B is given by a program as in the figure
below, the specified area is removed by ∆d (depth of cut), with finishing
allowance ∆u/2 and ∆w left.

B

(F)
(R)

e

A

C

 ∆d

A’

45,

(R)

(F)

 ∆u/2

∆w

N (ns)⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅
⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅

F____
S____
T____

N (nf)⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅�

∆d : Depth of cut (radius designation)
Designate without sign.  The cutting direction depends on the direction

AA’.  This designation is modal and is not changed until the other value

is designated.  Also this value can be specified by the parameter (No.0717), 

and the parameter is changed by the program command.

e : Escaping amount

This designation is modal and is not changed until the other value 

is designated.  Also this value can be specified by the parameter (No.0718), 

and the parameter is changed by the program command.

ns : Sequence number of the first block for the program of finishing shape.

nf : Sequence number of the last block for the program of finishing shape.

∆u : Distance and direction of finishing allowance in X direction (diameter / radius
designation).

∆w : Distance and direction of finishing allowance in Z direction.
f,s,t : Any F , S, or T function contained in blocks ns to nf in the cycle is ignored, 

and the F, S, or T function in this G71 block is effective.

G71 U (∆d)  R (e) ;
G71 P (ns)   Q (nf)   U (∆u)  W (∆w)  F (f )  S (s )  T (t) ;

Program command

��� � ������ �

	
��� � ���	 ����
��


The move command of a finished shape of
A to A’ to B is specified in the blocks from
sequence number ns to nf.

11.10
CANNED CYCLE 
(T SERIES)/MULTIPLE
REPETITIVE CANNED
CYCLE (M SERIES)

General



11. PROGRAM COMMAND B–61393E–2/02

616

[Classification] Input signal

[Function] Executes chamfering in a threading cycle.  Specify the chamfering
distance in parameter No.0109.

[Operation] When the signal is set to 1, chamfering is not executed in the threading
cycle.
When the signal is set to 0, chamfering is executed in the threading cycle.

γ

Approx.
45�

Approx.
45�

γ

Fig.11.10 (a) Straight thread cutting cycle Fig.11.10 (b)Taper thread cutting cycle

Set the chamfering distance� to the parameter No.0109. When the
optional multiple repetitive canned cycle is provided, the chamfering
distance can be specified in G76. The chamfering angle is made smaller
than 45� by the remaining pulses in the automatic acceleration/
deceleration circuit and servo system.

CDZF126 (T series)

#7
0393

#6 #5 #4
CHKMRC

#3 #2 #1
MCQSCH

#0

[Data type] Bit

CHKMRC When a target figure other than a monotonically increasing or
monotonically decreasing figure is specified in a multiple repetitive
turning canned cycle (G71, G72):
0 : No alarm occurs.
1 : P/S alarm No. 064 is occurs.

NOTE
This parameter is valid for multiple repetitive turning canned
cycle type I.

Signal

Chamfering signal
CDZ<G126#7> 
(T Series)

Signal address

Parameter
� Various setting for

multiple repetitive
canned cycle



B–61393E–2/02 11. PROGRAM COMMAND

617

MCQSCH Before a multiple repetitive canned cycle (G70 to G73) is started, a check
to see if the program contains a block that has the sequence number
specified in address Q is:
0 : Not made.
1 : Made. (If the sequence number specified in address Q cannot be

found, an alarm occurs and the canned cycle is not executed.)

0109 Chamfering distance in thread cutting cycles G76 and G92

[Data type] Byte

[Unit of data] 0.1

[Valid data range] 0 to 127

This parameter sets the chamfering distance in thread cutting cycles G76
and G92.

0717 Depth of cut in multiple repetitive  canned cycles G71 and G72

[Data type] Two–word

Increment system ���� ���� ���� Unit

Metric input 0.01 0.001 0.0001 mm

Inch input 0.001 0.0001 0.00001 inch

[Valid data range] 0 to 99999999

This parameter sets the depth of cut in multiple repetitive canned cycles
G71 and G72.

0718 Escape in multiple repetitive canned cycles G71 and G72.

[Data type] Two–word

Increment system ���� ���� ���� Unit

Metric input 0.01 0.001 0.0001 mm

Inch input 0.001 0.0001 0.00001 inch

[Valid data range] 0 to 99999999

This parameter sets the escape in multiple repetitive canned cycles G71
and G72.

� Chamfering distance in
thread cutting cycles
G76 and G92

� Depth of cut in multiple
repetitive  canned cycles
G71 and G72

[Unit of data]

� Escape in multiple
repetitive canned cycles
G71 and G72.

[Unit of data]



11. PROGRAM COMMAND B–61393E–2/02

618

0719 Escape in multiple repetitive canned cycle G73 in X–axis direction

0720 Escape in multiple repetitive canned cycle G73 in Z–axis direction

[Data type] Two–word

Increment system ���� ���� ���� Unit

Metric input 0.01 0.001 0.0001 mm

Inch input 0.001 0.0001 0.00001 inch

[Valid data range] –99999999 to 99999999

This parameter sets the escape in multiple repetitive canned cycle G73 of
an X, then Z axis.

0721 Division count in multiple repetitive canned cycle G73

[Data type] Two–word

[Unit of data] Cycle

[Valid data range] 1 to 99999999

This parameter sets the division count in multiple repetitive canned cycle
G73.

0722 Return in multiple canned cycles G74 and G75

[Data type] Two–word

Increment system ���� ���� ���� Unit

Metric input 0.01 0.001 0.0001 mm

Inch input 0.001 0.0001 0.00001 inch

[Valid data range] 0 to 99999999

This parameter sets the return in multiple repetitive canned cycles G74
and G75.

� Escape in multiple
repetitive canned cycles
G73

[Unit of data]

� Division count in
multiple repetitive
canned cycle G73

� Return in multiple
canned cycles G74 and
G75

[Unit of data]



B–61393E–2/02 11. PROGRAM COMMAND

619

0723 Repetition count of final finishing in multiple repetitive canned cycle G76

[Data type] Two–word

[Unit of data] Cycle

[Valid data range] 1 to 99999999

This parameter sets the repetition count in multiple repetitive canned
cycle G76.

0724 Tool nose angle in multiple repetitive canned cycle G76

[Data type] Two–word

[Unit of data] Degree

[Valid data range] 0 to 120 when FS15 tape format is used
0, 29, 30, 55, 60 and 80 when FS15 tape format is not used.

This parameter sets the tool nose angle in multiple repetitive  canned cycle
G76.

0725 Minimum depth of cut in multiple repetitive canned cycle G76

[Data type] Two–word

Increment system ���� ���� ���� Unit

Metric input 0.01 0.001 0.0001 mm

Inch input 0.001 0.0001 0.00001 inch

[Valid data range] 0 to 99999999

This parameter sets the minimum depth of cut in multiple repetitive
canned cycle G76.

0726 Finishing allowance in multiple repetitive canned cycle G76

[Data type] Two–word

Increment system ���� ���� ���� Unit

Metric input 0.01 0.001 0.0001 mm

Inch input 0.001 0.0001 0.00001 inch

[Valid data range] 0 to 99999999

This parameter sets the finishing allowance in multiple repetitive canned
cycle G76.

� Repetition count of final
finishing in multiple
repetitive canned cycle
G76

� Tool nose angle in
multiple repetitive
canned cycle G76

� Minimum depth of cut in
multiple repetitive
canned cycle G76

[Unit of data]

� Finishing allowance in
multiple repetitive
canned cycle G76

[Unit of data]



11. PROGRAM COMMAND B–61393E–2/02

620

������ Message Description

061 ADDRESS P/Q NOT
FOUND IN G70–G73

Address P or Q is not specified in
G70, G71, G72, or G73 command.
Modify the program.

062 ILLEGAL COMMAND IN
G71–G76

1 The depth of cut in G71 or G72 is zero
or negative value.

2 The repetitive count in G73 is zero or
negative value.

3 The negative value is specified to ∆i or
∆k in G74 or G75.

4 A value other than zero is specified to
address U or W, though ∆i or ∆k is zero
in G74 or G75.

5 A negative value is specified to ∆d,
though the relief direction in G74 or G75
is determined.

6 Zero or a negative value is specified to
the height of thread or depth of cut of
first time in G76.

7 The specified minimum depth of cut in
G76 is greater than the height of 
thread.

8 An unusable angle of tool tip is speci-
fied in G76.

Modify the program.

063 SEQUENCE NUMBER
NOT FOUND

The sequence number specified by
address P in G70, G71, G72, or G73
command cannot be searched.
Modify the program.

064 SHAPE PROGRAM NOT
MONOTONOUSLY

A target shape which is not monotone
increase or decrease was specified in a
repetitive canned cycle (G71 or G72).

065 ILLEGAL COMMAND IN
G71–G73

1 G00 or G01 is not commanded at the
block with the sequence number which
is specified by address P in G71, G72,
or G73 command.

2 Address Z(W) or X(U) was comman-
ded in the block with a sequence num-
ber which is specified by address P in
G71 or G72, respectively.

Modify the program.

066 IMPROPER G–CODE IN
G71–G73

An unallowable G code was comman-
ded beween two blocks specified by
address P in G71, G72, or G73.
Modify the program.

067 CAN NOT ERROR IN MDI
MODE

G70, G71, G72, or G73 command
with address P and Q was specified.
Modify the program.

069 FORMAT ERROR IN
G70–G73

The final move command in the
blocks specified by P and Q of G70,
G71, G72, or G73 ended with cham-
fering or corner R.

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.13.1
II.13.2

CANNED CYCLE
MULTIPLE REPETITIVE CYCLE

Alarm and message

Reference item



B–61393E–2/02 11. PROGRAM COMMAND

621

Mirror image can be applied to X–axis with G code.

G68 : Double turret mirror image on 

G69 : Mirror image cancel

When G68 is designated, the coordinate system is shifted to the mating
turret side, and the X–axis sign is reversed from the programmed
command to perform symmetrical cutting.  To use this function, set the
distance between the two turrets to a parameter (No. 0730).
Program example for double turrets.

X

60
120

180

(2)

(1)

(3)

12
0

Z

80
φ 4

0φ

Offset value of 
tool post A

Offset value of
tool post B

Tool post A

Tool post B

12
0φ

X40.0 Z180.0 T0101 ; Position turret A at (1)
G68 ; Shift the coordinate system by the distance A to B

(120mm), and turn mirror image on.
X80.0 Z120.0 T0202 ; Position turret B at (2)
G69 ; Shift the coordinate system by the distance B to A,

and cancel mirror image.
X120.0 Z60.0 T0101 ; Position turret A at (3)

11.11
MIRROR IMAGE FOR 
DOUBLE TURRETS 
(T SERIES)

General



11. PROGRAM COMMAND B–61393E–2/02

622

0730 Distance between two turrets in mirror image

[Data type] Two–word

[Unit of data]

Increment system IS–A IS–B IS–C Unit

Millimeter machine 0.01 0.001 0.0001 mm

Inch input 0.001 0.0001 0.00001 inch

[Valid data range] 0 to 999999999

Set the distance between two turrets in mirror image.

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.13.6 MIRROR IMAGE FOR DOUBLE
TURRETS (G68, G69)

Parameter

� Distance between two
turrets

Reference Item



B–61393E–2/02 11. PROGRAM COMMAND

623

By specifying indexing positions (angles) for the indexing axis (one
rotation axis, A, B, or C), the index table of the machining center can be
indexed.
Before and after indexing, the index table is automatically unclamped or
clamped .

The control axis that indexes the index table can be named A, B or C.  It
will be referred to as “B” in the following discussion.

The positioning angle for the index table is commanded by the numerics
following “B” in the program command, which is an independent block.
Both absolute and incremental commands are possible, but the value after
“B” is the integer times the numeric set by the parameter:

(Example) G00G90B100000; Absolute command
(Positioning angle 10 degrees)

G00G91B20.0; Incremental command
(Move distance 20 degrees)

There are two variations of the procedure (type A and type B) to set the
index table position; the difference is in the ON/OFF timing of the
position control servo. The sequence of events and the difference between
the variations are described below, followed by time charts showing them
graphically.

(1)Assume Bbbbb is ordered by the command program.
(2)The CNC turns the B axis unclamp signal BUCLP <F188#2> to “1”.

(Type B -- When BUCLP is turned to “1”, the position control servo
for the B axis is turned ON.)

(3)On the PMC side, the clamp of the B axis is released; when completed,
the B axis unclamp completion signal *BEUCP <G143#6> turns to
“0”.

(4)The CNC then turns the B axis unclamp signal BEUCP to “0”, to
indicate it received the *BEUCP signal.

(5)When the PMC is notified that BUCLP has been turned to “0”, the
PMC should turn *BEUCP to “1”.
In type B, B–axis unclamp signal BUCLP is turned to “0”, B–axis
position control is made in servo–on state, B–axis is rotated, and the
B axis is stopped at the specified position. B axis always moves at
rapid traverse.

(6)When the B axis stops at the specified position, CNC turns B–axis
clamp signal BCLP<F188#3>to 1. In type A, signal BCLP is set to “1”
and B–axis position control is made in servo–off state.

(7)When BCLP is turned to “1” on the PMC side, the B axis is clamped
mechanically (with a clutch or shot pin, for example). When the clamp
is completed, the B axis clamp completion signal *BECLP <G143#7>
is turned to “0”.

11.12
INDEX TABLE 
INDEXING FUNCTION
(M SERIES)

General

Basic Procedure



11. PROGRAM COMMAND B–61393E–2/02

624

(8)When *BECLP is turned to “0”, the CNC then turns BCLP to “0”,
informing it received the *BECLP signal. (Type B -- When BCLP
turns to “0”, the B axis position control servo is turned off.)

(9)On the PMC side, when BCLP changes to “0”, *BECLP is turned to
“1”.  This completes the sequence.

The time charts for these operations are shown in the figures below.

B command (independent) Bbbbb

B axis servo on for position control

B axis unclamp signal BUCLP<F188#2>

B axis unclamp completion signal *BEUCP<G143#6>

B axis rotation

B axis clamp signal BCLP<F188#3>

B axis clamp completion signal *BECLP<G143#7>

(1)     (2)   (3)     (4)    (5)                                (6)   (7)   (8)   (9)

Fig. 11.12 (a) Time chart for positioning index table (type A)

B command (independent) Bbbbb

B axis servo on for position control

B axis unclamp signal BUCLP<F188#2>

B axis unclamp completion signal *BEUCP<G143#6>

B axis rotation

B axis clamp signal BCLP<F188#3>

B axis clamp completion signal  *BECLP<G143#7>

(1)     (2)   (3)     (4)    (5)                                (6)   (7)   (8)   (9)

Fig. 11.12 (b) Time chart for positioning index table (type B)



B–61393E–2/02 11. PROGRAM COMMAND

625

Manual reference position return of B axis time chart (type A) is shown
in the figure below.

B axis manual feed selection signal +4

B axis position control servo ON

B axis unclamp signal  BUCLP<F188#2>

B axis unclamp completion signal *BEUCP<G143#6>

B axis rotation

B axis deceleration signal  *DEC4<X019#5>

B axis return completion signal  ZP4<F148#3>

B axis clamp signal BCLP<F188#3>

B axis clamp completion signal  *BECLP<G143#7>

Fig. 11.12 (c) Manual reference position return of B axis time chart (type A)

As described in the basic procedure, type A differs from type B in that the
servo used for B–axis position control is turned on or off at the different
timing.
Type A is suitable for a system in which the B–axis is clamped with shot
pins.
Type B is suitable for a system in which the B–axis is clamped with a
clutch.

When the B–axis is clamped with shot pins, the mechanism can be
indexed at only a limited number of positions.  The minimum indexing
angle can be specified in parameter No. 0839.  If an angle which is not a
multiple of this minimum indexing angle is specified in indexing, alarm
No. 135 is issued.

The direction of rotation can be set to one of the following.

– Whichever direction has the shorter distance (IXINC, bit 3 of
parameter No. 0079)

– Direction specified with a command

– Usually the positive direction.  Only when a particular M code is
specified in the same block, the axis rotates in the negative direction
(parameter No. 0249).

Setting IXG90, bit 4 of parameter No. 0079, specifies absolute
programming, irrespective of G90/G91 mode.

Type A and Type B

Minimum indexing angle

Direction of rotation

Absolute/incremental 
programming



11. PROGRAM COMMAND B–61393E–2/02

626

[Classification] Output signal

[Function] Instructs the PMC side to clamp the B axis mechanically with a clutch or
shot pin.

[Output condition] The output condition and procedure are the same as those described in the
basic procedure for positioning the index table.

[Classification] Input signal

[Function] Notifies the CNC of completion of the B axis clamp operation.

[Operation] The operation and procedure are the same as those described in the basic
procedure for positioning the index table.

[Classification] Output signal

[Function] Instructs the PMC side to release the B axis from the mechanical clamp.

[Output condition] The output condition and procedure are the same as those described in the
basic procedure for positioning the index table.

[Classification] Input signal

[Function] Notifies the CNC of completion of the release of the B axis from the
mechanical clamp.

[Operation] The operation and procedure are the same as those described in the basic
procedure for positioning the index table.

#7
*BECLPG143

#6
*BEUCP

#5 #4 #3 #2 #1 #0

#7
F188

#6 #5 #4 #3
BCLP

#2
BUCLP

#1 #0

Signal

B axis clamp signal
BCLP<F188#3>

B axis clamp completion
signal
*BECLP<G143#7>

B axis unclamp signal
BUCLP<F188#2>

B axis unclamp
completion signal
*BEUCP<G143#6>

Signal address



B–61393E–2/02 11. PROGRAM COMMAND

627

#7
0011

#6 #5 #4 #3 #2
ADLN

#1 #0

[Data type] Bit

ADLN 0 : 4th axis is rotation axis.
1 : 4th axis is linear axis.

#7
IXTYP0079

#6 #5 #4
IXG90

#3
IXINC

#2
IXABS

#1
IXREL

#0
IXDDP

[Data type] Bit

IXDDP Selection of decimal–point input method of index table indexing axis
0 : Conventional method (Example  IS–B:  B1; = 0.001 deg)
1 : Pocket calculator method (Example IS–B:   B1; = 1.000 deg)

IXREL Relative position display of index table indexing axis
0 : Not rounded by 360 degrees
1 : Rounded by 360 degrees

IXABS Displaying absolute coordinate value of index table indexing axis
0 : Not rounded by 360 degrees 

The index table indexing axis rotates 720 degrees (two rotations)
when G90 B720.0; is specified from the 0–degree position.  It rotates
in reverse direction 720 degrees (two rotations) when G90 B0.; is
specified.  The absolute coordinate value then becomes 0 degree.

1 : Rounded by 360 degrees
The index table indexing axis is positioned in 40 degrees when G90
B400.0; is specified from the 0–degree position.  The index table
indexing axis does not rotate by two or more turns when this
parameter is set to 1.  It also does not move when G90 B720.0; is
specified from the 0–degree position.

IXINC Rotation in the G90 mode when negative–direction rotation command M
code (parameter No. 0249) is not set
0 : Not set to the shorter way around the circumference
1 : Set to the shorter way around the circumference  (Set IXABS, #2 of

parameter No. 0079, to 1.)

IXG90 Index table indexing command
0 : Judged to be an absolute/increment command according to the

G90/G91 mode
1 : Judged to be an absolute command

IXTYP Index table indexing sequence
0 : Type A
1 : Type B

Parameter

� Setting linear or rotation
axis

� Various setting for index
table indexing



11. PROGRAM COMMAND B–61393E–2/02

628

0249 Negative 0 direction rotation command M code

[Data type] Byte

[Valid data range] 0 to 255

0 : Not use an M code that sets the index table rotation to the negative
direction.  The rotation direction is specified using a command and
parameter (IXINC, #3 of parameter No. 0079).

1 to 255:
Sets an M code that sets the index table rotation to the negative
direction.  The rotation is set to the negative direction only when an M
code set here is specified in the same block as an index table indexing
command.  If the M code is not specified in the same block, the
rotation is always set to the positive direction.

WARNING
Set IXABS, #2 of parameter No. 0079, to 1.

0839 Unit of index table indexing angle

[Data type] Two–word

[Unit of data]

Increment system IS–A IS–B IS–C Unit

Metric input 0.01 0.001 0.0001 mm

[Valid data range] 0 to 360000
This parameter sets the unit of index table indexing angle.  A P/S alarm
is generated when movement other than integer multiple of the setting
value is specified.

NOTE
If zero is specified as the setting value, any command can
be specified irrespective of the unit of angle.

������ Message Description

135 SPINDLE ORIENTATION
PLEASE

Without any spindle orientation , an
attept was made for spindle indexing.
Perform spindle orientation.

136 ILLEGAL AXIS COM-
MAND

In index table indexing , another con-
trol axis was instructed together with
the B axis.
Modify the program.

� Negative direction 
rotation command M 
code

� Unit of index table
indexing angle

Alarm and Message



B–61393E–2/02 11. PROGRAM COMMAND

629

WARNING
1 The secondary auxiliary function can be used if the address

is different from that of the indexing axis.
2 If the incremental command is used for indexing of the index

table, the workpiece zero point offset value on the index
table axis must always be 0.  That is, the machine
coordinate system must always agree with the workpiece
coordinate system of the index table axis.

3 The dry run signal DRN is ineffective during positioning of
the B axis.

4 The machine lock signal MLK is functional during
positioning of the B axis.  However, while the B axis is
moving, after the movement ends, the MLK is functional.

NOTE
1 Specify a rotation axis as the index table indexing axis.
2 The servo off signal for the index table indexing axis is

invalid.
3 Single direction positioning (G60) cannot be specified.
4 While the index table is being positioned, input signals that

reset the CNC, such as *ESP (emergency stop), ERS
(external reset), and RRW (reset & rewind), are functional.
When reset is applied to the CNC, this operation stops.
Further, if *SP (automatic operation stop signal) turns to “0”,
axis movement is stopped and the equipment enters the
automatic operation stop state.
If a stop at an any position is not suitable for the machine,
appropriate processing is required on the machine.

5 If a reset occurs while the system is awaiting the completion
of clamping or unclamping, the clamp or unclamp signal is
cleared.  The CNC exits from the completion wait status.

6 Manual operation of jog feed, incremental feed and handle
feed cannot be used with the B axis, but manual reference
position return is possible. If reset is applied during the
movement of B axis, the manual reference position return
operation is performed.

7 No movement can be performed by automatic return from
the reference position (G29), return to the second reference
position (G30), or selection of the machine coordinate
system (G53).

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.14.10 INDEX TABLE INDEXING FUNC-
TION

Warning

Note

Reference Item



11. PROGRAM COMMAND B–61393E–2/02

630

A programmed figure can be magnified or reduced (scaling).
The dimensions specified with X_, Y_, and Z_ can each be scaled up or
down with the same or different rates of magnification.
The magnification rate can be specified in the program.
Unless specified in the program, the magnification rate specified in the
parameter is applied.

Least input increment of scaling magnification is: 0.001 or 0.00001. 
It depends on parameter SCR (No. 0036#07) which value is selected.  If
scaling P is not specified on the block of scaling (G51X_Y_Z_P_ ;), the
scaling magnification set to parameter (No. 0731) is applicable. If X,Y,Z
are omitted, the tool position where the G51 command was specified
serves as the scaling center.

G51X_Y_Z_P_ ; Scaling start

 Scaling is effective.

   (Scaling mode)

Format Meaning of command

X_Y_Z_ : Absolute command for 
center coordinate value
of scaling

P_  : Scaling magnification

G50 ; Scaling cancel

SCALING UP OR DOWN ALONG ALL AXES 
 AT THE SAME RATE OF MAGNIFICATION

Y

X

P4

P4′

P1

P1′

P3′

P2′

P2

P3

P0

P0:Scaling center
0

Fig. 11.13 (a) Scaling (P 1 P2 P3 P4�P1′ P2′ P3′ P4′)

11.13
SCALING (M SERIES)

General

� Scaling up or down
along all axes at the
same rate of
magnification



B–61393E–2/02 11. PROGRAM COMMAND

631

Each axis can be scaled by different  magnifications. Also when a negative
magnification is specified, a mirror image is applied.  First of all, set a
parameter ESCAL (No.0063#6) which validates each axis scaling (mirror
image).
Then, set parameter SCLx (No. 0036#0 to #2) to enable scaling along each
axis.
Least input increment of scaling magnification of each axis (I, J, K) is
0.001 or 0.00001( set parameter SCR (No.0036#7)).
Magnification is set within the range ±0.00001 to ±9.99999 or ±0.001 to
±9.999.
If a negative value is set, mirror image is effected.
If magnification I, J or K is not commanded, a magnification value set to
parameter (Nos. 0731 to 0733) is effective.  However, a value other than
0 must be set to the parameter.

 G51_X_Y_Z_I_J_K_; Scaling start X_Y_Z_: Absolute command for 
center coordinate value
of scaling

I_J_K_: Scaling magnification for
X axis, Y axis and Z axis 
respectively

G50 Scaling cancel

Format Meaning of command

Scaling 
is effective.
(Scaling 
mode)

SCALING UP OR DOWN ALONG EACH AXES AT A DIFFERENT
RATE OF MAGNIFICATION (MIRROR IMAGE)

c

Y axis

X axis

b
a

d

a/b : Scaling magnification of X axis

c/d : Scaling magnification of Y axis

0 : Scaling center

Programmed figure

Scaled figure

0

Fig. 11.13 (b) Scaling of each axis

� Scaling of each axis,
programmable mirror
image (negative
magnification)



11. PROGRAM COMMAND B–61393E–2/02

632

#7
SCR0036

#6 #5 #4 #3 #2
SCLZ

#1
SCLY

#0
SCLX

[Data type] Bit

SCR Scaling magnification unit
0 : 0.00001 times (1/100,000)
1 : 0.001 times

SCLx Scaling for each axis
0 : Invalidated
1 : Validated

#7
0063

#6
ESCAL

#5 #4 #3 #2 #1 #0

[Data type] Bit

ESCAL Axis scaling and programmable mirror image
0 : Invalidated (The scaling magnification is specified by P.)
1 : Validated

0731 Magnification used when scaling magnification is not specified

[Data type] Two–word

[Unit of data] 0.001 or 0.00001 times (Selected using SCR, #7 of parameter No. 0036)

[Valid data range] 1 to 999999
This parameter sets the scaling magnification.  This setting value is used
when a scaling magnification (P) is not specified in the program.

WARNING
Parameter Nos.0731 to 0733 becomes valid when scaling
for every axis is valid. (ESCAL, #6 of parameter No. 0063
is “1”.)

0731 Scaling magnification for X axis

to

0733 Scaling magnification for Z axis

[Data type] Two–word

[Unit of data] 0.001 or 0.00001 times (Selected using SCR, #7 of parameter No. 0036)

[Valid data range] –999999 to –1, 1 to 999999
This parameter sets the scaling magnification for each axis.

Parameter

� Setting valid/invalid and
magnification of scaling

� Magnification used when
scaling magnification is
not specified

� Scaling magnification for
each axis



B–61393E–2/02 11. PROGRAM COMMAND

633

������ Message Description

141 CAN NOT COMMAND
G51 IN CRC

G51 (Scaling ON) is commanded in
the tool offset mode.
Modify the program.

142 ILLEGAL SCALE RATE Scaling magnification is commanded
in other than 1 – 999999.
Correct the scaling magnification set-
ting.

143 SCALED MOTION DATA
OVERFLOW

The scaling results, move distance,
coordinate value and circular radius
exceed the maximum command val-
ue. Correct the program or scaling
magnification.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.14.8 SCALING (G50, G51)

Alarm and Message

Reference Item



11. PROGRAM COMMAND B–61393E–2/02

634

A programmed shape can be rotated.  By using this function it becomes
possible, for example, to modify a program using a rotation command
when a workpiece has been placed with some angle rotated from the
programmed position on the machine.  Further, when there is a pattern
comprising some identical shapes in the positions rotated from a shape,
the time required for programming and the length  of the program can be
reduced by preparing a subprogram of the shape and calling it after
rotation.

(α,β)

Angle of rotationCenter of
rotation

�

Rotation plane G17

Y

X

R

Fig. 11.14 Coordinate system rotation

G17 (G18 or G19) : Select the plane in which contains the figure to be 
rotated.

α_β_ Absolute command for two of the x_,y_,and Z_ axes that
correspond to the current plane selected by a 
command (G17, G18, or G19).  The command specifies
the coordinates of the center of rotation for the values 
specified subsequent to G68.

R_ Angular displacement with a positive value indicates
counter clockwise rotation.  Parameter 0041#0 
selects whether the specified angular displacement is 
always considered an absolute value or is considered an
absolute or incremental value depending on the specified
G code (G90 or G91).

Least input increment : 0.001 deg  
Valid data range : –360.000 to 360.000

G68 α�β�R� ; Start rotation of a coordinate system.

Coordinate system rotation mode 

(The coordinate system is rotated.)

G69 ; Coordinate system rotation cancel command

FORMAT

MEANING OF COMMAND

G17
G18
G19

11.14
COORDINATE
SYSTEM ROTATION
(M SERIES)

General



B–61393E–2/02 11. PROGRAM COMMAND

635

#7
0041

#6 #5 #4 #3 #2 #1 #0
RIN

[Data type] Bit

RIN Coordinate rotation angle command (R)
0 : Specified by an absolute method
1 : Specified by G90 or G91

0730 Angular displacement used when no angular displacement is specified for
coordinate system rotation

[Data type] Two–word

[Unit of data] 0.001 degrees

[Valid data range] –360000 to 360000
This parameter sets the angular displacement for coordinate system
rotation. When the angular displacement for coordinate system rotation
is not specified with address R in the block where G68 is specified, the
setting of this parameter is used as the angular displacement for
coordinate system rotation.

������ Message Description

144 ILLEGAL PLANE SE-
LECTED

The coordinate rotation plane and arc
or cutter compensation C plane must
be the same. Modify the program.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.14.9 COORDINATE SYSTEM 
ROTATION (G68, G69)

Parameter

� Angle specification
method of coordinate
system rotation

� Angular displacement
used when no angular
displacement is
specified for coordinate
system rotation

Alarm and Message

Reference Item



11. PROGRAM COMMAND B–61393E–2/02

636

There are two types of NC programs; those which, once created, are
scarcely changed, and those which are changed for each machining type.
The former are programs created by the custom macro, and the latter are
machining programs. If programs of these types are executed
simultaneously, a battery may run out or the custom macro may be
destroyed by error operation.
Such problems can be solved by this function. The custom macro created
by a machine tool builder is converted to an execute-form program, be
stored in the ROM cassette, and be executed.

Features
(1) Since the program is stored after converted to an execute-form

program, the execution speed is high. The machining time is then
reduced, and the precision is improved.

(2) Since the program is stored in ROM cassette, there is no problem of
battery extinction or custom macro destruction by error operation.
The reliability is improved.

(3) Since the stored program is not displayed on a program screen, the
know-how of the machine tool builder is protected.

(4) Since the custom macro is stored in ROM cassette, the program edit
memory can be used efficiently.

(5) The user can call the macro easily without knowing the stored
program. A custom macro can be created and executed in the program
edit memory as usual.

(6) An original screen can be created by using the graphic display or
selecting screens by the soft key. The machine tool builder can extend
the control function by using such functions as machining program
creation and edit control, reader/punch interface control, and PMC
data read/write functions.

NOTE
When the macro executor is attached, the order-made
macro cannot be specified.

Macro compiler/executer programming manual (B–61393E–1)

11.15
MACRO COMPILER/
MACRO EXECUTER

General

Note

Reference Item



B–61393E–2/02 12. DISPLAY/SETTING/EDIT

637

12 DISPLAY/SETTING/EDIT



12. DISPLAY/SETTING/EDIT B–61393E–2/02

638

[Classification] Input signal

[Function] Setting this signal to 1 disables the updating of relative coordinates.
Subsequently setting this signal to 0 causes the updating of relative
coordinates to be resumed.

[Classification] Input signal

[Function] This signal enables or disables the display of ladder diagrams.
*LDSP = 1:  Does not display ladder diagrams.
*LDSP = 0:  Displays ladder diagrams.

NOTE
This signal is enabled only when bit 2 (LDDSPG) of
parameter No. 0060 is set to 1.  When LDDSPG is 0,
dynamic ladder display is disabled regardless of the state
of this signal.

#7
G119

#6 #5 #4 #3 #2 #1 #0
*LDSP

G127 DLK

#7
0060

#6 #5 #4 #3 #2
LDDSPG

#1 #0

[Data type] Bit

LDDSPG Dynamic ladder display is:
1 : Performed.
0 : Not performed.

12.1
DISPLAY/SETTING

Signal

Relative coordinate
update disable signal
DLK<G127#6>

Ladder display signal
*LDSP<G119#0>

Signal address

Parameter



B–61393E–2/02 12. DISPLAY/SETTING/EDIT

639

Time is displayed in the hour/minute/second format on each display
screen. Some screens allows display of the year, month, and day.
The custom macro system variable can be used to read the time. The time
will be told through the window on the PMC side.

Time information can be read and written.

System variables for time information

Variable
number

Function

#3001 This variable functions as a timer that counts in 1–millisecond
increments at all times.  When the power is turned on, the
value of this variable is reset to 0.  When 65535 milliseconds
is reached, the value of this timer returns to 0.

#3002 This variable functions as a timer that counts in 1–hour incre-
ments when the cycle start lamp is on.  This timer preserves
its value even when the power is turned off.  When
1145324.612 hours is reached, the value of this timer returns
to 0.

#3011 This variable can be used to read the current date (year/
month/day).  Year/month/day information is converted to an
apparent decimal number.  For example, March 28, 1995 is
represented as 19950328.

#3012 This variable can be used to read the current time (hours/min-
utes/seconds).  Hours/minutes/seconds information is con-
verted to an apparent decimal number.  For example, 34 min-
utes and 56 seconds after 3 p.m. is represented as 153456.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

III.11.5.5 Displaying and Setting Run
Time,Parts Count, and Time

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

III.11.5.3 Displaying and Setting Run
Time,Parts Count, and Time

12.1.1
Clock Function

General

Reference item



12. DISPLAY/SETTING/EDIT B–61393E–2/02

640

On the servo tuning screen, parameters required for basic adjustment of
the servo motor and statuses being monitored are listed for each axis.

#7
0389

#6 #5 #4 #3 #2 #1 #0
SRVSET

[Data type] Bit

SRVSET Servo tuning screen
0 : Displayed
1 : Not displayed

MAINTENANCE MANUAL
(B–61395E)

5.2 SERVO TUNING SCREEN

On the spindle tuning screen, parameters required for basic adjustment of
the serial spindle and statuses being monitored are listed.  The screen is
only for the main spindle connected to the first amplifier.

#7
0389

#6 #5 #4 #3 #2 #1
SPPRM

#0

[Data type] Bit type

SPPRM Spindle tuning screen
0 : Not displayed
1 : Displayed

MAINTENANCE MANUAL
(B–61395E)

6.4 SPINDLE TUNING SCREEN

12.1.2
Servo Tuning Screen

General

Parameter

Reference item

12.1.3
Spindle Tuning Screen

General

Parameter

Reference item



B–61393E–2/02 12. DISPLAY/SETTING/EDIT

641

Servo waveform display provides graphs of waveforms to illustrate
changes in the following data.

a. Servo motor error value along each axis, number of distributed
pulses and torque

b. On/off status of the machine signal, specified by a signal address

#7
0077

#6 #5 #4 #3 #2
SGD

#1 #0

[Data type] Bit

SGD Servo waveform
0 : Not displayed
1 : Displayed

NOTE
Servo waveform display is enabled when bit 2 (SGD) of
parameter No. 0077 is set to 1.  To perform waveform
diagnosis, a graphics board is required.

MAINTENANCE MANUAL
(B–61395E)

1.8 WAVEFORM DIAGNOSTIC DIS-
PLAY

12.1.4
Servo Waveform
Display

General

Parameter

Note

Reference item



12. DISPLAY/SETTING/EDIT B–61393E–2/02

642

When a breakdown occurs, in order to quickly determine the cause, the
following should be done.
First, it has to be determined as to whether the breakdown occurred in the
NC internal section, or the PMC or machine side.
There are times when it appears that a breakdown has occurred even when
the breakdown has not actually occurred. For example, when the
machinery ceases to operate because it is waiting for an external signal.
In this case, the condition of the interface between the CNC and PMC, or
between the CNC and the machinery, and the conditions within the CNC
need to be investigated.
The NC checks the following itself.

1) Abnormality of detection system

2) Abnormality of position control unit

3) Abnormality of servo system

4) Overheat

5) Abnormality of CPU

6) Abnormality of ROM

7) Abnormality of RAM

8) Abnormality in data transfer between CRT/MDI

9) Abnormality of part program storage memory

10)Abnormality in tape reader read function

11)Abnormality in data transfer between PMC

Input/output signals from PMC to CNC, or vice versa, and inner status
of the NC can be displayed on the CRT screen.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

III.7.2 CHECKING BY SELF–DIAGNOS-
TIC SCREEN

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

III.7.2 CHECKING BY SELF–DIAGNOS-
TIC SCREEN

12.1.5
Self–diagnosis

General

Reference item



B–61393E–2/02 12. DISPLAY/SETTING/EDIT

643

Indication of the current position can be suppressed by setting parameters.
(except for basic axes of T series)

#7
0029

#6
DSPSUB

#5 #4 #3 #2 #1
DSP4

#0
DSP3 (T series)

[Data type] Bit

DSPx Specifies whether to display the current position of the third axis, as
follows:
1 : Display
0 : Do not display

DSPSUB Fifth and Sixth axes in absolute and relative screens
0 : Display
1 : Do not display

#7
0035

#6 #5 #4 #3
NDSP4

#2
NDSP3

#1
NDSPY

#0
NDSPX (M series)

[Data type] Bit

NDSPx Display of the current position for each axis
0 : The current position is displayed.
1 : The current position is not displayed.

#7
0061

#6
DSP78

#5 #4 #3 #2 #1 #0

[Data type] Bit

DSP78 Seventh and Eighth axes in absolute and relative screens
0 : Display
1 : Do not display

12.1.6
Position Display
Neglect

General

Parameter



12. DISPLAY/SETTING/EDIT B–61393E–2/02

644

This function displays the integrated cycle operation time and the
integrated cutting time on the CRT display screen. The integrated cycle
operation time, the integrated cutting time can be altered and preset, using
the MDI.
In addition to the above, this function displays the count of the total
number of parts machined, the number of parts required and the number
of parts machined on the CRT screen. Each time M02, M30 or a parameter
set M code is executed, the count of the total number of parts machined
and the number of parts machined in memory is incremented by 1.
If a program is prepared so as to execute M02, M30 or a parameter set M
code each time one part machining is completed, the number of parts
machined can be counted automatically.
If the count of the number of parts machined reaches the number of parts
required, a signal is output to the PMC side.
It is possible to change and preset the number of parts required and the
number of parts machined using MDI.

[Classification] Output signal

[Function] Reports to the PMC that the specified number of parts have been
machined.

[Output condition] The PRTSF signal is set to 1 when:
� Machining of the specified number of parts has been completed.

When 0 (infinity) is set as the required number of parts, this signal is
not output.

The PRTSF signal is set to 0 when:

� Machining of the specified number of parts has not yet been
completed.

� The system is reset.

#7
PRTSFF164

#6 #5 #4 #3 #2 #1 #0

12.1.7
Run Hour and Parts
Count Display

General

Signal

Required parts count
reached signal
PRTSF<F164#7>

Signal address



B–61393E–2/02 12. DISPLAY/SETTING/EDIT

645

#7
0040

#6 #5 #4 #3
RWCNT

#2 #1 #0

[Data type] Bit

RWCNT M code that counts the total number of machined parts and the number of
machined parts
0 : M02, or M30, or an M code specified by parameter No.0219
1 : Only M code specified by parameter No.0219

0219 M code that counts the total number of machined parts and the number of
machined parts

[Data type] Byte
[Valid data range] 0 to 255 except 98 and 99

The total number of machined parts and the number of machined  parts
are counted (+1) when the M code set is executed.

NOTE
Set value 0 is invalid (the number of parts is not counted for
M00).  Data 98 and 99 cannot be set.

0600 Number of required parts

[Data type] Word
[Unit of data] One piece

[Valid data range] 0 to 9999

This parameter sets the number of required machined parts.

Required parts finish signal PRTSF is output to PMC when the number
of machined parts reaches the number of required parts.  The number of
parts is regarded as infinity when the number of required parts is zero.  The
PRTSF signal is then not output.

0779 Total number of machined parts

[Data type] Two–word
[Unit of data] One piece

[Valid data range] 0 to 99999999

This parameter sets the total number of machined parts.

The total number of machined parts is counted (+1) when M02, M30, or
an M code specified by parameter No.0219 is executed.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

III.11.5.5 Displaying and Setting Run Time,
Parts Count, and Time

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

III.11.5.3 Displaying and Setting Run Time,
Parts Count, and Time

Parameter

Reference item



12. DISPLAY/SETTING/EDIT B–61393E–2/02

646

It is possible to draw the programmed tool path on the CRT screen, which
makes it possible to check the progress of machining, while observing the
path on the CRT screen.
In addition, it is also possible to enlarge/reduce the screen.
The drawing coordinates (parameter) and graphic parameters must be set
before a tool path can be displayed.
In the 0–TTC, the tool paths of two tool posts are displayed on the same
screen, one on the right and the other on the left.

O9501 N0014

X    0.000
Y    0.000
Z    0.000

S  0  T
 10:17:21      AUTO      
[ G.PRM ][ GRAPH ][  AUX  ][      ][      ]

Z

X Y

0–MC

    S     0.33 O0001 N0022
X 200.000
Z 220.000
C 0.000
Y 0.000

S   0 T0101
 21:46:31 AUTO
[ GRAPH ][ G.PRM ][ ZOOM ][NORMAL ][ AUX ]

X

Z

0–TC

12.1.8
Graphic Display/
Dynamic Graphic
Display

General

Graphic Display



B–61393E–2/02 12. DISPLAY/SETTING/EDIT

647

HEAD2 :O0210 N2930

S 0 T    
 15:33:55         BUF AUTO       
[ GRAPH ][ G.PRM ][ ZOOM ][NORMAL ][ AUX ]

X

Z

0–TTC

There are the following two functions in Dynamic Graphics.

Path graphic

Solid graphic

This is used to draw the path of tool center com-
manded by the part program.

This is used to draw the workpiece figure machined by
tool movement commanded by the part program.

The path graphic function is used to precisely check the part program for
drawing the tool path with a line.  The solid graphic function is used to
draw the workpiece figure to be machined with a program.  Thus, it is easy
to recognize roughly the part program.  These two functions can be used
freely by switching them.

          O1126 N1126

 MEM ****  ***  *** 10:10:40

�

�

25.8

START STOP REWIND ERASE

PATH GRAPHIC (EXECUTION)

AUTO

Tool path Graph

Dynamic graphic display
(M series)



12. DISPLAY/SETTING/EDIT B–61393E–2/02

648

          O1126 N01126

ÂÂÂÂÂÂ
ÂÂÂÂÂÂ
ÂÂÂÂÂÂ
ÂÂÂÂÂÂ
ÂÂÂÂÂÂ
ÂÂÂÂÂÂ
ÂÂÂÂÂÂ
ÂÂÂÂÂÂ

ÄÄ
ÄÄ

ÄÄ
ÄÄ

F.ST STOP REWINDA.ST

SOLID GRAPHIC (EXECUTION)

Z
Y

X

Part Machined

[Classification] Output signal

[Function] Reports that a machining drawing is being created.

[Operation] The signal becomes 1 when:
�Creation of a machining drawing is started.
The signal becomes 0 when:
�Creation of a machining drawing is stopped.

#7
F164

#6 #5
CKGRP

#4 #3 #2 #1 #0

#7
0024

#6 #5 #4 #3
GNSR

#2 #1 #0
(T series)

[Data type] Bit

GNSR Current position display on the graphic display screen
0 : Displays the actual position to ensure tool nose radius compensation
1 : Displays the programmed position

Signal

Drawing signal
CKGRP <F164#5>

Signal address

Parameter



B–61393E–2/02 12. DISPLAY/SETTING/EDIT

649

#7
0046

#6 #5
GRPOS

#4 #3 #2 #1 #0

[Data type] Bit

GRPOS Current position on the graphic display screen
0 : Not appear
1 : Appears

#7
0047

#6 #5 #4 #3 #2 #1
SP2C

#0
(0–TTC)

[Data type] Bit

SP2C Graphic display (0–TTC) is done
0 : on two spindles and two tool posts
1 : on one spindle and two tool posts

#7
0058

#6 #5
SGCSR

#4
SGFIN

#3
SGPLN

#2
SG3PL

#1
SGTLC

#0
SGORG (M series)

[Data type] Bit

SGORG Movement when coordinate system is altered during drawing
0 : Draws in the same coordinate system
1 : Draws in the new coordinate system (only for the path drawing)

SGTLC In solid drawing
0 : Not compensate the tool length
1 : Compensates the tool length

SG3PL Tri–plane drawing in solid drawing
0 : Drawn by the first angle projection
1 : Drawn by the third angle projection

SGPLN In solid drawing
0 : Draws a plane without edges.
1 : Draws a plane with edges.

SGFIN Machining profile drawing in solid drawing
0 : Displayed in the coarse mode
1 : Displayed in the fine mode

SGCSR While the screen image is enlarged, the shape of the graphic cursor is:
0 : A square. (�)
1 : An X. (�)



12. DISPLAY/SETTING/EDIT B–61393E–2/02

650

0123 Coordinate system for drawing (0–TTC)

[Data type] Byte

[Valid data range] 0 to 5

The following shows the relationship between the settings and the
drawing coordinate systems:

Z

X1X2

X1

X2

Z

X1

X2

Z

(0) (1) (2)

Z

X1X2

X1

X2

Z

X1

X2

Z

(3) (4) (5)



B–61393E–2/02 12. DISPLAY/SETTING/EDIT

651

0123 Coordinate system for drawing (T series)

[Data type] Byte

[Valid data range] 0 to 7

This parameter specifies the drawing coordinate system for the graphic
function.

The following show the relationship between the set values and the
drawing coordinate systems.

X

Z

Z

Z

Z

Z

Z

Z

Z

X

X

X

X

X

X

X

Set value = 0 Set value = 1 Set value = 2 Set value = 3

Set value = 4 Set value = 5 Set value = 6 Set value = 7

NOTE
This parameter is specified for each tool post in the 0–TTC.
A different drawing coordinate system can be selected for
each tool post.

0253 Change in cross–section position in tri–plane drawing (M series)

[Data type] Byte

[Unit of data] Dot

[Valid data range] 0 to 10

This parameter sets the change in the cross–section position when a soft
key is continuously pressed in tri–plane drawing.  When zero is specified,
it is set to 1.



12. DISPLAY/SETTING/EDIT B–61393E–2/02

652

0589 Right margin in solid drawing (M series)

0590 Left margin in solid drawing (M series)

0591 Upper margin in solid drawing (M series)

0592 Lower margin in solid drawing (M series)

[Data type] Word

[Unit of data] Dot

These parameters set the machining profile drawing position in margins
on the CRT screen.  The unit is a dot.

Standard set value

Parameter
No.

Margin
area

GRPOS (No.0046#5) is 0 GRPOS (No.0046#5) is 1

9” CRT 14” CRT 9” CRT 14” CRT

0589 Right 0 0 200 100

0590 Left 0 0 0 0

0591 Upper 25 32 25 32

0592 Lower 0 10 0 10

NOTE
When the dynamic graphics function is used, the graphics
function cannot be used. (M series)

OPERATOR’S MANUAL
(For Machining Center)

III.12.1 GRAPHICS DISPLAY
(For Machining Center)
(B–61404E) III.12.2 DYNAMIC GRAPHIC DISPLAY

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

III.12.1 GRAPHICS DISPLAY

Note

Reference item



B–61393E–2/02 12. DISPLAY/SETTING/EDIT

653

The reading on the load meter can be displayed for each servo axis and
the serial spindle.

The reading on the load meter can be displayed for servo axes.

When serial spindles are used, the reading on the load meter and
speedometer can be displayed.

Although the speedometer normally indicates the speed of the spindle
motor.

#7
0060

#6 #5
OPMNDP

#4 #3 #2 #1 #0

[Data type] Bit

OPMNDP Operating monitor
0 : Not displayed
1 : Displayed

6627 Load meter displayed value for maximum output

[Data type] Word

8x86 Rated current parameter (RTCURR)

[Data type] Word

NOTE
The reading on the load meter depends on servo parameter
8x86 and spindle parameter 6627.
These parameters are set by the automatic setting.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

III.11.1.6 Operating Monitor Display

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

III.11.1.6 Operating Monitor Display

12.1.9
Operating Monitor
Display

General

� Display of the servo axes

� Display of the spindle
axes

� Speedometer

Parameter

Note

Reference item



12. DISPLAY/SETTING/EDIT B–61393E–2/02

654

The software operator’s panel function replaces part of the control
switches on the machine operator’s panel with soft switches which can be
turned on or off using the CRT/MDI of the control unit.

The control switches for the functions listed in the following table can be
replaced with soft switches. Also available are eight general–purpose soft
switches which can be used additionally by the machine tool builder.
These eight general–purpose soft switches can be optionally named by the
machine tool builder. For control switches in groups 1 to 7, parameter
(No.0017) can be used to select whether the control switches on the
machine operator‘s panel or soft switches on the CRT/MDI of the control
unit are used for each group.

Group1 :Mode selection

Group2 :Selection of jog feed axis, manual rapid traverse

Group3 :Selection of manual pulse generator feed axis, selection of
manual pulse magnification

Group4 :Jog feedrate, feedrate override, rapid traverse override

Group5 :Optional block skip, single block, machine lock, dry run

Group6 :Protect key

Group7 :Feed hold

Group8 :General purpose

The states of all soft switches are informed to the PMC by output signals.
Based on these output signals, the PMC should turn “1” or “0” input
signals related to soft switch functions. In other words, turning “1” the
soft switch assigned to single block operation, for example, does not
cause the control unit to select single block operation internally. Single
block operation is selected when the PMC turns to “1” the input signal for
single block operation, instead.

12.1.10
Software Operator’s
Panel

General



B–61393E–2/02 12. DISPLAY/SETTING/EDIT

655

Group Function Output signal Related input signal

1 Mode selection MD1O<F174#0>
MD2O<F174#1>
MD4O<F174#2>
ZRNO<F174#3>

MD1
MD2
MD4
ZRN

2 Jog feed axis se-
lect

+XO to +4O
–XO to –4O
<F177>

+X to +4
–X to –4

Manual rapid tra-
verse

RTO<F178#6> RT

3 Handle feed HXO to H4O
<F174#4 to #7>

HX
HY
HZ
H4

Handle feed mag-
nification

MP1O<F175#6>
MP2O<F175#7>

MP1
MP2

4 Jog feed rate over-
ride

JV1O to JV8O
<F175#0 to 3>

*OV1 to *OV8

Feed rate override OV1O to OV8O
<F176#0 to 3>

*OV1 to *OV8

Rapid traverse
override

ROV1O<F175#4>
ROV2O<F175#5>

ROV1
ROV2

5 Optional block skip BDTO<F176#4> BDT

Single block SBKO<F176#5> SBK

Machine lock MLKO<F176#6> MLK

Dryrun DRNO<F176#7> DRN

6 Protect key KEYO<F178#5> KEY

7 Feed hold SPO<F178#7> *SP

8 General purpose
(Switch from 1st
line to the 8th line
on CRT)

OUT0 to OUT7
<F171>

Signal



12. DISPLAY/SETTING/EDIT B–61393E–2/02

656

#7
OUT7F171

#6
OUT6

#5
OUT5

#4
OUT4

#3
OUT3

#2
OUT2

#1
OUT1

#0
OUT0

H4OF174 H3O HZO HXO ZRNO MD4O MD2O MD1O (T series)

H4OF174 HZO HYO HXO ZRNO MD4O MD2O MD1O (M series)

MP2OF175 MP1O ROV2O ROV1O JV8O JV4O JV2O JV1O

DRNOF176 MLKO SBKO BDTO OV8O OV4O OV2O OV1O

–4OF177 +4O –3O +3O –ZO +ZO –XO +XO (T series)

–4OF177 +4O –ZO +ZO –YO +YO –XO +XO (M series)

SPOF178 RTO KEYO

#7
0017

#6
OP7

#5
OP6

#4
OP5

#3
OP4

#2
OP3

#1
OP2

#0
OP1

[Data type] Bit

OP1 Mode selection on software operator’s panel
0 : Not performed
1 : Performed

OP2 JOG feed axis select and manual continous rapid traverse buttons on
software operator’s panel
0 : Not performed
1 : Performed

OP3 Manual pulse generator’s axis select and manual pulse generator’s
magnification switches on software operator’s panel
0 : Not performed
1 : Performed

OP4 Jog feedrate override, feedrate override, and rapid traverse override
switches on software operator’s panel
0 : Not performed
1 : Performed

OP5 Optional block skip, single block, machine lock, and dry run switches on
software operator’s panel
0 : Not performed
1 : Performed

OP6 Protect key on software operator’s panel
0 : Not performed
1 : Performed

OP7 Feed hold on software operator’s panel
0 : Not performed
1 : Performed

Signal address

Parameter



Arrow keys on the CRT/MDI panel

� � 	

���

� � �

B–61393E–2/02 12. DISPLAY/SETTING/EDIT

657

0130 Jog–movement axis and its direction on software operator’s panel [↑ ]

0131 Jog–movement axis and its direction on software operator’s panel [↓ ]

0132 Jog–movement axis and its direction on software operator’s panel [→]

0133 Jog–movement axis and its direction on software operator’s panel [←]

0134 Jog–movement axis and its direction on software operator’s panel [    ]

0135 Jog–movement axis and its direction on software operator’s panel [    ]

0136 Jog–movement axis and its direction on software operator’s panel [    ]

0137 Jog–movement axis and its direction on software operator’s panel [    ]

[Data type] Byte

[Valid data range] 0 to 8

On software operator’s panel, set a feed axis corresponding to an arrow
key on the CRT/MDI panel when jog feed is performed.

Set value Feed axis and direction

0 Not moved

1 First axis, positive direction

2 First axis, negative direction

3 Second axis, positive direction

4 Second axis, negative direction

5 Third axis, positive direction

6 Third axis, negative direction

7 Fourth axis, positive direction

8 Fourth axis, negative direction

(Example)
Under X, Y, and Z axis configuration, to set arrow keys to feed the axes
in the direction specified as follows, set the parameters to the values given
below. [8 �] to the positive direction of the Z axis, [2 �] to the negative
direction of the Z axis, [6�] to the positive direction of the X axis [4�]
to the negative direction of the X axis, [1�] to the positive direction of
the Y axis, [9�] to the negative direction of the Y axis

Parameter No.0130 = 5 (Z axis, positive direction)

Parameter No.0131 = 6 (Z axis, negative direction)

Parameter No.0132 = 1 (X axis, positive direction)

Parameter No.0133 = 2 (X axis, negative direction)

Parameter No.0134 = 3 (Y axis, positive direction)

Parameter No.0135 = 4 (Y axis, negative direction)

Parameter No.0136 = 0 (Not used)

Parameter No.0137 = 0 (Not used)



12. DISPLAY/SETTING/EDIT B–61393E–2/02

658

0140 Name of general–purpose switch on software operator’s panel

0203 Name of general–purpose switch on software operator’s panel

[Data type] Byte

(Exapmle)

These parameters set
the names of the gen-
eral–purpose switches
(SIGNAL 1 through
SIGNAL 8) on the
software operator ’s
panel as described be-
low.

OPERATOR’S PANEL O1234 N5678

SIGNAL 1 : �OFF ON
SIGNAL 2 : OFF �ON
SIGNAL 3 : OFF �ON
SIGNAL 4 : �OFF ON
SIGNAL 5 : �OFF ON
SIGNAL 6 : �OFF ON
SIGNAL 7 : �OFF ON
SIGNAL 8 : OFF �ON

These names are set using character codes that are displayed in parameter
Nos. 0140 to 0203.

Parameter No.0140:
Sets the character code (083) corresponding to S of SIGNAL 1.

Parameter No.0141:
Sets the character code (073) corresponding to I of SIGNAL 1.

Parameter No.0142:
Sets the character code (071) corresponding to G of SIGNAL 1.

Parameter No.0143:
Sets the character code (078) corresponding to N of SIGNAL 1.

Parameter No.0144:
Sets the character code (065) corresponding to A of SIGNAL 1.

Parameter No.0145:
Sets the character code (076) corresponding to L of SIGNAL 1.

Parameter No.0146:
Sets the character code (032) corresponding to (space) of SIGNAL 1.

Parameter No.0147:
Sets the character code (049) corresponding to 1 of SIGNAL 1.

Parameter Nos.0148 to 0155:
Set the character codes of SIGNAL 2 shown in the figure above.

Parameter Nos.0156 to 0163:
Set the character codes of SIGNAL 3 shown in the figure above.

Parameter Nos.0164 to 0171:
Set the character codes of SIGNAL 4 shown in the figure above.

Parameter Nos.0172 to 0179:
Set the character codes of SIGNAL 5 shown in the figure above.

Parameter Nos.0180 to 0187:
Set the character codes of SIGNAL 6 shown in the figure above.

Parameter Nos.0188 to 0195:
Set the character codes of SIGNAL 7 shown in the figure above.



B–61393E–2/02 12. DISPLAY/SETTING/EDIT

659

Parameter Nos.0196 to 0203:
Set the character codes of SIGNAL 8 shown in the figure above.

The character codes are shown in character code list on the following
page.  

Character to Code Correspondence Table

Char-
acter Code Comment

Char-
acter Code Comment

A   065 6   054

B   066 7   055

C   067 8   056

D   068 9   057

E   069   032 Space

F   070   !   033 Exclamation mark

G   071 ”   034 Quotation marks

H   072 #   035 Sharpe

I   073 $   036 Dollar mark

J   074 %   037 Percent

K   075 &   038 Ampersand

L   076 ’   039 Apostrophe

M   077     (   040 Left parenthesis

N   078 )   041 Right parenthesis

O   079 *   042 Asterisk

P   080 +   043 Positive sign

Q   081 ,   044 Comma

R   082 –   045 Negative sign

S   083 .   046 Period

T   084  /   047 Slash

U   085   :   058 Colon

V   086 ;   059 Semicolon

W   087 <   060 Left angle bracket

X   088 =   061 Equal sign

Y   089 >   062 Right angle bracket

Z   090   ?   063 Question mark

0   048 @   064 Commercial at mark

1   049 [   091 Left square bracket

2   050 ^   092

3   051 ¥   093 Yen mark

4   052 ]   094 Right square bracket

5   053 _   095 Underline



12. DISPLAY/SETTING/EDIT B–61393E–2/02

660

NOTE
1 Only the modes shown below can be selected by soft

switches. When the mode for DNC operation is to be
equipped, for example, all control switches for mode
selection should be on the machine operator’s panel or a
general–purpose soft switch should be used to select the
mode for DNC operation.
Soft switches available for mode selection
⋅ Manual data input
⋅ Automatic operation
⋅ Memory edit
⋅ Manual handle feed / incremental feed
⋅ Jog feed
⋅ Manual reference position return

2 When the soft switch for feed hold is turned on, output signal
SPO is turned to “1”.  At this time, the PMC turns feed hold
signal *SP to “0”.
In contrast to the above, when the soft switch for feed hold
is turned off, output signal SPO is turned “0” and the PMC
turns signal *SP to “1”. For soft switches other than feed
hold and general soft switches, when an output signal
informing the state of a soft switch is turned to “1”, the
corresponding input signal is turned to “1”.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

III.11.6.2 Displaying and Setting the Soft-
ware Operator’s Panel

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

III.11.6.2 Displaying and Setting the Soft-
ware Operator’s Panel

Note

Reference item



B–61393E–2/02 12. DISPLAY/SETTING/EDIT

661

The CRT or LCD screens are displayed in a parameter–set language.

#7
0023

#6
DSPN

#5
DHNG

#4
DITA

#3
DCHI

#2
DFRN

#1
DGRM

#0
DJPN

[Data type] Bit type

NOTE
When this parameter is set, turn off the power once.

The language used in the display on the CRT is selected.

DSPN DHNG DITA DCHI DFRN DGRM DJPN CRT display language

0 0 0 0 0 0 0 English

0 0 0 0 0 0 1 Japanese

0 0 0 0 0 1 0 German

0 0 0 0 1 0 0 French

0 0 0 1 0 0 0 Chinese (Taiwanese)

0 0 1 0 0 0 0 Italian

0 1 0 0 0 0 0 Hangul

1 0 0 0 0 0 0 Spanish

12.1.11
Multi–language Display

General

Parameter



12. DISPLAY/SETTING/EDIT B–61393E–2/02

662

One of the following part program length.

M series (m) 10 20 40 80 120 320

T series (m) 10 20 40 80 120 320

������ Message Description

070 NO PROGRAM SPACE IN
MEMORY

The memory area is insufficient.
Delete any unnecessary programs,
then retry.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

III.11.3.1 Displaying Memory Used and a List
of Programs

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

III.11.3.1 Displaying Memory Used and a List
of Programs

One of the following no. of registered programs can be selected.
63/125/200.

������ Message Description

072 TOO MANY PROGRAMS The number of programs to be stored
exceeded 63 (basic), 125 (option), or
200 (option). Delete unnecessary
programs and execute program
registeration again.

12.2
EDIT

12.2.1
Part Program Storage
Length

General

Alarm and message

Reference item

12.2.2
No. of Registered
Programs

General

Alarm and message



B–61393E–2/02 12. DISPLAY/SETTING/EDIT

663

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

III.11.3.1 Displaying Memory Used and a List
of Programs

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

III.11.3.1 Displaying Memory Used and a List
of Programs

A key called the data protection key is used to prevent part programs from
being registered or deleted erroneously.

[Classification] Input signal

[Operation] When a signal is set to 0, the associated operations are disabled.
When a signal is set to 1, the associated operations are enabled.

#7
G122

#6 #5 #4 #3
KEY

#2 #1 #0

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

III.11 SETTING AND DISPLAYING DATA

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

III.11 SETTING AND DISPLAYING DATA

Reference item

12.2.3
Memory Protection Key

General

Signal

Memory protection
signal
KEY<G122#3>

Signal address

Reference item



12. DISPLAY/SETTING/EDIT B–61393E–2/02

664

The password function locks PRG9 (bit 4 of parameter No.0010), used
to protect program Nos. 9000 to 9999, by using the PASSWD (No.0797)
and KEYWD (No.0798) parameters.  When PRG9 is locked, PRG9
cannot be set to 0.  Therefore, the protection for programs numbered 9000
to 9999 cannot be released unless the correct keyword is entered.

PRG9 is locked when different values are set in the PASSWD and
KEYWD parameters.  The values set in the two parameters are not
displayed.  NE9 is unlocked when the value preset  in the PASSWD
parameter is set in the KEYWD parameter.

#7
0010

#6 #5 #4
PRG9

#3 #2 #1 #0

[Data type] Bit

PRG9 Editing of subprograms with program numbers 9000 to 9999
0 : Not inhibited
1 : Inhibited

The following edit operations are disabled:

(1)Program deletion  (Even when deletion of all programs is specified,
programs with program numbers 9000 to 9999 are not deleted.)

(2)Program output (Even when outputting all programs is specified,
programs with program numbers 9000 to 9999 are not output.)

(3)Program number search

(4)Program editing after registration

(5)Program registration

(6)Program collation

(7)Displaying programs

0797 Password(PASSWD)

[Data type] Two–word

Set a secret number to this parameter.  Its value is not displayed.

CAUTION
Once a key is lock, parameter PRG9 cannot become 0 and
PASSWD cannot be changed unless you perform an unlock
operation or perform the memory all clear operation.
Special care should be exercised when setting the
PASSWD parameter.

12.2.4
Password Function

General

Parameter



B–61393E–2/02 12. DISPLAY/SETTING/EDIT

665

0798 Keyword(KEYWD)

[Data type] Two–word

When the value set as the password (set in parameter No. 0797) is set to
this parameter, the locked state is released and the user can now modify
the password and the value set in bit 4 (PRG9) of parameter No. 0010
becomes 0.

NOTE
The value set in this parameter is not displayed.  When the
power is turned off, this parameter is set to 0.

Editing a program while executing another program is called background
editing. The method of editing is the same as for ordinary editing
(foreground editing).
A program edited in the background should be registered in foreground
program memory.
During background editing, all programs cannot be deleted at once.

������ Message Description

??? BP/S alarm BP/S alarm occurs in the same num-
ber as the P/S alarm that occurs in or-
dinary program edit.  (070, 071, 072,
073, 074, 085,086,087, and etc.)

140 BP/S alarm It was attempted to select or delete in
the background a program being se-
lected in the foreground.  
Use background editing correctly.

NOTE
Alarm in background edit is displayed in the key input line
of the background edit screen instead of the ordinary alarm
screen and is resettable by any of the MDI key operation.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

III.9.7 BACKGROUND EDITING

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

III.9.7 BACKGROUND EDITING

12.2.5
Background Editing

General

Alarm and message

Reference item



12. DISPLAY/SETTING/EDIT B–61393E–2/02

666

When the playback option is selected, the TEACH IN JOG  mode
(TJOG) and TEACH IN HANDLE  mode (THND) are added. In these
modes, a machine position along the X, Y, and Z axes obtained by manual
operation is stored in memory as a program position to create a program.
The words other than X, Y, and Z, which include O, N, G, R, F, M, S, T,
P, Q, and EOB, can be stored in memory in the same way as in EDIT
mode.

#7
0002

#6
TJHD

#5 #4 #3 #2 #1 #0

[Data type] Bit

TJHD Manual pulse generator in TEACH IN JOG mode
0 : Valid
1 : Invalid

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

III.10.3 CREATING PROGRAMS IN
TEACH IN MODE

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

III.10.3 CREATING PROGRAMS IN
TEACH IN MODE

CONNECTION MANUAL 
(This manual)

2.6 MODE SELECTION

12.2.6
Playback

General

Parameter

Reference item



B–61393E–2/02 12. DISPLAY/SETTING/EDIT

667

Programs can be created block after block on the conversational screen
while displaying the G code menu.
Blocks in a program can be modified, inserted, or deleted using the G code
menu and converstional screen.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

III.10.5 CONVERSATIONAL PROGRAM-
MING WITH GRAPHIC FUNC-
TION

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

III.10.5 CONVERSATIONAL PROGRAM-
MING WITH GRAPHIC FUNC-
TION

12.2.7
Conversational
Programming with
Graphic Function

General

Reference item



13 INPUT/OUTPUT OF DATA B–61393E–2/02

668

13 INPUT/OUTPUT OF DATA



B–61393E–2/02 13 INPUT/OUTPUT OF DATA

669

The data shown below can be input/output through reader/puncher
interface.

1. Program

2. Offset data

3. Parameter

4. Custom macro common variables.

5. PMC D area data

This CNC has four channels of input/output device interfaces.  The
input/output device to be used is specified by setting the channel
connected to that device in setting parameter I/O.
The specified data, such as a baud rate and the number of stop bits, of an
input/output device connected to a specific channel must be set in
parameters for that channel in advance.  
For channel 1, two combinations of parameters to specify the input/output
device data are provided.
The following shows the interrelation between the input/output device
interface parameters for the channels.

Stop bit and other data

Number specified for the
input/output device

Baud rate

Stop bit and other data

Number specified for the
input/output device

Baud rate

I/O =0 : Channel 1

=1 : Channel 1

=2 : Channel 2

=3 : Channel 3

Specify a channel for

an input/output device.

I/O =1

(channel 1)

I/O 0002#0

0038#6, #7I/O =0

(channel 1)
0552

0012#0

0038#6, #7

0553

Input/output channel number

↓

I/O =3

(channel 3)

* Remote buffer

0050#0

0038#4, #5I/O =2

(channel 2)
0250

0051#0

0038#1, #2

0251

0055#2

0055#3

Stop bit and other data

Number specified for the
input/output device

Baud rate

Stop bit and other data

Number specified for the
input/output device

Baud rate

Selection of protocol

Selection of RS–422 or
RS–232C, and other data

13.1
READER/PUNCHER 
INTERFACE

General

Parameter



13 INPUT/OUTPUT OF DATA B–61393E–2/02

670

Setting entry
TVON TV check

0 : Not performed
1 : Performed

ISO Code used for data output
0 : EIA code
1 : ISO code

MAIN  CPU  BOARD Remote buffer  BOARD

CNC

I/ O =0

or

I/ O =1

Channel 1

RS–232–C

Channel 3Channel 2

RS–232–C RS–232–C RS–422

ÂÂÂÂÂ
ÂÂÂÂÂ

Reader/puncher ÂÂÂÂÂ
ÂÂÂÂÂ

Reader/puncher ÂÂÂÂÂÂ
ÂÂÂÂÂÂ

Host computer ÂÂÂÂÂ
ÂÂÂÂÂ

Host computer

I/ O =3I/ O =3I/ O =2

(1) Parameters common to all channels
#7

0018
#6

TVC
#5 #4 #3 #2 #1 #0

[Data type] Bit
TVC Character counting for TV check in the comment section of a program.

0 : Performed
1 : Not performed

#7
ICR0070

#6 #5 #4 #3 #2 #1 #0

[Data type] Bit

ICR Output of the end of block (EOB) in ISO code
0 : LF, CR, CR are output.
1 : Only LF is output.

#7
IONUL0075

#6 #5 #4 #3 #2 #1 #0

[Data type] Bit

IONUL Action taken when a NULL code is found during read of EIA code
0 : An alarm is generated.
1: The NULL code is ignored.



B–61393E–2/02 13 INPUT/OUTPUT OF DATA

671

(2) Parameters for channel 1 (I/O =0)
#7

NFED0002
#6 #5 #4 #3

RSASCI
#2 #1 #0

STP2

[Data type] Bit

STP2 The number of stop bits
0 : 1
1 : 2

RSASCI Code used at data input
0 : EIA or ISO code (automatically distinguished)
1 : ASCII code

NFED Feed before and after the data at data output
0 : Output
1 : Not output

NOTE
When input/output devices other than the FANUC PPR are
used, set NFED to 1.

#7
RSCMD10038

#6
DEVFL1

#5
RSCMD2

#4
DEVFL2

#3 #2
RSCMD3

#1
DEVFL3

#0

[Data type] Bit

Set the specification of the input/output device for I/O = 0, using the
values shown in Table 13.1 (a).

Table 13.1 (a)

(I/O=0, 1, or 2) (I/O=3)

RSCMD* DEVFL* I/O device used RSCMD3 DEVFL3 I/O device used

0 0 Bubble cassette 0 0 Bubble cassette

0 1 Floppy cassette 0 1 Floppy cassette

1 0 RS232C, PPR 1 0 Portable tape
reader, etc.

1 1 New type inter-
face

1 1 Portable tape
reader, etc.



13 INPUT/OUTPUT OF DATA B–61393E–2/02

672

0552 Baud rate (when the I/O is set to 0)

[Data type] Byte

Set baud rate of the input/output device used when the I/O is set to 0, with
a set value in Table 13.1 (b).

Table 13.1 (b)

Set value Baud rate (bps)

1

2

3

4

5

6

Set value Baud rate (bps)

7

8

9

600

1200

2400

10 4800

960011

50

100

110

150

200

300 (19200)(12) *

* : I/O channel 3 or 2

(3) Parameters for channel 1 (I/O =1)
#7

NFED0012
#6 #5 #4 #3

RSASCI
#2 #1 #0

STP2

[Data type] Bit

These parameters are used when I/O is set to 1.  The meanings of the bits
are the same as for parameter 0002.

#7
RSCMD10038

#6
DEVFL1

#5 #4 #3 #2 #1 #0

[Data type] Bit

Set the number specified for the input/output device used when the I/O
is set to 1, with one of the set values listed in Table 13.1 (a).

0553 Baud rate (when I/O is set to 1)

[Data type] Byte

Set the baud rate of the input/output device used when I/O CHANNEL
is set to 1, with a value in Table 13.1 (b).

(4) Parameters for channel 2 (I/O =2)
#7

0038
#6 #5

RSCMD2

#4
DEVFL2

#3 #2 #1 #0

[Data type] Bit

Set the number specified for the input/output device used when  I/O is set
to 2, with a value in Table 13.1 (a).



B–61393E–2/02 13 INPUT/OUTPUT OF DATA

673

#7
NFED0050

#6 #5 #4 #3
RSASCI

#2 #1 #0
STP2

[Data type] Bit

These parameters are used when I/O is set to 2.  The meanings of the bits
are the same as for parameter 0002.

0250 Baud rate (when the I/O is set to 2)

[Data type] Byte

Set the baud rate of the input/output device used when I/O CHANNEL
is set to 2, with a value in Table 13.1 (b).

������ Message Description

001 TH PARITY ALARM TH alarm (A character with incorrect
parity was input). 
Correct the tape.

002 TV PARITY ALARM TV alarm (The number of characters
in a block is odd). This alarm will be
generated only when the TV check is
effective.

085 COMMUNICATION ER-
ROR

When entering data in the memory by
using Reader / Puncher interface, an
overrun, parity or framing error was
generated. The number of bits of input
data or setting of baud rate or specifi-
cation No. of I/O unit is incorrect.

086 DR SIGNAL OFF When entering data in the memory by
using Reader / Puncher interface, the
ready signal (DR) of reader / puncher
was turned off.
Power supply of I/O unit is off or cable
is not connected or a P.C.B. is defec-
tive.

087 BUFFER OVERFLOW When entering data in the memory by
using Reader / Puncher interface,
though the read terminate command
is specified, input is not interrupted
after 10 characters read. I/O unit or
P.C.B. is defective.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

III.8 DATA INPUT/OUTPUT

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

III.8 DATA INPUT/OUTPUT

Alarm and message

Reference item



13 INPUT/OUTPUT OF DATA B–61393E–2/02

674

Refer to Descriptions (B–61392EN–1) for Remote Buffer for detailed
informetion of remote buffer.

13.2
REMOTE BUFFER



B–61393E–2/02 13 INPUT/OUTPUT OF DATA

675

Refer to FANUC DNC1 DESCRIPTIONS(B–61782E) for detailed
information of DNC1 interface.

� Setting entry
An input/output unit is selected at I/O on the setting screen.
Setting value 10

0251 Baud rate

[Data type] Byte

The baud rate of HDLC is fixed to 460 kbps for DNC1.
Set following value:

Set value. :51

NOTE
When this parameter is set, the power must be turned off
before operation is continued.

0347 System for connection between the CNC and host (DNC1 interface)

[Data type] Byte

[Valid data range] 1 or 2

This parameter specifies the system for connection (DNC1 interface)
between the CNC and host.

Set value

1 : Point–to–point connection

2 : Multipoint connection

NOTE
When this parameter is set, the power must be turned off
before operation is continued.

13.3
DNC1 INTERFACE

General

Parameter



13 INPUT/OUTPUT OF DATA B–61393E–2/02

676

0348 Station address of the CNC (DNC1 interface)

[Data type] Byte

[Valid data range] 2 to 52

This parameter specifies the station address of the CNC when the CNC
is connected via the DNC1 interface using multipoint connection.

NOTE
When this parameter is set, the power must be turned off
before operation is continued.

(SETTING)

DNC FILE SELECTION

The parameter is used to specify a file name for a part program used in
DNC operation.

Format: OXXXX.PRG (where XXXX is a four–digit number)

(1) Full keypad

1. Press the rightmost soft key .

* Skip this step if the [STRING] soft key has already appeared.

2. Press the [STRING] soft key.

3. Specify a file name using the MDI panel keys.

4. Assert the entry using the INPUT  key.

(Example) To specify O0100:

Key in ”O0100.PRG” using the MDI panel keys, then press INPUT .

(2)  Standard keypad

1. Press the rightmost soft key .

* Skip this step if the [CODE] soft key has already appeared.

2. Press the [CODE] soft key.

(SETTING)

DNC FILE SELECTION


↑

The cursor moves to here.

3. Specify a file name in ASCII code using numeric keys.

4. Assert the entry using the INPUT  key.

5. Pressing  again moves the cursor back to the previous position
and cancels the code entry.

MAP parameter
description

Setting method



B–61393E–2/02 13 INPUT/OUTPUT OF DATA

677

MAP PARAMETER O0001 N0001

(SETTING)

DNC FILE SELECTION


NUM.
MDI

[ PARAM  ][ DGNOS  ][  MAP  ][      ][      ]

[ STRING ][  CODE ][ CLEAR  ][VRFY.H][ VRFY ]

[       ][       ][       ][INS.CH][ DEL.CH ]

[STRING] is not displayed
with the standard keypad.

NC APPLICATION NAME

NC APPLICATION PASS WORD

MAX MESSAGE LENGTH

MAX INVOKES

DNC1 does not use these items.

MAP PARAMETER O0001 N0001

NC APPLICATION NAME

NC APPLICATION PASS WORD
0

MAX MESSAGE LENGTH
0

MAX INVOKES

NUM.
MDI

[ PARAM ][ DGNOS ][  MAP  ][       ][       ]



13 INPUT/OUTPUT OF DATA B–61393E–2/02

678

HOST APPLICATION NAME

HOST APPLICATION INSTACE

HOST APPLICATION PASSWORD

DNC1 does not use these items.

MAP PARAMETER O0001 N0001

HOST APPLICATION NAME

HOST APPLICATION INSTACE
0

HOST APPLICATION PASSWORD

NUM.
MDI

[ PARAM ][ DGNOS ][  MAP  ][       ][       ]

INFORMATION REPORT ENABLE

RISING EDGE 00000000 00000000
FALLING EDGE 00000000 00000000

With these parameters, it is necessary to set the bit information needed
when the status information in the CNC is sent to DNC1 at a local request.

The CNC status information consists of the following bit pattern, and
corresponds to the RISING EDGE and FALLING EDGE bit parameters.
If the bit is 0, it specifies that the information be masked.  If the bit is 1,
it specifies that the information be sent to DNC1.

RISING EDGE means that when the status information bit changes from
0 to 1, the change is reported.

FALLING EDGE means that when the status information bit changes
from 1 to 0, the change is reported.

CNC status information bit pattern configuration

15 14 13 12 11 10 09 08 07 06 05 04 03 02 01 00

Bit position:signal name Description

00 : RWD Rewind signal

01 : AL Alarm output signal

02 : RST Reset in progress signal

03 : SPL Automatic operation at pause signal

04 : STL Automatic operation being started signal

05 : OP Automatic operation in progress signal

06 : SA Servo ready

07 : MA CNC ready

08 : Not used

09 : Not used



B–61393E–2/02 13 INPUT/OUTPUT OF DATA

679

10 : Not used

11 : Not used

12 : M00 M00 decode output signal (*)

13 : M01 M01 decode output signal (*)

14 : M02 M02 decode output signal (*)

15 : M30 M30 decode output signal (*)

* Signals for the 0–TTC

#08 to #11 correspond to M00 to M30 for HEAD2.

#12 to #15 correspond to M00 to M30 for HEAD1.

MAP PARAMETER O0001 N0001

INFORMATION REPORT ENABLE
RISING EDGE 00000000 00000000
FALLING EDGE 00000000 00000000

ALARM NOTIFICATION ENABLE
UPPER WORD 00000000 00000000
LOWER WORD 00000000 00000000

NUM.
MDI

[ PARAM ][ DGNOS ][  MAP  ][       ][       ]

ALARM NOTIFICATION ENABLE

UPPER WORD 00000000 00000000
LOWER WORD 00000000 00000000

The parameter is used to specify an alarm type that causes the CNC to
inform the host of the CNC status change that is induced by the alarm.

Setting value

0: The occurrence of the alarm does not trigger notification by the 
CNC.

1: The occurrence of the alarm triggers notification by the CNC.

The parameter bits correspond to each alarm type as listed below.

Upper word bit parameter

15 14 13 12 11 10 09 08 07 06 05 04 03 02 01 00

Bit position Alarm type

01 : P/S alarm

02 : Overheat alarm

05 : P/S 100 alarm

06 : Overtravel

12 : Servo alarm

13 : P/S 101 alarm

14 : P/S 000 alarm



13 INPUT/OUTPUT OF DATA B–61393E–2/02

680

Lower word bit parameter

15 14 13 12 11 10 09 08 07 06 05 04 03 02 01 00

00 : Battery alarm

MAC PRINT FILE → Not used by DNC1.
LOGGING MODE → Not used by DNC1.

00000000 00000000

MAP SERVICE MODE→ Not used by DNC1.
00000000 00000000

NC SERVICE MODE → Not used by DNC1.
00000000 00000000

This parameter specifies the behavior of the all–file directory
information read function of the CNC as follows:

00000000 00000001 : Only the file number is read.

00000000 00000001 : Both the file number and size are read.

MAP PARAMETER O0001 N0001

MAC PRINT FILE

LOGGING MODE
00000000 00000000

MAP SERVIEC MODE
00000000 00000000

NC SERVIEC MODE
00000000 00000000

NUM.
MDI

[ PARAM ][ DGNOS ][  MAP  ][       ][       ]

MAP LOG MESSAGE O0001 N0001

NUM.
MDI

[ ALARM ][ MSG ][MAPMSG][       ][       ]

Not used with the DNC1 function

MAP LOG MESSAGE
screen



B–61393E–2/02 13 INPUT/OUTPUT OF DATA

681

Refer to an item of FANUC DNC2 DESCRIPTIONS (B–61992E) for
detailed information of DNC2 interface.

13.4
DNC2 INTERFACE



13 INPUT/OUTPUT OF DATA B–61393E–2/02

682

It is possible to request from the outside that a program be registered,
collated, or output.

� Registeration/Collation
As triggered by the external read start signal EXRD, the background
edit function saves programs from an external input unit onto tape and
verifies them.

� Output
As triggered by the external punch start signal EXWT, the background
edit function outputs all programs stored in the part program memory
to an external output device.

[Classification] Input signal

[Function] Programs are registered through the reader/punch interface or remote
buffer.  Or the read programs are collated with programs already stored
in the part program memory.

[Operation] When this signal becomes logical 1, the CNC operates as follows:
� In all modes other than the MDI mode, the background edit function

reads programs from an external input device, and register them on the
part program memory or collates them with programs already
registered in the part program memory.
(The memory protection key KEY<G122#3> determines whether to
register or collate.)

� Bit 1 (RAL) of parameter No.0045 selects whether to register all
programs in a file or one program at a time.  Bit 0 (RDL) of parameter
No.0045 can be used to delete all programs previously stored in the
part program memory.  However, it is impossible to delete programs
protected by bit 4 (PRG9) of parameter No.0010 and bit 2 (PRG8) of
parameter No.0389.

� When programs are being registed or collated, the read/punch busy
signal (RPBSY) is kept to be logical 1.

� When the background processing–activated signal BGEACT is
logical 1 (for example, during background editing or MDI mode), the
external read start signal EXRD is ignored.

� When programs are being registered or collated, if the system is reset
or the external read/punch stop signal EXSTP becomes logical 1, the
registeration or collation is discontinued.

� If the foreground processing is already using the reader/punch
interface (for example, during DNC operation or program reading in
the edit mode), the external read start signal EXRD is ignored.

13.5
EXTERNAL I/O 
DEVICE CONTROL

General

Signal

External read start signal
EXRD<G134#1>



B–61393E–2/02 13 INPUT/OUTPUT OF DATA

683

� There are some other conditions to determine whether a program can
be registered or collated.  For example, a program cannot be registered
or collated, if a program with the same program number is being
executed in the foreground processing.

[Classification] Input signal

[Function] Programs stored in the part program memory are output to an external unit
via the reader/punch interface.

[Operation] When this signal becomes logical 1, the CNC operates as follows:
� In all modes other than the MDI mode, the background edit function

outputs all programs stored in the part program memory to an external
output device.

� When programs are being output, the read/punch busy signal RPBSY
becomes logical 1.

� When the background processing–activated signal BGEACT is
logical 1 (for example, during background editing or MDI mode), the
external punch start signal EXWT is ignored.

� When programs are being output, if the system is reset or the external
read/punch stop signal EXSTP becomes logical 1, the output is
discontinued.

� If the foreground processing is already using the reader/punch
interface (for example, during DNC operation or program reading in
the edit mode), the external punch start signal EXWT is ignored.

�  There are some other conditions to determine whether all programs
can be output.  For example, a program cannot be output, if it is
running or protected by bit 4 (PRG9) of parameter No.0010 and bit 2
(PRG8) of parameter No.0389.

[Classification] Input signal

[Function] When the external read/punch stop signal becomes logical 1, it stops
program registeration, collation, or output via the reader/punch interface
and program registeration and collation via the remote buffer.

[Operation] When this signal becomes logical 1, the CNC operates as follows:
� The program registeration, collation or output triggered by the

external read or punch start signal is stopped immediately.

External punch start
signal 
EXWT<G134#3>

External read/punch stop
signal 
EXSTP<G134#2>



13 INPUT/OUTPUT OF DATA B–61393E–2/02

684

[Classification] Output signal

[Function] This signal indicates that the background edit function is operating.

[Output condition] This signal becomes logical 1 when:
� The [BG EDIT] soft key is pressed to put the CNC in the background

edit mode.

� The MDI mode is selected.

� The external read or punch start signal starts program registeration,
collation, or output.

� When the uploading or downloading of a program from DNC1,
DNC2, or MMC is started.

This signal becomes logical 0 when:

� The [BG END] soft key is pressed to terminate the background edit
mode.

� The CNC shifts from the MDI mode to another mode.

� Program registeration or output triggered by the external read or punch
start signal ends either normally or abnormally (reset or requested by
the EXSTP signal).

� When the uploading or downloading of a program from DNC1,
DNC2, or MMC is completed.

[Classification] Output signal

[Function] This signal indicates that program registeration, collation, or output
triggered by the external read or punch start signal is under way.

[Output condition] This signal becomes logical 1, when:
� The external read or punch start signal triggers program registeration,

collation, or output.

This signal becomes logical 0, when:

� Program registeration collation or output triggered by the external read
or punch start signal ends either normally or abnormally (reset or
requested by the EXSTP signal).

Background editing
signal
BGEACT<F180#4>

Read/punch busy signal
RPBSY<F180#2>



B–61393E–2/02 13 INPUT/OUTPUT OF DATA

685

[Classification] Output signal

[Function] This signal indicates that an alarm condition has occurred during program
registeration, collation, or output triggered by the external read or punch
start signal.

[Output condition] This signal becomes logical 1, when:
� An alarm condition occurs during program registeration, collation, or

output triggered by the external read or punch start signal.

This signal becomes logical 0, when:

� The system is reset, or the external read/punch stop signal EXSTP is
input.

#7
G134

#6 #5 #4 #3
EXWT

#2
EXSTP

#1
EXRD

#0

#7
F180

#6 #5 #4
BGEACT

#3
RPALM

#2
RPBSY

#1 #0

Stop bit and other data

Number specified for the
input/output device

Baud rate

Stop bit and other data

Number specified for the
input/output device

Baud rate

I/O =0 : Channel 1

=1 : Channel 1

=2 : Channel 2

=3 : Channel 3

Specify a channel for

an input/output device.

I/O =1

(channel 1)

I/O 0002#0

0038#6, #7I/O =0

(channel 1)
0552

0012#0

0038#6, #7

0553

Input/output channel number

↓

I/O =3

(channel 3)

* Remote buffer

0050#0

0038#4, #5I/O =2

(channel 2)
0250

0051#0

0038#1, #2

0251

0055#2

0055#3

Stop bit and other data

Number specified for the
input/output device

Baud rate

Stop bit and other data

Number specified for the
input/output device

Baud rate

Selection of protocol

Selection of RS–422 or
RS–232C, and other data

Read/punch alarm signal
RPALM<F180#3>

Signal Address

Parameter



13 INPUT/OUTPUT OF DATA B–61393E–2/02

686

#7
0010

#6 #5 #4
PRG9

#3 #2 #1 #0

[Data type] Bit

PRG9 Editing of subprograms with program numbers 9000 to 9999
0 : Not inhibited
1 : Inhibited

The following edit operations are disabled:

(1)Program deletion  (Even when deletion of all programs is specified,
programs with program numbers 9000 to 9999 are not deleted.)

(2)Program punching  (Even when punching of all programs is
specified, programs with program numbers 9000 to 9999 are not
punched.)

(3)Program number search

(4)Program editing after registration

(5)Program registration

(6)Program collation

(7)Displaying programs

#7
0015

#6
REP

#5 #4 #3 #2 #1 #0

[Data type] Bit

REP Action in response to an attempt to register a program whose number is
the same as that of an existing program
0 : An alarm is generated.
1 : The existing program is deleted, then the new program is registered.

Note that if the existing program is protected from being edited, it is
not deleted, and an alarm is generated.

#7
0019

#6
NEOP

#5 #4 #3 #2 #1 #0

[Data type] Bit

NEOP With an M02, M30, or M99 block, program registration is assumed to be:
0 : Completed
1 : Not completed



B–61393E–2/02 13 INPUT/OUTPUT OF DATA

687

#7
0045

#6 #5 #4 #3 #2 #1
RAL

#0
RDL

[Data type] Bit

RDL When a program is registered by input/output device external control
0 : The new program is registered following the programs already

registered.
1 : All registered programs are deleted, then the new program is

registered.
Note that programs which are protected from being edited are not
deleted.

RAL When programs are registered through the reader/puncher interface
0 : All programs are registered.
1 : Only one program is registered.

#7
0389

#6 #5 #4 #3 #2
PRG8

#1 #0

[Data type] Bit

PRG8 Editing of subprograms with program numbers 8000 to 8999
0 : Not inhibited
1 : Inhibited

The following edit operations are disabled:

(1)Program deletion  (Even when deletion of all programs is specified,
programs with program numbers 8000 to 8999 are not deleted.)

(2)Program output (Even when outputting all programs is specified,
programs with program numbers 8000 to 8999 are not output.)

(3)Program number search

(4)Program editing after registration

(5)Program registration

(6)Program collation

(7)Displaying programs



13 INPUT/OUTPUT OF DATA B–61393E–2/02

688

������ Message Description

079 BP/S ALARM In memory or program collation,a pro-
gram in memory does not agree with
that read from an external I/O device.
Check both the programs in memory
and those from the external device.

085 BP/S ALARM When entering data in the memory by
using Reader / Puncher interface, an
overrun, parity or framing error was
generated. The number of bits of input
data or setting of baud rate or specifi-
cation No. of I/O unit is incorrect.

086 BP/S ALARM When entering data in the memory by
using Reader / Puncher interface, the
ready signal (DR) of reader / puncher
was turned off.
Power supply of I/O unit is off or cable
is not connected or a P.C.B. is defec-
tive.

087 BP/S ALARM When entering data in the memory by
using reader /puncher interface,
though the read terminate command
is specified, input does not stop after
10 characters read. I/O unit or P.C.B.
is defective.

180 BP/S ALARM Remote buffer connection alarm has
generated. Confirm the number of
cables, parameters and I/O device.

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

III.8.4 PROGRAM INPUT/OUTPUT

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

III.8.4 PROGRAM INPUT/OUTPUT

Alarm and message

Reference item



B–61393E–2/02 13 INPUT/OUTPUT OF DATA

689

While an automation operation is being performed, a program input from
an I/O device connected to the reader/punch interface can be executed and
stored in memory.
Similarly, a program stored in memory can be executed and output
through the reader/punch interface at the same time.

(1)Search the head of a program (file) you want to run and input.

(2)Set the signal (G127#5) for DNC operation to logical 1.

(3)Set the input and run simultaneous mode select signal STRD to
logical 1.

(4)Activate automatic operation.

(5)The system repeats to input and run one block of data alternately.

(1)Select a program you want to run and output.

(2)Set the signal (G127#5) for DNC operation to logical 1.

(3)Set the output and run simultaneous mode select signal STWD to
logical 1.

(4)Activate automatic operation.

(5)The system repeats to output and run one block of data alternately.

[Classification] Input signal

[Function] When this signal becomes logical 1, the control unit:
� Selects the input and run simultaneous mode.

To select the input and run simultaneous mode, it is necessary to
select the DNC operation mode and to set this signal to logical 1.

13.6
SIMULTANEOUS
INPUT AND OUTPUT 
OPERATIONS 
(M SERIES)

General

Basic procedure for input
and run simultaneous
operation

Basic procedure for output
and run simultaneous
operation

Signal

Input and run
simultaneous mode
select signal
STRD <G140#5>



13 INPUT/OUTPUT OF DATA B–61393E–2/02

690

[Classification] Input signal

[Function] When this signal becomes logical 1, the control unit:
� Selects the output and run simultaneous mode.

To select the output and run simultaneous mode, it is necessary to
select the DNC operation mode and to set this signal to logical 1.

#7
G140

#6
STWD

#5
STRD

#4 #3 #2 #1 #0

������ Message Description

123 CAN NOT USE MACRO
COMMAND IN DNC

Macro control command is used dur-
ing DNC operation.
Modify the program.

210 CAN NOT COMAND
M198/M199

M198 and M199 are executed in the
schedule operation. M198 is executed
in the DNC operation.  Modify the pro-
gram.

NOTE
1 M198 (file access) cannot be executed in the input, output

and run simultaneous mode.  An attempt to do so results in
alarm No. 210.

2 A macro control command cannot be executed in the input,
output and run simultaneous mode. An attempt to do so
results in alarm No. 123.

3 If an alarm condition occurs during the input, output and run
simultaneous mode, a block being processed when the
alarm condition occurs and all blocks before that are input
or output.

4 In the output and run simultaneous mode, if a device used
is a floppy disk drive or FA card, the file name is the
execution program number.

5 When a program is being executed in the output and run
simultaneous mode, if a subprogram is called, only the main
program is output.

Output and run
simultaneous mode
select signal
STWD <G140#6>

Signal address

Alarm and message

Note



B–61393E–2/02 13 INPUT/OUTPUT OF DATA

691

By using the external program input start signal, a program can be loaded
from an input unit into CNC memory.
When an input unit such as the FANUC Handy File or FANUC Floppy
Cassette is being used, a file can be searched for using the workpiece
number search signals, after which the program can be loaded into CNC
memory.

[Classification] Input signal

[Function] This signal starts loading of a program from an input unit into CNC
memory.

[Operation] When the signal is set to 1, the control unit operates as follows:
� When memory operation mode is set, but no automatic operation is

being performed and program loading is not inhibited by the setting
of the memory protection key, the CNC deletes all currently loaded
programs, then loads a program from the external input unit into CNC
memory.

� When the FANUC Handy File or FANUC Floppy Cassette is being
used as the input unit, a desired file can be searched for using the
workpiece number search signals (PN1 to PN8), after which the
program can be loaded into CNC memory.  
File numbers are indicated using the workpiece number search signals,
as follows:

13.7
EXTERNAL 
PROGRAM INPUT

General

Signal

External program input
start signal 
MINP<G120#0>(M series)/
<G117#0>(T series)



(*)

13 INPUT/OUTPUT OF DATA B–61393E–2/02

692

Workpiece no. search signal
File no

PN8 PN4 PN2 PN1
File  no.

0 0 0 0 00

0 0 0 1 01

0 0 1 0 02

0 0 1 1 03

0 1 0 0 04

0 1 0 1 05

0 1 1 0 06

0 1 1 1 07

1 0 0 0 08

1 0 0 1 09

1 0 1 0 10

1 0 1 1 11

1 1 0 0 12

1 1 0 1 13

1 1 1 0 14

1 1 1 1 15

(*)File No. 00 is used for special specification; specifying file No. 00
means that no search operation is to be performed.  Therefore, numbers
01 to 15 can be assigned to files.

[Application] This function is applicable to the following case:
When a program to be used for machining is too large to be loaded into
CNC memory, the program is divided into several segments.  These
segments are loaded into memory and executed, one by one.



B–61393E–2/02 13 INPUT/OUTPUT OF DATA

693

In this case, the general operation flow is as shown below.

Press the cycle start button.

 Issuing the external program input start

signal (MINP) starts program input.

The automatic operation mode signal (STL)

is set to 1, then program input starts.

When input terminates, the STL 

signal is set to 0.

A change to 0 in the STL signal is

detected, then CNC operation starts.

Machining by the CNC

End of machining?

A miscellaneous function, previously added to the

end of the program, is executed.  An appropriate

code is defined for this miscellaneous function in the

machine to input the next program.

Operation terminates.

Yes

No

This miscellaneous function is detected, then

operation is interrupted by a single block 

signal or automatic operation stop signal.

 The STL signal is set to 0.  Then, input of

the next program is started according to the

MINP signal.



13 INPUT/OUTPUT OF DATA B–61393E–2/02

694

The timing chart for data reading is shown below.

Execution of a machining program

M code command for the Mxxx

next program input

Code signal M00AM31

Strobe signal MF

Single–block signal SBK

Completion signal FIN

Cycle start lamp signal STL

External program input MINP
start signal

Program input
Automatic operation ST
start signal

CAUTION
The M code used for input of the next program must not be
buffered.

NOTE
While a program is being input, the automatic operation
mode signal STL is set to 1.  Upon termination of program
input, STL is set to 0.

G117 MINP (T series)
#7 #6 #5 #4 #3 #2 #1 #0

G120 MINP (M series)

#7
MCINP0011

#6 #5 #4 #3 #2 #1 #0

[Data type] Bit

MCINP Specifies whether to load a program into memory according to the
external program input start signal (MINP).
0 : Does not load a program into memory.
1 : Loads a program into memory.

Signal Address

Parameter



B–61393E–2/02 13 INPUT/OUTPUT OF DATA

695

NOTE
A program can be input according to the external program
input start signal only when the program has only one
program number.
To read programs having multiple program numbers, reset
the CNC each time the CNC reads one program.  After
reset, search for a desired program by using the workpiece
number search signals, then input the program according to
the external program input start signal.

Note



14. MEASUREMENT B–61393E–2/02

696

14 MEASUREMENT



B–61393E–2/02 14. MEASUREMENT

697

The value displayed as a relative position can be set in the offset memory
as an offset value by a soft key.

Call offset value display screen on the CRT.  Relative positions are also
displayed on this screen.  Reset the displayed relative position to zero.
Set the tool for measurement at the same fixed point on the machine by
a manual operation.  The relative position display at this point shows
difference between the reference tool and the tool measured and the
relative position display value is then set as offset amounts.

ÄÄ
ÄÄ
ÄÄ
ÄÄ
ÄÄ

ÄÄ
ÄÄ
ÄÄ
ÄÄ

Reference tool

This difference
is set as offset
amount

Fixed point

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

III.11.4.2 Tool Length Measurement

14.1
TOOL LENGTH 
MEASUREMENT 
(M SERIES)

General

Reference Item



14. MEASUREMENT B–61393E–2/02

698

When a tool is moved to the measurement position by execution of a
command given to the CNC, the CNC automatically measures the
difference between the current coordinate value and the coordinate value
of the command measurement position and uses it as the offset value for
the tool.

[Classification] Input signal

[Function] If the measuring position specified by a program command differs from
the measuring position which a tool has reached in practice, that is, the
position at the moment the measuring position reached signal has just
been turned ”1”, the difference in the coordinate value is added to the
current tool compensation value to update the compensation value. The
tool is first fed to the specified measuring position by rapid traverse in a
block where one of the following commands has been specified:

G37 (M series)
G36, G37 (T series)

The tool decelerates and temporarily stops at the distance O before the
measuring position.
The tool then moves to the measuring position at the speed preset by a
parameter no. 0558. If the measuring position reached signal
corresponding to the G code is turned ”1” after the tool has approached
within distance ε of the measuring position and before the tool overshoots
the measuring position by distance ε, the control unit updates the
compensation value and terminates the move command for the block. If
the measuring position reached signal is not turned ”1” even after the tool
has overshot the measuring position by distance ε, the control unit enters
an alarm state and terminates the move command for the block without
updating the compensation value.

14.2
AUTOMATIC TOOL
LENGTH
MEASUREMENT 
(M SERIES) / 
AUTOMATIC TOOL 
OFFSET (T SERIES)

General

Signal

Measuring position
reached signals
XAE<X008#0>,
YAE<X008#1>,
ZAE<X008#2>(M series)
XAE<X008#0>,
ZAE<X008#1>(T series)



B–61393E–2/02 14. MEASUREMENT

699

�

�

�

Feedrate

Start point

Rapid traverse

Rapid traverse rate

Presumed
measuring position

Measuring speed

Measuring position reached signal

[Operation] When the signal is turned ”1”, the control unit operates as follows:

� Reads the position of the tool along the axis currently specified and
updates the current compensation value based on the difference
between the specified measuring position and the read measuring
position in the following case: When the measuring position reached
signal corresponding to the G code is turned on in a block where G36
(T series) or G37 is specified after the tool is within distance ε of the
measuring position specified by a program and before the tool
overshoots the measuring position by distance ε. The control unit then
stops the tool, and terminates the move command for the block.

� Enters an alarm state and terminates the move command for the block
without updating the compensation value in the following case: When
the measuring position reached signal corresponding to the command
is turned ”1” in a block where G36 (T series), G37 is specified after
the tool is within distance γ of the measuring position but before the
tool is within distance ε of the measuring position.

� The control unit does not monitor the measuring position reached
signal for its rising edge but monitors the state of the signal. If the
signal remains ”1” when the next corresponding automatic tool length
measurement (automatic tool compensation) is specified, the control
unit enters an alarm state when the tool is within distance γ of the
measuring position.

NOTE
1 The measuring position reached signal requires at least 10

msec.
2 The CNC directly inputs the measuring position reached

signals from the machine tool; the PMC does not process
them.

3 If automatic tool compensation nor automatic tool length
measurement is not used, the PMC can use the signal
terminals corresponding to the measuring position reached
signal as the general-purpose input signals.



14. MEASUREMENT B–61393E–2/02

700

#7
X008

#6 #5 #4 #3 #2 #1
ZAE

#0
XAE (T series)

ZAE YAE XAE (M series)

0558 Feedrate during measurement of automatic tool compensation (T series)

Feedrate during measurement of tool length automatic compensation (M series)

[Data type] Word

��������� ������ 	��� �� ���


��� ��� �����

��������� ������ 	��� �� ���

����� ���� ����

Millimeter machine 1 mm/min 6 to 15000 6 to 12000

Inch machine 0.1 inch/min 6 to 6000 6 to 4800

Rotation axis 1 deg/min 6 to 15000 6 to 12000

This parameter sets the feedrate during measurement of automatic tool
compensation (T series) and tool length automatic compensation (M
series).

0731 � value on X axis during automatic tool compensation (T series)

0732 � value on Z axis during automatic tool compensation (T series)

0813 � value during tool length automatic  compensation (M series)

[Data type] Two–word

[Unit of data]

Increment system IS–A IS–B IS–C Unit

Metric input 0.01 0.001 0.0001 mm

Inch input 0.001 0.0001 0.00001 inch

[Valid data range] 1 to 99999999

These parameters set the� value during automatic tool compensation (T
series) or tool length  automatic compensation (M series).

CAUTION
Set a radius value irrespective of whether the diameter
programming or the radius programming is specified.

Signal address

Parameter



B–61393E–2/02 14. MEASUREMENT

701

0733 � value on X axis during automatic tool compensation (T series)

0734 � value on Z axis during tool automatic compensation (T series)

0814 � value during tool length automatic compensation (M series)

[Data type] Two–word

[Unit of data]

Increment system IS–A IS–B IS–C Unit

Metric input 0.01 0.001 0.0001 mm

Inch input 0.001 0.0001 0.00001 inch

[Valid data range] 1 to 99999999

These parameters set the� value during automatic tool compensation (T
series) or tool length automatic compensation (M series).

CAUTION
Set a radius value irrespective of whether the diameter
programming or the radius programming is specified.

������ Message Description

080 G37 ARRIVAL SIGNAL
NOT ASSERTED

(M series)

In the automatic tool length measure-
ment function (G37), the measure-
ment position reached signal (XAE,
YAE, or ZAE) is not turned on within
an area specified in parameter 0814
(value ε). 
This is due to a setting or operator er-
ror.

G37 ARRIVAL SIGNAL
NOT ASSERTED

(T series)

In the automatic tool compensation
function (G36, G37), the measure-
ment position reached signal (XAE or
ZAE) is not turned on within an area
specified in parameter 0733, and
0734  (value ε). 
This is due to a setting or operator er-
ror.

081 OFFSET NUMBER NOT
FOUND IN G37

(M series)

Tool length automatic measurement
(G37) was specified without a H code.
(Automatic tool length measurement
function) Modify the program.

OFFSET NUMBER NOT
FOUND IN G37

(T series)

Automatic tool compensation (G36,
G37) was specified without a T code.
(Automatic tool compensation func-
tion) Modify the program.

Alarm and Message



14. MEASUREMENT B–61393E–2/02

702

������ DescriptionMessage

082 H–CODE NOT ALLOWED
IN G37

(M series)

H code and automatic tool compensa-
tion (G37) were specified in the same
block. (Automatic tool length measure-
ment function) Modify the program.

T–CODE NOT ALLOWED
IN G37

(T series)

T code and automatic tool compensa-
tion (G36, G37) were specified in the
same block. (Automatic tool com-
pensation function) 
Modify the program.

083 ILLEGAL AXIS COM-
MAND IN G37

(M series)

In automatic tool length measurement,
an invalid axis was specified or the
command is incremental.   Modify the
program.

ILLEGAL AXIS COM-
MAND IN G37

(T series)

In automatic tool compensation (G36,
G37), an invalid axis was specified or
the command is incremental.   Modify
the program.



B–61393E–2/02 14. MEASUREMENT

703

NOTE
1 Measurement speed, γ, and εare set as parameters.ε must

be positive numbers so that γ>ε.
2 The compensation value is updated by the following

formula:
New compensation value =(Current compensation 

value)+[(Current position of the
tool along the specified axis
when the measuring position
reached signal is turned on) –
(specified measuring position)]

The following compensation values are updated:
(1)In a M series, the compensation value corresponding to

the tool compensation number selected by an H code.
When offset memory A is used, the offset value is
changed.
When offset memory B is used, the tool wear
compensation value is changed.
When offset memory C is used, the tool wear
compensation value for the H code is changed.

(2)In a T series, the compensation value corresponding to
the tool compensation number selected by a T code and
to the specified axis (X, Z) in G36, G37.

3 The maximum measuring error is calculated as shown
below.

ERRmax: Maximum measuring error (mm)
Fm    : Measuring feedrate (mm/min)
If Fm = 100 mm/min, for example, ERRmax = 0.007 mm

4 After the measuring position reached signal has been
detected, the tool moves for a maximum of 20 msec, then
stops.  Values for calculating the compensation amount,
that is the coordinate of the tool where the tool reached the
measuring position are not those obtained after stop, but
those obtained at the position where the measuring position
reached signal was detected.
The overtravel amount for 20 msec is calculated as follows.

Qmax: Maximum overtravel amount (mm)
Fm  : Measuring feedrate (mm/min)
Ts  : Servo time constant [msec] (1/loop gain)

ERRmax = Fm × ×
60 1000
1 4

Qmax = Fm × ×
60 1000
1 1

(20 + Ts)

Note



14. MEASUREMENT B–61393E–2/02

704

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.14.2 AUTOMATIC  TOOL LENGTH
MEASUREMENT (G37)

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.14.5 AUTOMATIC TOOL OFFSET (G36,
G37)

Reference item



B–61393E–2/02 14. MEASUREMENT

705

Linear interpolation can be commanded by specifying axial move
following the G31 command, like G01.  If an external skip signal is input
during the execution of this command, execution of the command is
interrupted and the next block is executed.
The skip function is used when the end of machining is not programmed
but specified with a signal from the machine, for example, in grinding. It
is used also for measuring the dimensions of a workpiece.

The coordinate values when the skip signal is turned on can be used in a
custom macro because they are stored in the custom macro system
variable #5061 to #5064, as follows:

#5061 X axis coordinate value
#5062 Z axis coordinate value
#5063 3rd axis coordinate value
#5064 4th axis coordinate value

[Classification] Input signal

[Function] This signal terminates skip cutting. That is, the position where a skip
signal turns to “1” in a block containing G31 is stored in a custom macro
variable, and the move command of the block is terminated at the same
time.

[Operation] When a skip signal turns to “1”, the control unit functions as described
below.

(1)When a block contains a skip cutting command G31, the control unit
reads and stores the current position of the specified axis at that time.
The control unit stops the axis, then cancels the remaining distance
that the block was supposed to be moved.

(2)The skip signal is monitored not for a rising edge, but for its state. So,
if a skip signal continues to be “1”, a skip condition is assumed to be
satisfied immediately when the next skip cutting is specified.

14.3
SKIP FUNCTION

14.3.1
Skip Function

General

Signal

Skip signal
SKIP<X008#7>



14. MEASUREMENT B–61393E–2/02

706

NOTE
1 The skip signal  requires at least 10 msec.
2 The CNC directly reads the skip signal SKIP<X008#7> from

the machine tool; the PMC no longer requires to process the
signal.

3 If the skip function G31 is not used, the PMC can use the
signal terminal SKIP<X008#7> corresponding to the skip
signal as a general purpose input signal.

#7
SKIPX008

#6 #5 #4 #3 #2 #1 #0

#7
0015

#6 #5 #4 #3
SKPF

#2 #1 #0

[Data type] Bit

SKPF Dry run, override, and automatic acceleration/deceleration for G31 skip
command
0 : Disabled
1 : Enabled

������ Message Description

035 CAN NOT COMMANDED
G31

(T series)

Skip cutting (G31) was specified in
tool nose radius compensation mode.
Modify the program.

036 CAN NOT COMMANDED
G31

(M series)

Skip cutting (G31) was specified in
cutter compensation mode.
Modify the program.

WARNING
Disable feedrate override, dry run, and automatic
acceleration/deceleration (enabled with parameter
No.0015#3 SKPF=1) when the feedrate per minute is
specified, allowing for reducing an error in the position of the
tool when a skip signal is input. These functions are enabled
when the feedrate per rotation is specified.

Signal address

Parameter

Alarm and message

Warning



B–61393E–2/02 14. MEASUREMENT

707

NOTE
1 The G31 block is set to G01 mode. The feedrate is specified

by an F code.
2 When the measuring motion is made by utilizing the skip

signal, program a constant feedrate; otherwise, if the
feedrate changes, the measuring error will be noticeable.
With a constant feedrate, the maximum measuring error can
be calculated as follows:

ERRmax : Maximum measuring error (mm or inch)
Fm : Measuring feedrate (mm/min or inch/min)

3 Overtravel amount Qmax after skip signal has been turned
to ”1” is calculated by the following:

Qmax : Overtravel amount (mm or inch)
Fm : Feedrate (mm/min or inch/min)
Tc : Cutting time constant (ms)
Ts : Servo time constant (ms) (                  )

ERRmax = Fm × ×
60 1000
1 4

Qmax = Fm × ×
60 1000
1 1

(20 + Tc + Ts)

loop gain
1

OPERATOR’S MANUAL
(For Machining Center)
(B–61404E)

II.4.8 SKIP FUNCTION(G31)

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.4.9 SKIP FUNCTION(G31)

Note

Reference item



14. MEASUREMENT B–61393E–2/02

708

The skip function operates based on a high-speed skip signal instead of
an ordinary skip signal (X008#7).  In this case, up to eight signals can be
input.

Delay and error of skip signal input is 0 - 2 msec at the NC side (not
considering those at the PMC side).

This high-speed skip signal input function keeps this value to 0.1 msec
or less, thus allowing high precision measurement.

14.3.2
High–speed Skip
Signal

General



B–61393E–2/02 14. MEASUREMENT

709

In a block specifying P1 to P4 after G31, the multistage skip function
stores coordinates in a custom macro variable when a skip signal (4
points) is turned on.
Also in a block specifying Q1 to Q4 after G04, the multistage skip
function skips a dwell when the skip signal (4 points) has turned on.
A skip signal from equipment such as a fixed-dimension size measuring
instrument can be used to skip programs being executed.
In plunge grinding, for example, a series of operations from rough
machining to spark-out can be performed automatically by applying a
skip signal each time rough machining, semi-fine machining, fine-
machining, or spark-out operation is completed.

[Classification] Input signal

[Function] These signals terminate skip cutting. That is, the position where a skip
signal turns to “1” in a command program block containing G31P1 (or
G31), G31P2, or G31P3, G31P4 is stored in a custom macro variable, and
the move command of the block is terminated at the same time.
Furthermore, in a block containing G04, G04Q1, G04Q2, G04Q3 or
G04Q4, the dwell command of the block is terminated.

In either case, until all other commands (such as miscellaneous functions)
of the block are completed, machining never proceeds to the next block.

Which of the four skip signals is applicable to blocks containing the G
codes can be determined by parameter (No.0033 to 0035). The eight skip
signals can correspond to the G codes on a one-to-one basis. One skip
signal can also be made applicable to multiple G codes. Conversely,
multiple skip signals can be made applicable to one G code.

[Operation] When a skip signal turns to “1”, the control unit functions as described
below.

(1)When a block contains a G code from (G31, G31P1 to P4) for skip
cutting, and the skip signal is made applicable by parameter setting to
the command, the control unit reads and stores the current position of
the specified axis at that time. The control unit stops the axis, then
cancels the remaining distance that the block was supposed to be
moved.

(2)When a block contains a G04, or G04Q1 to Q4 code for dwell, and the
skip signal is made applicable by parameter setting to the command,
the control unit stops dwell operation, and cancels any remaining
dwell time.

14.3.3
Multi–step Skip
(0/00–GCC)

General

Signal

Skip signal 
SKIP, SKIP2 to SKIP4
<X008#7, #2 to #4>



14. MEASUREMENT B–61393E–2/02

710

(3)The skip signal is monitored not for a rising edge, but for its state. So,
if a skip signal continues to be “1”, a skip condition is assumed to be
satisfied immediately when the next skip cutting or dwell operation is
specified.

#7
SKIPX008

#6 #5 #4
SKIP4

#3
SKIP3

#2
SKIP2

#1 #0

#7
P2S40033

#6
P2S3

#5
P2S2

#4
P2S1

#3
P1S4

#2
P1S3

#1
P1S2

#0
P1S1

P4S40034 P4S3 P4S2 P4S1 P3S4 P3S3 P3S2 P3S1

0035 DS4 DS3 DS2 DS1

[Data type] Bit

P1S1 to P1S4, P2S1 to P2S4, P3S1 to P3S4, P4S1 to P4S4, DS1 to DS4
Specify which skip signal is enabled when the skip command (G31, or
G31P1 to G31P4) and the dwell command (G04, G04Q1 to G04Q4) are
issued with the multi–step skip function.

The following table shows the correspondence between the bits, input
signals, and commands.

The settings of the bits have the following meanings:

0 : The skip signal corresponding to the bit is disabled.
1 : The skip signal corresponding to the bit is enabled.

Multi–step skip function

Command

Input 
signal

G31
G31P1
G04Q1

G31P2
G04Q2

G31P2
G04Q2

G31P4
G04Q4 G04

SKIP 1S1 2S1 3S1 4S1 DS1

SKIP2 1S2 2S2 3S2 4S2 DS2

SKIP3 1S3 2S3 3S3 4S3 DS3

SKIP4 1S4 2S4 3S4 4S4 DS4

Signal address

Parameter



B–61393E–2/02 14. MEASUREMENT

711

NOTE
The skip cutting commands G31 P1, G31 P2, G31 P3, and
G31 P4 are all identical, except that they correspond to
different skip signals.  The tool moves along the specified
axis until the SKIP signal is set to “1” or the end point of the
specified movement is reached, while performing linear
interpolation.  The feedrate is specified in the program.  G31
is the same as G31 P1.
Dwell commands G04, G04 Q1, G04 Q2, G04 Q3, and G04
Q4 are also identical, except that they correspond to
different skip signals.
When no Qn command follows the G04 command, and
when DS1 to DS4, bit 0 to bit 3 of parameter No.0035, are
not set, dwell is not skipped.

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

II.4.10 MULTI–STEP 
(0–GCC/00–GCC/0–GCD)

Note

Reference item



14. MEASUREMENT B–61393E–2/02

712

Specifying a move command after G31 P99 (or G31 P98) with a motor
torque limit set (for example, specifying a torque limit on the PMC
window) allows the same cutting feed as that specified with G01 to be
performed.

While the tool is moved with a motor torque limit set during cutting feed,
skip is performed when a signal indicating that the motor torque limit has
been reached is input as a result of an operation such as pushing something
against the motor.

When the motor torque limit is reached during the execution of G31 P99,
the execution of the next block starts without executing the remaining
portion of the move command.

When no torque limit is specified before executing G31 P99, the move
command is executed without performing the skip operation.

For G31 P99, the coordinate, indicating the position to which the tool is
to be positioned after skip, is stored in the system variable of the custom
macro.

Alarm occurs if errors have accumulated to an amount (32767) that cannot
be corrected in one distribution before the torque–limit–reached signal is
input during the execution of G31 P99.

[Classification] Output signal

[Function] Indicates that the torque limit has been reached.

[Output condition] Set to “1” when:

· The torque limit has been reached for the corresponding axis.

Set to “0” when:

· The torque limit has not been reached for the corresponding axis

Numbers 1 to 8 indicate the corresponding axis numbers.

14.3.4
Torque Limit Skip 
(T series)

General

� Basic operations

Signal

Torque limit reached
signals
TORQ1 to TORQ8
<F170#0 to #5>



B–61393E–2/02 14. MEASUREMENT

713

#7
F170

#6 #5
TORQ8

#4
TORQ7

#3
TORQ4

#2
TOQR3

#1
TOQR2

#0
TORQ1

#7
0389

#6 #5 #4 #3
TSKECR

#2 #1 #0

[Data type] Bit

TSKECR When a skip operation is performed by the G31 P99 command used to
specify torque limit skip:
0 : Corrects servo errors. (1)
1 : Does not correct servo errors. (2)

Position stored
in the system
variable when
TSKECR = 0

Position stored
in the system
variable when
TSKECR = 1

Error amount     (2)(1)

Feed stops   Torque limit   Specified value

100

200

100 200 300 400 500

Signal address

Parameter



14. MEASUREMENT B–61393E–2/02

714

������ Message Description

015 TOO MANY AXES COM-
MANDED

In the block including the command
for the skip function (G31 P99/P98),
to be executed under the control of
the torque limit reach signal, no axis
move command is specified, or two or
more axes are specified.
In a single block, specify one axis
only.

244 P/S ALARM When the skip function to be
executed under the control of the
torque limit reach signal is enabled,
an error value (32767) that exceeds
the maximum return value that can be
handled with a single distribution is
detected before input of the torque
limit reach signal.
Retry the processing after changing
the axis feedrate, torque limit, or other
conditions.

WARNING
Specify a torque limit before G31 P99.  If G31 P99/P98 is
executed with no torque limit specified, the move command
is executed without a skip operation.

CAUTION
1 Before specifying G31 P99, cancel tool–tip radius

compensation with G40.
2 Set the SKPF bit (bit 3 of parameter No.0015) to 0 to disable

the dry run, override, and automatic
acceleration/deceleration functions for the G31 skip
command.

Alarm and message

Warning

Caution



B–61393E–2/02 14. MEASUREMENT

715

This is a function of setting an offset value by key-inputting a workpiece
diameter manually cut and measured from the MDI keyboard.

First the workpiece is cut in the longitudinal or in the cross direction
manually.  When the position record signal is turned “1” (prepare a button
on the machine operator’s panel) on completion of the cutting, the work-
piece coordinate value of X axis and Z axis at that time is recorded in the
CNC.  Then, withdraw the tool, stop the spindle, and measure the diame-
ter if the cutting was on the longitudinal direction or measure the distance
from the standard face if the cutting was on the facing.  (The standard face
is made as Z = 0.) When the measured value is entered on the offset value
display screen, NC inputs the difference between the input measured
value and the coordinate value recorded in NC, as the offset value of the
offset number.

If you release the tool without moving the tool in the axis along which an
offset value is entered but moves the tool along the other axis, an offset
value can be set without using the position record signal.

The workpiece coordinate system can be shifted using the technique of
directly inputting the measured value for offset.  This technique is used
when the coordinate system planned in the program does not match with
the coordinate system actually set.

The procedures are the same as those for direct input for offset, except a
difference of using the standard tool on the work shift screen.

14.4
ENTERING
COMPENSATION
VALUES

14.4.1
Input of Offset Value
Measured A (T series)

General



14. MEASUREMENT B–61393E–2/02

716

[Classification] Input signal

[Function] This signal is prepared for the function of input of offset value measured
A.  It is used to store in the control unit the data on the positions of the
tool for tentative cutting. After measuring a dimension of the workpiece,
input the measured value by the specified manual operation. The
difference is then stored as the specified tool compensation value.

[Operation] The control unit stores the current position along X and Z axes when the
signal turns to “1”.

NOTE
To use this signal, set parameter MORB (No.0015#4) to 1.

#7
G103

#6
PRC

#5 #4 #3 #2 #1 #0

#7
0015

#6 #5
MORB

#4 #3 #2 #1 #0

[Data type] Bit

MORB Direct input of tool offset value and workpiece coordinate-system shift
value
0 : Not use a PRC signal
1 : Uses a PRC signal

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

III.11.4.2 Direct Input of Tool Offset Value

Signal

Position record signal
PRC<G103#6>

Signal address

Parameter

Reference item



B–61393E–2/02 14. MEASUREMENT

717

When the touch sensor is provided, the tool offset value is automatically
settable in the tool offset memory, by moving the tool to make contact
with the touch sensor during manual operation.  The workpiece
coordinate system shift amount is also automatically settable.

This touch sensor makes contact in two directions in each axis, and
outputs four signals when it detects a tool contact. The contact faces are
selected according to the tool nose figures to be measured.

a) +MIT1 (+MITX) : Contact to X-axis (+) contact face (Contact 
in X + direction)

b) –MIT1 (–MITX) : Contact to X-axis (–) contact face (Contact 
in X – direction)

c) +MIT2 (+MITZ) : Contact to Z-axis (+) contact face (Contact 
in Z + direction)

d) –MIT2 (–MITZ) : Contact to Z-axis (–) contact face (Contact 
in Z – direction)

+Z

+X

Z axis (+) con-
tact face
(+MIT2)

Z axis (–) contact
face 
(–MIT2)

X axis (–) contact face
(–MIT1)

X axis (+) contact face
(+MIT1)

Touch sensor

Determine a specific point on the machine tool as the measuring reference
position. In advance, set the distance from this point to the measuring
position (contact face of the touch sensor) as a reference value, using
parameter nos. 0743 to 0746.  Select the tool whose offset value is to be
measured, and bring it to touch the sensor, receiving a contact detection
signal (tool compensation value write signal). The mechanical coordinate
value is the distance from the tool nose position of the measuring tool at
the mechanical reference (home) position to the measuring position; set
the difference between this value and the reference value (parameter
setting)   into the tool offset value memory as the tool geometry offset
value. The corresponding tool wear offset value becomes 0.

14.4.2
Input of Tool Offset
Value Measured B 
(T series)

General

� ���	 �����

� ����
�� �� ����� �����



14. MEASUREMENT B–61393E–2/02

718

(Tool offset value to be set)

= (Mechanical coordinate value when tool compensation value write
signal has become “1”) – (Reference value (parameter value)
corresponding to the tool compensation value write signal)

The tool offset value to be set differs according to the method of
determining the measuring reference position.

(Example 1)
The difference between the reference tool nose tip position and the
measuring tool nose tip position is settable as the tool offset value. Define
the reference tool nose tip position at the mechanical reference position
(machine zero position) as the measuring reference position,  then set the
distances Xp, Zp, Xm, Zm, from the measuring reference position to the
contact faces of the sensor as parameters.

+X

+Z

(0,0)

(0,0)

Zm

Zp

Zt

OFSX

OFSZ

Xm

Xp

Xt

XP : Distance from the measuring reference position to X-axis (+) contact face (parameter
no. 0743)

Xm : Distance from the measuring reference position to X-axis (–) contact face (parameter
no. 0744)

Zp : Distance from the measuring reference position to Z-axis (+) contact face (parameter
no. 0745)

Zm : Distance from the measuring reference position to Z-axis (–) contact face (parameter
no. 0746)

Xt : X-axis direction moving distance of the measuring tool up to the contact face of sensor
(X-axis machine coordinate value)

Zt : Z-axis direction moving distance of the measuring tool up to the contact face of sensor
(Z-axis machine coordinate value)

(when Xt and Zt touch the X-axis (–) contact face and Z-axis (–) contact face in the
above figure)

OFSx : Tool offset value to be set (X-axis): OFSx = Xt - Xm

OFSz : Tool offset value to be set (Z-axis): OFSz = Zt - Zm

Z axis (–) contact face

X axis (–) contact face

Measuring reference
position (reference tool
nose position at the me-
chanical reference posi-
tion)

Measuring tool nose
position at the me-
chanical reference
position

When the reference tool nose tip position is set as the measuring reference  position



B–61393E–2/02 14. MEASUREMENT

719

(Example 2)
The measuring reference point may be an imaginary point (imaginary
point zero), as shown in the figure below. The difference between the
imaginary zero point and the measuring tool nose tip position at the
mechanical reference point is settable as the tool offset value of the
measuring tool,  by setting the distances from the imaginary zero point to
the respective contact faces as parameters.

+X

(0 , 0)

Z t

Zm

Zp Xp

Xm OFSx

OFSZ

Xt

+Z

Measuring tool nose
position at the
mechanical 
reference position

Machine 
zero point

Measuring reference position

(Imaginary zero point)

When the imaginary zero position is set as the measuring reference position

The workpiece coordinate system shift amount for the Z-axis is settable
as follows:  Bring the tool to touch the workpiece end face.  Subtract  the
tool geometry offset value of the tool (the value shifted in the coordinate
system by the tool geometry offset) from the machine coordinate value
(the distance from the measuring tool nose tip position at the mechanical
reference position (machine zero point) to the workpiece end face).The
result is set as the workpiece coordinate system shift value.

(Z axis workpiece coordinate system shift amount to be set 
(EXOFSz) )

= (Z axis tool geometry offset value of the corresponding tool
(OFSz))   –   (Z axis machine coordinate value(Zt))

Using the above methods, the workpiece coordinate system is set with
the workpiece end face (the contact point of the sensor) specified as
the programmed zero point of the workpiece coordinate system of the
Z-axis.

� ����
� �	� �����
���

�����
��� ������ �	
��

�����



14. MEASUREMENT B–61393E–2/02

720

(0,0)
+Z

–EXOFSZ

OFSX

OFSZ

Zt+X

Measuring tool nose
position at the mechani-
cal machine position

Machine 
zero point

Workpiece coordinate 
system zero point 
(programmed zero point)

EXOFSz : Workpiece coordinate system shift amount to be set

OFSz  : Tool geometry offset value

Zt    : Mechanical coordinate value (Distance to the workpiece end face) 

Setting of workpiece coordinate system shift amount

To deviate the programmed zero point of the workpiece coordinate
system from the workpiece end face, such as adding a cutting
allowance, use the incremental input of the workpiece coordinate
system shift amount in MDI operation. By setting the distance from
the programmed zero point to the workpiece end face with a sign, the
numeric value input is added to the preset amount.

EXOFSZ(NEW)

+X

W

+Z

EXOFSZ(OLD)

Cutting 
allowance

Imaginary zero point

Workpiece coordinate system
programmed zero point

EXOFSZ(OLD) : Workpiece coordinate system shift amount being set by the
function of input of tool offset value measured B

W : Cutting allowance (incremental input value)

EXOFSZ(NEW) : Workpiece coordinate system shift amount after adding the
cutting allowance.

Setting of cutting allowance



B–61393E–2/02 14. MEASUREMENT

721

1 Execute manual reference position return.
By executing manual reference position return, a machine coordinate
system is established.
The tool offset value is computed on the machine coordinate system.

2 Select manual handle mode or manual continuous feed mode and set
the tool compensation value write mode select signal GOQSM to ”1”.
The CRT display is automatically changed to the tool offset screen
(geometry), and the ”OFST” indicator starts blinking in the status
indication area in the bottom of the screen, which informs that the tool
compensation value writing mode is ready.

3 Select a tool to be measured.

4 When the cursor does not coincide with the tool offset number desired
to be set, move the cursor to the desired offset number by page key and
cursor key.
Besides, the cursor can also be coincided with the tool offset number
desired to set automatically by the tool offset number input signals
(when parameter QNI(No.0024#6)=1).  
In this case, the position of the cursor cannot be changed on the tool
compensation screen using page keys or cursor keys.

5 Near the tool to the sensor by manual operation.

6 Place the tool edge to a contacting surface of the sensor by manual
handle feed.
Bring the tool edge in contact with the sensor.  This causes the tool
compensation value writing signals (+MIT1, –MIT1, +MIT2 or
–MIT2) to input to CNC.
The tool compensation value writing signal is set to ”1”, and the :
� The axis is interlocked in this direction and its feeding is stopped.
� The tool offset value extracted by the tool offset memory (tool

geometry offset value) which corresponds to the offset number
shown by the cursor is set up.

7 For both X-axis and Z-axis, their offset value are set by the operations
5 and 6.

8 Repeat operations 3 to 7 for necessary tools.

9 Set the tool compensation value writing mode signal GOQSM to ”0”.
The writing mode is canceled and the blinking ”OFST” indicator light
goes off.

1 Set the tool geometry offset values of each tool in advance.

2 Execute manual reference position return.
By executing manual reference position return, the machine
coordinate system is established.
The workpiece coordinate system shifting amount is computed based
on the machine coordinate system of the tool.

3 Set the workpiece coordinate system shifting amount writing mode
select signal WOQSM to “1”.
The CRT display is automatically switches to the workpiece shifting
screen, the ”WFST” indicator starts blinking at the status indicator
area in the bottom of the screen, which inform that the workpiece
coordinate system shifting amount writing mode is ready.

Basic Procedure to Set
Tool Offset Value

Basic Procedure to Set
Workpiece Coordinate
Shift Value



14. MEASUREMENT B–61393E–2/02

722

4 Select a tool to be measured.

5 Check tool offset numbers.
The tool offset number corresponding to the tool required for
measurement, shall be set in the parameter (No.0122) in advance.
Besides the tool offset number can be set automatically by setting the
tool offset number input signal (with parameter QNI(No.0024#6)=1).

6 Manually approach the tool to an end face of the workpiece.

7 Place the tool edge to the end face (sensor) of the workpiece by
manual handle feed.
When the tool edge contacts with the end face of the workpiece, input
the workpiece coordinate system shift amount signal WOSET.
The workpiece coordinate system shifting amount on the Z–axis is
automatically set.

8 Release the tool.

9 Set the workpiece coordinate system shift amount write mode select
signal WOQSM to ”0”.
The writing mode is canceled and the blinking ”WSFT” indicator
light goes off.

[Classification] Input signal

[Function] Selects the mode for writing tool compensation.

[Operation] When this signal is turned ”1” in a manual operation mode, the mode for
writing tool compensation is selected. The control unit then automatically
switches the screen displayed on the CRT to the tool geometry
compensation screen and blinks the OFST status display in the bottom of
the screen to notify that the mode has been changed to the mode for
writing tool compensation.

Signal

Tool offset write mode
select signal
GOQSM <G132#7>



B–61393E–2/02 14. MEASUREMENT

723

[Classification] Input signal

[Function] Each of these signals inhibits the tool from being fed along the corre-
sponding axis during manual operation. When signal GOQSM for select-
ing the mode for writing tool compensation is set to ”1”, the manual feed
is inhibited and also the tool geometry compensation along the axis is au-
tomatically calculated and the result is set in tool compensation memory.

[Operation] When these signals are turned ”1”, the control unit operates as follows:
� Inhibits tools from being fed along the corresponding axis during

manual operation.
+MIT1 : Inhibits the tool from being manually fed in the positive

direction along the X-axis.
–MIT1 : Inhibits the tool from being manually fed in the negative

direction along the X-axis.
+MIT2 : Inhibits the tool from being manually fed in the positive

direction along the Z-axis.
–MIT2 : Inhibits the tool from being manually fed in the negative

direction along the Z-axis.
� When signal GOQSM for selecting the mode for writing tool

compensation is turned ”1”, the manual feed interlock signal also
automatically calculates the tool geometry compensation for the tool
compensation number pointed to by the cursor and sets the result in
tool compensation memory.

NOTE
This signal is used as the manual feed interlock signal in
each axis direction.

[Classification] Input signal

[Function] Selects the tool offset number.

[Operation] When the mode for writing tool compensation is selected, the cursor is
automatically positioned on the tool geometry compensation number
selected by these signals.
A tool offset number is specififed by 7–bit binary number.  Number 0 to
31 corresponds to the compensation number 1 to 32.

NOTE
This signal is available only when parameter QNI (No.
0024#6) =1.

Tool offset write signal
+MIT1, +MIT2
<X008#2, #4>
–MIT1, –MIT2
<X008#3, #5>

Tool offset number
select signals
OFN0 to OFN4
<G132#0 to #4>



14. MEASUREMENT B–61393E–2/02

724

[Classification] Input signal

[Function] Selects the mode for writing the shift amount for the workpiece coordinate
system.

[Operation] When this signal is turned ”1” in a manual operation mode, the mode for
writing the shift amount for the workpiece coordinate system is selected.
The control unit then automatically switches the screen displayed on the
CRT to the WORK SHIFT screen and blinks the OFST status display in
the bottom of the screen to notify that the mode has been changed to the
mode for writing the shift amount for the workpiece coordinate system.
However, this is not performed when the mode for writing tool
compensation values is selected.

[Classification] Input signal

[Function] Automatically calculates and sets the shift amount for the workpiece
coordinate system.

[Operation] When this signal turns to ”1” in the mode for writing the shift amount for
the workpiece coordinate system, it triggers automatic calculation and
setting of the shift amount for the workpiece coordinate system.

[Classification] Input signal

[Function] Enables cursor movement during tool compensation number automatic
selection.

[Operation] Even if the tool compensation number automatic selection parameter (bit
6 of parameter No. 024) is 1, setting TNFS to 1 enables cursor movement.

Workpiece coordinate
system shift value write
mode select signal
WOQSM <G132#6>

Workpiece coordinate
system shift value write
signal
WOSET <G133#7>

Tool compensation
number automatic
selection disable signal
TNFS <G132#5>



B–61393E–2/02 14. MEASUREMENT

725

#7
X008

#6 #5
–MIT2

#4
+MIT2

#3
–MIT1

#2
+MIT1

#1 #0

GOQSMG132 WOQSM TNFS OFN4 OFN3 OFN2 OFN1 OFN0

WOSETG133

#7
EDILK0024

#6
QNI

#5 #4 #3 #2 #1 #0

[Data type] Bit

EDILK Interlock for each axis direction
0 : Enabled
1 : Disabled

QNI In the function of input of offset value measured B
0 : Not automatically select the tool offset number
1 : Automatically selects a tool offset number

#7
0395

#6 #5 #4 #3 #2 #1
TLSCUR

#0

[Data type] Bit

TLSCUR 1 : When the offset screen is switched using a soft key, the previous
cursor position for the tool compensation number is preserved.

0 : When the offset screen is switched using a soft key, the previous
cursor position for the tool compensation number is not preserved.

0743 Distance (XP) betweeen reference position and X axis + contact surface

0744 Distance (XM) betweeen reference position and X axis – contact surface

0745 Distance (ZP) betweeen reference position and Z axis + contact surface

0746 Distance (ZM) betweeen reference position and Z axis – contact surface

[Data type] Two–word

[Unit of data]

Increment system IS–A IS–B IS–C Unit

Metric input 0.01 0.001 0.0001 mm

Inch input 0.001 0.0001 0.00001 inch

[Valid data range] –99999999 to 99999999

These parameters are related to the function of input of tool offset value
measured B.

They set the distance (with sign) between the measurement reference
position and sensor contact surface.  For an axis under diameter program-
ming, set it by a diameter value.

Signal address

Parameter



14. MEASUREMENT B–61393E–2/02

726

 

Z axis – contact
face

Z axis + contact face

X axis – contact face

X axis + contact
face

Zp

Zm

Xm

Xp

+X

+Z

Measuring 
reference
 position

0122 Tool offset number used for the input of tool offset value measured B

[Data type] Byte

[Valid data range] 0 to the number of tools to be compensated.

Set tool offset number used for the input of tool offset value measured B
function (i.e. when  workpiece coordinate system shift value is set). (The
tool offset number corresponding to the measured tool shall be set in ad-
vance.)  This parameter is valid when the tool offset number is not selected
automatically (QNI, #6 of parameter 0024, is zero).

OPERATOR’S MANUAL
(For Lathe)
(B–61394E)

III.11.4.3 Direct Input of Tool Offset Measured
B

By directly entering the measured deviation of the actual coordinate
system from a programmed work coordinate system, the workpiece zero
point offset at the cursor is automatically set so that a command value
matches the actual measurement.

Reference item

14.4.3
Input of Measured
Workpiece Origin
Offsets

General



B–61393E–2/02 14. MEASUREMENT

727

[Classification] Output signal

[Function] Indicates when a specified compensation amount becomes less than the
minimum allowable grinding wheel diameter (specified in a parameter).

[Operation] The signal becomes 1 when:

#7
F165

#6 #5 #4 #3
GWLF

#2 #1 #0

0838 Minimum grinding wheel diameter used in a grinding wheel diameter check

[Data type]  Two–word

[Unit of data] 0.001 (mm input), 0.0001 (inch input)

[Valid data range] 0 to 999999

[Description] The parameter specifies the minimum grinding wheel diameter to be used
in a grinding wheel diameter check.

NOTE
When a specified compensation amount becomes less than
the minimum allowable grinding wheel diameter, GWLF (bit
3 of F165) becomes 1.

14.4.4
Grinding Wheel Diameter
Automatic
Compensation

Signal

Grinding wheel diameter
automatic compensation
signal (0–GSC)
GWLF <F165#3>

Signal address

Parameter



15. PMC CONTROL FUNCTION B–61393E–2/02

728

15 PMC CONTROL FUNCTION



B–61393E–2/02 15. PMC CONTROL FUNCTION

729

The PMC can directly control any given axis, independently of the CNC.
In other words, moving the tool along axes that are not controlled by the
CNC is possible by entering commands, such as those specifying moving
distance and feedrate, from the PMC.  This enables the control of turrets,
pallets, index tables and other peripheral devices using any given axes of
the CNC.

Whether the CNC or PMC controls an axis is determined by the input
signal provided for that particular axis.

The PMC can directly control the following operations:

(1) Rapid traverse with moving distance specified

(2) Cutting feed – feed per minute, with moving distance specified

(3) Cutting feed – feed per revolution, with moving distance specified
(*)

(4) Skip – feed per minute, with moving distance specified (*)

(5) Dwell

(6) Jog feed

(7) Reference position return

(8) 1st reference position return (*)

(9) 2nd reference position return (*)

(10) 3rd reference position return (*)

(11) 4th reference position return (*)

(12) External pulse synchronization – Main spindle (*)

(13) External pulse synchronization – first manual handle (*)

(14) External pulse synchronization – second manual handle (*)

(15) External pulse synchronization – third manual handle (for M series
only) (*)

(16) Feedrate control (*)

(17) Auxiliary function

(*)The operation cannot be used for the 5th and 6th axes.

Two specification types are applicable to PMC axis control:  specification
A and specification B.

When specification A is used with the M series, the X axis, Y axis, Z axis,
or fourth axis is controlled using the DI/DO signals of a PMC command
group.

With the T series, the third axis is controlled using the DI/DO signals of
two PMC command groups.

15.1
PMC AXIS 
CONTROL/PMC AXIS 
SPEED CONTROL 
FUNCTION

General



15. PMC CONTROL FUNCTION B–61393E–2/02

730

When specification B is used with the M series or T series, any one axis
selected from all axes including the 7th and 8th axes can be controlled,
using the DI/DO signals of two PMC command groups.  In other words,
an axis can be selected from the available axes, then controlled using
commands issued through two paths.  From the two PMC command
paths, the path to be used is selected for each axis by parameter setting.
When multiple axes are simultaneously selected for one command path,
the tool can be moved along these axes synchronously.

By issuing a command similar to the PMC command, an order–made
macro can perform axis control.

When the increment system is set to 1/10, only 6.5 m/min can be specified
as the maximum cutting speed for the PMC axis.

If this restriction proves inconvenient, set parameter No. 052 so that the
least input increment for the PMC axis equals the standard specification
(0.001 mm, 0.0001 inch, 0.001 deg).

Motion along a PMC controlled axis is independent of the CNC
controlled axes (basic and additional axes) or other PMC controlled axes.
Specification A or B is selected by setting bit 6 (EACSB) of parameter
No. 0032.

M series: One of the X axis, Y axis, Z axis, and fourth axis can be selected
as a controlled axis by setting bits 0 and 1 (EAC0 and EAC1)
of parameter No. 0030.  The corresponding signal group is
group A.

T series: The third axis and fourth axis can be controlled.  The
corresponding signals are of groups A and B respectively.

NOTE
If the 3rd axis is used as the Cf axis, the 3rd axis cannot be
controlled.

PMC axis configuration

Master PC board Multi axes

1st
axis

2nd
axis

3rd
axis

4th
axis

5th
axis

6th
axis

T series � � � �

� � �

M series
� � �

M series
� � �

� � �

For both the M series and T series, any axis can be selected from the
X–axis to 4th axis and the 7th and 8th axes, to perform simultaneous
control.

NOTE
For controlling the fourth axis, expansion I/O C7 is required.

Specification

Controlled axis 
<Specification A>

<Specification B>

EAC1

0

0

1

1

EAC0

0

1

0

1



B–61393E–2/02 15. PMC CONTROL FUNCTION

731

(a) The controlled axis is not affected by the mode select signal.

(b) When the fourth axis is to be controlled, the fourth–axis interface
option is required.

(c) By setting bit 5 (EAXOV) of parameter No. 0063, the same signals
as those used in the CNC can be used to control rapid traverse
override, cutting speed override, and dry run operations, in the same
way as for the CNC.
By setting bit 7 (EAXOVE) of parameter No. 0078, the signals
dedicated to PMC axis control can be used to perform override and
dry run operations, independently of the CNC.

(d) The CNC–controlled feed hold, single block, reset, and interlock
functions are not effective for the PMC controlled axis.  However,
control similar to such CNC control is enabled by manipulating the
PMC signals.

(e) The CNC–controlled machine lock and emergency stop functions
are enabled.
Machine lock, however, can be disabled by setting bit 4 (PNGMLK)
of parameter No.0032.

(f) Where control of the same axis is switched between the CNC and
PMC, when the axis is controlled by the PMC, the actual speed can
be indicated without including motion along the PMC controlled
axis by setting bit 6 (AXPCF) of parameter No.0062.

(g) In both the M series and T series, if the multi–axis printed circuit
board and PMC–M are provided, the PMC can control the 5th and
6th axes.

(a) When the controlled axis is the fourth axis, the fourth axis ignore
signal (X004.7 4NG) is enabled.

(b) An axial movement by the PMC during or after search for restarting
a program has the same effect as the manual intervention for the axis.
This operation, however, is invalid if the 4th axis is controlled and
if no additional axis is provided.  (The 4th–axis coordinate of the
restart position is always displayed as 0.)

(c) When the controlled axis is the fourth axis, manual feed control
cannot be performed by PMC axis control alone if the additional axis
option for the fourth axis is not provided.

(d) In the same way as for machine lock, the Z–axis command cancel
signal (G103.6 ZNG) is enabled.

(e) The setting parameter mirror image function (mirror X, mirror Y,
and mirror 4) is enabled.

(f) If the setting of a workpiece coordinate system is specified by the
CNC (G54 to G59) during tool movement along an axis under PMC
control, the coordinate system cannot be set correctly.

Controlled axis

Controlled axis in 
M series



15. PMC CONTROL FUNCTION B–61393E–2/02

732

(a) Radius specification is always used regardless of the settings of bit
2 (XRC) of parameter No. 0019.

(b) If the 3rd axis is used as the Cs axis, the 3rd axis cannot be controlled.

(c) When the controlled axis is the 3rd axis, manual feed control cannot
be performed by PMC axis control alone.  When the 3rd axis is used
as the Cf axis, however, manual feed control can be performed.

Commands from path 1

Commands from path 2

α axis control

β axis control

Group A

Group B

  PMC     CNC

      DI/ DO

In the following description, input/output signals from the four paths are
called group A (path 1) and group B (path 2) respectively.

The name of an input/output signal used for PMC axis control always
contains a lowercase g, as in EBUFg.  However, there is no such signal
as EBUFg.  The actual signal names represented by EBUFg are EBUFA
and EBUFB, which respectively correspond to signals of group A (path
1) and group B (path 2).

(1) In bits 0 to 5 of parameter No.0061, specify which DI/DO signal
group (A or B) is to be used for PMC axis control on a per–axis basis.

When using the same group for simultaneously controlling two or
more axes, check that the settings of the parameters related to
feedrate (rapid traverse rate, acceleration/deceleration time
constant, diameter/radius, linear axis/rotation axis, etc.) are
identical for each axis to be controlled.

(2) To enable direct PMC axis control, set each control axis selection
signal (EAX1 to EAX8), that corresponds to an axis to be controlled,
to 1.

(1) Determine the operation.

The axis control command signals (EC0g to EC6g) specify the type
of operation.  The axis control feedrate signals (EIF0g to EIF15g)
specify the feedrate.  The axis control data signals (EID0g to
EID31g) specify the moving distance and other data.
These signals, together with block stop prohibition signal EMSBKg
(described later), determine one complete operation, which is
tantamount to one block executed during CNC–controlled
automatic operation.  These signals may be collectively called the
axis control block data signals.

Controlled axis in 
T series

Axis selection at
specification B

Basic procedure



B–61393E–2/02 15. PMC CONTROL FUNCTION

733

� List of Signals Determining Data, Tantamount to One Block for PMC
Axis Control

Generic name Signal name Symbol Data type

Block stop prohibi-
tion signal

EMSBKg Bit

Axis control
block data

Axis control 
command signal

EC0g to EC6g Byte

block data 
signals Axis control feedrate

signal
EIF0g to EIF15g Word

Axis control data 
signal

EID0g to EID31g Two words

(2) When the data governing a complete operation (one block) is
determined, reverse the logical state of axis control command read
signal EBUFg (i.e., from “0” to “1” or vice versa).  Note that, for this
to occur, axis control command read completion signal EBSYg must
be in the same logical state as EBUFg.

� The CNC is capable of storing axis control functions from the PMC
in its buffer so that multiple operations can be performed in series,
under the control of the PMC.  This allows the CNC to accept a new
command block from the PMC during the execution of another
block if the buffer has free space.

The following figure illustrates an example in which command [1]
is being executed, commands [2] and [3] are stored in the buffers,
and command [4] has been issued (the axis control block data signal
is set).

  [4] Input buffer

Executing buffer

Waiting buffer

Command [1]

Command [2]

Command [3]

Command [5]

Block 1

Block 2

Block 3

Block 4 Command [4]

Block 5

Block n

PMC Commands Setting of the axis control
block data signal

CNC’s buffers

[1]

[2]

[3]

↓

↓

When the execution of command [1] is completed:

⋅ command [2] is transferred from the waiting buffer to the executing
buffer;

⋅ command [3] is transferred from the input buffer to the waiting buffer;
and



15. PMC CONTROL FUNCTION B–61393E–2/02

734

⋅ command [4] is transferred to the input buffer as the command block
(axis control block data signal).

After the reception of command [4] by the input buffer, the PMC can issue
command [5] to the CNC (the axis control block data signal is set).

The timing chart for the command operation is shown below.

Command block
    (Input)

EBUFg
    (Input)

(1)              (2)              (3)                            (4)                             (5)

EBSYg
    (Output)

The buffer is full.

Input buffer  [3]  [4]

Waiting buffer  [2]  [3]

Executing
buffer

 [1]
Beginning of execution

End of 
execution

[1] [2] [3] [4] [5]

 [2]
Beginning of execution

(1),  (2),  (3),  (4),  (5)  : A new block cannot be issued during these
intervals (while EBUFg and EBSYg are in different logical states).

� The status of the CNC buffer can be determined by the exclusive OR
of axis control command read signal EBUFg, input from the PMC, and
axis control command read completion signal EBSYg, output from the
CNC.

EBUFg
�

EBSYg

Exclusive
OR

(XOR)
CNC buffer status

0 1
� �

0 1
0

The previous block has already been read into
the CNC buffer.  The PMC can issue the next
block.

0 1
� �

1 0
1

The previous block has not yet been read com-
pletely.  It is just being read or waiting for the
CNC buffer to become available.  Do not issue
the next block, nor reverse the logical state of
EBUFg. Reversing the EBUFg state invalidates
any block that has been already issued.



B–61393E–2/02 15. PMC CONTROL FUNCTION

735

(3) Repeat steps (1) and (2) until all the blocks have been issued.

When the final block has been issued, set control axis selection
signals EAX1 to EAX8 to “0”.  Before setting these signals to “0”,
however, check that the blocks stored in the CNC’s input, waiting,
and executing buffers have all been executed.  Setting the signals to
“0” while a block is being executed, or while a block remains in any
of these buffers,  results in the issue of a P/S alarm.  This alarm
suspends the current block execution and invalidates the blocks
stored in the input and waiting buffers.

To ensure no block is being executed, or that there are no blocks
remaining in the input or waiting buffer, check that control axis
selection status signal *EAXSL is set to “0”.

For those axes that are always subject to PMC control, such as those
controlling turrets, pallets, and ATCs, ensure that the EAX1 to
EAX8 signals are always set to “1”.  There is no need to set these
signals to “0” after issuing commands from the PMC to the CNC.
When all command blocks have been executed (there are no blocks
remaining to be executed), the CNC automatically stops execution.

(4) When control axis selection signals EAX1 to EAX8 are set to “0”,
control is returned to the CNC.



15. PMC CONTROL FUNCTION B–61393E–2/02

736

Symbol Signal nameNo.

EAX1 to EAX8 Control axis selection signals

EC0g to EC6g Axis control command signals

EIF0g to EIF15g Axis control feedrate signals

EID0g to EID31g Axis control data signals

EBUFg Axis control command read signal

EBSYg Axis control command read completion signal

ECLRg Reset signal

ESTPg Axis control temporary stop signal

ESBKg Block stop signal

EMSBKg Block stop disable signal

EM11g to EM28g Auxiliary function code signals

EMFg Auxiliary function strobe signal

EFINg Auxiliary function completion signal

ESOFg Servo–off signal

*EAXSL Control axis selection status signal

EINPg In–position signal

ECKZg Following zero checking signal

EIALg Alarm signal

EGENg Axis moving signal

EDENg Auxiliary function executing signal

EOTNg Negative–direction overtravel signal

EOTPg Positive–direction overtravel signal

*OV1E to *OV8E Feedrate override signals

OVCE Override cancellation signal

ROV1E,   ROV2E Rapid traverse override signals

DRNE Dry run signal

RTE Manual rapid traverse selection signal

EOV0 Override 0% signal

ESKIP Skip signal

1

2

3

4

5

6

7

8

9

10

11

12

13

14

15

16

17

18

19

20

21

22

23

24

25

26

27

28

29

Signal

Signal list



B–61393E–2/02 15. PMC CONTROL FUNCTION

737

[Classification] Input signal

[Function] When the signal is set to “1”, the corresponding axis becomes  subject to
PMC control.

When the signal is set to “0”, PMC control becomes invalid.  Changing
the setting of the control axis selection signal is possible only when
control axis selection status signal *EAXSL is set to “0”.  Changing the
setting when *EAXSL is set to “1” results in the issue of a P/S alarm (No.
139).  Alarm signal EIALg is set to “1”.

While *EAXSL is set to “0”, the status of alarm signal EIALg does not
change to 1 when the control axis selection signal is set to 1 and a P/S
alarm (No. 139) is generated. In this case, the axis can be controlled from
the PMC, even when the CNC is in the alarm status.

NOTE
After setting control axis selection signals EAX1 to EAX8 to
1, it takes at least 8 msec before the PMC can issue
commands to the CNC.

[Classification] Input signal

[Function] Specifies the following operations through each path.

Axis control
command

(hexadecimal
code)

Operation

00h
Rapid traverse (linear acceleration/deceleration)

00h
Performs the same operation as G00, used by the CNC.

01h

Cutting feed – feed per minute 
(exponential acceleration/deceleration or linear acceleration/
deceleration after interpolation)

Performs the same operation as G94 G01, used by the
CNC.

02h

Cutting feed – feed per revolution (exponential acceleration/
deceleration or linear acceleration/deceleration after inter-
polation)

Performs the same operation as G95 G01, used by the
CNC.

Signal Detail

1 Control axis selection
signals 
EAX1 to EAX8
(Specification B)

2 Axis control
command signals 
EC0g to EC6g



15. PMC CONTROL FUNCTION B–61393E–2/02

738

Axis control
command

(hexadecimal
code)

Operation

Skip – feed per minute

03h Performs the same operation as G31 G01, used by the
CNC.

04h
Dwell

04h
Performs the same operation as G04, used by the CNC.

Reference position return

05h
Moves the tool in the direction of reference position return
specified by ZM, bits 0 to 3 of parameter No.0003, in rapid
traverse mode, then performs the same operation as manual
reference position return, done by the CNC.

Jog feed (exponential acceleration/deceleration)

06h Moves the tool in the specified direction in jog feed mode.
Performs the same operation as that of JOG feed, done by
the CNC.

1st reference position return

07h Performs the same operation as done when positioning the
tool to the reference position from the intermediate point
specified by G28 of the CNC.

2nd reference position return

08h Performs the same operation as done when positioning the
tool to the reference position from the intermediate point
specified by G30 P2 of the CNC.

3rd reference position return

09h Performs the same operation as done when positioning the
tool to the reference position from the intermediate point
specified by G30 P3 of the CNC.

4th reference position return

0Ah Performs the same operation as done when positioning the
tool to the reference position from the intermediate point
specified by G30 P4 of the CNC.

0Bh
External pulse synchronization – main spindle

0Bh
Synchronizes with the main spindle.

0Dh
External pulse synchronization – 1st manual handle

0Dh
Synchronizes with the 1st manual handle.

0Eh
External pulse synchronization – 2nd manual handle

0Eh
Synchronizes with the second manual handle.



B–61393E–2/02 15. PMC CONTROL FUNCTION

739

Axis control
command

(hexadecimal
code)

Operation

0Fh
External pulse synchronization – 3rd manual handle

0Fh
Synchronizes with the 3rd manual handle.

10h
Speed command (linear acceleration/deceleration)

10h
Performs jog feed at the specified speed.

10h
Speed command (linear acceleration/deceleration)

10h
Performs jog feed at the specified speed.

Auxiliary function

12h Performs the same function as the miscellaneous function
(M function), used by the CNC.

When using the rapid traverse command (EC0g to EC6g: 00h), the
feedrate can be specified in either the same parameter as that used by the
CNC or the PMC’s axis interface feedrate signals EIF0g to EIF15g.  This
can be set with EFERPD, bit 7 of parameter No.0387.

When the cutting feed – feed per minute command (EC0g to EC6g:  01h)
is specified, the cutting feed time constant parameter (parameter Nos.
0651 to 0654; PEFDT to PEFDT4) and the lower cutting feedrate limit
(FL) parameter (parameter Nos.0657 to 0660; PEAFLX to PEAFL4) can
be set for each PMC axis, independently of the CNC.

When using the cutting feed – feed per revolution command (EC0g to
EC6g:  02h).

M series : The optional function for threading in synchronous feed
mode is necessary.

T series : The operation depends on spindle selection signal
PC2SLCT <G146.7>.

The operation cannot be performed when ITPCNT, bits 4 to 6 of
parameter No. 0055, specifies high–speed cycle machining.

When the function for returning to the reference position without dogs is
enabled, and no reference position return has been performed since
power–on operation, specifying a reference position return (EC0g to
EC6g: 05h) command returns the tool to the reference position
(positioning to the grid point nearest the current point) without having to
issue a deceleration signal for reference position return.  To do this,
specify a jog feed (EC0g to EC6g:  06h) command to move the tool along
each axis in the predetermined direction (positioning to a point near the
reference position).  Then, specify a reference position return (EC0g to
EC6g:  05h).

Note that, when positioning the tool to a point near the reference position,
the tool must be moved in the direction of reference position return at such
a speed that the servo position error exceeds 128.

Rapid traverse rate

Feed per minute

Cutting feed – feed per
revolution

Reference position
return



15. PMC CONTROL FUNCTION B–61393E–2/02

740

The direction of the grid relative to the proximate position depends on
ZM*, bits 0 to 3 of parameter No.0003.

After the reference position has been established, reference position
return can be performed at high speed by issuing the reference position
return command (EC0g to EC6g:  05h), irrespective of the reference
position return direction specified by ZM*, bits 0 to 3 of parameter
No.0003.

When reference position return is specified, a low feedrate (FL) can be set
for the PMC axis, independently of the CNC, by using parameter No.
0672 (EZRNFL).

When the function for returning to the reference position without dogs is
enabled, and the tool has not been returned to the reference position since
the power–on operation, specifying the 1st reference position return
(EC0g to EC6g:  07h) causes a P/S alarm (No.090).

When using the 1st and 4th reference position return commands (EC0g
to EC6g:  07h to 0Ah), the feedrate can be specified using EFERPD, bit
7 of parameter No.0387, in the same manner as when using the rapid
traverse command (EC0g to EC6g:  00h).

Note that, in the case of the 1st reference position return, if the tool has
not been manually returned to the reference position after the power was
turned on, the feedrate specified by parameter applies.

When using the external pulse synchronization commands (EC0g to
EC6g:  0Bh, 0Dh to 0Fh), the tool moves backwards if the external pulse
has a negative value.  When a manual handle interrupt is executed for the
axis to which the external pulse is being applied, the moving distance is
the sum of the external pulse and the interrupt pulse.

When diameter programming is used, the amount of travel is doubled.

When using the jog feed command (EC0g to EC6g:  06h) and the external
pulse synchronization command (EC0g to EC6g:  0Bh, 0Dh to 0Fh), the
displayed remaining distance is always “0”.

When using the speed command (EC0g to EC6g:  10h), specify the axis
to be controlled as a rotation axis.

While position control is being executed for the jog feed command (EC0g
to EC6g:  06h), the speed command (EC0g to EC6g:  10h) exerts speed
control over the servo motor, thus allowing the speed to be dynamically
changed during jog feed.  This makes this command suitable for driving
a rotation tool with a servo motor.

A linear acceleration/deceleration time constant can be set for each axis,
using parameter.

Note that, while jog feed is being executed by the speed command, no
coordinate system values are changed.  This will result in the loss of the
tool position.  Therefore, after jog feed has been completed, always return
the tool to the reference position before executing the move command.

Also, note that absolute pulse coder specification is not allowed.

Reference position
return without dogs

1st to 4th reference
position return

External pulse
synchronization

Display of remaining
distance

Speed command



B–61393E–2/02 15. PMC CONTROL FUNCTION

741

Command block

Operation Axis control code signal EC0g to EC6g Command data

Rapid traverse 00h Total moving distance 
EID0g to EID31g
Rapid traverse rate 
EIF0g to EIF15g

The rapid traverse rate
is valid when EFEPRD,
bit 7 of parameter
No.0387, is set to “1”.

Cutting feed – feed per
minute

01h Total moving distance 
EID0g to EID31g
Feedrate

Skip – feed per minute 03h
Feedrate 
EIF0g to EIF15g

Cutting feed – feed per
revolution

02h Total moving distance 
EID0g to EID31g
Feed per rotation 
EIF0g to EIF15g

Dwell 04h Dwell time 
EID0g to EID31g

Reference position 
return

05h None

Jog feed 06h Feed direction EID31g
Jog feedrate 
EIF0g to EIF15g

1st reference position
return

07h Rapid traverse rate 
EIF0g to EIF15g

2nd reference position
return

08h The rapid traverse rate
is valid when EFEPRD,
bit 7 of parameter

3rd reference position
return

09h
bit 7 of parameter
No.0387, is set to “1”.

4th reference position
return

0Ah

External pulse 
synchronization – 
main spindle

0Bh Pulse weight
EIF0g to EIF15g

External pulse 
synchronization –

0Dh
synchronization –
manual handle 0Eh

0Fh <For M series only>

Speed command 10h Jog feedrate
EIF0g to EIF15g

Auxiliary function 12h Auxiliary function code
EID0g to EID15g



15. PMC CONTROL FUNCTION B–61393E–2/02

742

[Classification] Input signal

[Function] (1) Rapid traverse (EC0g to EC6g:  00h)

(2) 1st reference position return (EC0g to EC6g:  07h)

(3) 2nd reference position return (EC0g to EC6g:  08h)

(4) 3rd reference position return (EC0g to EC6g:  09h)

(5) 4th reference position return (EC0g to EC6g:  0Ah)

(6) Machine coordinate system selection (EC0g to EC6g:  20h)

For these commands, signals EIF0g to EIF15g are used to specify
the rapid traverse rate, in binary format, when bit 7 (EFERPD) of
parameter 0387 is set to “1”.  For 1st reference position return,
however, the rapid traverse rate specified with parameter is used if
manual reference position return has not been performed after the
power was first turned on.

Data unit
Unit

IS–B IS–C
Unit

Linear Metric machine 1 mm/min
axis Inch machine 0.1 inch/min

Rotation axis 1 deg/min

[Valid data range] Specify data within the range given in the following table.

�	�	 �	�


���

���� ����

���

Linear Metric machine 30 to 15000 30 to 12000 mm/min
axis Inch machine 30 to 6000 30 to 4800 inch/min

Rotation axis 30 to 15000 30 to 12000 deg/min

(7) Cutting feed – feed per minute (EC0g to EC6g:  01h)

(8) Skip – feed per minute (EC0g to EC6g:  03h)

For these commands, the signals are used to specify, in binary
format, the feedrate along an axis.  The specified feedrate can be
magnified by ten by the setting of bit 5 (EFML10) of parameter
No.0049.

[Unit of data] When bit 5 (EFML10) of parameter No.0049 is set to 0

Data unit
Unit

IS–B IS–C
Unit

Linear Metric machine 1 0.1 mm/min
axis Inch machine 0.01 0.001 inch/min

Rotation axis 1 0.1 deg/min

3 Axis control feedrate
signals 
EIF0g to EIF15g

[Unit of data]



B–61393E–2/02 15. PMC CONTROL FUNCTION

743

When bit 5 (EFML10) of parameter No.0049 is set to 1

Data unit
Unit

IS–B IS–C
Unit

Linear Metric machine 10 1 mm/min
axis Inch machine 0.1 0.001 inch/min

Rotation axis 10 1 deg/min

[Valid data range] 1 to 65535 
(Actual values must fall within the ranges given in the following table.)

Data range
Unit

IS–B IS–C
Unit

Linear Metric machine 1 to 100000 0.1 to 12000.0 mm/min
axis Inch machine 0.01 to 4000.00 0.001 to 480.000 inch/min

Rotation axis 1 to 100000 0.1 to 12000.0 deg/min

WARNING
Cutting feedrate clamp is disabled.

CAUTION
When “0” is specified, the CNC continues to perform
buffering without moving the tool.  In such a case, release
the buffering by issuing reset signal ECLRg.

(9) Cutting feed – feed per rotation (EC0g to EC6g:  02h)

For this command, the signals are used to specify the amount by
which the tool is moved for every rotation of the spindle.

<For T series>

[Unit of data] The data increment depends on the settings of bits 6 (FRVF1) and 7 (FRVF2)
of parameter No.0066, as listed in the following table.

Parameter Metric input Inch input Rotation axis
FRVF2 FRVF1

p
(mm/rev)

p
(inch/rev) (deg/rev)

1 1
0 0001 0 000001 0 0001

0 0
0.0001 0.000001 0.0001

0 1 0.001 0.00001 0.001

1 0 0.01 0.0001 0.01

[Valid data range] 1 to 65535 
(Actual values must fall within the ranges given in the following table.)

Data range
Unit

IS–B IS–C
Unit

Linear Metric input 0.0001 to 500.0000 mm/rev
axis Inch input 0.000001 to 9.999999 inch/rev

Rotation axis 0.0001 to 500.0000 deg/rev



15. PMC CONTROL FUNCTION B–61393E–2/02

744

<For M series>

[Unit of data] The data unit depends on the settings of bits 6 (FRVF1) and 7 (FRVF2)
of parameter No. 0066, as listed in the following table.

Parameter Metric input Inch input Rotation axis

FRVF2 FRVF1

p
(mm/rev)

p
(inch/rev) (deg/rev)

1 1
0 01 0 0001 0 01

0 0
0.01 0.0001 0.01

0 1 0.1 0.001 0.1

1 0 1 0.01 1

[Valid data range] 1 to 65535 
(Actual values must fall within the ranges given in the following table.)

Data range
Unit

IS–B IS–C
Unit

Linear Metric input 0.01 to 500.00 mm/rev
axis Inch input 0.0001 to 9.9999 inch/rev

Rotation axis 0.01 to 500.00 deg/rev

WARNING
1 The value of parameter No. 0698 is used as the upper limit

for clamping the feedrate.
2 Override for the feedrate is effective.  Dry run is invalid.

CAUTION
The specified feedrate can be magnified by 1, 10, or 100 by
setting bits 6 (FRVF1) and 7 (FRVF2) of parameter No. 0066
accordingly.

(10) External pulse synchronization – main spindle 
(EC0g to EC6g:  0Bh)

(11) External pulse synchronization – first manual handle 
(EC0g to EC6g:  0Dh)

(12) External pulse synchronization – second manual handle 
(EC0g to EC6g:  0Eh)

(13) External pulse synchronization – third manual handle 
(EC0g to EC6g:  0Fh)

For these commands, the signals are used to specify the weight of the
external pulses.  A weight range of�1/256 to �127 can be set by using
signals EIF0g to EIF7g for the figures after the decimal point.  When a
negative weight is specified, the tool is moved in the reverse direction.
When a new pulse weight is specified while the tool is moving in
synchronization with external pulses, inverting signal EBUFg causes the
tool to move with the new pulse weight.

As commands for (10) to (13) are executed without buffering, axis control
command read completion signal EBSYg usually need not be checked.



B–61393E–2/02 15. PMC CONTROL FUNCTION

745

CAUTION
The pulse weight is clamped according to the value set for
parameter (parameter for the manual rapid traverse rate for
each axis).

NOTE
When bit 2 (XRC) of parameter No.0019 is set to diameter
programming, the tool moves with double pulse weight.

(14) Jog feed (EC0g to EC6g:  06h)

Set the feedrate as the same as for cutting feed – feed per minute
(EC0g to EC6g:  01h). The feedrate can be changed during jog feed.

Specify the feedrate with signals EIF0g to EIF15g, and invert the
axis control command read signal EBUFg during jog feed, then the
tool moves at the new feedrate.

As commands for jog feed are executed without buffering, axis
control command read completion signal EBSYg usually need not
be checked.

The specified feedrate can be magnified by 10 by setting bit 5
(EFML10) of parameter No.0049.

CAUTION
The maximum feedrate depends on whether override is
applied or canceled.  The following table lists the maximum
feedrate when override is canceled.

IS–B IS–C

Metric input Inch input Metric input Inch input

Magnified
by 1

65535
mm/min

655.35
inch/min

6553
mm/min

65.53
inch/min

Magnified
by 10

655350
mm/min

6553.50
inch/min

65535
mm/min

655.35
inch/min

NOTE
The actual speed may not be displayed correctly,
depending on the feedrate.



15. PMC CONTROL FUNCTION B–61393E–2/02

746

(15) Speed command (EC0g to EC6g:  10h)

For this command, the signals are used to specify, in binary format,
the servo motor speed.

Specify a positive value for rotation in the forward direction.
Specify a negative value (twos complement) for rotation in the
reverse direction.

When a new servo motor speed is specified, inverting the axis
control command read signal EBUFg accelerates or decelerates the
servo motor until it attains the new speed.

Data range Unit

–32768 to +32767 rpm

NOTE
1 The servo motor speed may contain a slight error, as

follows:

Gears

↑

Motor

Axis

Detector

(a)

(b)

Speed command

Amplifier↑

(a)The speed command for PMC axis control requires
specification of the servo motor speed, not the feedrate
along an axis.  To specify a feedrate along the axis when
gears are used to link the servo motor and axis, the
feedrate must be converted to a rotation speed of the
servo motor speed.  As the motor speed must be
specified with an integer, the converted speed is subject
to a round–off error.

(b)The minimum increment for specifying the motor speed
is calculated by the following formula and rounded to the
nearest integer:

Fmin : Minimum increment
for the motor speed

P : Number of pulses per
rotation of the detector for
velocity feedback

Specify the speed command using the value calculated
by the following formula:

F : Speed command value
(integer)

N : Servo motor speed (rpm)
P : Number of detector

pulses issued per rotation
for velocity feedback

2 In speed command mode, the speed after
acceleration/deceleration is specified to the servo control
unit.  The loop gain for position control is invalid.

Fmin � P � 2
15

�
1

1000

F � N � P � 2
15

�
1

1000



B–61393E–2/02 15. PMC CONTROL FUNCTION

747

[Classification] Input signal

IS–B IS–C Unit

Metric input 
Degree input

0.001 0.0001 mm
deg

Inch input 0.0001 0.00001 inch

[Valid data range] (1) Rapid traverse (EC0g to EC6g:  00h)
(2) Cutting feed – feed per minute (EC0g to EC6g:  01h)

(3) Cutting feed – feed per rotation (EC0g to EC6g:  02h)

(4) Skip – feed per minute (EC0g to EC6g:  03h)

For these commands, signals EID0g to EID31g are used to specify, in
binary format, the incremental moving distance, according to the input
increment used for the axis.

IS–B IS–C Unit

Metric input
Degree input

�99999.999 �9999.9999 mm
deg

Inch input �9999.9999 �999.99999 inch

When diameter programming is used, the specified data is doubled for
axial movement.

(5) Dwell (EC0g to EC6g:  04h)

For this command, the signals are used to specify, in binary format,
the dwell time.

Data range Unit

1 to 9999999 ms

When diamete programming is used by bit 2 (XRC) of parameter
No. 0019, dwell is executed double the specified time.

(6) Jog feed (EC0g to EC6g:  06h)

For this command, signal EID31g is used to specify the direction of
jog feed, as follows:

0:  Positive direction
1:  Negative direction

Signals EID0g to EID30g are undefined.

(7) Auxiliary functions (EC0g to EC6g:  12h)

For this command, the signals are used to specify, in binary format,
an auxiliary function code to be sent to the PMC.

4 Axis control data
signals
EID0g to EID31g

[Unit of data]



15. PMC CONTROL FUNCTION B–61393E–2/02

748

[Classification] Input signal

[Function] Directs the CNC to read a block of command data for PMC axis control.
See “Basic procedure” for details of the operation performed when this
signal is set from “0” to “1” or from “1” to “0”.

[Classification] Output signal

[Function] Notifies the system that the CNC has read a block of command data for
PMC axis control and has stored the block in the input buffer.  See “Basic
procedure” for details of the output conditions and the procedure.

[Classification] Input signal

[Function] Resets the corresponding PMC–controlled axis.  
When this signal is set to “1”, the following is performed:

(1) When the tool is moving along the axis:  Decelerates and stops the
tool.

(2) When the tool is dwelling:  Stops the operation.

(3) When an auxiliary function is being executed:  Stops the operation.

Simultaneously, all buffered commands are canceled.  Any control
command is ignored while this signal is set to “1”.

The jog feed command (EC0g to EC6g:  06h) and external pulse
synchronization command (EC0g to EC6g:  0Bh, 0Dh to 0Fh) can be
terminated by setting reset signal ECLRg to “1”.  When these commands
are terminated, the servo motor decelerates and stops, the axis moving
signal EGENg is set to “0”, and the control axis selection status signal
*EAXSL is set to “0”.  Confirm that the control axis selection status signal
*EAXSL has been set to “0” before issuing the next command.  Do not
set reset signal ECLRg to “0” until the control axis selection status signal
*EAXSL has been set to “0”.

The speed command (EC0g to EC6g:  10h) can also be terminated by
setting the reset signal ECLRg to “1”.  When this command is terminated,
the servo motor decelerates and stops, and the axis moving signal EGENg
is set to “0”.  Confirm that the axis moving signal EGENg has been set
to “0” before issuing the next command.  Do not attempt to set the reset
signal ECLRg to “0” until the axis moving signal EGENg has been set to
“0”.

5 Axis control
command read signal
EBUFg

6 Axis control
command read
completion signal
EBSYg

7 Reset signal 
ECLRg



B–61393E–2/02 15. PMC CONTROL FUNCTION

749

[Classification] Input signal

[Function] When this signal is set to “1”, the following is performed:

(1) When the tool is moving along the axis:  Decelerates and stops the
tool.

(2) When the tool is dwelling:  Stops the operation.

(3) When an auxiliary function is being executed:  Stops the operation
when auxiliary function completion signal EFINg is input.

The stopped operation can be restarted by setting this signal to “0”.

[Classification] Input signal

[Function] When block stop signal ESBKg is set to “1” during the execution of a
command issued from the PMC, axis control is stopped after the block
being executed is completed.  When this signal is set to “0”, the buffered
command is executed.  Block stop signal ESBKg is disabled when block
stop disable signal EMSBKg is set to “1” for the block.

The timing chart for the command operation is shown below.

ESBKg
(input)

Command
block
(input)

EBUFg

(input)

EBSYg
(output)

Input buffer

Waiting buffer

Executing 
buffer

|←    More than     →|
         8 msec

Beginning of execution

[1] [2] [3]

[1]

The buffer is full.

[2]

[3]

[1]

[2]

8 Axis control
temporary stop signal
ESTPg

9 Block stop signal
ESBKg

10 Block stop disable
signal 
EMSBKg



15. PMC CONTROL FUNCTION B–61393E–2/02

750

[Classification] Output signal

[Classification] Output signal

[Classification] Input signal

[Function] When an auxiliary function command (EC0g to EC6g:  12h) is issued by
the PMC, the CNC sends the auxiliary function code specified in signals
EID0g to EID7g to auxiliary function code signals EM11g to EM28g and
awaits auxiliary function completion signal EFINg.  When the auxiliary
function completion signal EFINg is returned, the CNC starts executing
the next block.
The timings for sending the auxiliary function code signals and auxiliary
function strobe signal, as well as for receiving the auxiliary function
completion signal, are the same as those for the miscellaneous functions
(M functions) under the control of the CNC.  See “Auxiliary function
executing signal” for details.

[Classification] Input signal

[Function] When this signal is set to “1”, the servo motor for the corresponding
PMC–controlled axis is turned off (servo–off state).

When this signal is set to “0”, the servo motor is turned on.

[Classification] Output signal

[Function] When this signal is set to “0”, control axis selection signals EAX1 to
EAX8 can be changed.

This signal is set to 1 in the following cases:

(1) When the tool is moving along a PMC–controlled axis
(2) When a block is being read into a buffer
(3) When the servo–off signal ESOFg is set to “1”

When this signal is set to “1”, control axis selection signals EAX1 to
EAX8 cannot be changed.  Any attempt to change these signals results in
the output of P/S alarm No. 139.

11 Auxiliary function
code signals 
EM11g to EM28g

12 Auxiliary function
strobe signal 
EMFg

13 Auxiliary function
completion signal
EFINg

14 Servo–off signal 
ESOFg

15 Control axis selection
status signal 
*EAXSL 
(Specification B)



B–61393E–2/02 15. PMC CONTROL FUNCTION

751

If an attempt to change signals EAX1 to EAX4 is made when servo–off
signal ESOFg is “1”, P/S alarm No. 139 occurs and cannot be released
simply by setting reset signal ECLRg to “1”.  In such a case, restore
signals EAX1 to EAX4 or set servo–off signal ESOFg to “0” before
setting reset signal ECLRg to “1”.

When a command is issued for any of the two paths with PMC axis
control, signal *EAXSL is set to “1” to disable axis selection.  Thus,
changing signals EAX1 to EAX4 results in the output of P/S alarm No.
139.  For paths for which commands are not issued, however, axis
selection is enabled if the parameter EADSL (No.0389#4 (M)/No.0398#0
(T)) is set accordingly.

[Classification] Output signal

[Function] This signal is set to “1” when the corresponding PMC–controlled axis is
in the in–position state.

[Classification] Output signal

[Function] This signal is set to “1” when following zero check or in–position check
is being performed for the corresponding PMC–controlled axis.

[Classification] Output signal

[Function] This signal is set to “1” when a servo alarm, overtravel alarm, or P/S alarm
No. 130 or 139 occurs for the corresponding PMC–controlled axis.  This
signal is set to “0” when reset signal ECLRg is set to “1” after the alarm
is released, as described below.
� Servo alarm

Eliminate the cause of the alarm, then reset the CNC.
� Overtravel alarm

Move the tool into the area within the stored stroke limit, then reset the
CNC.
The following commands can be used to move the tool into the area
within the stored stroke limit during an overtravel alarm:

(1) Rapid traverse (EC0g to EC6g:  00h)
(2) Cutting feed–feed per minute (EC0g to EC6g:  01h)
(3) Cutting feed–feed per rotation (EC0g to EC6g:  02h)
(4) Jog feed (EC0g to EC6g:  06h)
(5) External pulse synchronization – first manual handle 

(EC0g to EC6g:  0Dh)
(6) External pulse synchronization – second manual handle 

(EC0g to EC6g:  0Eh)

16 In–position signal 
EINPg

17 Following zero
checking signal 
ECKZg

18 Alarm signal 
EIALg



15. PMC CONTROL FUNCTION B–61393E–2/02

752

(7) External pulse synchronization – third manual handle 
(EC0g to EC6g:  0Fh)

� P/S alarm (130 or 139)
Reset the CNC.  See “Alarms and messages” for details.

Reset signal ECLRg cannot be used to reset the CNC in the above cases.
Use the reset button on the setting panel, external reset signal ERS, or
emergency stop signal *ESP.

[Classification] Output signal

[Function] This signal is set to “1” when the tool is moving along the corresponding
PMC–controlled axis according to commands such as rapid traverse
(EC0g to EC6g:  00h) and cutting feed (EC0g to EC6g:  01h).

NOTE
This signal is set to “0” when distribution for the axis is
completed (the signal is set to “0” during deceleration).

[Classification] Output signal

[Function] When an auxiliary function (EC0g to EC6g:  12h) is specified by the
PMC, this signal is set to “1” during the period from when auxiliary
function codes EID0g to EID7g are sent to auxiliary function code signals
EM11g to EM48g until auxiliary function completion signal EFINg is
returned.

The timing chart for the command operation is shown below.

Command block 
(input)

EM11g to EM48g 
(output)

EMFg
(output)

EFINg
(input)

EDENg
(output)

Auxiliary function command Next command

TFIN

TMF

TMF and TFIN are set with parameter 0009.

19 Axis moving signal 
EGENg

20 Auxiliary function
executing signal 
EDENg



B–61393E–2/02 15. PMC CONTROL FUNCTION

753

[Classification] Output signal

[Function] These signals are set to “1” when an overtravel alarm is detected.  When
the stroke limit in the negative direction is exceeded, signal EOTNg is set
to “1”.  When the stroke limit in the positive direction is exceeded, signal
EOTPg is set to “1”.  Simultaneously, alarm signal EIALg is set to “1”.

These signals are set to “0” when the overtravel alarm is released and reset
signal ECLRg is set to “1”.  See “Alarm signal EIALg” for details of how
to release an overtravel alarm.

[Classification] Input signal

[Function] Like the CNC’s feedrate override signals *OV1 to *OV8, these signals
can be used to select the override for the cutting feedrate, in steps of 10%
from 0 to 150%, independently of the CNC using bit 7 (EAXOVE) of
parameter No.0078.

NOTE
OVRIE is set with bit 4 of parameter No. 0078.

Contact signal status on machine side Override value

*OV1E *OV2E *OV4E *OV8E OVRIE=1 OVRIE=0

0 0 0 0 0% 150%

1 0 0 0 10% 140%

0 1 0 0 20% 130%

1 1 0 0 30% 120%

0 0 1 0 40% 110%

1 0 1 0 50% 100%

0 1 1 0 60% 90%

1 1 1 0 70% 80%

0 0 0 1 80% 70%

1 0 0 1 90% 60%

0 1 0 1 100% 50%

1 1 0 1 110% 40%

0 0 1 1 120% 30%

1 0 1 1 130% 20%

0 1 1 1 140% 10%

1 1 1 1 150% 0%

21 Negative–direction 
overtravel signal 
EOTNg

22 Positive–direction 
overtravel signal 
EOTPg

23 Feedrate override 
signals 
*OV1E to *OV8E



15. PMC CONTROL FUNCTION B–61393E–2/02

754

[Classification] Input signal

[Function] When override is enabled, independently of the CNC, by setting bit 7
(EAXOVC) of parameter No.0078, setting this signal to “1” fixes the cut-
ting feed override to 100%.  This signal does not affect the rapid traverse
override.

[Classification] Input signal

[Function] These signals can be used to select the override for the rapid traverse rate,
independently of the CNC, by setting bit 7 (EAXOVC) of parameter No.0078.

Contact signal status on machine side Override value

ROV1E ROV2E OVRIE=1 OVRIE=0

1 1 100% F0

0 1 50% 25%

1 0 25% 50%

0 0 F0 100%

F0 is the minimum feedrate specified with parameter No.0685.

[Classification] Input signal

[Function] These signals can be used to perform dry run or manual rapid traverse,
independently of the CNC, by setting bit 7 (EAXOVE) of parameter
No.0078.  When dry run signal DRNE is set to “1”, the specified rapid
traverse rate and cutting feedrate are ignored and the tool moves at the dry
run speed multiplied by the specified override.  Bit 6 (RDRNE) of
parameter No.0078 can be used to specify whether to enable or disable dry
run for rapid traverse.

When manual rapid traverse selection signal RTE is set to “1” during dry
run, the tool moves at the rapid traverse rate for rapid traverse and at the
maximum jog feedrate for cutting feed.  When the signal is set to “0”, the
tool moves at the jog feedrate.  When dry run signal DRNE is set to “0”,
the specified rapid traverse rate or cutting feedrate is restored.

Manual rapid
traverse select

Command from PMC
traverse  select

signal Rapid traverse Feed

1 Rapid traverse rate Maximum jog feedrate

0 Jog feedrate(*) Jog feedrate

* Can also be set to the rapid traverse rate with bit 6 (RDRNE) of
parameter No.0078.

24 Override cancellation 
signal OVCE

25 Rapid traverse 
override signals 
ROV1E and ROV2E

26 Dry run signal DRNE
27 Manual rapid traverse 

selection signal RTE



B–61393E–2/02 15. PMC CONTROL FUNCTION

755

Contact signal status on Jog feedg
machine side OVRIE=1 OVRIE=0

*OV1E *OV2E *OV4E *OV8E
Metric
system

[mm/min]

Inch 
system

[inch/min]

Metric
system

[mm/min]

Inch 
system

[inch/min]

0 0 0 0 0 0 1260 50

1 0 0 0 2.0 0.08 790 30

0 1 0 0 3.2 0.12 500 20

1 1 0 0 5.0 0.2 320 12

0 0 1 0 7.9 0.3 200 8.0

1 0 1 0 12.6 0.5 126 5.0

0 1 1 0 20 0.8 79 3.0

1 1 1 0 32 1.2 50 2.0

0 0 0 1 50 2.0 32 1.2

1 0 0 1 79 3.0 20 0.8

0 1 0 1 126 5.0 12.6 0.5

1 1 0 1 200 8.0 7.9 0.3

0 0 1 1 320 12 5.0 0.2

1 0 1 1 500 20 3.2 0.12

0 1 1 1 790 30 2.0 0.08

1 1 1 1 1260 50 0 0

[Classification] Output signal

[Function] Signal EOV0 is turned “1” at 0% override value, when override is valid
independently of the CNC by setting the parameter EAXOVE (bit 7 of
No.0078).

[Classification] Input signal

[Function] When this signal is set to “1”, the block being executed is immediately
stopped and the next block is executed.  Bit 3 (EPMSKP) of parameter
No.0066 can be used to select whether to use signal SKIP, which is the
common skip signal for the PMC and CNC, or PMC–specific skip signal
ESKIP.

28 Override 0% signal 
EOV0

29 Skip signal 
ESKIP



15. PMC CONTROL FUNCTION B–61393E–2/02

756

MT � CNC

#7
SKIPX008

#6
ESKIP

#5 #4 #3 #2 #1 #0
PMC

ADDRESS

PMC � CNC

#7
G144

#6 #5
EAX8

#4
EAX7

#3
EAX4

#2
EAX3

#1
EAX2

#0
EAX1

PMC
ADDRESS

G146 ROV2E ROV1E

DRNEG147 RTE OVCE *OV8E *OV4E *OV2E *OV1E

#7
EBUFAG210

#6
ECLRA

#5
ESTPA

#4
ESOFA

#3
ESBKA

#2 #1 #0
EFINA

EMSBKAG211 EC6A EC5A EC4A EC3A EC2A EC1A EC0A

EIF7AG212 EIF6A EIF5A EIF4A EIF3A EIF2A EIF1A EIF0A

EIF15AG213 EIF14A EIF13A EIF12A EIF11A EIF10A EIF9A EIF8A

EID7AG214 EID6A EID5A EID4A EID3A EID2A EID1A EID0A

EID15AG215 EID14A EID13A EID12A EID11A EID10A EID9A EID8A

EID23AG216 EID22A EID21A EID20A EID19A EID18A EID17A EID16A

EID31AG217 EID30A EID29A EID28A EID27A EID26A EID25A EID24A

For
group A

#7
EBUFBG218

#6
ECLRB

#5
ESTPB

#4
ESOFB

#3
ESBKB

#2 #1 #0
EFINB

EMSBKBG219 EC6B EC5B EC4B EC3B EC2B EC1B EC0B

EIF7BG220 EIF6B EIF5B EIF4B EIF3B EIF2B EIF1B EIF0B

EIF15BG221 EIF14B EIF13B EIF12B EIF11B EIF10B EIF9B EIF8B

EID7BG222 EID6B EID5B EID4B EID3B EID2B EID1B EID0B

EID15BG223 EID14B EID13B EID12B EID11B EID10B EID9B EID8B

EID23BG224 EID22B EID21B EID20B EID19B EID18B EID17B EID16B

EID31BG225 EID30B EID29B EID28B EID27B EID26B EID25B EID24B

For
group B

Signal address



B–61393E–2/02 15. PMC CONTROL FUNCTION

757

CNC � PMC

#7
*EAXSLF188

#6 #5
EOV0

#4 #3 #2 #1 #0
PMC

ADDRESS

#7
EBSYAF270

#6
EOTNA

#5
EOTPA

#4
EGENA

#3
EDENA

#2
EIALA

#1
ECKZA

#0
EINPA

F271 EMFA

EM28AF272 EM24A EM22A EM21A EM18A EM14A EM12A EM11A

For
group A

#7
EBSYBF273

#6
EOTNB

#5
EOTPB

#4
EGENB

#3
EDENB

#2
EIALB

#1
ECKZB

#0
EINPB

F274 EMFB

EM28BF275 EM24B EM22B EM21B EM18B EM14B EM12B EM11B

For
group B

Signal name Symbol

Reference position return decel-
eration signal

*DEC7
*DEC8

Servo off signal SVF7
SVF8

Reference position return
completion signal

ZP7
ZP8

2nd, 3rd, or  4th reference posi-
tion return completion signal

ZP27, ZP37, ZP47
ZP28, ZP38, ZP48

MT � CNC

#7
*EAXSLX016

#6 #5 #4 #3 #2
*DEC7

#1 #0
PMC

ADDRESS

X017 *DEC8

PMC � CNC

#7
G105

#6 #5
SVF8

#4
SVF7

#3 #2 #1 #0
PMC

ADDRESS

CNC � PMC

#7
ZP28F166

#6
ZP27

#5
ZP8

#4
ZP7

#3
ZP48

#2
ZP47

#1
ZP38

#0
ZP37

PMC
ADDRESS

Signals for the 7th and
8th axes



15. PMC CONTROL FUNCTION B–61393E–2/02

758

#7
0030

#6 #5 #4 #3 #2 #1
EAC1

#0
EAC0

[Data type] Bit

EAC1, EAC0 One of the axes from the X axis to the fourth axis is selected as the
controlled axis.  (For M series with specification A only)

EAC1 EAC0 PMC controlled axis

0 0 Fourth axis

0 1 X axis

1 0 Y axis

1 1 Z axis

#7
0032

#6
EACSB

#5 #4
PNGMLK

#3 #2 #1 #0

[Data type] Bit

PNGMLK 1 : Machine lock signal MLK is invalid for the PMC controlled axis.
0 : Machine lock signal MLK is valid for the PMC controlled axis.

EACSB 1 : Specification B is used for the PMC axis control function.
0 : Specification A is used for the PMC axis control function.

#7
0049

#6 #5
EFML10

#4 #3 #2 #1 #0

[Data type] Bit

EFML10 1 : The cutting feedrate command for PMC axis control is multiplied by
ten.

0 : The ordinary specification is valid.

#7
0052

#6 #5
NODIC6

#4
NODIC5

#3
NODIC4

#2
NODIC3

#1
NODIC2

#0
NODIC1

[Data type] Bit

NODICn n=1 to 6
1 : The increment system 1/10 for the n–th axis is ignored.
0 : The increment system 1/10 for the n–th axis is not ignored.

#7
0061

#6 #5
EBC8

#4
EBC7

#3
EBC4

#2
EBCZ

#1
EBCY

#0
EBCX (M series)

0061 EBC8 EBC7 EBC4 EBC3 EBCZ EBCX (T series)

[Data type] Bit

EBCx 1 : Group B is used for the DI/DO signals for the PMC axis control
function.

0 : Group A is used for the DI/DO signals for the PMC axis control
function.

Parameter



B–61393E–2/02 15. PMC CONTROL FUNCTION

759

#7
0062

#6
AXPCF

#5 #4 #3 #2 #1 #0

[Data type] Bit

AXPCF 1 : Movement along the PMC controlled axis is not included in the actual
speed display.

0 : Movement along the PMC controlled axis is included in the actual
speed display.

NOTE
This parameter is valid when control of an axis is switched
between the CNC and PMC.

#7
0063

#6 #5
EAXOV

#4 #3 #2 #1 #0

[Data type] Bit

EAXOV 1 : The same override and dry run operations as those for the CNC are
valid for the PMC axis.  (This setting is ignored when bit 7
(EAXOVE) of parameter No. 0078 is set to 1.)

0 : The same override and dry run operations as those for the CNC are
invalid for the PMC axis.

#7
ERVF20066

#6
ERVF1

#5 #4 #3
EPMSKP

#2
ENSU

#1 #0

[Data type] Bit

ERVF1, ERVF2 Sets the multiplier for the feedrate when the cutting feed – feed per
rotation command (EC0g to EC6g:  02h) is specified.

ERVF2 ERVF1 Multiply

0 0
�1

1 1
�1

0 1 �10

1 0 �100

ENSU 1 : Acceleration/deceleration is not performed for an axis which is
controlled in sync with the external pulse signal.

0 : Acceleration/deceleration is performed for an axis which is controlled
in sync with the external pulse signal.

EPMSKP 1 : A skip signal dedicated to the PMC is used.
0 : The same skip signal as that for the CNC is used.



15. PMC CONTROL FUNCTION B–61393E–2/02

760

#7
EAXOVE0078

#6
RDRNE

#5 #4
OVRIE

#3 #2 #1 #0

[Data type] Bit

EAXOVE 1 : Override and dry run in PMC axis control independent of the CNC are
valid.

0 : Override and dry run in PMC axis control independent of the CNC are
not valid.

RDRNE 1 : Dry run for the rapid traverse command in PMC axis control
independent of the CNC is also valid.

0 : Dry run for the rapid traverse command in PMC axis control
independent of the CNC is not valid.  (This setting is allowed only
when EAXOVE = 1.)

OVRIE 1 : In PMC axis control, the polarity of the override signal is set
independently of the CNC so that specifying “1” increases the
feedrate.

0 : n PMC axis control, the polarity of the override signal is set
independently of the CNC so that specifying “0” increases the
feedrate.  (This setting is allowed only when EAXOVE = 1.)

0350 PVRIDX

PVRIDX Axis number of an axis for which a velocity command is issued.
Setting value T series M sereis

1 X axis X axis
2 Z axis Y axis
3 3rd axis Z axis
4 4th axis 4th axis
5 7th axis 7th axis
6 8th axis 8th axis

If a value that falls outside the above range is set, a velocity command
cannot be issued for any axis.  When this parameter has been set, the
power must be turned off then back on before operation is continued.

#7
EFERPD0387

#6 #5 #4 #3 #2 #1 #0

[Data type] Bit

EFERPD 1 : Any rapid traverse rate can be specified in PMC axis control
independently of the CNC.

0 : The rapid traverse rate in PMC axis control depends on the parameter
setting made for the CNC.



B–61393E–2/02 15. PMC CONTROL FUNCTION

761

0651 EFDTX

0652 EFDTY (M series)

0652 EFDTZ (T series)

0653 EFDTZ (M series)

0653 EFDT3 (T series)

0654 EFDT4

EFDTx Set the time constant of exponential acceleration/deceleration for cutting
feed along each axis when the axis is used as the PMC axis.

[Valid data range] 1 to 4000

[Unit of data] msec

When 0 is set, the FEEDT value set in parameter No. 0529 is used.

0657 EAFLX

0658 EAFLY (M series)

0658 EAFLZ (T series)

0659 EAFLZ (M series)

0659 EAFL3 (T series)

0660 EAFL4

EAFLx Set the lower feedrate limit (FL) for exponential acceleration/deceleration
for cutting feed along each axis when the axis is used as the PMC axis.
When metric output mode is used, the specifiable range is 6 to 15000
(mm/min).
When inch output mode is used, the specifiable range is 6 to 5000
(inches/min).  
When 0 is set, the FEDFL value set in parameter No. 0530 is used.

0672 EZRNFL

EZRNFL Sets a low feedrate (FL) at which reference position return is performed
along the PMC axis.
When metric output mode is used, the specifiable range is 6 to 15000
(mm/min).
When inch output mode is used, the specifiable range is 6 to 6000
(inches/min).
When 0 is set, the ZRNFL value set in parameter No. 0534 is used.



15. PMC CONTROL FUNCTION B–61393E–2/02

762

0679 PVRTC1 (T series)

0462 PVRTC1 (M series)

PVRTC1 Time constant for linear acceleration/deceleration for a specified feedrate.
Set the time required to increase/decrease the servo motor speed by 1000
rpm.

[Valid data range] 1 to +32767

[Unit of data] msec/1000rpm

When 0 is set, acceleration/deceleration control is not performed.

0685 RPDFLE

RPDFLE Specifies the lowest feedrate (Fo) for rapid traverse overrides performed
in PMC axis control independently of the CNC.
When metric output mode is used, the specifiable range is 6 to 15000
(mm/min).
When inch output mode is used, the specifiable range is 6 to 6000
(0.1inches/min).

NOTE
When the increment system is 1/10, the same unit is used.

0698 PFEDMX

PFEDMX Sets the upper speed limit on feed per rotation used for the PMC axis.
When metric output mode is used, the specifiable range is 6 to 15000
(mm/min).
When inch output mode is used, the specifiable range is 6 to 6000
(0.1inches/min).

#7
0021

#6 #5
APC8

#4
APC7

#3 #2 #1 #0

APC7,8 1 : When there is absolute pulse coder detector.
0 : When there is  no absolute pulse coder detector.

#7
0022

#6 #5
ABS8

#4
ABS7

#3 #2 #1 #0

ABS7,8 1 : Reference point position is established by absolute pulse coder.
0 : Reference point position is not established by absolute pulse coder.

Parameters for 7th axis
and 8th axis



B–61393E–2/02 15. PMC CONTROL FUNCTION

763

#7
NODIC80052

#6
NODIC7

#5 #4 #3 #2 #1 #0

NODIC7,8 1 : Current position display remains as standard specification without
following decimal point position of setting units of 1/10.

0 : Current position display follows decimal point of setting units of
1/10.

#7
0061

#6
DSP78

#5 #4 #3 #2 #1 #0

DSP7,8 1 : 7th axis and 8th axis are displayed absolutely and relatively at current
position.

0 : 7th axis and 8th axis are not displayed absolutely and relatively at
current position.

#7
C8NG0062

#6 #5
ADLN8

#4
ADLN7

#3 #2 #1 #0

ADLN7,8 1 : Sets linear axis.
0 : Sets rotation axis.

C8NG 1 : When removing 8th axis.
0 : When using 8th axis.

#7
0066

#6 #5
ZM8

#4
ZM7

#3 #2 #1 #0

ZM7,8 1 : Sets reference point return direction and backlash initial direction
when turning on power as minis.

0 : Sets reference point return direction and backlash initial direction
when turning on power as plus.

GRD7DMR7
#7

0067
#6 #5 #4 #3 #2 #1 #0

GRD8DMR80068

DMR7,8 Setting for detection multiply.
GRD7,8 Setting for capacity of reference counter

0275 CMR7

0276 CMR8

CMR7,8 Setting of command multiply.

0285 DPAX7

0286 DPAX8

DPAX7,8 Setting of axis name (character code).
(When value is “0”, “55” and “56” are set as defaults.)



15. PMC CONTROL FUNCTION B–61393E–2/02

764

0632 LPGM7

0633 LPGM8

LPGM7,8 Loop gain for position control.
(Enabled when No.0517=0)

0637 INP7

0638 INP8

IPN7,8 Width of in–position.

0639 SERR7

0640 SERR8

SERR7,8 Position deviation amount limit value.

0641 GRDS7

0642 GRDS8

GRDS7,8 Setting of grid shift value.

0643 RPDF7

0644 RPDF8

RPDF7,8 Rapid traverse rate.
(Because no rapid traverse rate is specified for jog feed, these parameters
are used also under the 1st reference position return command.)

0645 LINT7

0646 LINT8

LINT7,8 Time constant for linear type acceleration/deceleration. (For rapid
traverse)

0647 BKL7

0648 BKL8

BKL7,8 Backlash value.

0649 STPE7

0650 STPE8

STPE7,8 Position deviation amount limit value during stop.



B–61393E–2/02 15. PMC CONTROL FUNCTION

765

0655 EFDT7

0656 EFDT8

EFDT7,8 Time constants of exponential acceleration/deceleration of PMC axis
cutting feed for each axis.

[Valid data range] 1 to 4000

[Unit of data] msec
When 0 is set, the data for FEEDT (PRM No.529) is used.

0661 EAFL7

0662 EAFL8

EAFL7,8 Lower limit speeds (FL) at exponential acceleration/deceleration of PMC
axis cutting feed for each axis.
6 to 15000  Unit : mm/min (metric output)
6 to 6000    Unit : 0.1 inch/min (inch output)
When 0 is not set, the cutting FL speed for FEDFL (parameter No.530) is
used.

0821 LT171

0822 LT181

0823 LT172

0824 LT182

LT171,LT181 Stored stroke limit.

LT172,LT182

0825 PRS7

0826 PRS8

PRS7,8 Coordinate value of reference position when performing automatic
coordinate system setting.

0827 ABS7P

0828 ABS8P

ABS7P,ABS8P When using absolute pulse corder, value of counter data at reference
position return position. (unnecessary to set)

0866 REF27

0867 REF28

REF27,8 Distance between 1st reference position and 2nd reference position.



15. PMC CONTROL FUNCTION B–61393E–2/02

766

0868 REF37

0869 REF38

REF37,8 Distance between 1st reference position and 3rd reference position.

0870 REF47

0871 REF48

REF47,8 Distance between 1st reference position and 4th reference position.

Control of 7th axis and 8th axis is enabled when the 4th axis interface and
7th /8th axis printed board are installed.
Control of 7th axis and 8th axis also becomes disabled at the same time
as control of 4th axis is disabled by the 4th axis ignore signal (No.X004
4NG).
When control of 7th axis and 8th axis is enabled, control of 8th axis only
can be disabled if the parameter C8NG (bit 7 of No.0062) is set to on.

� Display of current position
When control of 7th axis and 8th axis is enabled, if the parameter
DSP78 (bit 6 of No.0061) is set on, position of 7th axis and 8th axis
are displayed on the current position absolute/relative coordinate
screen.

� Presetting the relative coordinates
The relative coordinate of the 7th or 8th axis can be preset as specified
in ALLPRE (bit 1 of parameter No. 0064) while it is displayed by
pressing numeric key 7 or 8 of the MDI panel.

� Reading position information by custom macro (A specification and
B specification in common)
Position information can be obtained by reading the values of system
variables.

System
variable Position information Reading during shift

#5027

#5028

7th axis Current position (ABSMT)

8th axis Current position (ABSMT)

Not possible

#5047

#5048

7th axis Current position (ABSOT)

8th axis Current position (ABSOT)

Not possible

#5067

#5068

7th axis Skip signal position (ABSKP)

8th axis Skip signal position (ABSKP)

Possible

7th axis and 8th axis



B–61393E–2/02 15. PMC CONTROL FUNCTION

767

1) Absolute pulse coder (APC) alarm

Number Contents and  remedy

370 Manual reference position return is required for the 7th–axis.

371 7th–axis APC communication error.

372 7th–axis APC overtime error.

373 7th–axis APC framing error.

374 7th–axis APC parity error.

375 7th–axis APC pulse error alarm.

376 7th–axis APC battery voltage has decreased to a low level so
that the data cannot be held.

377 7th–axis axis APC battery voltage reaches a level where the bat-
tery must be renewed.

378 7th–axis APC battery voltage has reached a level where the bat-
tery must be renewed (including when power is OFF).

380 Manual reference position return is required for the 8th–axis.

381 8th–axis APC communication error.

382 8th–axis APC overtime error.

383 8th–axis APC framing error.

384 8th–axis APC parity error.

385 8th–axis APC pulse error alarm.

386 8th–axis APC battery voltage has decreased to a low level so
that the data cannot be held.

387 8th–axis axis APC battery voltage reaches a level where the bat-
tery must be renewed.

388 8th–axis APC battery voltage has reached a level where the bat-
tery must be renewed (including when power is OFF).

2) Servo alarms

Number Contents and actions

406 7–axis, 8–axis overload signal is on. 
Or, READY signal (DRDY) for velocity control went off.

470 The position deviation value when the 7–th axis stops is larger
than the set value.

471 The position deviation value when the 7–th axis moves is larger
than the set value. 

473 The value of position error of the 7th axis exceeds the limit of
�32767.  Alternatively, the value of velocity command for the D/A
converter exceeds the range of –8192 to +8191.
This error usually occurs as the result of an improperly set pa-
rameters.

474 7–th axis digital servo system fault.  Refer to diagnosis display
No. 726 for details.

Alarm list



15. PMC CONTROL FUNCTION B–61393E–2/02

768

Number Contents and actions

475 A speed higher than 511875 units/s was attempted to be set in
the 7–th axis.  This error occurs as the result of improperly set
CMR.

476 Position detection system fault in the 7–th axis pulse coder (dis-
connection alarm).

477 This alarm occurs when the n–th axis is in one of the conditions
listed below. (Digital servo system alarm)

1) The value set in Parameter No. 8720 (motor form) is out of the
specified limit.

2) A proper value (111 or –111) is not set in parameter No. 8722 
(motor revolution direction).

3) Illegal data (a value below 0, etc.) was set in parameter No. 8723
(number of speed feedback pulses per motor revolution).

4) Illegal data (a value below 0, etc.) was set in parameter No. 8724
(number of position feedback pulses per motor revolution).

480 The position deviation value when the 8–th axis stops is larger
than the set value.

481 The position deviation value when the 8–th axis moves is larger
than the set value. 

483 The value of position error of the 8th axis exceeds the limit of
�32767.  Alternatively, the value of velocity command for the D/A
converter exceeds the range of –8192 to +8191.
This error usually occurs as the result of an improperly set pa-
rameters.

484 8–th axis digital servo system fault.  Refer to diagnosis display
No. 727 for details.

485 A speed higher than 511875 units/s was attempted to be set in
the 8–th axis.  This error occurs as the result of improperly set
CMR.

486 Position detection system fault in the 8–th axis pulse coder (dis-
connection alarm).

487 This alarm occurs when the n–th axis is in one of the conditions
listed below. (Digital servo system alarm)

1) The value set in Parameter No. 8820 (motor form) is out of the
specified limit.

2) A proper value (111 or –111) is not set in parameter No. 8822 
(motor revolution direction).

3) Illegal data (a value below 0, etc.) was set in parameter No. 8823
(number of speed feedback pulses per motor revolution).

4) Illegal data (a value below 0, etc.) was set in parameter No. 8824
(number of position feedback pulses per motor revolution).

3) Over travel alarms

Number Contents and remedy

570 Exceeded the 7–th axis + side stored stroke limit.

571 Exceeded the 7–th axis – side stored stroke limit.

580 Exceeded the 7–th axis + side stored stroke limit.

581 Exceeded the 7–th axis – side stored stroke limit.



B–61393E–2/02 15. PMC CONTROL FUNCTION

769

#7
OVL0726

#6
LV

#5
OVC

#4
HCAL

#3
HVAL

#2
DCAL

#1
FBAL

#0
OFAL 7th axis

OVL0727 LV OVC HCAL HVAL DCAL FBAL OFAL 8th axis

Indicate the details of servo alarm 474 for the 7th axis and of servo alarm
484 for the 8th axis respectively.

OFAL An overflow alarm is being generated.

FBAL A disconnection alarm is being generated.

DCAL A regenerative discharge circuit alarm is being generated.

HVAL An overvoltage alarm is being generated.

HCAL An abnormal current alarm is being generated.

OVC A overcurrent alarm is being generated.

LV A low voltage alarm is being generated.

OVL An overload alarm is being generated.

0806 SVERR7

0807 SVERR8

SVERR7,SVERR8 Indicate the values of position errors of the 7th axis and the 8th axis
respectively.

0826 ABSMT7

0827 ABSMT8

ABSMT7,ABSMT8 Indicate the machine positions of the 7th axis and 8th axis respectively.

An order–made macro can also control the PMC–controlled axis, using
an interface similar to the PMC interface.

Axis control command read signal EBUF is checked from both the PMC
signals (G210 and G218) and order–made macro data.  The axis control
command of the signal or data that has changed is taken to perform axis
control.  Both the PMC signals and order–made macro data are valid also
for reset signal ECLR, axis control temporary stop signal ESTP, servo–off
signal ESOF, and block stop signal ESBK.

Auxiliary function code signals EM11 to EM28 and auxiliary function
strobe signal EMF are always output to the PMC.  These signals are not
output to the order–made macro.

Auxiliary function completion signal EFIN is input from the PMC.  The
order–made macro cannot set the signal.  (If the order–made macro sets
the signal, the setting is ignored.)

The following show the addresses of the command data of the order-made
macro corresponding to the signals from PMC.

Diagnosis display

Order–made macro
(OMM) interface



15. PMC CONTROL FUNCTION B–61393E–2/02

770

DI/DO signal A DI/DO signal B

PMC
address

Order-made macro
address

PMC
adress

Order–made macro
address

G210 0DBA0  H G218 0DBA8  H

G211 0DBA1  H G219 0DBA9  H

G212 0DBA2  H G220 0DBAA  H

G213 0DBA3  H G221 0DBAB  H

G214 0DBA4  H G222 0DBAC  H

G215 0DBA5  H G223 0DBAD  H

G216 0DBA6  H G224 0DBAE  H

G217 0DBA7  H G225 0DBAF  H

F270 0DBB0  H F273 0DBB3  H

A servo alarm or overtravel alarm for a PMC–controlled axis is detected
in the same way as an alarm for a CNC–controlled axis.

If an alarm occurs, the alarm is handled by applying the normal procedure,
alarm signal EIALg being set to “1” to inform the PMC of the alarm.

(If an overtravel alarm occurs, either negative overtravel signal EOTNg
or positive overtravel signal EOTPg is also set to “1”.)

If the PMC issues a command for a CNC–controlled axis, a P/S alarm No.
130 occurs.

Commands issued by the PMC are effective if the axis is in feed hold or
single block stop mode.  The command results in the issue of an alarm if
cutting feed is executed with an override of 0%, or if the interlock is
enabled.

If the CNC issues a command for a PMC–controlled axis, a P/S alarm No.
130 occurs.

If the PMC issues a movement command for an axis in the plane of polar
coordinate interpolation in polar coordinate interpolation mode (G112),
a P/S alarm No. 130 occurs.

������ Message Description

130 ILLEGAL AXIS OPERA-
TION

An axis control command was given
by PMC to an axis controlled by CNC.
Or an axis control command was giv-
en by CNC to an axis controlled by
PMC.  Modify the program.

139 CAN NOT CHANGE PMC
CONTROL AXIS

A PMC controlled axis was again se-
lected.   Or, the CNC issued a control
command for an axis that has been
set as a PMC–controlled axis for
which no command has been speci-
fied.  Or, an axis under control of CNC
was selected by PMC.

Alarm and message



B–61393E–2/02 15. PMC CONTROL FUNCTION

771

WARNING
1 The mode selection, CNC reset, and other CNC statuses

have no effect.
2 Feed hold, single block stop, reset, or interlock of one or all

axes, performed by the CNC, does not affect a
PMC–controlled axis.  Similar control is possible by using
the equivalent signals issued from the PMC.

3 The mirror image functions (setting, parameter, input signal)
are disabled.

CAUTION
1 Emergency stop or machine lock is enabled.  Machine lock

can be disabled if the PNGMLK bit (bit 4 of parameter
No.0032) is specified accordingly.  However, machine lock
for an individual axis is always enabled.

2 In consecutive cutting feed blocks, a new block starts its
operation without waiting for the following zero of the servo
acceleration/deceleration.  In other than the above blocks,
a new block starts its operation after the following zero of the
servo acceleration/deceleration is confirmed.

3 For a PMC–controlled axis, manual absolute mode is
always set.  If the PMC starts control of an axis after manual
intervention (manual continuous feed, manual handle feed,
etc.) is performed during automatic operation while manual
absolute mode is not set (*ABSM is set to 1), manual
absolute mode is set.

NOTE
1 The actual speed excluding the effect of the movement

along a PMC–controlled axis can be displayed if the AXPCF
bit (bit 6 of parameter No.0062) is specified.

2 If an absolute pulse coder is used, a specified reference
position is retained in memory, even after the power is
turned off.

3 If the index table indexing function of the M series is added,
the PMC cannot control the fourth axis.

Warning

Caution

Note



15. PMC CONTROL FUNCTION B–61393E–2/02

772

When a multi–axis printed circuit board is provided, this function
specified by the PMC enables axis control independent of the CNC axis
control.  The order–made macro can also perform axis control by issuing
a command similar to the PMC command.  The axial movement
command can be specified in incremental mode only.  Radius
programming must always be performed.

Motion along the controlled axis is independent of the motion along the
basic CNC controlled axes or other PMC controlled axes.

5th axis and 6th axis.

a) Feed hold, single block, reset, and interlock controlled by the CNC
are not effective for the PMC–controlled axes.  Similar control can
be performed by manipulating the PMC signals.

b) Machine lock and emergency stop controlled by the CNC are
effective.

c) Axis control by the PMC is not affected by the mode selection
signal.

The axis names of the 5th and 6th axes can be selected by DSPSUB1,
parameter No. 7130, and DSPSUB2, parameter No. 7131.  (The default
names are 53 and 54.)  DSPSUB, parameter No. 0029, determines
whether the axis names are displayed on the current position display
screen.

Axis control command signals EC0C to EC6C and EC0D to EC6D from
the PMC specify the type of operation as indicated below:

Axis control
command signal Operation

00H Rapid traverse (linear acceleration/deceleration)
Performs the same operation as G00, used by the CNC.

01H Cutting feed (exponential acceleration/deceleration)
Performs the same operation as G98 G01, used by the
CNC.

04H Dwell
Performs the same operation as G04, used by the CNC.

05H Reference position return
Moves the tool in the direction of reference position return
specified by ZM5 and ZM6, parameter No. 7003, by means
of rapid traverse, then performs the same operation as
manual reference position return, done by the CNC.

06H Continuous feed (exponential acceleration/deceleration)
Moves the tool along the controlled axis in a single direction
by means of continuous feed.

12H Auxiliary function
Performs the same operation as the miscellaneous func-
tion, used by the CNC.

Control for 5th axis and
6th axis

General

Specification

Controlled axis

Notes for controlled axis

Axis name

Command



B–61393E–2/02 15. PMC CONTROL FUNCTION

773

a) Axis control command method by PMC 
When the axis control command end signal EBUF is inverted (ON
→ OFF/OFF → ON) after inputting axis control command signals
EC0C to EC6C and EC0D to EC6D and the command data on the
C side, the CNC accepts those command block and executes the
command.

Movement
Axis control
command 

signal
Command data

Rapid traverse 00H Total move distance (EID0C to EID31C
,EID0D to EID31D)

Cutting feed 01H Total move distance (EID0C to EID31C
, EID0D to EID31D)

Cutting feedrate (EID0C to EID31C
, EID0D to EID31D)

Dwell 04H Dwell time (EID0C to EID31C
, EID0D to EID31D)

Reference
position return

05H

Continuous
feed

06H Feedrate (EIF0C to EIF15C
, EIF0D to EIF15D)

Continuous feed direction
(EID31C, EID31D)

Auxiliary func-
tion

12H Auxiliary function code
(EID0C to EID7C
, EID0D to EID7D)

b) Commanding two or more operations continuously
With the axis control function by PMC, the command blocks of two
or more operations are buffered on the CNC side so that they are
made continuously by PMC.
Namely even if one command is being executed, the CNC accepts
the next command as long as there is a vacancy in the buffer on the
CNC side.

Block 1

Block 2

Block 3

Block 4

Block 5

Block N

Execution wait buffer 1

PMC command

�  Command [1]  �  [4]  � [3]

�  Command [2]

�  Command [3] [2]

�  Command [4]

�  Command [5] [1]

Buffer on CNC side

Execution wait buffer 2

Executing  buffer

�

�

PMC command

When command (1) (block 1) has been executed, the following transfers
are made:

Command(2) → Executing buffer



15. PMC CONTROL FUNCTION B–61393E–2/02

774

Command(3) → Executing wait buffer2
Command(4) → Executing wait buffer1

After command (2) (block 2) starts to execute, command (5) (block 5) can
be sent to the CNC side.

c) Buffer status on CNC side
It is possible to judge the buffer status on the CNC side by obtaining
exclusive OR of the axis control command end signal EBUF on the
PMC side and the axis control command read signal EBSY on the
CNC side.

EBUF = EBSY Exclusive(XOR) Operation

0 =1

1= 1

0 It is possible to accept the command from the
PMC side because the buffer is in the “vacant”
status.

0 = 1

1= 0

1 It is impossible to accept the command from the
PMC side because the buffer is in the “full” sta-
tus.
When the command currently being executed
has ended and a vacancy has been created in
the buffer, the command is accepted and the
axis control command read signal EBSY is
inverted.

d) Time chart
The command operation time chart is shown below.

Command data
(Input)

[1] [2] [3] [4] [5]

EBUF 
(Input)

Command not 
available

EBSY
(Output)

Executiion wait
Buffer 1

Executiion wait
Buffer 2

Executing
buffer

Start End Start

[1] [2]



B–61393E–2/02 15. PMC CONTROL FUNCTION

775

Metric input system Inch input system

Least input increment 0.001 mm 0.0001 inch

Least command increment 0.001 mm 0.0001 inch

Metric input system Inch input system

Rapid traverse rate 1 to 24000 mm/min 1 to 960.00 inch/min

Cutting feedrate 1 to 15000 mm/min 1 to 600.00 inch/min

EAXOVS, parameter No. 7063, enables or disables the override function.

The feedrate specified by the PMC can be overridden by the value ranging
from 0% to 150% specified by the override signals (in steps of 10%).

The rapid traverse rate can be overridden by any of the values indicated
below, as specified by the rapid traverse override signals.

Fo, 25%, 50%, 100%

Fo:  Certain rate specified by RPDFLS, parameter No. 7533

NOTE
If EAXOVS, parameter No. 7063, is OFF, override of 50%
can be applied when the rapid traverse override signal
(ROVS) is ON or override of 100% when the ROVS signal
is OFF.

The dry run function is enabled by EAXOVS, parameter No. 7063.  The
feedrate specified by the PMC is ignored, and the feedrate indicated in the
table below can be selected instead.

Rapid traverse button
Command from PMC

p
ON/OFF

Rapid traverse Cutting feed

ON Rapid traverse rate Maximum jog feedrate

OFF Jog feedrate(*) Jog feedrate

NOTE
* The rapid traverse rate can be selected by specifying

RDRNS, parameter No. 7001, accordingly.

Setting unit

Feedrate

Override

Cutting feed override

Rapid traverse override

Dryrun



15. PMC CONTROL FUNCTION B–61393E–2/02

776

The time constant of cutting feed for the 5th and 6th axes only and the
lower limit of cutting feedrate (FL) can be set for each axis.

The pitch error of ball screw can be corrected in the least command
increment for each axis.  This function is enabled after the reference
position return is performed.

The position information can be obtained by reading the values of system
variables.

System
variable Position information

Read during 
movement

#5025

#5026

5th axis Machine position (ABSMT)

6th axis Machine position (ABSMT)

Disabled

#5045

#5046

5th axis Current position (ABSOT)

6th axis Current position (ABSOT)

Disabled

The function specifies the data to be transferred from the PMC to the CNC
and receives the data.  The following control data is necessary to transfer
the data.

Data type

Number of data words

Axis number

0

G1402 3402

G1403 3403

G1404 3404

G1405 3405

PMC
ADDRESS DGN NO.

1)  Data type: Specify 01 for the current position or 02 for
the machine position.

2)  Number of data words: Specify 02 for one axis only or 04 for all axes.

3)  Axis number: To obtain the data of a single axis, specify 00
for the 5th axis or 04 for the 6th axis.  To
obtain the data of all axes, specify 00 so that
the whole data can be obtained starting from
that for the 5th axis.

After setting the data shown above, invert the transfer request bit (bit 0)
of F1450 (DGN No. 3450).  The data is transferred to F1452 to F1467
(DGN No. 3452 to 3467).

CAUTION
1 Always set G1405 to 0.
2 The PMC window function cannot be used in a system with

the 7th and 8th axes.

Time constant of
exponential
acceleration/deceleration
of cutting feed

Pitch error
compensation

Reading position
information by custom
macro (specifications A
and B)

PMC window function



B–61393E–2/02 15. PMC CONTROL FUNCTION

777

Item Signal name Symbol

(1) Axis control command signal EC0C to EC6C
EC0D to EC6D

(2) Axis control command end
signal

EBUFC
EBUFD

Axis control command read
signal

EBSYC
EBSYD

(3) Reset signal ECLRC
ECLRD

(4) Axis control stop signal ESTPC
ESTPD

(5) Servo–off signal ESOFC
ESOFD

(6) Block stop signal ESBKC
ESBKD

Block stop inhibit signal EMSBKC
EMSBKD

(7) Auxiliary function BCD code
signal

EM11C to EM28C
EM11D to EM28D

Auxiliary function read signal EMFC
EMFD

Auxiliary function completion
signal

EFINC
EFIND

(8) Cutting feedrate signal
Continuous feedrate signal

EIF0C to EIF15C
EIF0D to EIF15D

(9) Total move distance
Dwell time
Auxiliary function code

EID0C to EID31C
EID0D to EID31D

Continous feed direction 
signal

EID31C
EID31D

(10) In-positioning signal EINPC
EINPD

(11) Error zero checking signal ECKZC
ECKZD

(12) Alarm signal EIALC
EIALD

(13) Deceleration signal for 
reference position return

*DEC5
*DEC6

Reference position return
completion signal

ZP5
ZP6

Signal

Signal list



15. PMC CONTROL FUNCTION B–61393E–2/02

778

Item SymbolSignal name

(14) Axis moving signal EGENC
EGEND

(15) Auxiliary function executing
signal

EDENC
EDEND

(16) Overtravel signal in negative
direction

EOTNC
EOTND

Overtravel signal in positive
direction

EOTPC
EOTPD

(17) SUB ready signal MAS

(18) SUB servo ready signal SAS

(19) SUB reset signal RSTS

(20) SUB alarm signal ALS

(21) Sub–spindle enable signal ENBS

Sub–spindle stop signal *SSTPS

(22) Sub–spindle analog 12–bit
command signal

RO1IS to R12IS

(23) Sub–spindle polarity switch
signal

SGNS

(24) Override signal *OV1S
*OV2S
*OV4S
*OV8S

(25) Override cancel signal OVCS

(26) Rapid traverse override signal ROVS
ROV1S
ROV2S

(27) Dry run signal DRNS

Manual rapid traverse select
signal

RTS

(28) V–READY check signal IGNVRDY

NOTE
���C Signals for 5th axis
���D Signals for 6th axis



B–61393E–2/02 15. PMC CONTROL FUNCTION

779

MT→CNC

#7
016

#6 #5 #4 #3
*DEC5

#2 #1 #0
PMC

ADDRESS

X016

DGN NO.

017 *DEC6X016

PMC�CNC

#7
EBUFC3410

#6
ECLRC

#5
ESTPC

#4
ESOFC

#3
ESBKC

#2 #1 #0
EFINC

PMC
ADDRESS

G1410

DGN NO.

EMSBKC3411 EC6C EC5C EC4C EC3C EC2C EC1C EC0CG1411

EIF7C3412 EIF6C EIF5C EIF4C EIF3C EIF2C EIF1C EIF0CG1412

EIF15C3413 EIF14C EIF13C EIF12C EIF11C EIF10C EIF9C EIF8CG1413

EID7C3414 EID6C EID5C EID4C EID3C EID2C EID1C EID0CG1414

EID15C3415 EID14C EID13C EID12C EID11C EID10C EID9C EID8CG1415

EID23C3416 EID22C EID21C EID20C EID19C EID18C EID17C EID16CG1416

EID31C3417 EID30C EID29C EID28C EID27C EID26C EID25C EID24CG1417

5th axis

6th axis

#7
EBUFD3418

#6
ECLRD

#5
ESTPD

#4
ESOFD

#3
ESBKD

#2 #1 #0
EFINDG1418

EMSBKD3419 EC6D EC5D EC4D EC3D EC2D EC1D EC0DG1419

EIF7D3420 EIF6D EIF5D EIF4D EIF3D EIF2D EIF1D EIF0DG1420

EIF15D3421 EIF14D EIF13D EIF12D EIF11D EIF10D EIF9D EIF8DG1421

EID7D3422 DID6D EID5D EID4D EID3D EID2D EID1D EID0DG1422

EID15D3423 EID14D EID13D EID12D EID11D EID10D EID9D EID8DG1423

EID23D3424 EID22D EID21D EID20D EID19D EID18D EID17D EID16DG1424

EID31D3425 EID30D EID29D EID28D EID27D EID26D EID25D EID24DG1425

Address map

DI signal



15. PMC CONTROL FUNCTION B–61393E–2/02

780

#7
ROV1S3316

#6 #5 #4 #3 #2 #1 #0
PMC

ADDRESS

G1316

DGN NO.

ROV2S3317G1317

DRNS3318G1318

ROVS3320G1320

3321 RTS *OV8S *OV4S *OV2S *OV1SG1321

*SSTPS3323 IGNVRYSG1323

R08IS3324 R07IS R06IS R05IS R04IS R03IS R02IS R01ISG1324

3325 SGNS R12IS R11IS R10IS R09ISG1325

3326 OVCSG1326

CNC�PMC

#7
EBSYC3470

#6
EOTNC

#5
EOTPC

#4
EGENC

#3
EDENC

#2
EIALC

#1
ECKZC

#0
EINPC

PMC
ADDRESS

G1470

DGN NO.

3471 EMFCG1471

EM28C3472 EM24C EM22C EM21C EM18C EM14C EM12C EM11CG1472

5th axis

#7
EBSYD3473

#6
EOTND

#5
EOTPD

#4
EGEND

#3
EDEND

#2
EIALD

#1
ECKZD

#0
EINPDG1473

3474 EMFDG1474

EM28D3475 EM24D EM22D EM21D EM18D EM14D EM12D EM11DG1475

6th axis

3348 SAS ZP6 ZP5F1348

MAS3349 ENBS RSTS ALSF1349

DO signal



B–61393E–2/02 15. PMC CONTROL FUNCTION

781

NOTE
1 In the following description, the names of the signals for the

5th axis end with C (xxxC).  The names of the signals for the
6th axis end with D (xxxD).  (This rule does not apply to the
names of the reference position return signals and section
titles.)

2 The 5th–axis signal does not affect the operation of the 6th
axis and vice versa.

These signals command following operations to the axis contrlled by
PMC.

Axis control command
(Hexadecimal code) Operation

00H Rapid traverse (Linear acceleration/deceleration)

01H Cutting feed (Exponential acceleration/deceleration)

04H Dwell

05H Reference position returm

06H Continuous feed (Exponential acceleration/deceleration)

12H Auxiliary function

NOTE
The hexadecimal code bit 7 is used for another signal.

When the axis control command end signal EBUF is inverted
(ON→OFF/OFF→ON), the CNC accepts those command and executes
the command.

The signal resets the axis controlled by PMC.
When it is turned ON:

� When an axis is being moved 
Decelerates and stops the axis

� When dwell is being executed 
Stops the execution

� When an auxiliary function is being executed 
Stops the execution

And, at the same time, all the buffered commands are invalidated. Also
all the commands and controls made while this signal is ON are
invalidated.

Signal details

(1) Axis control command
signal <EC0C to
EC6C/EC0D to EC6D>

(2) Axis control command
end signal (input)
<EBUFC/EBUFD>
Axis control command
read signal (output)
<EBSYC/EBSYD>

(3) Reset signal
<ECLRC/ECLRD>



15. PMC CONTROL FUNCTION B–61393E–2/02

782

� When and axis is being moved
Decelerates and stops the axis

� When dwell is being executed
Stops the execution

� When and auxiliary function is being executed 
Stops the execution at the input of the auxiliary function finish 
signal EFIN.

The operation of the next block is not executed, however. The stopped
operation is restarted when this signal is turned OFF.

When this signal is turned ON, excitation of the axis controlled by PMC
is at off and the servo–off status occurs.

When the block stop signal ESBK is turned ON while a command from
PMC is being executed, the operation is being executed, the operation is
stopped when the block currently being executed has ended.
The command operation time chart is shown below.

Command
data (Input)

[1] [2] [3] [4]

EBUF (Input)

EBSY (Output)

Execution
wait buffer 1

Execution
wait buffer 2

Executing
buffer

Start

[1]

ESBK

8msec
or more

If the command from PMC is an auxiliary function, CNC sends and
auxiliary function code EID0 – EID7 to and auxiliary function BCD code
EM11 – EM28 and waits for the auxiliary function finish signal EFIN.
The next command block is proceeded to when the auxiliary function
completion signal EFIN has been returned. The auxiliary function
completion signal receiving timing are the same as with the auxiliary
function of the CNC control (M function). (See item (15).)

(4) Axis control stop
signal
<ESTPC/ESTPD>

(5) Servo–off signal
<ESOFC/ESOFD>

(6) Block stop signal
<ESBKC/ESBKD>
Block stop inhibit
signal
<EMSBKC/EMSBKD>

(7) Auxiliary function BCD
code signal <EM11C to
EM28C/EM11D to
EM28D>
Auxiliary function read
signal <EMFC/EMFD>
Auxiliary function
completion signal
<EFINC/EFIND>



B–61393E–2/02 15. PMC CONTROL FUNCTION

783

a) Cutting feedrate
If the command from PMC is cutting feed, the axis feedrate shall be
set in a binary code.

Metric input Inch input

Setting value 1 to 15000
[mm/min]

1 to 60000
[0.01 inch/min]

CAUTION
The feedrate is not clamped.

NOTE
The following parameters are used for the rapid traverse
rate or FL feedrate at reference position return:
Rapid traverse rate

5th axis:  Parameter No. 7518, RPDF5
6th axis:  Parameter No. 7519, RPDF6

FL feedrate
5th axis:  Parameter No. 7534, ZRNFLS
6th axis:  Parameter No. 7534, ZRNFLS

b) Continuous feedrate
If continuous feed is specified by the PMC, the axis feedrate should
be specified by a binary code.  The setting is the same as the cutting
feedrate for ordinary control by the PMC.

CAUTION
1 The feedrate can be changed during continuous feed.

Specify a new feedrate (EIF0 to EIF15), then invert EBUF.
The new continuous feedrate becomes valid.  This
command is not held in the buffer.  EBSY need not be
checked when the command is specified.

2 ECLR can cancel the continuous feed and can stop the
movement.

3 The temporary stop signal (ESTP) is enabled.

NOTE
Specify these signals in the same way as for the move
command for ordinary PMC control.

(8) Cutting feedrate signal
<EIF0C to EIF15C
/EIF0D to EIF15D>
Continuous feedrate
signal 
<FIF0C to FIF15C
/EIF0D to EIF15D>



15. PMC CONTROL FUNCTION B–61393E–2/02

784

a) At rapid traverse or cutting feed
Set the move distance (incremental value) from the current position
of the axis in a binary code.

Metric input Inch input

Setting value 0 to �3FFFFFFF
0.001 mm/min

0 to �3FFFFFFF
0.0001 inch/min

CAUTION
The value specified with the minus sign is also considered.

b) At dwell
Set the dwell time in a binary code.

Setting value 1 to 9999999 msec

c) Continuous feed direction
Set the feed direction along the axis in EID31:

0:  The traveling direction is positive (+).
1:  The traveling direction is negative (–).

CAUTION
Do not care about EID0 to EID30.

d) Auxiliary function
Set the auxiliary function code the send to PMC in EID0 – EID7 in
a 2–digit BCD code.

The signal is ON while the axis controlled by PMC is in the in–position
status.

This signal is ON while the axis controlled by PMC is performing an error
zero check or an in–position check.

This signal turns ON when servo alarm or overtravel alarm is generated
in the axis controlled by PMC.
Alarm is reset by the following operation and this signal is turned OFF.

� Servo alarm
Remove the cause of the alarm and reset NC.

� Over travel alarm
Reset NC after moving the tool within the stored stroke limit by a rapid
traverse (00H) or cutting feed (01H) command (EC0 – EC6)

CAUTION
In the above “reset NC”, the reset signal ECLR is not
available. So the reset button or the external reset signal
ERS or the emergency stop signal *ESP should be used.

(9) Total move distance,
dwell time, auxiliary
function code <EID0C
to EID31C/EID0D to
EIF31D>
continuous feed
direction signal
<EID31C/EID31D>

(10) In–positioning signal
<EINPC/EINPD>

(11) Error zero checking
signal
<ECKZC/ECKZD>

(12) Alarm signal
<EIALC/EIALD>



B–61393E–2/02 15. PMC CONTROL FUNCTION

785

When the reference position return is specified by the PMC, the tool is
moved in the direction of reference position return specified in ZM5 and
ZM6, parameter No. 7003, by means of rapid traverse.  Then, the
operation of reference position return is performed in the same way as for
the X–axis and Z–axis.

This signal is ON while the axis is being moved by a command (EC0 –
EC6) from PMC of rapid traverse (00H), cutting feed (01H) or reference
position return (05H).

This signal is ON while the auxiliary function finish signal EFIN has not
been returned after an auxiliary function code EID0 – EID7 was sent to
an auxiliary function BCD code EM11 – EM28 when the command from
PMC is an auxiliary function.
The command operation time chart is shown below.

Auxiliary function
code output

TMF

EMF

EFIN

EDEN

Auxiliary function
command

TFIN

Next command

TMF and TFIN are set by a parameter

When overtravel alarm is detected, the negative direction signal EOTN
is turned ON if the tool has exceeded the stroke limit on the negative side
and the positive direction signal EOTP is turned ON if the tool has
exceeded the stroke limit on the positive side and also the alarm signal
EIAL is turned ON to inform the PMC side.
These signals are tuned OFF when the reset signal ECLR has been turned
ON after resetting the overtravel alarm.

When the control unit is turned on, the ready signal (MAS) goes on.

When the servo system is ready for normal operation, SAS goes on.

The reset signal (RSTS) goes on when:

1) The reset button of the control unit setting panel is pressed.

2) The external reset signal is connected.

3) The emergency stop signal is left open.

(13) Deceleration signal for
reference position
return <*DEC5/*DEC6>
Reference position
return completion
signal <ZP5/ZP6>

(14) Axis moving signal
<EGENC/EGEND>

(15) Auxiliary function
executing signal
<EDENC/EDEND>

(16) Over travel signal in
negative direction
<EOTNC/EOTND>
Overtravel signal in
positive direction
<EOTPC/EOTPD>

(17) SUB ready signal
<MAS>

(18) SUB servo ready
signal <SAS>

(19) SUB reset signal
<RSTS>



15. PMC CONTROL FUNCTION B–61393E–2/02

786

When a servo alarm or overtravel alarm is issued, the alarm signal (EIAL)
and ALS go on.

When the sub–spindle stop signal (*SSTPS) is open, the enable signal
(ENBS) goes off.  When the *SSTPS signal is closed, the ENBS signal
goes on.

These signals control the analog voltage for the 5th and 6th axes.  When
all these signals are set to 0, the resultant voltage is 0 V.  When all the
signal are set to 1, the resultant voltage is 10 V.

The signal determines the polarity of the output voltage.
0:  A positive (+) voltage is output.
1:  A negative (–) voltage is output.

(20) SUB alarm signal
<ALS>

(21) Sub–spindle enable
signal <ENBS>
Sub–spindle stop
signal <*SSTPS>

(22) Sub–spindle analog
12–bit command
signal <R01IS to
R12IS>

(23) Sub–spindle polarity
switch signal <SGNS>



B–61393E–2/02 15. PMC CONTROL FUNCTION

787

The combination of ON/OFF statuses of these signals determines the
value of override to be applied within the range of 0% to 150% (in steps
of 10%).

Contact condition on machine side Override value

*OV1S *OV2S *OV4S *OV8S OVRIS=1 OVRIS=0

0 0 0 0 0% 150%

1 0 0 0 10% 140%

0 1 0 0 20% 130%

1 1 0 0 30% 120%

0 0 1 0 40% 110%

1 0 1 0 50% 100%

0 1 0 0 60% 90%

1 1 1 0 70% 80%

0 0 0 1 80% 70%

1 0 0 1 90% 60%

0 1 0 1 100% 50%

1 1 0 1 110% 40%

0 0 1 1 120% 30%

1 0 1 1 130% 20%

0 1 1 1 140% 10%

1 1 1 1 150% 0%

NOTE
OVRIS is the bit 4 of parameter No. 7003.

(24) Override signal
<*OV1S, *OV2S,
*OV4S, *OV8S>



15. PMC CONTROL FUNCTION B–61393E–2/02

788

When the signal is set on, the cutting feed override is set to 100%.  The
signal does not affect the rapid traverse override.

The override signal is switched by setting EAXOVS, parameter No. 7063,
on or off.

When EAXOVS, parameter No. 7063, is set off (0)

The override value is selected by setting the ROVS signal on or off.  When
the signal is on (1), the override value is 50%.  When the signal is off (0),
the override value is 100%.

When EAXOVS, parameter No. 7063, is set on (1)

The ON/OFF statuses of the ROV1S and ROV2S signals and of OVRIS,
parameter No. 7003, determine the override value, as indicated below:

Contact condition on machine
side Override value

ROV1S ROV2S OVRIS=0 OVRIS=1

0 0 100% Fo

1 0 50% 25%

0 1 25% 50%

1 1 Fo 100%

NOTE
The feedrate is specified by the Fo parameter, or parameter
No. 7533.

(25) Override cancel signal
<OVCS>

(26) Rapid traverse
override signal
<ROVS> <ROV1S,
ROV2S>



B–61393E–2/02 15. PMC CONTROL FUNCTION

789

When the DRNS signal is set on (1), the specified rapid traverse rate and
cutting feedrate are ignored.  The overridden speed becomes effective.

By specifying RDRNS, parameter No. 7001, whether the dry run function
is enabled for rapid traverse can be selected.

If the RTS signal is set on (1) during dry run, the tool is moved at the rapid
traverse rate in rapid traverse or at the maximum jog feedrate in cutting
feed.  When the RTS signal is set off (0), the tool is moved at the same
speed as in manual continuous feed.

When the DRNS signal is set off (0), the specified rapid traverse rate and
cutting feedrate become effective again.

Contact condition on machine side
Jog feed

Contact  condition  on machine  side
OVRIS=0 OVRIS=1

*OV1S *OV2S *OV4S *OV8S Metricsystem
Inch

system
Metric
system

Inch
system

0 0 0 0 0 0 1260 50

1 0 0 0 2.0 0.08 790 30

0 1 0 0 3.2 0.12 500 20

1 1 0 0 5.0 0.2 320 12

0 0 1 0 7.9 0.3 200 8.0

1 0 1 0 12.6 0.5 126 5.0

0 1 1 0 20 0.8 79 3.0

1 1 1 0 32 1.2 50 2.0

0 0 0 1 50 2.0 32 1.2

1 0 0 1 79 3.0 20 0.8

0 1 0 1 126 5.0 12.6 0.5

1 1 0 1 200 8.0 7.9 0.3

0 0 1 1 320 12 5.0 0.2

1 0 1 1 500 20 3.2 0.12

0 1 1 1 790 30 2.0 0.08

1 1 1 1 1260 50 0 0

While the signal is held to 1, servo alarm No. 491, V ready off, is not
issued even when the 5th/6th–axis servo amplifier ready signal (DRDY)
is set to 0.

(27) Dry run signal
<DRNS> 
Manual rapid traverse
<RIS>

(28) V–READY check
signal <IGNVRDY>



15. PMC CONTROL FUNCTION B–61393E–2/02

790

The PMC axis control function uses the following parameters:

NOTE
1 In the description of parameters, the 5th and 6th axes

correspond to the 1st and 2nd axes of the SUB side
respectively.

2 This function is applied only to the digital servo system.
3 This function is enabled only with the PMC–M (or by the

order–made macro).

#7
0029

#6
DSPSUB

#5 #4 #3 #2 #1 #0

DSPSUB 1 : The data is displayed on the sub (5th/6th–axis) current position
screen.  (Absolute coordinates and relative coordinates)

0 : The data is not displayed on the sub (5th/6th–axis) current position
screen.

#7
0066

#6 #5 #4 #3 #2 #1 #0
ADP56

ADP56 1 : Position of 5/6th axis is displayed in over–all position screen.
0 : Position of 5/6 axis is not displayed in over–all position screen.

NOTE
1 This parameter is valid only when parameter DSPSUB (bit

6 of No.0029) is set to “1”.
2 Run hour and parts count are not displayed when setting

this parameter.

#7
7001

#6
RDRNS

#5
DECIS

#4 #3 #2 #1 #0
SCWS

RDRNS 1 : The dry run function is enabled also for the rapid traverse command.
0 :  The dry run function is disabled for the rapid traverse command.

DECIS 1 : Machine decelerates when deceleration signal is 1 in reference
position return.

0 : Machine decelerates when deceleration signal is 0 in reference
position return.

SCWS 1 : Minimum command increment is the inch system (Machine inch
system).

0 : Minimum command increment is the metric system (Machine metric
system).

Parameter



B–61393E–2/02 15. PMC CONTROL FUNCTION

791

#7
7002

#6 #5 #4 #3 #2 #1
PPDS

#0

PPDS 1 : Relative coordinate is also preset by coordinate setting.
0 : Relative coordinate is not preset by coordinate setting.

#7
7003

#6 #5 #4
OVRIS

#3 #2 #1
ZM6

#0
ZM5

OVRIS 1 : Each override signal (*OV1 to *OV8, ROV1, ROV2) increases the
speed when it is set to 1.

0 : Each override signal (*OV1 to *OV8, ROV1, ROV2) increases the
speed when it is set to 0.

ZM5, ZM6 5th/6th axes reference position return direction and backlash initial
direction at power ON, respectively.
1 : Minus direction

0 : Plus direction

GRD5DMR5
#7

7004
#6 #5 #4 #3 #2 #1 #0

GRD6DMR67005

DMR5, DMR6 Detection multiplier for 5th and 6th axes, respectively.
GRD5, GRD6 Reference counter capacity for 5th and 6th axes, respectively.

TFINTMF
#7

7009
#6 #5 #4 #3 #2 #1 #0

TMF Time period from when the M code is sent until MF is sent (16–ms steps)
TFIN Time width in which the FIN signal is accepted (16–ms steps)

#7
APRSS7010

#6 #5 #4 #3 #2
OFFVYS

#1 #0

APRSS 1 : Sets automatic coordinate system at reference position return.
0 : Does not set automatic coordinate system at reference position return.

OFFVYS 1 : Servo alarm does not occur even when VDRI is ON before outputting
PRDY.

0 : Servo alarm occurs when VRDY is ON before outputting PRDY.



15. PMC CONTROL FUNCTION B–61393E–2/02

792

#7
7011

#6 #5 #4 #3 #2 #1
PML2S

#0
PML1S

PML1S, PML2S Pitch error compensation multiplier for pitch error compensation
(common to 5th axis and 6th axis)

PML1S PML2S Multiplier

0 0 �1

0 1 �2

1 0 �4

1 1 �8

#7
7021

#6
SUB1

#5 #4 #3 #2 #1
APC6

#0
APC5

APC5, APC6 1 : When the absolute pulse coder detector is mounted for 5th/6th axes.
0 : When the absolute pulse coder detector is not mounted for 5th/6th

axes.

SUB1 1 : PMC axis control is the 5th axis.
0 : PMC axis control is the 5th/6th axis.

#7
7022

#6 #5 #4 #3 #2 #1
ABS6

#0
ABS5

ABS5, ABS6 1 : Reference position in absolute pulse coder is defined for 5th/6th axes.
0 : Reference position in absolute corder is not defined for 5th/6th axes.

(the signal becomes “1” automatically if the reference position return
is performed by PMC axis control. Do not change setting by the time
the detector is replaced.)
When installing the CNC or replacing the position detector, always
set these parameter to 0, turn off and on the power then perform
manual reference position return.

#7
ROT10S7032

#6 #5 #4
PNGMLS

#3 #2 #1
ROT6

#0
ROT5

ROT10S 1 : The unit of jog feedrate, maximum cutting feedrate, rapid traverse F0
speed, and FL feedrate at reference position return in inch output for
the 5th or 6th axis is 1 degree per minute.

0 : The unit of the parameters is 0.1 degree per minute.

PNGMLS 1 : MLK signal is invalid for the 5th/6th axes.
0 : MLK signal is valid for the 5th/6th axes.

ROT5, 6 1 : The 5th/6th axes is a rotary axis.
0 : The 5th/6th axes is a linear axis.



B–61393E–2/02 15. PMC CONTROL FUNCTION

793

#7
ACMRS7035

#6 #5 #4 #3 #2 #1 #0

ACMRS 1 : The optional CMR function is used.
0 : The optional CMR function is not used.

NOTE
When the arbitrary command multiply function is used,
either of the following settings is selected:
1) When the command multiplier ranges from 1/2 to 1/27

(Setting) =  + 100

2) When the command multiplier ranges from 2 to 48
(Setting) = 2 x (command multiply)
In 2) above, set such a value that the value of command
multiply becomes an integer.

(command multiply)

1

#7
PLC01S7037

#6 #5 #4 #3 #2 #1
STPT6

#0
STPT5

PLCO1S 1 : 0.1µ pulse–coder is used.
0 : 0.1µ pulse–coder is not used.

SPTP5, 6 Type of position detector for 5th/6th axes, respectively.
1 : The separate type pulse coder is used.

0 : The separate type pulse coder is not used.

#7
7063

#6 #5
EAXOVS

#4 #3 #2 #1 #0

EAXOVS 1 : The dry run function is enabled.  Override is applied to the axes in the
same way as by the CNC.

0 : The dry run function is disabled.  Override of 50% or 100% is applied
only in rapid traverse.



15. PMC CONTROL FUNCTION B–61393E–2/02

794

7100 CMR5

7101 CMR6

CMR5, CMR6 Command multiplier for 5th/6th axes, respectively.

Stting code Multiplier

1 0.5

2 1

4 2

10 5

20 10

When the arbitrary command multiply function is used (when ACMRS,
parameter No. 7035, is set to 1), either of the following setting methods
is selected:

(1) When the command multiplier ranges from 1/2 to 1/27

(Setting) =  + 100
(command multiply)

1

(2) When the command multiplier ranges from 2 to 48
(Setting) = 2 x (command multiply)

NOTE
1 In (2) above, set such a value that the value of command

multiply becomes an integer.
2 When using the arbitrary command multiply function, use

the detection unit for setting backlash compensation or
pitch error compensation.

7130 DSPSUB1

7131 DSPSUB2

DSPSUB1, DSPSUB2Set the axis names of the 5th/6th axes in sequence.
The setting code shall be in accordance with the general switch code on
the operator’s panel Usable characters:
(X, Y, Z, U, W, A, B, C, H, 0 – 9, O, N, D, –, .)

NOTE
If ’0’ is set, ’53’ (for the fifth axis) and ’54’ (for the sixth axis)
are assumed by default.

7500 INP5

7501 INP6

INP5, INP6 In–position width for 5th/6th axes, respectively.
[Valid data range] 0 to 32767

[Unit of data] Detection unit



B–61393E–2/02 15. PMC CONTROL FUNCTION

795

7517 LPGINS

LPGINS Setting of position control loop gain (5th/6th axes in common).
 (Usually set 3000)

7518 RPDF5

7519 RPDF6

RPDF5, RPDF6 Rapid traverse rate for 5th/6th axes, respectively.

[Valid data range] 30 to 24000 (Metric output)
30 to 9600 (Inch output)

[Unit of data] mm/min (Metric output)
0.1inch/min (Inch output)

CAUTION
Even when setting unit is 1/10 the unit is the same.

7522 LINT5

7523 LINT6

LINT5, LINT6 Time constant of liner acceleration and deceleration for 5th/6th axes
respectively. (for rapid traverse)

[Valid data range] 8 to 4000

[Unit of data] msec

7529 FEEDTS

FEEDTS Time constant of cutting feed exponential acceleration/deceleration
(5th/6th axes in common.)

[Valid data range] 0 to 4000

[Unit of data] msec
Specify 0 when the exponential acceleration/deceleration is not used.

7530 FEDFLS

FEDFLS Lower limit speed of cutting feed exponential acceleration and
deceleration (FL (5th/6th axes in common).

[Valid data range] 6 to 15000 (Metric output)
6 to 6000 (Inch output)

[Unit of data] mm/min (Metric output)
0.1inch/min (Inch output)
Usually set this parameter to 0.

CAUTION
Even when setting unit is 1/10 the unit is the same.



15. PMC CONTROL FUNCTION B–61393E–2/02

796

7533 RPDFLS

RPDFLS Sets the lowest feedrate (F0) for the rapid traverse override (Common to
5th axis and 6th axis)

[Valid data range] 6 to 15000 (Metric output)
6 to 6000 (Inch output)

[Unit of data] mm/min (Metric output)
0.1inch/min (Inch output)

CAUTION
Even when setting unit is 1/10 the unit is the same.

7534 ZRNFLS

ZRNFLS Low feedrate at reference point return (FL) (5th/6th axes in common).
[Valid data range] 6 to 15000 (Metric output)

6 to 6000 (Inch output)

[Unit of data] mm/min (Metric output)
0.1inch/min (Inch output)

CAUTION
Even when setting unit is 1/10 the unit is the same.

7535 BKL5

7536 BKL6

BKL5, BKL6 Backlash amount for 5th/6th axes, respectively.
[Valid data range] 0 to 2550 (Metric output)

0 to 2550 (Inch output)

[Unit of data] 0.001mm/min (Metric output)
0.0001inch/min (Inch output)

CAUTION
1 Unit becomes 1/10 in increment system 1/10.
2 The detection unit is used when the optional CMR function

is used.

7539 SPDLCS

SPDLCS Set the subspindle speed offset compensated value; the zero offset
compensation value of subspindle speed command voltage.
(With constant surface speed control)

[Valid data range] 0 to �8191

[Unit of data] VELO



B–61393E–2/02 15. PMC CONTROL FUNCTION

797

7593 STPE5

7594 STPE6

STPE5, STPE6 Limit value of positional deviation for 5th and 6th axes at stop,
respectively.

[Valid data range] 0 to 32767

[Unit of data] Detection unit

7700 LT151

7701 LT161

7704 LT152

7705 LT162

LT151, LT161 Stored stroke limit of 5th and 6th axes.
LT152, LT162

[Valid data range] 0 to �99999999

[Unit of data] 0.001mm (Metric output)
0.0001inch (Inch output)

Specify a distance from the reference position.  Any value beyond the
limit specified in the parameter is inhibited.  Usually, the maximum stroke
of the machine is specified.  When the limit is exceeded, an overtravel
alarm is issued.
The stroke should leave leeway for the variations in the detection
operation.  As a guide, make an allowance of rapid traverse rate multiplied
by 1/5 (mm) for a metric machine.
When the power is turned on or after emergency stop or servo alarm is
released, the actual machine position is a bit deviated from the stored
position.  Before starting operation, carry out the reference position
return.  Otherwise, the operation is performed with the overtravel
detection position deviated likewise.
The stroke becomes infinite when the following is set:

�����

Represents an axis.

�����

CAUTION
1 The parameters cannot be used for the rotation axis.
2 Unit becomes 1/10 in increment system 1/10.



15. PMC CONTROL FUNCTION B–61393E–2/02

798

7708 PRS5

7709 PRS6

PRS5, PRS6 Coordinate value of 5th and 6th axes reference point. (Set in unit of input
system)

[Valid data range] 0 to �99999999

[Unit of data] 0.001mm (Metric output)
0.0001inch (Inch output)

CAUTION
Unit becomes 1/10 in increment system 1/10.

7713 PECINT5

7714 PECINT6

PECINT5, PECINT6 Compensation intervals at pitch error compensation of 5th/6th axes.

[Valid data range] 8000 to 99999999 (Metric output)
4000 to 99999999 (Inch output)

[Unit of data] 0.001mm (Metric output)
0.0001inch (Inch output)

CAUTION
1 When 0 is set to this parameter, the compensation is not

performed.
2 Unit becomes 1/10 in increment system 1/10.

7717 PROUND

PROUND If the 5th or 6th axis is a rotation axis, the value specified in this parameter
becomes the reference value for machine coordinate rounding.  When 0 is
specified, the reference value of coordinate rounding is 360 degrees as
usual.

[Unit of data] 0.001deg

8500 to 8565 Parameters related to degital servo for 5th axis

8600 to 8665 Parameters related to degital servo for 6th axis

5000 PECORG5

6000 PECORG6

PECORG5, PECORG6,Set the position of the zero point on the pitch error compensation table for
the 5th axis and 6th axis respectively.
Set an appropriate value for the machine, ranging from 0 to 127, for each
axis.



B–61393E–2/02 15. PMC CONTROL FUNCTION

799

5001 to 5128 Pitch error compensation for the 5th axis

6001 to 6128 Pitch error compensation for the 6th axis

A compensation value ranging from 0 to �7 can be specified.  Any other
value is ignored.

The servo alarm or overtravel alarm issued in axis control by the PMC is
detected for the 5th and 6th axes.

If an alarm is issued, the CNC sets alarm signal EIAL on to inform the
PMC of the alarm, as well as performing processing required for ordinary
alarms.

This signal goes off when the alarm status is released.

1) Absolute pulse coder (APC) alarm

Number Contents and  remedy

350 Manual reference position return (by PMC axis control)) is re-
quired for the 5th–axis.

351 5th–axis APC communication error.

352 5th–axis APC overtime error.

353 5th–axis APC framing error.

354 5th–axis APC parity error.

355 5th–axis APC pulse error alarm.

356 5th–axis APC battery voltage has decreased to a low level so
that the data cannot be held.

357 5th–axis axis APC battery voltage reaches a level where the bat-
tery must be renewed.

358 5th–axis APC battery voltage has reached a level where the bat-
tery must be renewed (including when power is OFF).

360 Manual reference position return (by PMC axis control)) is re-
quired for the 6th–axis.

361 6th–axis APC communication error.

362 6th–axis APC overtime error.

363 6th–axis APC framing error.

364 6th–axis APC parity error.

365 6th–axis APC pulse error alarm.

366 6th–axis APC battery voltage has decreased to a low level so
that the data cannot be held.

367 6th–axis axis APC battery voltage reaches a level where the bat-
tery must be renewed.

368 5th–axis APC battery voltage has reached a level where the bat-
tery must be renewed (including when power is OFF).

Alarm



15. PMC CONTROL FUNCTION B–61393E–2/02

800

2) Servo alarms

Number Contents and actions

450 The position deviation value when the 5–th axis stops is larger
than the set value.

451 The position deviation value when the 5–th axis moves is larger
than the set value.

452 The 5th–axis drift is too high.  (500VELO is exceeded.)

453 The contents of the 5th–axis error register exceed the limit of
�32767.  Otherwise, the value of the velocity command for the
D/A converter is beyond the range of –8192 to +8191.
This error usually occurs as the result of an improperly set pa-
rameters.

455 A speed higher than 511875 units/s was attempted to be set in
the 5–th axis.  This error occurs as the result of improperly set
CMR.

456 Position detection system fault in the 5–th axis pulse coder (dis-
connection alarm).

460 The position deviation value when the 6–th axis stops is larger
than the set value.

461 The position deviation value when the 6–th axis moves is larger
than the set value.

462 The 6th–axis drift is too high.  (500VELO is exceeded.)

463 The contents of the 6th–axis error register exceed the limit of
�32767.  Otherwise, the value of the velocity command for the
D/A converter is beyond the range of –8192 to +8191.
This error usually occurs as the result of an improperly set pa-
rameters.

465 A speed higher than 511875 units/s was attempted to be set in
the 6–th axis.  This error occurs as the result of improperly set
CMR.

466 Position detection system fault in the 6–th axis pulse coder (dis-
connection alarm).

490 The sub overload signal is high.

491 The sub velocity control ready signal (VRDY) went off.

494 The sub position control ready signal (RRDY) is off, but the veloc-
ity control ready signal (VRDY) does not go off.
Alternatively, when the power is applied, the DRDY is on, but the
MCON is not.  Ensure that the axis card and servo amplifier are
connected.

495 An error occurs in the sub position control system.
It is likely that a return to the reference position failed because of
an error in the NC or the servo system.  Retry a return to the ref-
erence position.



B–61393E–2/02 15. PMC CONTROL FUNCTION

801

3) Over travel alarms

Number Contents and remedy

550 Exceeded the 5–th axis + side stored stroke limit.

551 Exceeded the 5–th axis – side stored stroke limit.

560 Exceeded the 6–th axis + side stored stroke limit.

561 Exceeded the 6–th axis – side stored stroke limit.

4) Digital servo alarms

Number Contents and actions

454 5–th axis digital servo system fault.  Refer to diagnosis display
No. 724 for details.

457 This alarm occurs when the 5–th axis is in one of the conditions
listed below. (Digital servo system alarm)

1) The value set in Parameter No. 8520 (motor form) is out of the
specified limit.

2) A proper value (111 or –111) is not set in parameter No. 8522 
(motor revolution direction).

3) Illegal data (a value below 0, etc.) was set in parameter No. 8523
(number of speed feedback pulses per motor revolution).

4) Illegal data (a value below 0, etc.) was set in parameter No. 8524
(number of position feedback pulses per motor revolution).

464 6–th axis digital servo system fault.  Refer to diagnosis display
No. 725 for details.

467 This alarm occurs when the 6–th axis is in one of the conditions
listed below. (Digital servo system alarm)

1) The value set in Parameter No. 8620 (motor form) is out of the
specified limit.

2) A proper value (111 or –111) is not set in parameter No. 8622 
(motor revolution direction).

3) Illegal data (a value below 0, etc.) was set in parameter No. 8623
(number of speed feedback pulses per motor revolution).

4) Illegal data (a value below 0, etc.) was set in parameter No. 8624
(number of position feedback pulses per motor revolution).



15. PMC CONTROL FUNCTION B–61393E–2/02

802

The details of digital servo alarm 4�4 for the 5th axis and 6th axis are
indicated in diagnostic data No. 724 and 725 respectively.

#7
OVL0724

#6
LV

#5
OVC

#4
HCAL

#3
HVAL

#2
DCAL

#1
FBAL

#0
OFAL 5th axis

OVL0725 LV OVC HCAL HVAL DCAL FBAL OFAL 6th axis

OFAL An overflow alarm is being generated.
FBAL A disconnection alarm is being generated.
DCAL A regenerative discharge circuit alarm is being generated.
HVAL An overvoltage alarm is being generated.
HCAL An abnormal current alarm is being generated.

OVC A overcurrent alarm is being generated.
LV A low voltage alarm is being generated.

OVL An overload alarm is being generated.

0804 SVERR5

0805 SVERR6

SVERR5, SVERR6 Indicate the position errors of the 5th axis and 6th axis respectively.

0824 ABSMT5

0825 ABSMT6

ABSMT5, ABSMT6 Indicate the machine positions on the 5th axis and 6th axis respectively.

An order–made macro can also control the PMC–controlled axis, using
an interface similar to the PMC interface.

Axis control command read signal EBUF is checked from both the PMC
signals (G1410 and G1418) and order–made macro data.  The axis control
command of the signal or data that has changed is taken to perform axis
control.  Both the PMC signals and order–made macro data are valid also
for reset signal ECLR, axis control temporary stop signal ESTP, servo–off
signal ESOF, and block stop signal ESBK.

Auxiliary function code signals EM11 to EM28 and auxiliary function
strobe signal EMF are always output to the PMC.  These signals are not
output to the order–made macro.

Auxiliary function completion signal EFIN is input from the PMC.  The
order–made macro cannot set the signal.  (If the order–made macro sets
the signal, the setting is ignored.)

Diagnosis display

Position error display

Display of machine
position viewed from the
reference position

Order–made macro
(OMM) interface



B–61393E–2/02 15. PMC CONTROL FUNCTION

803

The following signals are used to send data from the PMC to the CNC.

Signal name Signal code

Data signal for external data input (input)

Address signal for external data input (input)

Read signal for external data input (input)

Read completion signal for external data input
(output)

Search completion signal for external data input
(output)

ED0 to ED15

EA0 to EA6

ESTB

EREND

ESEND

The basic external data input procedure is described below:

(1)The PMC sets address signals EA0 to EA6 that indicate the data type
and data signals ED0 to ED15.

(2)The PMC sets read signal ESTB to 1.
(3)When the ESTB signal is set to 1, the control unit reads the address.
(4)After reading the address, the control unit sets read completion signal

EREND to 1.
(5)When the EREND signal is set to 1, the PMC sets the ESTB signal to

0.
(6)When the ESTB signal is set to 0, the control unit sets the EREND

signal to 0.

This completes the data input procedure.  New data can now be entered.

The timing diagram is shown below:

More than 32ms
More than 
0ms

ESTB

EREND

ED0-15

EA0-6

External program number search

ESEND
Search
end

15.2
EXTERNAL DATA 
INPUT

General



15. PMC CONTROL FUNCTION B–61393E–2/02

804

Kind of data accessed by external data input

No Item

E
S E E E E E E E

ED15 to ED0
No. Item

T A A A
B 6 5 4

A A A A
3 2 1 0 15141312 1110 9 8 7 6 5 4 3 2 1 0

1 External program number 1 0 0 0 × × × ×
Program number(BCD4 digits)

1 g
search

1 0 0 0 × × × ×
0 to 9 0 to 9 0 to 9 0 to 9

2 External tool compensa- 1 0 0 1 × × × ×
Offset value(BCD 4 digits with sign)

2
tion

1 0 0 1 × × × ×
±0 to 7 0 to 9 0 to 9 0 to 9

3
External workpiece coordi-

nate 1 0 1 0 axis code
Shift value(BCD 4 digits with sign)

3 nate
system shift

1 0 1 0 axis code
±0 to 7 0 to 9 0 to 9 0 to 9

4
External machine coordi-

nate system shift
1 0 1 1 axis code

Machine coordinate system shift value(binary)
±0 to 9999

Alarm set 1 1 0 0 0 0 0 0
Alarm No.(binary)

Alarm set 1 1 0 0 0 0 0 0
0 to 999

Alarm clear 1 1 0 0 0 0 0 1
Alarm No.(binary)

Alarm clear 1 1 0 0 0 0 0 1
0 to 999

5
Oper to tor message list 1 1 0 0 0 1 0 0

Message No.(binary)
O er to tor message list 1 1 0 0 0 1 0 0

0 to 999

Operator message clear 1 1 0 0 0 1 0 1
Message No.(binary)

O erator message clear 1 1 0 0 0 1 0 1
0 to 999

Message 1 1 0 0 0 × 1 1 character(Character code)

Substitute No. of parts 1 1 1 0 0 0 0 0
No. of parts required(BDC4 digits)

6
required

1 1 1 0 0 0 0 0
0 to 9 0 to 9 0 to 9 0 to 9

6
Substitute No. of parts 1 1 1 0 0 0 0 1

No. of parts machined(BDC4 digits)

machined
1 1 1 0 0 0 0 1

0 to 9 0 to 9 0 to 9 0 to 9

WARNING
Though bits EA4 to EA6 distinguish one set of data from
another, the machine side must be interlocked in order to
prevent other function data being fed during a process for
which they are invalid.

NOTE
Input an axis code according to the list below.

Axis
EA3 to EA0

Axis
3 2 1 0

1st axis
2nd axis
3rd axis
4th axis

0
0
0
0

0
0
0
0

0
0
1
1

0
1
0
1



B–61393E–2/02 15. PMC CONTROL FUNCTION

805

A program number (1 to 9999) is specified from the outside and is selected
in the CNC memory. 
For machines that can load several kinds of workpieces, this function can
automatically select for execution the program corresponding to a
specific workpiece. 
Data for the external program number search is accepted regardless of the
mode, but the search execution can be made only in the reset state.

The ESEND signal switches from “0” to “1” at the end of the external
program number search. This signal does not turn to “0” unless the cycle
start or reset signal is input, or another search is made. Use ESEND to
make a cycle start signal after the search.

NOTE
1 The external program number search is valid when

parameter EXTS (No.0028#4) is 1.
2 The reset state is when the automatic operation lamp is off.

If the start button is pushed in the cycle operation stop or
hold state, search execution starts from the actual position
indicated by the pointer.

3 When there is not a program stored in memory
corresponding to the set program number, alarm No.59 will
be activated.

4 Program search is not made if the program number is set to
“0”.  When the start button is pushed, execution starts from
the position indicated by the pointer, instead.

These signals provide for changing the tool compensation amount via the
PMC. When the offset number is specified by a program, data input from
the PMC is added to the offset amount. The offset amount can also be used
as input data itself by specifying the input signal.

When the machine tool is equipped with automatic tools or workpiece
measuring functions, the offset amount can be corrected using this
function, by inputting the error from the correct value into the CNC via
PMC.

If the tool compensation amount is externally input when offset number
0 is specified in a program (a offset cancel) in T series, the workpiece
coordinate system shifts by the entered quantity. The external tool
compensation amount is 0 to �7.999mm or �0.7999inch at a time.

1) External Program
Number Search

2) External tool
compensation



15. PMC CONTROL FUNCTION B–61393E–2/02

806

E
D
2

E
D
1

E
D
0

E
D
5

E
D
4

E
D
3

E
D
6

E
D
9

E
D
8

E
D
7

E
D
12

E
D
11

E
D
10

E
D
13

E
D
14

E
D
15

E
A
2

E
A
1

E
A
0

E
A
5

E
A
4

E
A
3

E
A
6

0 00 1 ABS
/
INC

0 MSB
Offset amount

s
i
g
n

Address Data

0

Specified by BCD 4-digit code

(0000 to 7999)

Specify “000”

0 : Incremental specification

(Input value is added to present compensation amount)

1 : Absolute specification

(Input value is replaced with present compensation amount)

Specify “001” for external tool offset

sign

Data specification method in external tool compensation (For M series)

E
D
2

E
D
1

E
D
0

E
D
5

E
D
4

E
D
3

E
D
6

E
D
9

E
D
8

E
D
7

E
D
12

E
D
11

E
D
10

E
D
13

E
D
14

E
D
15

E
A
2

E
A
1

E
A
0

E
A
5

E
A
4

E
A
3

E
A
6

0 1 ABS
/
INC

0 MSB                              LSB
Offset amount

Address Data

W
/

G

sign
0 : +

1 : –

0 : Specification of tool wear offset amount

1 : Specification of tool geometry offset amount

Specified by BCD 4-digit code
(0000 to 7999)

0 : Incremental specification

(Input value is added to present compensation amount)

1 : Absolute specification

(Input value is replaced with present compensation amount)

EA0

0 Specification of X axis offset

1 Specification of Z axis offset

0 Specification of tool nose radius compensation amount

Specify “001” for external tool offset

0

0

1

EA1 Description

Data specification method in external tool compensation (For T series)

LSB

X/Z/R

0 : +

1 : –

s
i
g
n



B–61393E–2/02 15. PMC CONTROL FUNCTION

807

The external workpiece coordinate system shift adjusts the workpiece
coordinate system depending on the shift amount set via PMC. Each axis
(parameter Nos.0751 to 0754) has this shift amount, and it is added to all
the workpiece coordinate systems for use. The shift amount is not lost by
cut off of the power supply. It is not added incrementally, but each input
shift amount makes a new shift amount. The amount that can be input is
0 to �7.999mm or �7.999inch.

The machine coordinate system can be shifted by inputting shift value.
When the shift amount is input, compensation is immediately applied to
the corresponding axis and the machine starts operation. The position
accuracy can be improved by combining this function with the sensor.  
The specification method for the axis to be shifted is the same as that for
the external workpiece coordinate system shift.  
The compensation value is specified for the signals ED0 to ED15 by a
binary code ranging from 0 to �9.999.  This compensation value should
be absolute and the amount which the machine actually moves on input
is the difference from the previously stored value. When a large amount
of compensation is applied at a time, an alarm such as ”excessive error on
stop” may occur.  In this case, input the compensation amount several
times.

� External alarm message 
The external alarm message holds the CNC under an alarm condition
by sending an alarm number from the external unit, as well as a
message that is displayed on the CRT screen of the CNC. Up to four
alarm numbers and messages can be sent at a time; the alarm number
ranges from 0 to 999, and the CNC displays it with 1000 added. The
message for one alarm number can be up to 15 characters long. The
alarm condition is reset by external data.

� External operator message
The external operator message sends the operator message and number
from the external unit to the CNC, with a display on the CRT screen
of the CNC.
Only one message can be transmitted, with a potential message length
of 127 characters. The alarm number ranges from 0 to 999; from 0 to
99, the CNC adds 2000 to the number, while from 100 to 999 the
number is not displayed, only the message is displayed.

Data specification method in external message

Item
E
A
6

E
A
5

E
A
4

E
A
3

E
A
2

E
A
1

E
A
0

ED15 to ED0
(binary)

Alarm set 1 0 0 0 0 0 0 Alarm No.

Alarm clear 1 0 0 0 0 0 1 Alarm No.

Operator mes-
sage list

1 0 0 0 1 0 0 Message No.

Operator mes-
sage clear

1 0 0 0 1 0 1 Message No.

Message 1 0 0 0 × 1 1 Character
(Note)

3) External workpiece
coordinate system
shift

4) External machine
coordinate system

5) External message



15. PMC CONTROL FUNCTION B–61393E–2/02

808

NOTE
Two characters are sent at a time (see ISO code given in
Table below).
ED15 - ED8 Character code in 1st character.. . . . . . . 
ED7 - ED0 Character code in 2nd character.. . . . . . . . . 
If sending only one character, fill the second slot with a code
smaller than 20 and it will be ignored.

Character code table

b4

0

0

0

0

0

0

0

0

1

1

1

1

1

1

1

1

b2

0

0

1

1

0

0

1

1

0

0

1

1

0

0

1

1

b3

0

0

0

0

1

1

1

1

0

0

0

0

1

1

1

1

b1

0

1

0

1

0

1

0

1

0

1

0

1

0

1

0

1

b5b6b7b8

SP

!

I

#

$

%

&

’

(

)

*

+

,

=

.

/

0

1

2

3

4

5

6

7

8

9

:

;

<

=

>

?

@

A

B

C

D

E

F

G

H

I

J

K

L

M

N

O

P

Q

R

S

T

U

V

W

X

Y

Z

[

o

]

^

_

#

V

W

”

·

0

0

1

0

–

\\

°

0

0

1

1

0

1

0

0

0

1

0

1

1

0

1

0

1

0

1

1

1

1

0

0

1

1

0

1

SP : Space code



B–61393E–2/02 15. PMC CONTROL FUNCTION

809

Substitution is possible for the No. of parts required and the No. of parts
machined.

E
A
2

E
A
1

E
A
0

E
A
5

E
A
4

E
A
3

E
A
6

0 0/11 01

Address

00

E
D
15

MSB             LSB
Value of aprt nos.

Data

E
D
0

BCD 4–digit code
(0000 to 9999)

0 : No. of parts required

1 : No. of parts machined

Set to 110000.

Data specification method for No. of parts required and
No. of parts machined.

�  �  �

[Classification] Input signal

[Function] The signals indicate the entered data.  
The use of the 16 code signals varies with the data type.

[Classification] Input signal

[Function] The signals indicate the type of the entered data.

[Classification] Input signal

[Function] The signal reports that the address and data are set in external data input.

When the signal is set to 1, the control unit reads the address and data for
external data input.

[Operation] The “basic procedure” describes the procedure for, and operation of, the
control unit when the signal turns to “1”.

6) Substituting No. of
parts required and No.
of parts, machined

Signals

Data signals for external
data input 
ED0 to ED15
<G100, G101>

Address signals for 
external data input 
EA0 to EA6<G102>

Read signal for external
data input 
ESTB<G102#7>



15. PMC CONTROL FUNCTION B–61393E–2/02

810

[Classification] Output signal

[Function] The signal reports that the control unit has finished reading the entered
data.

[Operation] The output condition and procedure are described in the “basic
procedure.”

[Classification] Output signal

[Function] The signal reports that program number search, specified by external data
input, has been completed.

[Output condition] The signal is set to 1 when:

The program number search specified by external data input is completed.

The signal is set to 0 when:

· An automatic operation is started.

· A reset occurs.

#7
ED7G100

#6
ED6

#5
ED5

#4
ED4

#3
ED3

#2
ED2

#1
ED1

#0
ED0

ED15G101 ED14 ED13 ED12 ED11 ED10 ED9 ED8

ESTBG102 EA6 EA5 EA4 EA3 EA2 EA1 EA0

#7
F160

#6 #5 #4 #3 #2 #1
ESEND

#0
EREND

#7
0028

#6 #5 #4
ESR

#3 #2 #1 #0

[Data type] Bit

ESR External program number search
0 : Disabled
1 : Enabled

Read completion signal
for external data input
EREND<F160#0>

Search completion
signal for external data
input 
ESEND<F160#1>

Signal address

Parameter



B–61393E–2/02 15. PMC CONTROL FUNCTION

811

������ Message Description

059 PROGRAM NUMBER
NOT FOUND

In an external program number
search or external workpiece number
search, a specified program number
was not found.  Otherwise, a program
specified for searching is being edited
in background processing. Check the
program number and external signal.
Or discontinue the background eiting.

131 TOO MANY EXTERNAL
ALARM MESSAGES

Five or more alarms have generated
in external alarm message.
Consult the PMC ladder diagram to
find the cause.

132 ALARM NUMBER NOT
FOUND

No alarm No. concerned exists in ex-
ternal alarm message clear.
Check the PMC ladder diagram.

133 ILLEGAL DATA IN EXT.
ALARM MSG

Small section data is erroneous in ex-
ternal alarm message or external op-
erator message. Check the PMC lad-
der diagram.

Alarm and Message



15. PMC CONTROL FUNCTION B–61393E–2/02

812

When several part programs are stored in program storage memory, a
program can be searched with the workpiece number search signals PN1
to PN16 from the machine side.

When the cycle operation is actuated in the memory operation mode under
reset status, the workpiece number (program number) specified by PN1
to PN16 is searched and executed from the beginning.

[Classification] Input signal

[Function] Select the number of a workpiece to be machined in the memory mode.
Four code signals are provided.  These signals are set as binary code to
designate a workpiece number as follows:

Workpiece number search signal Workpiece
PN8 PN4 PN2 PN1

p
number

0 0 0 0 00

0 0 0 1 01

0 0 1 0 02

0 0 1 1 03

0 1 0 0 04

0 1 0 1 05

0 1 1 0 06

0 1 1 1 07

1 0 0 0 08

1 0 0 1 09

1 0 1 0 10

1 0 1 1 11

1 1 0 0 12

1 1 0 1 13

1 1 1 0 14

1 1 1 1 15

Workpiece number 00 is used for special designation “no search”.  Thus,
a workpiece number ranges from 01 to 15.

15.3
EXTERNAL 
WORKPIECE 
NUMBER SEARCH

General

Signal

Workpiece Number
Search Signal 
PN1, PN2, PN4, PN8
<G122#4 to #7>



B–61393E–2/02 15. PMC CONTROL FUNCTION

813

NOTE
These signals are also used to specify a file number for file
search during external program input.  See Section 13.3,
“External Program Input.”

#7
PN8G122

#6
PN4

#5
PN2

#4
PN1

#3 #2 #1 #0

������ Message Description

059 PROGRAM NUMBER
NOT FOUND

In an external program number
search or external workpiece number
search, a specified program number
was not found.  Otherwise, a program
specified for searching is being edited
in background processing. Check the
program number and external signal.
Or discontinue the background eiting.

Signal address

Alarm and Message



15. PMC CONTROL FUNCTION B–61393E–2/02

814

NOTE
1 This function can be used only in memory operation.  It

cannot be used during manual data input operation.
2 Select the program number from O001 to O015.
3 Program numbers from O001 to O015 can be used.

However, programs corresponding to all the program
numbers do not have to be stored in memory.

4 When a program corresponding to the specified program
number is not stored in memory, an alarm (No.059) is
activated when the start button is pressed.

5 Program search is performed only when the start button is
pressed in the reset state.  When the CNC is in the
automatic operation stop state (single block stop, etc.) or
pause state (feedhold stop, etc.), program search is not
performed even if the start button is pressed and execution
is started from the point specified by the present execution
pointer.

6 To restart program halfway through, press the start button
after sequence number search in MEM mode. The
workpiece number search is not performed; program
execution starts from the block which is searched by
sequence number search, because the OP signal is set by
sequence number search in MEM mode and the CNC reset
state is released.

7 When the start button is pressed with all PN1 to PN8 “0”,
program search is not performed but execution is started
from the point specified by the present execution pointer.
To restart operation from the start of a program which
cannot be searched by this function, perform the usual
program number search operation (CRT/MDI panel
operation), turn all the PN1 to PN8 to “0” and press the start
button

Note



B–61393E–2/02 15. PMC CONTROL FUNCTION

815

The PMC can control the speed and polarity of each spindle motor,
connected by the optional spindle serial output/spindle analog output
function.

In the serial output, the first and second spindles have their own individual
interfaces.  By using a PMC ladder program, the user can control the
spindles as desired.

This section describes how to use the PMC to control spindle rotation and
provides example applications.

This function can be used to specify the following:

⋅ Spindle motor speed (number of rotations)
⋅ Output polarity for each spindle motor (direction of rotation)
Usually, the CNC is used to control the speed and polarity of the first
spindle motor. If the multispindle control function (T series) is added, the
CNC can also control the second and third spindle motors.

This function allows the user to select whether the CNC or PMC is used
to control the speed and output polarity of the spindle motors.

The PMC can be used to specify the spindle motor speed upon executing
the following:

⋅ Switching the controller from the CNC to the PMC, by issuing an
SINDx signal

⋅ Setting the spindle motor speed data, calculated by the PMC, in spindle
control signal R01Ix to R12Ix

When controlled by the PMC, the spindle motor speed is not affected by
any signal (for example, the spindle speed override signal) or parameter
setting (for example, the maximum speed clamp parameter) related to the
spindle speed command of the CNC spindle control function.
→ If the multispindle control function is added, however, the spindle stop

signal *SSTPx <G145, #3, #4, #5> can be used to stop a PMC–
controlled spindle.

The spindle motor speed data is obtained from the following expression.
Its value can range from 0 to 4095:

Spindle motor speed data =
Spindle motor speed

Maximum spindle motor speed
� 4095

Remark) Usually, the spindle speed must be controlled.  If a gear train is
used to connect the spindle to the spindle motor, first obtain the
maximum spindle speed at the maximum spindle motor speed.

Spindle motor speed data =
Spindle speed

Maximum spindle speed
� 4095

By using this expression, the spindle motor speed data can be
obtained easily.

15.4
SPINDLE OUTPUT 
CONTROL BY THE 
PMC

General

Switching control

Specifying the spindle 
motor speed



15. PMC CONTROL FUNCTION B–61393E–2/02

816

The PMC can specify the spindle motor output polarity when the
following are executed:

⋅ Switching the controller from the CNC to the PMC, by issuing an
SSINx signal

⋅ Specifying the output polarity to the SGNx signal

To control the spindle, the PMC may require to read the S value specified
by the CNC.

If the spindle serial output/spindle analog control function is added (if the
PMC can control the spindle), the S–code signals <F185 to F187> and SF
signal <F150#2> can be output only when many conditions, determined
by the CNC spindle control, are satisfied.  In some cases, the signals
cannot be used under standard conditions.

Twelve code signals corresponding to S value R01O to R12O <F172 to
F173> are output to the first spindle motor.  The output data is calculated
from the results of the CNC spindle control.  (See Section 9.3.)

Even while a spindle is subject to PMC control, an S command that is
issued to the CNC is converted to spindle output data and output.

The SIND signal determines whether the speed output command, issued
to the spindle motor, is obtained from the twelve code signals
corresponding to the S value, or from the R01I to R12I signals calculated
and specified by the PMC.

The use of this signal may simplify PMC ladder processing used to enable
PMC spindle control.

Controlling the first and second spindles of a lathe system

→ Share the gear stages between the first and second spindles.
(If the first spindle uses two gears, for example, specify parameters
Nos.0542 and 0543, thus enabling the use of gears 3 and 4 for the
second spindle.)

Perform the necessary setting to enable control of the first and second
spindles by the PMC.

To specify a rotation command for the first spindle, enter the gears for
the first spindle in GR1 and GR2 and obtain the data of the twelve code
signals corresponding to the S value.  Specify the data as the speed
output command for the first spindle in the PMC control interface for
the first spindle.

To specify a rotation command for the second spindle, enter the gears
to be used for the second spindle in GR1 and GR2 and obtain the data
of the twelve code signals corresponding to the S value.  Specify the
data as the speed output command for the second spindle in the PMC
control interface for the second spindle.

Specifying the output 
polarity for the spindle 
motor

S–code and SF signals

Twelve code signals 
corresponding to the S 
value (output)

Sample application 1)



B–61393E–2/02 15. PMC CONTROL FUNCTION

817

Using a lathe’s orientation function with the stop position of the serial
spindle specified externally, specifying the S value as the angle of the stop
position for spindle orientation after the spindle positioning mode has
been selected

→ Use those gears that are not being used for the first spindle.
(In this application, gear 4 is used to calculate the spindle position.  Set
parameter No.0543 to 360.)

Specify the M code used to set the spindle to positioning mode and
stop the spindle.  Enter gear 4 in GR1 and GR2.

Then, specify a spindle positioning angle with the S command.  (To
specify the position of 145 degrees, for example, specify S145;.)

Expression 145/360*4095 is calculated and the result is output to the
twelve code signals corresponding to the S value (output signal).
Enter the data in external stop position commands SHA00 to SHA11
<G110#0 to G111#3> and perform the orientation.

[Classification] Input signal

[Function] The above signals enable the control of a spindle motor by issuing
commands from the PMC.  Both the speed and polarity of the spindle
motor (direction of rotation) can be controlled.

The speed command and polarity are usually specified by the CNC.  The
use of these signals allows the user to select whether the speed and
polarity are controlled by the CNC or PMC.

In the serial output, even if the multispindle control function is not
provided, these signals allow the second spindle to be controlled.

When the multispindle control function and type A are being used (if the
MSPDB bit, bit 3 of parameter No. 0070, is set to 0), the signals for the
second and third spindles cannot be used.

Sample application 2)

Signal

PMC spindle control signals
For the first spindle: SIND, SSIN, SGN <G125#7, #6, #5>

R01I to R12I <G124#0 to G125#3>
For the second spindle: SIND2, SSIN2, SGN2 <G107#7, #6, #5> 

R01I2 to R12I2 <G106#0 to G107#3>
For the third spindle: S IND3, SSIN3, SGN3 <G109#7, #6, #5>

R01I3 to R12I3 <G108#0 to G109#3>
(for the multi–spindle
function is T series)



15. PMC CONTROL FUNCTION B–61393E–2/02

818

� Signal used to select the spindle motor speed command SINDx

→ The above signal is used to select whether the spindle motor speed is
controlled by the CNC or PMC.

1: The spindle motor is controlled according to speed commands
(R01Ix to R12Ix) issued by the PMC.

0: The spindle motor is controlled according to speed commands
issued by the CNC.  The spindle speed specified with the S
command is output.

� Signals used to input the spindle motor speed command issued by the
PMC R01Ix to R12Ix

→ If the PMC is being used to control the spindle motor speed command,
specify, in binary format, the value obtained using the following
expression.

Value to be specified =
Spindle motor speed

Maximum spindle motor speed
� 4095

(Spindle motor speed)

Maximum
spindle motor
speed

Code signal
40950

0 rpm

� Signal used to select the polarity of the spindle motor speed command,
SSINx

→ The above signal selects whether the output polarity of the spindle
motor speed command is controlled by the CNC or PMC.

1 : The spindle motor is controlled according to the polarity command
(SGNx) issued by the PMC.

0 : The CNC controls the polarity.  The polarity is determined by the
TCW and CWM bits (bits 7 and 6 of parameter No.0013) and the
M03 or M04 command.

� Signal used to specify the polarity of the spindle motor selected by the
PMC, SGNx

→ If the PMC is used to control the output polarity of the spindle motor
speed command, specify the polarity with this signal.

1 : The output polarity of the spindle is negative.

0 : The output polarity of the spindle is positive.

� Details of the signals



B–61393E–2/02 15. PMC CONTROL FUNCTION

819

[Classification] Output signal

[Function] The S value, specified in the CNC part program, is converted to the speed
output to the spindle motor that is required to control the connected
spindle.  The converted value is sent to the PMC with twelve code signals,
in proportion to the spindle motor speed output.

The speed data, the final result of the CNC spindle control, is output to
the spindle motor after the spindle gear ratio, spindle speed override,
speed clamp, conversion of the surface speed into the spindle speed by the
constant surface speed control command, and other data have been
considered.

(See Section 9.3 for an explanation of the relationship between the CNC
spindle control and the speed output to the spindle motor.)

Code signal

0
0 rpm

4095

Maximum spindle
motor speed

(Speed output to the
spindle motor)

#7
R08I2G106

#6
R07I2

#5
R06I2

#4
R05I2

#3
R04I2

#2
R03I2

#1
R02I2

#0
R01I2

SIND2G107 SSIN2 SGN2 R12I2 R11I2 R10I2 R09I2

R08I3G108 R07I3 R06I3 R05I3 R04I3 R03I3 R02I3 R01I3 (T Series)

SIND3G109 SSIN3 SGN3 R12I3 R11I3 R10I3 R09I3 (T series)

R08IG124 R07I R06I R05I R04I R03I R02I R01I

SINDG125 SSIN SGN R12I R11I R10I R09I

CAUTION
Note that signals G106 to G109 are also used for external
key input.

Twelve code signals 
corresponding to the S 
value R01O to R12O 
<F172#0 to F173#3>

Signal address



15. PMC CONTROL FUNCTION B–61393E–2/02

820

#7
SFOUT0020

#6 #5 #4 #3 #2 #1 #0
(M series)

[Data type] Bit

SFOUT The SF signal is output:
0 : When gears are switched
1 : Irrespective of whether gears are switched

#7
0029

#6 #5 #4
SFOB

#3 #2 #1 #0
(M series)

[Data type] Bit

SFOB When an S code command is issued in constant surface–speed control,
0 : SF is output.
1 : SF is not output.

#7
0049

#6 #5 #4 #3 #2 #1 #0
EVSF (T series)

[Data type] Bit

EVSF When the spindle control function (S analog output or S serial output) is
used, S codes and SF are:
0 : Not output for an S command.
1 : Output for an S command.

#7
0070

#6 #5 #4 #3
MSPDB

#2 #1 #0
(T series)

[Data type] Bit

MSPDB In multi–spindle control, the SIND signal is valid:
0 : Only when the first spindle is selected.  (SIND signal for 2nd and 3rd

spindle become invalid)
1 : For each spindle irrespective of whether the spindle is selected.  (Each

spindle has its own SIND signal.)

#7
0071

#6 #5 #4
SRL2SP

#3 #2 #1 #0

[Data type] Bit

SRL2SP The number of connections in serial spindle control
0 : 1
1 : 2

Parameter



B–61393E–2/02 15. PMC CONTROL FUNCTION

821

NOTE
1 If the spindle fails to move after the PMC issues the spindle

motor speed command, check the following:
Type A is selected (the MSPDB bit, bit 3 of parameter No.
0070, is set to 0) when the multispindle control function is
used.
→ The second or third spindle cannot be controlled.  The

first spindle can be controlled only when the spindle
selection signal SWS1 is set to “1”.

The spindle stop signal for each axis is set to “0” when the
multispindle control function is being used.
→ Spindle stop signal for each axis *SSTPx <G145, #3, #4,

#5> stops the spindle.
M03/M04 is not specified when the CNC is being used to
control the output polarity.
→ If the TCW bit, bit 7 of parameter No.0013, is set to 1, the

M03/M04 command issued to the CNC changes the
output polarity for the spindle motor.  If no M03/M04
command is specified after the CNC is turned on, the
specified speed output is not sent to the spindle motor
because the output polarity has not been determined.

2 The SF signal indicates that output of the S code to the PMC
has been completed.  The signal does not indicate the end
of the command for specifying the spindle speed.

3 For an explanation of connecting the second or third
spindle, see Sections 9.2 and 9.10.

4 If the multispindle control function is not being used, the
CNC does not issue any commands to the second and third
spindles.  The output polarity is controlled by the SGNx
signal.  It is not affected by the SSINx signal.
The speed output to the spindle motor can be controlled
only when the SINDx signal is set to “1”.

Note



15. PMC CONTROL FUNCTION B–61393E–2/02

822

MDI key codes can be sent from the PMC to CNC by means of interface
signals.  This allows the CNC to be controlled in the same way as when
the operator performs MDI key operation.

Control is realized by exchanging the following interface signals between
the PMC and CNC:

Signal name Abbreviation

External key input mode selection signal (input) ENBKY

Key code signals (input)

Key input disable signal (output) INHKY

Program screen display mode signal (output) PRGDPL

The processing flow in the PMC is shown below.

15.5
EXTERNAL KEY 
INPUT

General



B–61393E–2/02 15. PMC CONTROL FUNCTION

823

Flowchart of PMC program processing at key input

START

Set ENBKY to 1

Wait 16 ms or 
longer

Set the signal to be keyed in to 1

Wait 128 to 
256 ms

Set the signal to be keyed in to 0

Did 256 ms elapse 
after the last key–in data 

was set to 1?

INHKY=0?

Is the key input 
completed?

Set ENBKY to 0

STOP

16 ms elapse

128 to 256 ms elapse

256 ms elapse

End

INHKY=0



15. PMC CONTROL FUNCTION B–61393E–2/02

824

[Classification] Input signal

[Function] While the signal is held to 1, the external key input control function is
enabled.  Meanwhile, the CRT/MDI key operation is ignored.

[Classification] Input signal

[Function] Sets the input key.

[Classification] Output signal

[Function] While the signal is held to 1, any key code of external key input is not
accepted.

[Classification] Output signal

[Function] The signal is set to 1 while the CNC is displaying the program screen.

Signal

External key input mode
selection signal
ENBKY <G134#0>

Key signal
<G106 to G114>

Key input disable signal
INHKY <F180#0>

Program screen display
signal 
PRGDPL <F180#1>



B–61393E–2/02 15. PMC CONTROL FUNCTION

825

#7
K7, 0G106

#6
K6, F

#5
K5, Z

#4
K4, X

#3
K3, R

#2
K2, W

#1
K1, U

#0
K0, S (T series)

KEOB,G107 KH,1,K KA,C KP,Q KT,. KM,– K9,G K8,N (T series)

G108 KSTART KINOUT KDELET KINSRT KALTER (T series)

G109 KALARM KDGNOS KPARAM KOFSET KPRGRM KPOS (T series)

KCANG110 KXZ KPAGE� KPAGE� KCUS� KCUS� (T series)

KRESETG111 (T series)

KSLG112 KS1 KS2 KS3 KS4 KS5 KSR (T series)

KFWHG113 KFUV KFZJ KFXY KFRC KFGB KFN) KFO( (T series)

KFL+G114 KFT* KFS= KFM# KFF KFE KFK@ KFI, (T series)

KXZG142 (T series)

K7,0G106 K6,Z K5,Y K4,X K3,R K2,F K1,H K0,X (M series)

KEOB,/,#G107 KH,J,K KB,K4,D KP,Q,L KT,. KM,– K9,G K8,N (M series)

G108 KSTART KINPUT KDELET KINSRT KALTER (M series)

G109 KALARM KDGNOS KPARAM KOFSET KPRGRM KPOS (M series)

KCANG110 KYZ KZX KXY KPAGE� KPAGE� KCUS� KCUS� (M series)

KRESETG111 (M series)

KSLG112 KS1 KS2 KS3 KS4 KS5 KSR (M series)

KF4THG113 KFZW KFYV KFXU KFRC KFGE KFN) KFO( (M series)

KFL+F114 KFt* KFS= KFM# KFF KFF@ KFJA KFI, (M series)

G134 ENBKY

F180 PRGDPL INHKY

Signal address



15. PMC CONTROL FUNCTION B–61393E–2/02

826

Standard CRT/MDI key switch

Signal name Key Signal name Key

K0.S . . . . . . . . . . . 0
S

KI.H.K . . . . . . . . . . . 
K
I

H

K
J
I

(0T) (0M)

K1.U . . . . . . . . . . . 1
U

(0T) 1
U

(0M) KEOB./ . . . . . . . . . 
/  #

EOB

K2.W . . . . . . . . . . (0T)2
W

2
F

(0M) KALTER . . . . . . . . ALTER

K3.R . . . . . . . . . . . 3
R

3
R

(0T) (0M) KINSRT . . . . . . . . INSRT

K4.X . . . . . . . . . . . 4
X

KDELET . . . . . . . DELET

K5.Z . . . . . . . . . . . 5
Z

5(0T) (0M) KINPUT . . . . . . . . INPUT

K6.F . . . . . . . . . . . 6
F

6
Z

(0T) (0M) KSTART . . . . . . . OUTPT
START

K7.O . . . . . . . . . . . 7
O

7
O

(0T) (0M) KPOS . . . . . . . . . . POS

K8.N . . . . . . . . . . . 8
N

KPRGRM . . . . . . PRGRM

K9.G . . . . . . . . . . . 9
G

9
G

(0T) (0M) KOFSET . . . . . . . MENU
OFSET

KM.– . . . . . . . . . . . 
M

KPARAM . . . . . . . DGNOS
PARAM

KT.& . . . . . . . . . . � 
T

KGRAPH . . . . . . . AUX
GRAPH

KP.Q . . . . . . . . . . . 
J

No.  Q
P

L
No.  Q

P
(0T) (0M) KALARM . . . . . . . OPR

ALARM

KA.C . . . . . . . . . . . . A
C

4th

B
(0T) (0M) KCUS ↓ . . . . . . . . Cursor key

Correspondence
between the MDI keys
and signals



B–61393E–2/02 15. PMC CONTROL FUNCTION

827

Standard CRT/MDI key switch

Signal name Key Signal name Key

KCUS ↑ . . . . . . . . Cursor key KCAN . . . . . . . . . . CAN

KPAGE ↓ . . . . . . . . . . . Page key KRESET . . . . . . . RESET

KPAGE ↑ . . . . . . . Page key
KXZ . . . . . . . . . . . Signal for entering addresses

X and Z simultaneously (can
be used in playback)

When a key signal is output from the PMC to the CNC, the following
three control signals are used.  The signals are descried below.  The
flowchart of key input by PMC program is shown below.

ENBK Key input enable signal
(PMC⇒ CNC)

INHKY Key input disable signal
(CNC⇒ PMC)

PRGDPL Signal indicating that the program screen is displayed on the
CRT screen
(CNC⇒ PMC)
(The signal is held to 1 while the program screen is being 
selected.)

CAUTION
When ENBKY is set to 1, the signal of the CRT/MDI key
switch is ignored.



15. PMC CONTROL FUNCTION B–61393E–2/02

828

G111
Bit 7

G110
Bit 1

G110
Bit 0

G110
Bit 3

G110
Bit 2

G106
BIT 7

G106
BIT 1

G107
BIT 0

G107
BIT 1

G108
BIT 0

G107
BIT 4

G106
BIT 5

G106
BIT 6

G106
BIT 2

G106
BIT 3

G107
BIT 2

G107
BIT 3

G106
BIT 0

G107
BIT 5

G107
BIT 6

G107
BIT 4

G108
BIT 1

G108
BIT 2

G107
BIT 7

G110
BIT 7

G109
BIT 0

G109
BIT 1

G109
BIT 2

G108
BIT 3

G109
BIT 3

G109
BIT 5

G109
BIT 4

G108
BIT 4

Fig.15.5 (a) Correspondence between Keys and Key Addresses (Standard Keyboard)

G111
Bit 7

G110
Bit 1

G111
Bit 0

G110
Bit 3

G110
Bit 2

G113
BIT 0

G113
BIT 1

G113
BIT 2

G113
BIT 3

G113
BIT 4

G113
BIT 5

G113
BIT 6

G113
BIT 7

G114
BIT 0

G114
BIT 1

G114
BIT 2

G114
BIT 3

G114
BIT 4

G114
BIT 5

G114
BIT 6

G114
BIT 7

G110
BIT 4

G110
BIT 5

G110
BIT 6

G110
BIT 7

G106
BIT 7

G107
BIT 0

G107
BIT 1

G106
BIT 4

G106
BIT 5

G106
BIT 6

G106
BIT 1

G106
BIT 2

G106
BIT 3

G107
BIT 2

G106
BIT 0

G107
BIT 3

G107
BIT 5

G107
BIT 7

G107
BIT 6

G108
BIT 0

G108
BIT 1

G108
BIT 2

G108
BIT 3

G108
BIT 4

G109
BIT 0

G109
BIT 1

G109
BIT 2

G109
BIT 6

G109
BIT 3

G109
BIT 5

G109
BIT 4

G109
BIT 7

G108
BIT 5

Fig.15.5(b) Correspondence between Keys and Key Addresses (Full Keyboard)



B–61393E–2/02 15. PMC CONTROL FUNCTION

829

G112
Bit 7

G112
Bit 6

G112
Bit 5

G112
Bit 4

G112
Bit 3

G112
Bit 2

G112
Bit 1

Fig.15.5(c) Correspondence between Keys and Addresses (Soft Keys)

RESET 7
O

8
N

9
G

4
X

5
Z

6
F

1
U

2
W

3
R

M
� 
T

B

ALTER

INSRT

DELET

/ , #
EOB

CAN

INPUTPOS PRGRM
MENU

OFSET

DGNOS

PARAM

OPR

ALARM

AUX

GRAPH

OUTPT

START

CURSOR

PAGE

A
      C

K
I

Y    H

J
No.  Q
V     P

0
S

FANUC

Fig.15.5(d) MDI Keys of the Series 0–TC (Standard Keyboard)



15. PMC CONTROL FUNCTION B–61393E–2/02

830

RESET 7
O

8
N

9
G

4
X

5
Y

6
Z

1
H

2
F

3
R

� 
T

ALTER

INSRT

DELET

/ , #
EOB

CAN

INPUTPOS PRGRM
MENU

OFSET

DGNOS

PARAM

OPR

ALARM

AUX

GRAPH

OUTPT

START

CURSOR

PAGE

4th

B

K
J
I

J
No.  Q

P

M
0
S

FANUC

Fig.15.5(e) MDI Keys of the Series 0–MC (Standard Keyboard)

CAN

MACRO

MENUOFSETPRGRMPOSSHIFT

INPUT

7 8 9

4 5 6

1 2 3

� 

/

ALTER

INSRT

DELET

DGNOS

PARAM

OPR

ALARM

OUTPT

START

EOB

RESET

AUX

GRAPH

CURSOR

PAGE

O
(

N
)

G
B

R
C

X
Y

Z
J

U
V

W
H

 I
, 

K
@

E F
No.

M
#

S
=

T
�

L
+

P
[

Q
]

D A
SP

0

FANUC

Fig.15.5(f) )MDI Keys of the Series 0–TC (Full Keyboard)



B–61393E–2/02 15. PMC CONTROL FUNCTION

831

MACRO

MENUOFSETPRGRMPOSSHIFT

INPUT

7 8 9

4 5 6

1 2 3

� 

/

ALTER

INSRT

DELET

DGNOS

PARAM

OPR

ALARM

OUTPT

START

EOB

RESET

AUX

GRAPH

CURSOR

PAGE

O
(

N
)

G
E

R
C

X
U

Y
V

Z
W

4TH

 I
, 

J
A

K
@

F
No.

M
#

S
=

T
�

L
+

P
[

Q
]

D
H

B
SP

0

CAN

FANUC

Fig.15.5(g) MDI Keys of the Series 0–MC (Full Keyboard)



15. PMC CONTROL FUNCTION B–61393E–2/02

832

Activating memory operation in memory operation mode (AUTO) with
the direct operation select signal set to 1 enables machining (direct
operation) while reading a program stored in the MMC.

[Classification] Input signal

[Function] Selects the mode (direct operation mode) for performing machining while
reading a program stored in the MMC.

[Operation] When this signal is set to 1, the control unit operates as follows:

· When memory operation mode (AUTO) is not selected, the control unit
ignores this signal.

· When memory operation mode (AUTO) is selected, the control unit
selects direct operation mode and enables direct operation.

#7
DMMCG128

#6 #5 #4 #3 #2 #1 #0

15.6
DIRECT OPERATION 
BY MMC (T SERIES)

General

Signal

Direct operation select
signal DMMC <G128#7>

Signal address



B–61393E–2/02 15. PMC CONTROL FUNCTION

833

This function allows the PMC to read and rewrite CNC data.

[Classification] Input signal

[Function] See the description of window completion signal WNANS, below.

[Classification] Output signal

[Function] Window request signal WNRQ is sent, by the PMC, to request the CNC
to read/write data.  A request is made by placing the signal in a state other
than the signal state of window completion signal WNANS.  By request,
the CNC reads or writes data, then posts the completion of the requested
processing by placing WNANS in the same signal state as that of WNRQ.

WNWRT

WNRQ

WNANS

WNERR

(1) (2) (3) (4) (5) (6)

Rewrite processing
(1):  Request for rewrite 
(2):  Rewrite processing by CNC
(3):  Termination with an error

Read processing
(4):  Request for read 
(5):  Read processing by CNC
(6):  Normal termination

[Classification] Input signal

[Function] When data in the CNC is read (from CNC to PMC; output), this signal
is set to 0.  The read data is output to F252 to F267.
When data in the CNC is rewritten (from PMC to CNC; input), this signal
is set to 1.  The data to be written is set in G206 to G209.

15.7
PMC WINDOW 
FUNCTION

General

Signal

Window request signal 
WNRQ<G200#0>

Window completion
signal
WNANS<F250#0>

Window rewrite signal
WNWRT<G200#1>



15. PMC CONTROL FUNCTION B–61393E–2/02

834

[Classification] Output signal

[Function] When data passed to the window contains an error, completion
notification is made using WNANS, and WNERR is set to 1.  When the
data contains no errors, WNERR is set to 0.  Therefore, the PMC must
check to ensure that WNERR is 0 after checking that completion signal
WNANS has been inverted.

Function
No. Data name

Function
No. Data name

0 20 Distribution information

1 Absolute coordinate system 21 A/D conversion data

2 Machine coordinate system 22 Output of axis movement
signal

3 Skip coordinate system 23 In–position information

4 Servo delay amount 24 Distribution information

5 25 Load information of serial
spindle

6 26 Speed information of serial
spindle

7 Distribution amount 27 Alarm information of serial
spindle

8 28

9 29

10 Alarm information 30

11 31 D/A conversion function

12 32 Torque limit

13 33 Output of modal data

14 Program number of the
current selection

34

15 Output of the servo load
current value

35

16 Output of the number of
required parts

36

17 Output of the number of
machined parts

37

18 Output of date 38

19 Output of time 39

* Those function numbers for which the data name fields are blank must
not be used.

Window error signal
WNERR<F250#1>

List of functions



B–61393E–2/02 15. PMC CONTROL FUNCTION

835

(1)Function
Enables output of the current position.
The following three factors can be obtained with three functional
numbers:
1 : absolute coordinates
2 : machine coordinates
3 : skip position

(2)Data content
Type : binary
Data length : 2 words (for one axis)

(3)Usage
1) Classification

Output
2) Control data

Functional binary number 1 to 3

Word number of data 2 to 8

Axis selection code 0 to 20

00 0

Example)
To obtain the data of the 2nd axis, set the word number of data to
“2” and the axis selection code to “4”.  To obtain the data for several
axes at a time, set the word number of data to “number of axis �2”
and the axis selection code to the value for the first axis.

Axis Selection Code)
M series T series

0 : X axis X axis
4 : Y axis Z axis
8 : Z axis 3rd axis
12 : 4th axis 4th axis
16 : 5th axis 5th axis
20 : 6th axis 6th axis

(1)Function
Enables reading of the current servo delay amount.

(2)Data content
Type  : binary
Data length : 2 words (for one axis)

(3)Usage
1) Classification

Output
2) Control data

Functional binary number 4

Word number of data 2 to 8

Axis selection code 0 to 20

00 0

Function details

� Functional Nos.01,02,03 :
Current Position

� Functional No.04 :
Servo Delay Amount

G202

G203

G204

G205

G202

G203

G204

G205



15. PMC CONTROL FUNCTION B–61393E–2/02

836

Example)
To obtain the data of the 2nd axis, set the word number of data to
“2” and the axis selection code to “4”.  To obtain the data for several
axes at a time, set the word number of data to “number of axis �2”
and the axis selection code to the value for the first axis.

Axis Selection Code)
M series T series

0 : X axis X axis
4 : Y axis Z axis
8 : Z axis 3rd axis
12 : 4th axis 4th axis
16 : 5th axis 5th axis
20 : 6th axis 6th axis

(1)Function
Enables reading of the distribution amount of the current axis at every
interpolation cycle.
Window function is useful to discriminate the direction and the speed
of the movement in constant moving.
Please note that a time delay inevitably occurs when reading is
performed by PMC.

(2)Data content
Type : binary
Data length : 2 words (for one axis)

(3)Usage

1) Classification
Output

2) Control data

Functional binary number 7

Word number of data 2 to 8

Axis selection code 0 to 20

00 0

Example)
To obtain the data of the 2nd axis, set the word number of data to
“2” and the axis selection code to “4”.  To obtain the data for several
axes at a time, set the word number of data to “number of axis �2”
and the axis selection code to the value for the first axis.

Axis Selection Code)
M series T series

0 : X axis X axis
4 : Y axis Z axis
8 : Z axis 3rd axis
12 : 4th axis 4th axis
16 : 5th axis 5th axis
20 : 6th axis 6th axis

� Functional No.07 :
Distribution Amount

G202

G203

G204

G205



B–61393E–2/02 15. PMC CONTROL FUNCTION

837

(1)Function
Enables reading of the current alarm information.

(2)Data content
Type : bit
Data length : 1 byte

(3)Usage

1) Classification
Output

2) Control data

Functional binary number 10

Word number of data 1

00 0

00 0

Remarks)
Data can be obtained in a bit format.

#7
F252

#6
SV

#5
OH

#4
OTS

#3
PS

#2
PS3

#1
PS2

#0
PS1

PS1 P/S alarm 100 (PWE ON)
PS2 P/S alarm 000 (power off demand)
PS3 P/S alarm 101 (program area deletion demand)
PS P/S alarm

OTS Over travel alarm
OH Over heat alarm
SV Servo alarm

(1)Function
Enables reading of the program number that is currently selected.

(2)Data content
Given by 2–byte size.
The range of value is 0 through 9999.

(3)Usage

1) Classification
Output

2) Control data

Functional binary number 14

Word number of data 1

00 0

00 0

� Functional No.10 :
Alarm Information

� Functional No.14 :
Program Number of the
Current Selection

G202

G203

G204

G205

G202

G203

G204

G205



15. PMC CONTROL FUNCTION B–61393E–2/02

838

(1)Function
Enables reading of the output of load current value with sign of servo.

(2)Data content
Given by a binary format specified by 2–byte size for one axis.
Conversion of the load current value is given by the following
formula:

Load current value [Apeak] = D �
5

256
�

λ
128

Where, D : read value in the PMC window
λ : motor model,

40 [Apeak] for 0, 5, 10, 20
80 [Apeak] for 20, 30

(3)Usage
1) Classification

Output
2) Control data

Functional binary number 15

Word number of data 1

Axis selection code 2 to 74

00 0

Example)
To obtain the data of the 2nd axis, set the word number of data to
“1” and the axis selection code to “26”.  The data for several axes
can not be obtained at the same time with this window.

Axis Selection Code)
M series T series

2 : X axis X axis
26 : Y axis Z axis
50 : Z axis 3rd axis
74 : 4th axis 4th axis

(1)Function
Enables reading of the number of part required in the display of the
machining parts number of CNC.

(2)Data content
Type : binary
Data length : 1 word
Data range : 0 through 32767

(3)Usage
1) Classification

Output
2) Control data

Functional binary number 16

Word number of data 1

00 0

00 0

� Functional No.15 :
Output of the Servo Load
Current Value

� Functional No.16 :
Output of Number of
Required Parts

G202

G203

G204

G205

G202

G203

G204

G205



B–61393E–2/02 15. PMC CONTROL FUNCTION

839

(1)Function
Enables reading of the machined parts number in the display of the
machined parts number of CNC.

(2)Data content
Type : binary
Data length : 2 words
Data range : 0 through 99999999

(3)Usage

1) Classification
Output

2) Control data

Functional binary number 17

Word number of data 2

00 0

00 0

(1)Function
Enables reading the date of the timer built into the CNC.

(2)Data content
Type : binary
Data length : 2 words
Data format : 19970330 for 97/03/30

(March 30th., 1997)

(3)Usage

1) Classification
Output

2) Control data

Functional binary number 18

Word number of data 2

00 0

00 0

(1)Function
Enables reading the time of the timer built into the CNC.

(2) Date content
Type : binary
Date length : 2 words
Data format : 93045 for 09:30:45

(3) Usage

1) Classification
Output

� Functional No.17 :
Output of Number of
Machined Parts

� Functional No. 18 :
Output of data

� Functional No. 19:
Output of time

G202

G203

G204

G205

G202

G203

G204

G205



15. PMC CONTROL FUNCTION B–61393E–2/02

840

2) Control data

Functional binary number 19

Word number of data 2

00 0

00 0

(1)Function
Enables reading of the following distribution information.

(2)Data content
Type : bit
Data length : 1 byte

(3)Usage

1) Classification
Output

2) Control data

Functional binary number 20

Word number of data 1

00 0

00 0

Remarks)
The data can be obtained in a bit format.

#7
MTNF252

#6
DWL

#5
AF

#4
CYL

#3 #2 #1 #0
ORGN

ORGN 1 : block for setting coordinate system.
0 : block not for setting coordinate system.

CYL 1 : in a cycle operation.
0 : out of a cycle operation.

AF 1 : with auxiliary function
0 : without auxiliary function

DWL 1 : with dwell
0 : without dwell

MTN 1 : with distribution
0 : without distribution

(1)Function
Enables reading of four channels of analog signals (voltages) in the
PMC window with an A/D converter.

(2)Data content
Input range : –10V to + 10V

(input unit: 5mV)
Type : binary
Date length : 1 word
Data range : –1999 throuth +2000

� Functional No.20 :
Distribution Information

� Functional No.21: A/D 
Conversion Data

G202

G203

G204

G205

G202

G203

G204

G205



B–61393E–2/02 15. PMC CONTROL FUNCTION

841

(3) Usage
1) Classification

Output
2) Control data

Functional binary number 21

Word number of data 1 to 4

Channel selection code 0 : 1 channel

2 : 2 channels

4 : 3 channels

6 : 4 channels

00 0

Example)
To obtain the data of the 2nd channel, set the word number of data to
“1” and the channel selection code to “1”. To obtain all the channel
selection codes, set the word number of data to “4” and the channel
selection code to “0”.

Remarks)
A/I board is necessary for the A/D conversion.

(1)Function
Enables reading if the current axis is moving.

(2)Data content
Type : bit
Data length : 1 byte

(3)Usage
1) Classification

Output
2) Control data

Functional binary number 22

Word number of data 1

00 0

00 0

Remarks)
The data can be obtained in a bit format.

#7
F252

#6 #5 #4 #3
MV4

#2
MV3

#1
MVZ

#0
MVX (T series)

MV4 MVZ MVY MVX (M series)

MVx Represents the movement signal of X, Y (Z), Z (3) and 4th axis successively.
Each axis is moving when each bit is 1.

(1)Function
Enables reading if an axis is in the in–position.

(2)Data content
Type : bit
Data length : 1 byte

� Functional No.22 :
Output of Axis
Movement Signal

� Functional No.23 :
In–position Information

G202

G203

G204

G205

G202

G203

G204

G205



15. PMC CONTROL FUNCTION B–61393E–2/02

842

(3)Usage

1) Classification
Output

2) Control data

Functional binary number 23

Word number of data 1

00 0

00 0

Remarks)
The data can be obtained in a bit format.

#7
F252

#6 #5 #4 #3
INP4

#2
INP3

#1
INPZ

#0
INPX (T series)

INP4 INPZ INPY INPX (M series)

INPx Represents the in–position of X, Y (Z), Z (3) and 4th axis successively.
Each axis is in the in–position when each bit is 1.

(1)Function
Enables reading of the information related to the distribution of CNC.

(2)Data content
Type : bit
Data length : 1 byte

(3)Usage

1) Classification
Output

2) Control data

Functional binary number 24

Word number of data 1

00 0

00 0

Remarks)
The data can be obtained in a bit form.

#7

AUTO
F252

#6

@POS

#5
HND

#4 #3 #2
ZRNM

#1
G30

#0
G27

CIR G03 SCRW

AUTO 0 : pulse distribution in a manual mode (jog, step, etc.)
1 : pulse distribution in an automatic mode (AUTO, MDI, etc.)

@POS 0 : pulse distribution in a position format.
1 : pulse distribution in an interpolation format.

The content of the information of bit 0 through 5 varies according to the
state of @POS as follows:

In the case of @POS = 0 ;

HND 0 : pulse distribution other than a handle.
1 : pulse distribution of a handle.

� Functional No.24 :
Distribution Information

G202

G203

G204

G205

G202

G203

G204

G205



B–61393E–2/02 15. PMC CONTROL FUNCTION

843

ZRNM 0 : non reference position return
1 : reference position return

G30 0 : out of 2nd reference position returning
1 : in 2nd reference position returning

G27 0 : non reference position return check
1 : reference position return check

In the case of @POS = 1;

CIR 0 : linear interpolation
1 : circular interpolation

G03 0 : G02 (significant only when CIR = 1)
1 : G03

SCRW 0 : out of thread cutting
1 : in thread cutting

(1)Function
Enables reading of the load information of serial spindles.

(2)Data content
Type : binary
Data length : 1 word
Data range : 0 through 32767

(3)Usage

1) Classification
Output

2) Control data

Functional binary number 25

Word number of data 1

00 0

00 0

Remarks)
For reference, the formula to normalize the load information is
shown as follows:

Load (%) = 
L

32767
 � λ

where , L is the value read from the window,
λ is the ratio of maximum output to the continuous rated output of
a motor (when the continuous rated output is regarded as 100%, λ
for 180% of the maximum output becomes 180).

� Functional No.25 :
Load Information of
Serial Spindles

G202

G203

G204

G205



15. PMC CONTROL FUNCTION B–61393E–2/02

844

(1)Function
Enables reading of the speed information of serial spindles.

(2)Data content
Type : binary
Data length : 1 word
Data range : 0 to �16383

(3)Usage
1) Classification

Output
2) Control data

Functional binary number 26

Word number of data 1

00 0

00 0

Remarks)
For reference, the formula to obtain the rotation number from the
speed information is shown as follows:
Rotation Number (rpm)

= 
�V�

16383
 � (Maximum rotation number of the motor)

where, V is the value read from the window,
�V� is the absolute value of V.

(1)Function
Enables reading of the alarm information of serial spindles.

(2)Data content
Type : binary
Data length : 1 word

(3)Usage
1) Classification

Output
2) Control data

Functional binary number 27

Word number of data 1

00 0

00 0

Remarks)
The alarm code and the content of alarms are shown as follows:

Code Content of alarm

0 Normal operation

1 Motor over heat

2 Velocity error excess

4 Phase lack alarm

7 Over speed

� Functional No.26 :
Speed Information of
Serial Spindles

� Functional No.27 :
Alarm Information of
Serial Spindles

G202

G203

G204

G205

G202

G203

G204

G205



B–61393E–2/02 15. PMC CONTROL FUNCTION

845

Code Content of alarm

9 Over load

10 Low voltage in control power supply

11 Over voltage in DC linking part

12 Over current in DC linking part

13 Internal memory abnormality of CPU

14 ROM alarm

18 Sumcheck alarm of program memory (ROM)

19 Excessive offset in U phase current detection circuit

20 Excessive offset in V phase current detection circuit

24 Serial data transmission alarm

25 Serial LSI watchdog

26 Burn–out alarm of 9000p speed detector

27 Burn–out alarm of position coder

28 Burn–out alarm of 9000p position detector

29 Over load

30 Over current in input circuit

31 Motor binding alarm

32 Internal RAM abnormality in serial LSI

33 Undercharge alarm at DC linking part

34 Parameter data malsetting

35 Disagreement in gear ratio setting

36 Error counter overflow

37 HCRDY handshake alarm

(1)Function
Enables conversion of the data input from the PMC window to the
analog signal (voltage) to 2 channels with a D/A converter.

(2)Data content
Type : binary
Data length : 1 word
Input range : –7168 to  +7168
Output range : –11.0V to +11.0V

(3)Usage

1) Classification
Input

2) Control data

Functional binary number 32

Word number of data 1

Channel selection code 0 to 1

00 0

D/A conversion data –7168 to
7168

� Functional No. 31: D/A 
Conversion Function

G202

G203

G204

G205 to
  G206



15. PMC CONTROL FUNCTION B–61393E–2/02

846

Channel Selection Data)

Set value : 0 : connector M121
1 : connector M121 and M122

D/A CONVERSION DATA)
10V, 0V and –10V are generated by the set value of 6553, 0 and –6553
respectively.

Example)
To output the data of the 2nd channel, set channel selection code to “1”.

Remarks)
A/I board is necessary for the use of D/A conversion.
Data for only 1 channel can be input at the same time.
The channel to use the D/A conversion can not used for multiples
spindles.

#7
0070

#6 #5 #4 #3 #2 #1
DAC2

#0
DAC1

DAC1 1 : Channel 1 is used for the D/A
0 : Channel 1 is not used for the D/A conversion.

DAC2 1 : Channel 2 is used for the D/A conversion.
0 : Channel 2 is not used for the D/A conversion.

0613 PSANG2 (T series)

0673 PSANG2 (M series)

PSANG2 Sets data for the gain adjustment in an analog output.
(channel 1)
Setting range : 700 to 1250

Standart set value : 1000

0614 SPDLC2 (T series)

0674 SPDLC2 (M series)

SPDLC2 Sets the offset compensation value, i.e. the zero offset compensation
value of output voltage.
(channel 1)
Setting range : 0 to �1023

Standard set value : 0

0617 PSANG3 (T series)

0677 PSANG3 (M series)

PSANG3  Sets data for the gain adjustment in an analog output.
(Channel 2)
Setting range : 700 to 1250

Standard set value : 1000

� Reference parameters:



B–61393E–2/02 15. PMC CONTROL FUNCTION

847

0618 SPDLC3 (T series)

0678 SPDLC3 (M series)

SPDLC3 Sets the offset compensation value, i.e. the zero offset compensation
value of output valtage.
(Channel 2)
Setting range : 0 to �1023

Standard set value : 0

(1)Function
Enables setting of the torque limit to a servo motor from the PMC
window.

(2)Data content
Torque limit data
Type : binary
Data length : 1 word
Input range : 0 to 255

0 for 0%.
255 for 100%.

(3)Usage

1) Classification
Input

2) Control data

Functional binary number 32

Word number of data 1

Axis selection code 0 to 5

00 0

Torque limit data 0 to 255

Axis Selection Code)
Set value   :  0 to 5

M series T series
0 : X axis X axis
1 : Y axis Z axis
2 : Z axis 3rd axis
3 : 4th axis 4th axis
4 : 5th axis 5th axis
5 : 6th axis 6th axis

Example)
To set 50% of the torque limit to 2nd axis, set the axis selection code
to “1” and the torque limit data to “128”.  To cancel the torque limit,
set the torque limit data to “255”.

Remarks)
When the number exceeding the maximum controlled axis number
is set, an error occurs.

� Functional No.32 :
Torque Limit

G202

G203

G204

G205

G206 to
  G209



15. PMC CONTROL FUNCTION B–61393E–2/02

848

(1)Function
Enables reading of the modal information of CNC from PMC window.

(2)Data content
The modal data of G function:
The read modal data of G function is set in F252 by a binary code in
the following format:

#7
F252

#6 #5 #4 #3 #2 #1 #0

The modal data is shown by code.

1 : represents that the read modal data is commanded in a current block of the
part program.

0 : represents that the read modal data is not commanded in a current block of
the part program.

Modal data other than G function:
The eleven kinds of data, the addresses D, H, L, M, N, O, S, T, F, of
the NC part program and 2nd auxiliary function, can be read as modal
data other than G function.
The read data is set in the area of 5 byte F252 to F256 as follows:

#7
F252

#6 #5 #4 #3 #2 #1 #0

F253

F254

F255

The read data is set in a binary format.

#7
F256

#6 #5 #4 #3 #2 #1 #0

No. of digit

1 : represents that the read modal data is commanded in a current block of the
part program.

0 : represents that the read modal data is not commanded in a current block of
the part program.

�

1 : Negative command value

0 : Positive command value

(3)Usage

1) Classification
Output

2) Control data

Functional binary number 33

Modal Data

Group number

100 to 116, 200 to 216

124 to 133, 224 to 233

� Functional No.33 :
Output of Modal Data

G202

G204 to

  G205



B–61393E–2/02 15. PMC CONTROL FUNCTION

849

Remarks)
The correspondence between the numbers to be specified to G204
to G205 and the modal data is shown as follows:
Either number “1” (current) or “2” (next) is specified to the blank
space of each 3rd digit according to the necessary modal data.
The G code in a lathe system is represented on the basis of B in the
G code system.
For example, G32 in the G code system A corresponds to G33 in
the G code system B and the code read to F252 becomes 4.

Number Correspondence Table of G Code Group

Group
number

G code in the 
machining system Code

G code in the 
lathe system Code

�00

G00
G01
G02
G03
G33

0
1
2
3
4

G00
G01
G02
G03
G33
G34
G77
G78
G79

0
1
2
3
4
8
5
6
7

�01
G17
G18
G19

0
8
4

G96
G97

1
0

�02
G90
G91

0
1

G90
G91

0
1

�03
G22
G23

1
0

G68
G89

1
0

�04
G94
G95

0
1

G94
G95

0
1

�05
G20
G21

0
1

G20
G21

0
1

�06
G40
G41
G42

0
1
2

G40
G41
G42

0
1
2

�07
G43
G44
G49

1
2
0

G25
G26

0
1

�08

G73
G74
G76
G80
G81
G82
G83
G84
G85
G86
G87
G88
G89

10
11
12
0
1
2
3
4
5
6
7
8
9

G22
G23

0
1



15. PMC CONTROL FUNCTION B–61393E–2/02

850

Group
number Code

G code in the 
lathe systemCode

G code in the 
machining system

�09

G98
G99

0
1

G80
G83
G84
G86
G87
G88
G89

0
1
2
3
5
6
7

�10
G50
G51

0
1

G98
G99

0
1

�11
G66
G67

1
0

G66
G67

1
0

�12
G96
G97

1
0

�13

G54
G55
G56
G57
G58
G59

0
1
2
3
4
5

�14

G61
G62
G63
G64

1
2
3
0

�15
G68
G69

1
0

G17
G18
G19

0
4
8

�16
G15
G16

0
1

Number Correspondence Table of Modal Data Group Other than G Code

Modal data other
than the G function Machine system Lathe system

Area where the
data is read

D �24 –

H �25 – F252 to F255

L �26 �24

M �27 �25

N �28 �26

O �29 �27

S �30 �28

T �31 �29

F �32 �30

B �33 �31



B–61393E–2/02 15. PMC CONTROL FUNCTION

851

#7
G200

#6 #5 #4 #3 #2 #1
WNWRT

#0
WNRQ

G202 DI for PMC window (Function number)

G203 DI for PMC window (Number of word of data)

G204 DI for PMC window

G205 DI for PMC window

G206 DI for PMC window

to to

G209 DI for PMC window

#7
F250

#6 #5 #4 #3 #2 #1
WNERR

#0
WNANS

F252 DO for PMC window

to to

F267 DO for PMC window

Signal address



APPENDIX



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

855

A �
������ �����
 �
� �
� �	�



B–61393E–2/02A. INTERFACE BETWEEN CNC AND PMC APPENDIX

856

#7
4NGX004

#6 #5 #4 #3 #2 #1 #0

SKIPX008 ESKIP *RILK ZAE YAE XAE

X016 *DECX *DEC5S *DEC7

X017 *DECY *DEC6S *DEC8

X018 *DECZ

X019 *DEC4

X020 *–LZ *–LY *–LX *+LZ *+LY *+LX

X021 *ESP

A.1
LIST OF ADDRESSES

List of address 
(M series)

�� → ���



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

857

#7
ED7G100

#6
ED6

#5
ED5

#4
ED4

#3
ED3

#2
ED2

#1
ED1

#0
ED0

ED15G101 ED14 ED13 ED12 ED11 ED10 ED9 ED8

ESTBG102 EA6 EA5 EA4 EA3 EA2 EA1 EA0

AFLG103 ZNG SPC SPB SPA SRN

G104 RRW *FLWU ESRSYC JOV8 JOV4 JOV2 JOV1

G105 SVF8 SVF7 SVF4 SVFZ SVFY SVFX

K7, 0G106 K6, Z K5, Z K4, X K3, R K2, F K1, H K0, S

R08I2 R07I2 R06I2 R05I2 R04I2 R03I2 R02I2 R01I2

KEOB,/,#G107 KH,J,K KB,K4,D KP,Q,L KT,. KM, – K9, G K8, N

SIND2 SSIN2 SGN2 R12I2 R11I2 R10I2 R09I2

G108 KSTART KINPUT KDELET KINSRT KALTER

G109 KALARM KDGNOS KPARAM KOFSET KPROGRM KPOS

KCANG110 KYZ KZX KXY KPAGE� KPAGE� KCUS � KCUS �

SHA07 SHA06 SHA05 SHA04 SHA03 SHA02 SHA01 SHA00

KRESETG111

SHA11 SHA10 SHA09 SHA08

KSLG112 KS1 KS2 KS3 KS4 KS5 KSR

SHB07 SHB06 SHB05 SHB04 SHB03 SHB02 SHB01 SHB00

KF4THG113 KFXW KFYV KFXU KFRC KFGE KFN) KFO(

SHB11 SHB10 SHB09 SHB08

KFL+G114 KFT* KFS= KFM# KFF KFF@ KFJA KFI,

BFIN1G115 BFIN2 TFIN SFIN EFIN MFIN

HX/ROV1G116 AOV64 AOV32 AOV16 –X +X SBK BDT

HY/ROV2G117 AOV128 –Y +Y MLK *ILK

HZ/DRNG118 –Z +Z

H4G119 –4 +4 *LDSP

ZRNG120 *SSTP SOR SAR FIN ST MP2 MP1/MINP

ERSG121 RT *SP *ESP *OV8 *OV4 *OV2 *OV1

PN8G122 PN4 PN2 PN1 KEY MD4 MD2 MD1

CONG123 RTNT MSPC RTRCT GR2 GR1 RGTPN IGNVRY

PMC → ���



B–61393E–2/02A. INTERFACE BETWEEN CNC AND PMC APPENDIX

858

#7 #6 #5 #4 #3 #2 #1 #0

RO8IG124 RO7I RO6I RO5I RO4I RO3I RO2I RO1I

SINDG125 SSIN SGN R12I R11I R10I RO9I

G126 OVC HI4 HIZ HIY HIX

MIR4G127 DLK DNCI *ABSM MIRY MIRX

DMMCG128 *IT4 *ITZ *ITY *ITX

RLSOTG129 EXLM2 –LMZ –LMY –LMX +LMZ +LMY +LMX

UI7G130 UI6 UI5 UI4 UI3 UI2 UI1 UI0

UI15G131 UI14 UI13 UI12 UI11 UI10 UI9 UI8

G132 BGEN BGIALM BGION IOLACK

G133 SYNCJ SLHZ1 SLHZ0

G134 MFIN3 MFIN2 EXWT EXSTP EXRD ENBKY

G135 RGTAP

G136

G137

PKESS2G138 PKESS1 *–EDCZ *–EDCY *–EDCX *+EDCZ *+EDCY *+EDCX

TLRSTG139 TL64 TL32 TL16 TL08 TL04 TL02 TL01

F1DG140 STWD STRD TLRSTI UNIT TL256 TL128 TLSKP

BDT9G141 BDT8 BDT7 BDT6 BDT5 BDT4 BDT3 BDT2

*–MIT4G142 *–MITZ *–MITY *–MITX *+MIT4 *+MITZ *+MITY *+MITX

*BECLPG143 *BEUCP

G144 EAX8 EAX7 EAX4 EAX3 EAX2 EAX1

G145

G146 SPPHS SPSYC ROV1E ROV2E

DRNEG147 RTE OVCE *OV8E *OV4E *OV2E *OV1E



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

859

#7
OPF148

#6
SA

#5
STL

#4
SPL

#3
ZP4

#2
ZPZ/EF

#1
ZPY

#0
ZPX

MAF149 TAP ENB DEN BAL RST AL

BF1F150 BF2 DST TF SF EF MF

M28F151 M24 M22 M21 M18 M14 M12 M11

S28F152 S24 S22 S21 S18 S14/GR3O S12/GR2O S11/GR1O

T28F153 T24 T22 T21 T18 T14 T12 T11

M00F154 M01 M02 M30 B38 B34 B32 B31

B28F155 B24 B22 B21 B18 B14 B12 B11

T48F156 T44 T42 T41 T38 T34 T32 T31

F157 MF3 MF2 M38 M34 M32 M31

F158 MMI4 MMI2 MMI1

F159 BAL6 BAL5 BAL4 BAL3 BAL2 BAL1

F160 ESEND EREND

F161 FXST ZP24 ZP2Z ZP2Y ZP2X

U07F162 U06 U05 U04 U03 U02 U01 U00

U15F163 U14 U13 U12 U11 U10 U09 U08

PRTSFF164 RWD CKGRP

HOBSYNF165 MSPCF RTRCTF GWLF RGSPM RGSPP

ZP28F166 ZP27 ZP8 ZP7 ZP48 ZP47 ZP38 ZP37

F167

TORQLF168 ZRF4 ZRFZ ZRFY ZRFX

ZP44F169 ZP4Z ZP4Y ZP4X ZP34 ZP3Z ZP3Y ZP3X

F170

OUT7F171 OUT6 OUT5 OUT4 OUT3 OUT2 OUT1 OUT0

R08OF172 R07O R06O R05O R04O R03O R02O R01O

F173 R12O R11O R10O R09O

H4OF174 HZO HYO HXO ZRNO MD4O MD2O MD1O

MP2OF175 MP1O ROV2O ROV1O JV8O JV4O JV2O JV1O

CNC → ���



B–61393E–2/02A. INTERFACE BETWEEN CNC AND PMC APPENDIX

860

#7 #6 #5 #4 #3 #2 #1 #0

DRNOF176 MLKO SBKO BDTO OV8O OV4O OV2O OV1O

–4OF177 +4O –ZO +ZO –YO +YO –XO +XO

SPOF178 RTO KEYO SYCAL FSPPH FSPSY FSCSL

EDGNF179 EPARM EVAR EPRG EWTIO ESTPIO ERDIO IOLNK

PECK2F180 BGEACT RPALM RPBSY PRGDPL INHKY

F181

F182

F183

MV4F184 MVZ MVY MVX INP4 INPZ INPY INPX

S28F185 S24 S22 S21 S18 S14 S12 S11

S48F186 S44 S42 S41 S38 S34 S32 S31

F187 S58 S54 S52 S51

*EAXSLF188 CUT EOV0 SRNMV BCLP BUCLP TLNW TLCH

F189 SPDS4 SPDS3 SPDS2 SPDS1

F190

F191

SYNALF192 RTPT TLCHB TLCHE TLCHI

M228F193 M224 M222 M221 M218 M214 M212 M211

M318F194 M314 M312 M311 M238 M234 M232 M231

M338F195 M334 M332 M331 M328 M324 M322 M321

UO107F196 UO106 UO105 UO104 UO103 UO102 UO101 UO100

UO115F197 UO114 UO113 UO112 UO111 UO110 UO109 UO108

UO123F198 UO122 UO121 UO120 UO119 UO118 UO117 UO116

UO131F199 UO130 UO129 UO128 UO127 UO126 UO125 UO124



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

861

#7
G200

#6 #5 #4 #3 #2 #1 #0
PMC window DI

G209 PMC window DI

to to

EBUFAG210 ECLRA ESTPA ESOFA ESBKA EFINA

EC7AG211 EC6A EC5A EC4A EC3A EC2A EC1A EC0A

EIF7AG212 EIF6A EIF5A EIF4A EIF3A EIF2A EIF1A EIF0A

EIF15AG213 EIF14A EIF13A EIF12A EIF11A EIF10A EIF9A EIF8A

EID7AG214 EID6A EID5A EID4A EID3A EID2A EID1A EID0A

EID15AG215 EID14A EID13A EID12A EID11A EID10A EID9A EID8A

EID23AG216 EID22A EID21A EID20A EID19A EID18A EID17A EID16A

EID31AG217 EID30A EID29A EID28A EID27A EID26A EID25A EID24A

EBUFBG218 ECLRB ESTPB ESOFB ESBKB EFINB

EC7BG219 EC6B EC5B EC4B EC3B EC2B EC1B EC0B

EIF7BG220 EIF6B EIF5B EIF4B EIF3B EIF2B EIF1B EIF0B

EIF15BG221 EIF14B EIF13B EIF12B EIF11B EIF10B EIF9B EIF8B

EID7BG222 EID6B EID5B EID4B EID3B EID2B EID1B EID0B

EID15BG223 EID14B EID13B EID12B EID11B EID10B EID9B EID8B

EID23BG224 EID22B EID21B EID20B EID19B EID18B EID17B EID16B

EID31BG225 EID30B EID29B EID28B EID27B EID26B EID25B EID24B

G226

G227

G228

MRDYAG229 ORCMA SFRA SRVA CTH1A CTH2A TLMHA TLMLA

RCHAG230 RSLA INTGA SOCNA MCFNA SPSLA *ESPA ARSTA

G231 NRROA ROTAA INDXA

G232

MRDYBG233 ORCMB SFRB SRVB CTH1B CTH2B TLMHB TLMLB

RCHBG234 RSLB INTGB SOCNB MCFNB SPSLB *ESPB ARSTB

PMC → ���



B–61393E–2/02A. INTERFACE BETWEEN CNC AND PMC APPENDIX

862

#7 #6 #5 #4 #3 #2 #1 #0

G235 NRROB ROTAB INDXB

G236

G237 INFD SYNC4

G238

RMTDI7G239 RMTDI6 RMTDI5 RMTDI4 RMTDI3 RMTDI2 RMTDI1 RMTDI0

G240 Operator’s panel DI

G249 Operator’s panel DI

to to



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

863

#7
F250

#6 #5 #4 #3 #2 #1 #0
PMC window DO

F269 PMC window DO

to to

EBSYAF270 EOTNA EOTPA EGENA EFENA EIALA ECKZA EINPA

F271 EMFA

EM28AF272 EM24A EM22A EM21A EM18A EM14A EM12A EM11A

EBSYBF273 EOTNB EOTPB EGENB EDENB EIALB ECKZB EINPB

F274 EMFB

EM28BF275 EM24B EM22B EM21B EM18B EM14B EM12B EM11B

F276

F277

F278

F279

F280

ORARAF281 TLMA LDT2A LDT1A SARA SDTA SSTA ALMA

F282 PCFNA PCHPA CFINA CHPA

F283

F284

ORARBF285 TLMB LDT2B LDT1B SARB SDTB SSTB ALMB

F286 PCFNB PCHPB CFINB CHOB

F287

F288

F289

RMTDO7F290 RMTDO6 RMTDO5 RMTDO4 RMTDO3 RMTDO2 RMTDO1 RMTDO0

F291 Operator’s panel DO

F299 Operator’s panel DO

to to

PMC → ���



B–61393E–2/02A. INTERFACE BETWEEN CNC AND PMC APPENDIX

864

#7
SKIPX008

SKIP

#6
ESKIP

ESKIP

#5
–MIT2

#4
+MIT2

SKIP4

#3
–MIT1

SKIP3

#2
+MIT1

SKIP2

#1
ZAE

ZAE

#0
XAE

XAE

� ��	���	�� ��� ����� ��
�

*DEC3X016 *DECX *DEC5S *DEC7

� �� �
�
����� ������

*DEC4X017 *DECZ *DEC6S *DEC8

� �� �
�
����� ������

*ESPSX018 *+LZ

*DEC3X019 *DEC4

� �� �
�
����� ������

X020

X021 *ESP

List of addresses 
(T series)

MT → ���



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

865

#7
ED7G100

#6
ED6

#5
ED5

#4
ED4

#3
ED3

#2
ED2

#1
ED1

#0
ED0

ED15G101 ED14 ED13 ED12 ED11 ED10 ED9 ED8

ESTBG102 EA6 EA5 EA4 EA3 EA2 EA1 EA0

AFLG103 PRC SPC SPB SPA SPD SRN

G104 RRW *FLWU ESRSYC

PLCRVONG105 KILPLUS SVF8 SVF7 SVF4 SVF3 SVFZ SVFX

G106

M2R08I M2R07I M2R06I M2R05I M2R04I M2R03I M2R02I M2R01I

K7, 0 K6, F K5, Z K4, X K3, R K2, W K1, U K0, S

G107

M2SIND M2SGN M2R12I M2R11I M2R10I M2R09I

KEOB KH, I, K KA, C KP, Q KT,. KM, – K9, G K8, N

G108

M3R08I M3R07I M3R06I M3R05I M3R04I M3R03I M3R02I M3R01I

KSTART KINPUT KDELET KINSRT KALTER

G109

M3SIND M3SSIN M3SGN M3R12I M3R11I M3R10I M3R09I

KALARM KDGNOS KPARAM KOFSET KPROGRM KPOS

G110

SHA07 SHA06 SHA05 SHA04 SHA03 SHA02 SHA01 SHA00

KCAN KPAGE� KPAGE� KCUS� KCUS�

G111

SHA11 SHA10 SHA09 SHA08

KRESET

G112

SHB07 SHB06 SHB05 SHB04 SHB03 SHB02 SHB01 SHB00

KSL KS1 KS2 KS3 KS4 KS5 KSR

G113

SHB11 SHB10 SHB09 SHB08

KFWH KFUV KFZJ KFXY KFRC KFGB KFN) KFO(

KFL+G114 KFT* KFS= KFM# KFF KFFE KFK@ KFI,

BFING115 TFIN SFIN MFIN

HX/ROV1G116 ROV3D ROV2D ROV1D –X +X SBK BDT

HZ/ROV2G117 –Z +Z MLK MP1/MINP

DRNG118

H3

GR2

–3

GR1

+3

MP2

MP2

� ���� ����� �� ���	��� �����
�

H4G119 –4 +4 *LDSP

ZRNG120 *SSTP SOR SAR FIN ST STLK MIX

ERSG121 RT *SP *ESP *OV8 *OV4 *OV2 *OV1

PMC → ���



B–61393E–2/02A. INTERFACE BETWEEN CNC AND PMC APPENDIX

866

#7 #6 #5 #4 #3 #2 #1 #0

PN8G122 PN4 PN2 PN1 KEY MD4 MD2 MD1

G123

DRN

SPSTP

SPSTP

*SCPF

*SCPF

*SUCPF

*SUCPF GR2 GR1

RGTPN

RGTPN

COFF

COFF

� ���� �����
� �� ���	��� �����
�

RO8IG124 RO7I RO6I RO5I RO4I RO3I RO2I RO1I

SINDG125 SSIN SGN R12I R11I R10I R09I

CDZG126 SMZ *OV16 OVC HI4 HI3 HIZ HIX

G127 DLK DNCI *ABSM MIZ IGNVRY

DMMCG128 IT4 IT3 ITZ ITX

G129 EXLM2

UI7G130 UI6 UI5 UI4 UI3 UI2 UI1 UI0

UI15G131 UI14 UI13 UI12 UI11 UI10 UI9 UI8

GOQSMG132 WOQSM TNFS OFN4 OFN3 OFN2 OFN1 OFN0

WOSETG133 NOZAGC

G134 MFIN3 MFIN2 EXWT EXSTP EXRD ENBKY

G135

G136

G137

PKESS2G138 PKESS1 *–EDCZ *–EDCX *+EDCZ *+EDCX

TLRSTG139 TL64 TL32 TL16 TL08 TL04 TL02 TL01

AOVR128G140 AOVR64 AOVR32 AOVR16 UNIT TLSKP

BDT9G141 BDT8 BDT7 BDT6 BDT5 BDT4 BDT3 BDT2

KXZG142 BGEN BGIALM BGION IOLACK

G143

G144 EAX8 EAX7 EAX4 EAX3 EAX2 EAX1

GR31G145 GR21 *SSTP3 *SSTP2 *SSTP1 SWS3 SWS2 SWS1

PC2SLCG146 SBRT SPPHS SPSYC ROV2E ROV1E

DRNEG147 RTE OVCE *OV16E *OV8E *OV4E *OV2E *OV1E



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

867

#7
OPF148

#6
SA

#5
STL

#4
SPL

#3
ZP4

#2
ZP3

#1
ZPZ

#0
ZPX

MAF149 DEN2 TAP ENB DEN BAL RST AL

BFF150 DST TF SF MF

M28F151 M24 M22 M21 M18 M14 M12 M11

S28F152 S24 S22 S21 S18 S14 S12 S11

T28F153 T24 T22 T21 T18 T14 T12 T11

F154 SPAL

F155 MMI2 MMI1

F156 BAL6 BAL5 BAL4 BAL3 BAL2 BAL1

F157 MF3 MF2 M38 M34 M32 M31

AR7F158 AR6 AR5 AR4 AR3 AR2 AR1 AR0

AR15F159 AR14 AR13 AR12 AR11 AR10 AR9 AR8

PSYNF160 ESEND EREND

F161 ZP24 ZP23 ZP2Z ZP2X

UO7F162 UO6 UO5 UO4 UO3 UO2 UO1 UO0

UO15F163 UO14 UO13 UO12 UO11 UO10 UO9 UO8

PRTSFF164 RWD CKGRP ENB3 ENB2 SUCLP SCLP

PX7F165 PX6 PX5 PX4 PX3 PX2 PX1 PX0

ZP28F166 ZP27 ZP8 ZP7 ZP48 ZP47 ZP38 ZP37

PZ7F167 PZ6 PZ5 PZ4 PZ3 PZ2 PZ1 PZ0

F168 ZRF4 ZRF3 ZRFZ ZRFX

ZP44F169 ZP43 ZP4Z ZP4X ZP34 ZP33 ZP3Z ZP3X

F170 TORQ8 TORQ7 TORQ4 TORQ3 TORQ2 TORQ1

OUT7F171 OUT6 OUT5 OUT4 OUT3 OUT2 OUT1 OUT0

R08OF172 R07O R06O R05O R04O R03O R02O R01O

F173 R12O R11O R10O R09O

H4OF174 H3O HZO HXO ZRNO MD4O MD2O MD1O

MP2OF175 MP1O ROV2O ROV1O JV8O JV4O JV2O JV1O

CNC → ���



B–61393E–2/02A. INTERFACE BETWEEN CNC AND PMC APPENDIX

868

#7 #6 #5 #4 #3 #2 #1 #0

DRNOF176 MLKO SBKO BDTO OV8O OV4O OV2O OV1O

–4OF177 +4O –3O +3O –ZO +ZO –XO +XO

SPOF178 RTO KEYO SYCAL FSPPH FSPSY FSCSL

EDGNF179 EPARM EVAR EPRG EWTIO ESTPIO ERDIO IOLNK

F180 BGEACT RPALM RPBSY PRGDPL INHKY

F181

F182

F183

MV4F184 MV3 MVZ MVX INP4 INP3 INPZ INPX

S28F185 S24 S22 S21 S18 S14 S12 S11

S48F186 S44 S42 S41 S38 S34 S32 S31

F187 S58 S54 S52 S51

*EAXSLF188 CUT EOV0 SRNMV THRD TLNW TLCH

F189

F190

F191

F192

M228F193 M224 M222 M221 M218 M214 M212 M211

M318F194 M314 M312 M311 M238 M234 M232 M231

M338F195 M334 M332 M331 M328 M324 M322 M321

UO107F196 UO106 UO105 UO104 UO103 UO102 UO101 UO100

UO115F197 UO114 UO113 UO112 UO111 UO110 UO109 UO108

UO123F198 UO122 UO121 UO120 UO119 UO118 UO117 UO116

UO131F199 UO130 UO129 UO128 UO127 UO126 UO125 UO124



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

869

#7
G200

#6 #5 #4 #3 #2 #1 #0
PMC window DI

G209 PMC window DI

to to

EBUFAG210 ECLRA ESTPA ESOFA ESBKA EFINA

EC7AG211 EC6A EC5A EC4A EC3A EC2A EC1A EC0A

EIF7AG212 EIF6A EIF5A EIF4A EIF3A EIF2A EIF1A EIF0A

EIF15AG213 EIF14A EIF13A EIF12A EIF11A EIF10A EIF9A EIF8A

EID7AG214 EID6A EID5A EID4A EID3A EID2A EID1A EID0A

EID15AG215 EID14A EID13A EID12A EID11A EID10A EID9A EID8A

EID23AG216 EID22A EID21A EID20A EID19A EID18A EID17A EID16A

EID31AG217 EID30A EID29A EID28A EID27A EID26A EID25A EID24A

EBUFBG218 ECLRB ESTPB ESOFB ESBKB EFINB

EC7BG219 EC6B EC5B EC4B EC3B EC2B EC1B EC0B

EIF7BG220 EIF6B EIF5B EIF4B EIF3B EIF2B EIF1B EIF0B

EIF15BG221 EIF14B EIF13B EIF12B EIF11B EIF10B EIF9B EIF8B

EID7BG222 EID6B EID5B EID4B EID3B EID2B EID1B EID0B

EID15BG223 EID14B EID13B EID12B EID11B EID10B EID9B EID8B

EID23BG224 EID22B EID21B EID20B EID19B EID18B EID17B EID16B

EID31BG225 EID30B EID29B EID28B EID27B EID26B EID25B EID24B

G226

G227

G228

MRDYAG229 ORCMA SFRA SRVA CTH1A CTH2A TLMHA TLMLA

RCHAG230 RSLA INTGA SOCNA MCFNA SPSLA *ESPA ARSTA

G231

G232

MRDYBG233 ORCMB SFRB ERVB CTH1B CTH2B TLMHB TLMLB

PCHBG234 RSLB INTGB SOCNB MCFNB SPSLB *ESPB ARSTB

PMC → ���



B–61393E–2/02A. INTERFACE BETWEEN CNC AND PMC APPENDIX

870

#7 #6 #5 #4 #3 #2 #1 #0

G235

G236

G237

G238

RMTDI7G239 RMTDI6 RMTDI5 RMTDI4 RMTDI3 RMTDI2 RMTDI1 RMTDI0

G240 Operator’s panel DI

G249 Operator’s panel DI

to to



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

871

#7
F250

#6 #5 #4 #3 #2 #1 #0
PMC window DO

F269 PMC window DO

to to

EBSYAF270 EOTNA EOTPA EGENA EDENA EIALA ECKZA EINPA

F271 EMFA

EM28AF272 EM24A EM22A EM21A EM18A EM14A EM12A EM11A

EBSYBF273 EOTNB EOTPB EGENB EDENB EIALB ECZKB EINPB

F274 EMFB

EM28BF275 EM24B EM22B EM21B EM18B EM14B EM12B EM11B

B7F276 B6 B5 B4 B3 B2 B1 B0

B15F277 B14 B13 B12 B11 B10 B9 B8

B23F278 B22 B21 B20 B19 B18 B17 B16

B31F279 B30 B29 B28 B27 B26 B25 B24

F280

ORARAF281 TLMA LDT2A LDT1A SARA SDTA SSTA ALMA

F282 PCFNA PCHPA CFINA CHPA

F283

F284

ORARBF285 TLMB LDT2B LDT1B SARB SDTB SSTB ALMB

F286 PCFNB PCHPB CFINB CHPB

F287

F288

RMTDO7F289 RMTDO6 RMTDO5 RMTDO4 RMTDO3 RMTDO2 RMTDO1 RMTDO0

F290 Operator’s panel DO

F299 Operator’s panel DO

to to

CNC → ���



B–61393E–2/02A. INTERFACE BETWEEN CNC AND PMC APPENDIX

872

Diagnostic number and PMC address of 0–TTC machine interface signal

Diagnostic No. PMC address Direction of signal Selection of tool post

000 to 040 X000 to X040 MT → PMC Tool post 1 and tool post 2

048 to 086 Y048 to Y086 PMC → MT Tool post 1 and tool post 2

100 to 147 G100 to G147 PMC → CNC Tool post 1

148 to 199 F148 to F199 CNC → PMC Tool post 1

200 to 249 G200 to G249 PMC → CNC Tool post 1

250 to 299 F250 to F299 CNC → PMC Tool post 1

100 to 147 G1300 to G1347 PMC → CNC Tool post 2

148 to 187 F1348 to F1387 CNC → PMC Tool post 2

200 to 209 G1400 to G1409 PMC → CNC Tool post 2

250 to 279 F1450 to F1479 CNC → PMC Tool post 2

��� �� 	

������

�������

� Interface between CNC
and PMC or MT



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

873

Machine interface signal (MT → CNC) (for tool post 1 and 2)
#7

000
#6 #5 #4 #3 #2 #1 #0

X000

M18–36 M18–21 M18–5 M18–35 M18–20 M18–34 M18–19 M18–33

002X002

M18–24 M18–8 M18–38 M18–23 M18–7 M18–37 M18–22 M18–6

004X004

M18–11 M18–41 M18–26 M18–10 M18–40 M18–25 M18–9 M18–39

006X006

M18–45 M18–14 M18–44 M18–13 M18–43 M18–12 M18–42 M18–27

SKIPM008 –MIT2M +MIT2M –MIT1M +MIT1M ZAEM XAEMX008

M18–49 M18–18 M18–48 M18–17 M18–47 M18–16 M18–46 M18–15

010 / / / /X010

M20–11 M20–41 M20–26 M20–10

012X012

M20–45 M20–14 M20–44 M20–13 M20–43 M20–12 M20–42 M20–27

014X014

M20–49 M20–18 M20–48 M20–17 M20–47 M20–16 M20–46 M20–15

*DEC3016 / *DECXM / *DECXSX016

M1–6 M1–38 M1–20 M1–21 M1–11 M1–12

� �� 
������� ���	�

*DEC4017 / *DECZM / *DECZSX017

M1–7 M1–39 M1–22 M1–23 M1–9 M1–10

� �� 
������� ���	�

*ESPS018 / *+LZM / TRT2 / /X018

M1–8 M1–40 M1–24 M1–25

*DEC3019 / *DEC4 / / /X019

M20–40 M20–25 M20–9 M20–39

020X020

M1–13 M1–37 M1–5 M1–14 M1–15 M1–16 M1–17 M1–18

021 *ESPMX021

M1–41 M1–26 M1–27 M1–19 M1–33 M1–34 M1–35 M1–36

022X022

M1–42 M1–43 M1–44 M1–45 M1–46 M1–47 M1–48 M1–49

SKIPS040 *+LZS –MIT2S +MIT2S –MIT1S +MIT1S ZAES XAESX040

M28–11 M28–17 M28–10 M28–16 M28–9 M28–15 M28–8 M28–14

NOTE
An alphabet at the tail of a signal name indicates ad follows:
� . . � M ; Signal for tool post 1
� . . � S ; Signal for tool post 2
When the signals are descriminated per page between tool
post 1 and tool post 2, the alphabet at the tail is omitted.



B–61393E–2/02A. INTERFACE BETWEEN CNC AND PMC APPENDIX

874

Machine interface signal (PMC → MT) (for tool post 1 and 2)
#7

048
#6 #5 #4 #3

/
#2 #1 #0

Y048

M2–5 M2–6 M2–7 M2–8 M2–27 M2–26 M2–25

049 / / /Y049

M2–9 M2–41 M2–22 M2–23 M2–24

/050 / / /Y050

M2–10 M2–20 M2–19 M2–21

051Y051

M2–33 M2–34 M2–35 M2–36 M2–37 M2–38 M2–39 M2–40

052Y052

M2–11 M2–12 M2–13 M2–14 M2–15 M2–16 M2–17 M2–18

053Y053

M2–42 M2–43 M2–44 M2–45 M2–46 M2–47 M2–48 M2–49

080Y080

M19–8 M19–7 M19–6 M19–5 M19–4 M19–3 M19–2 M19–1

082Y082

M19–16 M19–15 M19–14 M19–13 M19–12 M19–11 M19–10 M19–9

084Y084

M20–36 M20–21 M20–5 M20–35 M20–20 M20–34 M20–19 M20–33

086Y086

M20–24 M20–8 M20–38 M20–23 M20–7 M20–37 M20–22 M20–6



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

875

Machine interface signal (PMC → CNC) (for tool post 1)
#7

ED7100
#6

ED6
#5

ED5
#4

ED4
#3

ED3
#2

ED2
#1

ED1
#0

ED0G100

ED15101 ED14 ED13 ED12 ED11 ED10 ED9 ED8G101

ESTB102 EA6 EA5 EA4 EA3 EA2 EA1 EA0G102

AFL103 PRC SPC SPB SPA SPD SRNG103

104 RRW *FLWU ESRSYCG104

PLCRVON105 KILPLUS SVF7 SVF4 SVF3 SVFZ SVFXG105

106G106

M2R08I M2R07I M2R06I M2R05I M2R04I M2R03I M2R02I M2R01I

K7, 0 K6, F K5, Z K4, X K3, R K2, W K1, U K0, S

107G107

M2SIND M2SGN M2R12I M2R11I M2R10I M2R09I

KEOB KH, I, K KA, C KP, Q KT,. KM, – K9, G K8, N

108G108

M3R08I M3R07I M3R06I M3R05I M3R04I M3R03I M3R02I M3R01I

KSTART KINPUT KDELET KINSRT KALTER

109G109

M3SIND M3SSIN M3SGN M3R12I M3R11I M3R10I M3R09I

KALARM KDGNOS KPARAM KOFSET KPROGRM KPOS

110G110

SHA07 SHA06 SHA05 SHA04 SHA03 SHA02 SHA01 SHA00

KCAN KPAGE� KPAGE� KCUS� KCUS�

111G111

SHA11 SHA10 SHA09 SHA08

KRESET

112G112

SHB07 SHB06 SHB05 SHB04 SHB03 SHB02 SHB01 SHB00

KSL KS1 KS2 KS3 KS4 KS5 KSR

113G113

SHB11 SHB10 SHB09 SHB08

KFWH KFUV KFZJ KFXY KFRC KFGB KFN) KFO(

KFL+114 *KFT KFS= KFM# KFF KFE KFK@ KFI,G114

BFIN115 TFIN SFIN MFING115

HX/ROV1116 ROV3D ROV2D ROV1D –X +X SBK BDTG116

HZ/ROV2117 –Z +Z MLK MP1/MINPG117

DRN118

H3

GR2

–3

GR1

+3

MP2

MP2

G118

Lower low is selected when bit 5 of parameter No. 0031 is 1.

H4119 –4 +4 *LDSPG119

ZRN120 *SSTP SOR SAR FIN ST STLK MIXG120

ERS121 RT *SP *ESP *OV8 *OV4 *OV2 *OV1G121



B–61393E–2/02A. INTERFACE BETWEEN CNC AND PMC APPENDIX

876

#7 #6 #5 #4 #3 #2 #1 #0

PN8122 PN4 PN2 PN1 KEY MD4 MD2 MD1G122

123

DRN

SPSTP

SPSTP

*SCPF

*SCPF

*SUCPF

*SUCPF GR2 GR1

RGTPN

RGTPN

COFF

COFF

G123

Lower low is selected when bit 5 of parameter No. 0031 is 1.

R081124 R071 R061 R051 R041 R031 R021 R011G124

SIND125 SSIN SGN R12I R11I R10I R09IG125

CDZ126 SMZ *OV16 OVC HI4 HI3 HIZ HIXG126

127 DLK DNCI *ABSM MIZ IGNVRYG127

128 IT4 IT3 ITZ ITXG128

129 EXLM2G129

UI7130 UI6 UI5 UI4 UI3 UI2 UI1 UI0G130

UI15131 UI14 UI13 UI12 UI11 UI10 UI9 UI8G131

GOQSM132 GOQSM OFN5 OFN4 OFN3 OFN2 OFN1 OFN0G132

WOSET133 SLSPB SLSPA NOWT TRT2PCG133

134 MFIN3 MFIN2 EXWT EXSTP EXRD ENBKYG134

135G135

For order made macro

136G136

For order made macro

137G137

For order made macro

PKESS2138 PKESS1 *–EDCZ *–EDCX *+EDCZ *+EDCXG138

TLRST139 TL64 TL32 TL16 TL08 TL04 TL02 TL01G139

AOVR128140 AOVR64 AOVR32 AOVR16 UINT TLSKPG140

BDT9141 BDT8 BDT7 BDT6 BDT5 BDT4 BDT3 BDT2G141

KXZ142 BGEN BGIALM BGION IOLACTG142

143G143

144 EAX7 EAX4 EAX3 EAX2 EAX1G144

GR31145 GR21 *SSTP3 *SSTP2 *SSTP1 SWS3 SWS2 SWS1G145

PC2SLC146 SBRT SPPHS SPSYC ROV2E ROV1EG146

DRNE147 RTE OVCE *OV16E *OV8E *OV4E *OV2E *OV1EG147



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

877

Machine interface signal (CNC → PMC) (for tool post 1)
#7
OP148

#6
SA

#5
STL

#4
SPL

#3
ZP4

#2
ZP3

#1
ZPZ

#0
ZPXF148

MA149 DEN2 TAP ENB DEN BAL RST ALF149

BF150 DST TF SF MFF150

M28151 M24 M22 M21 M18 M14 M12 M11F151

S28152 S24 S22 S21 S18 S14 S12 S11F152

T28153 T24 T22 T21 T18 T14 T12 T11F153

154 SPALF154

155 MMI2 MMI1F155

156 BAL4 BAL3 BAL2 BAL1F156

157 MF3 MF2 M38 M34 M32 M31F157

AR7158 AR6 AR5 AR4 AR3 AR2 AR1 AR0F158

AR15159 AR14 AR13 AR12 AR11 AR10 AR9 AR8F159

PSYN160 WATO ESEND ERENDF160

161 ZP24 ZP23 ZP2Z ZP2XF161

UO7162 UO6 UO5 UO4 UO3 UO2 UO1 UO0F162

UO15163 UO14 UO13 UO12 UO11 UO10 UO9 UO8F163

PRTSF164 RWD CKGRP ENB3 ENB2 SUCLP SCLPF164

PX7165 PX6 PX5 PX4 PX3 PX2 PX1 PX0F165

166 ZP27 ZP7 ZP47 ZP37F166

PZ7167 PZ6 PZ5 PZ4 PZ3 PZ2 PZ1 PZ0F167

168 ZRF4 ZRF3 ZRFZ ZRFXF168

ZP44169 ZP43 ZP4Z ZP4X ZP34 ZP33 ZP3Z ZP3XF169

170 TORQ7 TORQ4 TORQ3 TORQZ TORQXF170

OUT7171 OUT6 OUT5 OUT4 OUT3 OUT2 OUT1 OUT0F171

R08O172 R07O R06O R05O R04O R03O R02O R01OF172

173 R12O R11O R10O R09OF173

H4O174 H3O HZO HXO ZRNO MD4O MD2O MD1OF174

MP2O175 MP1O ROV2O ROV1O JV8O JV4O JV2O JV1OF175



B–61393E–2/02A. INTERFACE BETWEEN CNC AND PMC APPENDIX

878

#7 #6 #5 #4 #3 #2 #1 #0

DRNO176 MLKO SBKO BDTO OV8O OV4O OV2O OV1OF176

–4O177 +4O –3O +3O –ZO +ZO –XO +XOF177

SPO178 RTO KEYO SYCAL FSPPH FSPSY FSCSLF178

EDGN179 EPARM EVAR EPRG EWTIO ESTPIO ERDIO IOLNKF179

TAL180 BOFF COSP BGEACT RPALM RPBSY PRGDPL INHKYF180

181F181

182F182

For order made macro

183F183

MV4184 MV3 MVZ MVX INP4 INP3 INPZ INPXF184

S28185 S24 S22 S21 S18 S14 S12 S11F185

S48186 S44 S42 S41 S38 S34 S32 S31F186

187 S58 S54 S52 S51F187

*EAXSL188 CUT EOV0 SRNMV THRD TLNW TLCHF188

RSMAX189 SYN7OM SYN4OM SYN3OM SYN2OM SYN1OMF189

190F190

191F191

192F192

M228193 M224 M222 M221 M218 M214 M212 M211F193

M318194 M314 M312 M311 M238 M234 M232 M231F194

M338195 M334 M332 M331 M328 M324 M322 M321F195

UO107196 UO106 UO105 UO104 UO103 UO102 UO101 UO100F196

UO115197 UO114 UO113 UO112 UO111 UO110 UO109 UO108F197

UO123198 UO122 UO121 UO120 UO119 UO118 UO117 UO116F198

UO131199 UO130 UO129 UO128 UO127 UO126 UO125 UO124F199



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

879

Machine interface signal (PMC → CNC) (for tool post 1)
#7

200
#6 #5 #4

PMC window DI
#3 #2 #1 #0

G200

209G209 PMC window DI

to to

EBUFA210 ECLRA ESTPA ESOFA ESBKA EFINAG210

EC7A211 EC6A EC5A EC4A EC3A EC2A EC1A EC0AG211

EIF7A212 EIF6A EIF5A EIF4A EIF3A EIF2A EIF1A EIF0AG212

EIF15A213 EIF14A EIF13A EIF12A EIF11A EIF10A EIF9A EIF8AG213

EID7A214 EID6A EID5A EID4A EID3A EID2A EID1A EID0AG214

EID15A215 EID14A EID13A EID12A EID11A EID10A EID9A EID8AG215

EID23A216 EID22A EID21A EID20A EID19A EID18A EID17A EID16AG216

EID31A217 EID30A EID29A EID28A EID27A EID26A EID25A EID24AG217

EBUFB218 ECLRB ESTPB ESOFB ESBKB EFINBG218

EC7B219 EC6B EC5B EC4B EC3B EC2B EC1B EC0BG219

EIF7B220 EIF6B EIF5B EIF4B EIF3B EIF2B EIF1B EIF0BG220

EID15B221 EID14B EID13B EID12B EID11B EID10B EID9B EID8BG221

EID7B222 EID6B EID5B EID4B EID3B EID2B EID1B EID0BG222

EID15B223 EID14B EID13B EID12B EID11B EID10B EID9B EID8BG223

EID23B224 EID22B EID21B EID20B EID19B EID18B EID17B EID16BG224

EID31B225 EID30B EID29B EID28B EID27B EID26B EID25B EID24BG225

226G226

227G227

228G228

229G229 MRDYA ORCMA SFRA SRVA CTH1A CTH2A TLMHA TLMLA

230G230 RCHA RSLA INTGA SOCNA MCFNA SPSLA *ESPA ARSTA

231G231

232G232

233G233 MRDYB ORCMB SFRB ERVB CTH1B CTH2B TLMHB TLMLB

234G234 PCHB RSLB INTGB SOCNB MCFNB SPSLB *ESPB ARSTB



B–61393E–2/02A. INTERFACE BETWEEN CNC AND PMC APPENDIX

880

#7 #6 #5 #4 #3 #2 #1 #0

235G235

236G236

237 SYN7M SYN4M SYN3M SYN2M SYN1MG237

238 PK7M PK4M PK3M PK2M PK1MG238

239G239

240 Operator’s panel DIG240

249G249 Operator’s panel DI

to to



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

881

Machine interface signal (CNC → PMC) (for tool post 1)
#7

250
#6 #5 #4

PMC window DO
#3 #2 #1 #0

F250

269F269 PMC window DO

to to

EBSYA270 EOTNA EOTPA EGENA EDENA EIALA ECXZA EINPAF270

271 EMFAF271

EM28A272 EM24A EM22A EM21A EM18A EM14A EM12A EM11AF272

EBSYB273 EOTNB EOTPB EGEND EDENB EIALB ECKZB EINPBF273

274 EMFBF274

EM28B275 EM24B EM22B EM21B EM18B EM14B EM12B EM11BF275

B7276 B6 B5 B4 B3 B2 B1 B0F276

B15277 B14 B13 B12 B11 B10 B9 B8F277

B23278 B22 B21 B20 B19 B18 B17 B16F278

B31279 B30 B29 B28 B27 B26 B25 B24F279

280F280

281F281 ORARA TLMA LDT2A LDT1A SARA SDTA SSTA ALMA

282F282 PCFNA PCHPA CFINA CHPA

283F283

284F284

285F285 ORARB TLMB LDT2B LDT1B SARB SDTB SSTB ALMB

286F286 PCFNB PCHPB CFINB CHPB

287F287

288F288

289F289

290 Operator’s panel DOF290

299F299 Operator’s panel DO

to to



B–61393E–2/02A. INTERFACE BETWEEN CNC AND PMC APPENDIX

882

Machine interface signal (PMC → CNC) (for tool post 2)
#7

ED7100
#6

ED6
#5

ED5
#4

ED4
#3

ED3
#2

ED2
#1

ED1
#0

ED0G1300

ED15101 ED14 ED13 ED12 ED11 ED10 ED9 ED8G1301

ESTB102 EA6 EA5 EA4 EA3 EA2 EA1 EA0G1302

AFL103 PRC SPC SPB SPA SPD SPNG1303

104 RRW *FLWU ESRSYCG1304

PLCRVON105 KILPLUS SVF4 SVF3 SVFZ SVFXG1305

106G1306

M2R08I M2R07I M2R06I M2R05I M2R04I M2R03I M2R02I M2R01I

K7, 0 K6, F K5, Z K4, X K3, R K2, W K1, U K0, S

107G1307

M2SIND M2SGN M2R12I M2R11I M2R10I M2R09I

KEOB KH, I, K KA, C KP, Q KT,. KM, – K9, G K8, N

108G1308

M3R08I M3R07I M3R06I M3R05I M3R04I M3R03I M3R02I M3R01I

KSTART KINPUT KDELET KINSRT KALTER

109G1309

M3SIND M3SSIN M3SGN M3R12I M3R11I M3R10I M3R09I

KALARM KDGNOS KPARAM KOFSET KPROGRM KPOS

110G1310

SHA07 SHA06 SHA05 SHA04 SHA03 SHA02 SHA01 SHA00

KCAN KPAGE� KPAGE� KCUS� KCUS�

111G1311

SHA11 SHA10 SHA09 SHA08

KRESET

112G1312

SHB07 SHB06 SHB05 SHB04 SHB03 SHB02 SHB01 SHB00

KSL KS1 KS2 KS3 KS4 KS5 KSR

113G1313

SHB11 SHB10 SHB09 SHB08

KFWH KFUV KFZJ KFXY KFRC KFGB KFN) KFO(

KFL+114 KFT* KFS= KFM# KFF KFE KFK@ KFI,G1314

BFIN115 TFIN SFIN MFING1315

HX/ROV1116 ROV3D ROV2D ROV1D –X +X SBK BDTG1316

HZ/ROV2117 –Z +Z MLK MP1/MINPG1317

DRN118 GR2 GR1 MP2G1318

119G1319

ZRN120 *SSTP SOR SAR FIN ST STLK MIXG1320

ERS121 RT *SP *ESP *OV8 *OV4 *OV2 *OV1G1321

PN8122 PN4 PN2 PN1 KEY MD4 MD2 MD1G1322



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

883

#7 #6 #5 #4 #3 #2 #1 #0

123 SPSTP *SCPF *SUCPF RGTPN COFFG1323

R08I124 R07I R06I R05I R04I R03I R02I R01IG1324

SIND125 SSIN SGN R12I R11I R10I R09IG1325

CDZ126 SMZ *OV16 OVC HIZ HIXG1326

127 DLK DNCI *ABSM MIZ IGNVRYG1327

128 ITZ ITXG1328

129 EXLM2G1329

UI7130 UI6 UI5 UI4 UI3 UI2 UI1 UI0G1330

UI15131 UI14 UI13 UI12 UI11 UI10 UI19 UI18G1331

GOQSM132 GOQSM OFN5 OFN4 OFN3 OFN2 OFN1 OFN0G1332

WOSET133 SLPCB SLPCA NOWTG1333

134 MFIN3 MFIN2 EXWT EXSTP EXRD ENBKYG1334

135G1335

136G1336

137G1337

PKESS2138 PKESS1 *–EDCZ *–EDCX *+EDCZ *+EDCXG1338

TLRST139 TL64 TL32 TL16 TL08 TL04 TL02 TL01G1339

AOVR128140 AOVR64 AOVR32 AOVR16 UINT TLSKPG1340

BDT9141 BDT8 BDT7 BDT6 BDT5 BDT4 BDT3 BDT2G1341

142G1342

143G1343

144 EAX4 EAX3 EAX2 EAX1G1344

145G1345 GR31 GR21 *SSTP3 *SSTP2 *SSTP1 SWS3 SWS2 SWS1

146G1346 PC2SLC SBRT SPPHS SPSYC ROV2E ROV1E

147G1347 DRNE RTE OVCE *OV16E *OV8E *OV4E *OV2E *OV1E



B–61393E–2/02A. INTERFACE BETWEEN CNC AND PMC APPENDIX

884

Machine interface signal (CNC → PMC) (for tool post 2)
#7
OP148

#6
SA

#5
STL

#4
SPL

#3
ZP4

#2
ZP3

#1
ZPZ

#0
ZPXF1348

MA149 DEN2 TAP ENB DEN BAL RST ALF1349

BF150 DST TF SF MFF1350

M28151 M24 M22 M21 M18 M14 M12 M11F1351

S28152 S24 S22 S21 S18 S14 S12 S11F1352

T28153 T24 T22 T21 T18 T14 T12 T11F1353

154 SPALF1354

155 MMI2 MMI1F1355

156 BAL4 BAL3 BAL2 BAL1F1356

157 MF3 MF2 M38 M34 M32 M31F1357

AR7158 AR6 AR5 AR4 AR3 AR2 AR1 AR0F1358

AR15159 AR14 AR13 AR12 AR11 AR10 AR9 AR8F1359

PSYN160 WATO ESEND ERENDF1360

161 ZP24 ZP23 ZP2Z ZP2XF1361

UO7162 UO6 UO5 UO4 UO3 UO2 UO1 UO0F1362

UO15163 UO14 UO13 UO12 UO11 UO10 UO9 UO8F1363

PRTSF164 RWD CKGRD ENB3 ENB2 SUCLP SCLPF1364

PX7165 PX6 PX5 PX4 PX3 PX2 PX1 PX0F1365

166F1366

PZ7167 PZ6 PZ5 PZ4 PZ3 PZ2 PZ1 PZ0F1367

168 ZRF4 ZRF3 ZRFZ ZRFXF1368

ZP44169 ZP43 ZP4Z ZP4X ZP34 ZP33 ZP3Z ZP3XF1369

170 TORQ7 TORQ4 TORQ3 TORQZ TORQXF1370

OUT7171 OUT6 OUT5 OUT4 OUT3 OUT2 OUT1 OUT0F1371

R08O172 R07O R06O R05O R04O R03O R02O R01OF1372

173 R12O R11O R10O R09OF1373

174 HZO HXO ZRNO MD4O MD2O MD1OF1374

MP2O175 MP1O ROV2O ROV1O JV8O JV4O JV2O JV1OF1375



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

885

#7 #6 #5 #4 #3 #2 #1 #0

DRNO176 MLKO SBKO BDTO OV8O OV4O OV2O OV1OF1376

177 –ZO +ZO –XO +XOF1377

SPO178 RTO KEYO SYCAL FSPPH FSPSY FSCSLF1378

EDGN179 EPARM EVAR EPRG EWTIO ESTPIO ERDIO IOLNKF1379

TAL180 BOFF COSP BGEACT RPALM RPBSY RPGDPL INHKYF1380

181F1381

182F1382

183F1383

MV4184 MV3 MVZ MVX INP4 INP3 INPZ INPXF1384

S28185 S24 S22 S21 S18 S14 S12 S11F1385

S48186 S44 S42 S41 S38 S34 S32 S31F1386

187 S58 S54 S52 S51F1387

*EAXSL188 CUT EOV0 SRNMV THRD TLNW TLCHF1388

RSMAX189 SYN7OM SYN4OM SYN3OM SYN2OM SYN1OMF1389

190F1390

191F1391

192F1392

M228193 M224 M222 M221 M218 M214 M212 M211F1393

M318194 M314 M312 M311 M238 M234 M232 M231F1394

M338195 M334 M332 M331 M328 M324 M322 M321F1395

UO107196 UO106 UO105 UO104 UO103 UO102 UO101 UO100F1396

UO115197 UO114 UO113 UO112 UO111 UO110 UO109 UO108F1397

UO123198 UO122 UO121 UO120 UO119 UO118 UO117 UO116F1398

UO131199 UO130 UO129 UO128 UO127 UO126 UO125 UO124F1399



B–61393E–2/02A. INTERFACE BETWEEN CNC AND PMC APPENDIX

886

Machine interface signal (PMC → CNC) (for tool post 2)
#7

200
#6 #5 #4

PMC window DI
#3 #2 #1 #0

G1400

209G1409 PMC window DI

to to

Machine interface signal (CNC → PMC) (for tool post 2)
#7

250
#6 #5 #4

PMC window DO
#3 #2 #1 #0

F1450

269F1469 PMC window DO

to to

EBSYA270 EOTNA EOTPA EGENA EDENA EIALA ECXZA EINPAF1470

271 EMFAF1471

EM28A272 EM24A EM22A EM21A EM18A EM14A EM12A EM11AF1472

EBSYB273 EOTNB EOTPB EGEND EGENB EIALB ECKZB EINPBF1473

274 EMFBF1474

EM28B275 EM24B EM22B EM21B EM18B EM14B EM12B EM11BF1475

B7276 B6 B5 B4 B3 B2 B1 B0F1476

B15277 B14 B13 B12 B11 B10 B9 B8F1477

B23278 B22 B21 B20 B19 B18 B17 B16F1478

B31279 B30 B29 B28 B27 B26 B25 B24F1479



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

887

��� � �����

�
� �	 � ��� ������� ����

#7
000

#6 #5 #4 #3 #2 #1 #0
X000

M18–36 M18–21 M18–5 M18–35 M18–20 M18–34 M18–19 M18–33

002X002

M18–24 M18–8 M18–38 M18–23 M18–7 M18–37 M18–22 M18–6

4NG004X004

M18–11 M18–41 M18–26 M18–10 M18–40 M18–25 M18–9 M18–39

006X006

M18–45 M18–14 M18–44 M18–13 M18–43 M18–12 M18–42 M18–27

SKIP008 *RILK ZAE YAE XAEX008

M18–49 M18–18 M18–48 M18–17 M18–47 M18–16 M18–46 M18–15

010 / / / /X010

M20–11 M20–41 M20–26 M20–10

012X012

M20–45 M20–14 M20–44 M20–13 M20–43 M20–12 M20–42 M20–27

014X014

M20–49 M20–18 M20–48 M20–17 M20–47 M20–16 M20–46 M20–15

HX/ROV1016 / *DECX / –X +X SBK BDTX016

M1–6 M1–38 M1–20 M1–21 M1–11 M1–12

HY/ROV2017 / *DECY / –Y +Y MLK *ILKX017

M1–7 M1–39 M1–22 M1–23 M1–9 M1–10

HZ/DRN018 / *DECZ / –Z +Z / /X018

M1–8 M1–40 M1–24 M1–25

H4019 / *DEC4 / –4 +4 / /X019

M20–40 M20–25 M20–9 M20–39

ZRN020 *SSTP SOR SAR FIN ST MP2 MP1/MINPX020

M1–13 M1–37 M1–5 M1–14 M1–15 M1–16 M1–17 M1–18

ERS021 RT *SP *ESP *OV8 *OV4 *OV2 *OV1X021

M1–41 M1–26 M1–27 M1–19 M1–33 M1–34 M1–35 M1–36

PN8022 PN4 PN2 PN1 KEY MD4 MD2 MD1X022

M1–42 M1–43 M1–44 M1–45 M1–46 M1–47 M1–48 M1–49

��� �� �		�
��
�

������� ����



B–61393E–2/02A. INTERFACE BETWEEN CNC AND PMC APPENDIX

888

�	� ��� � �� ���
�� ����
#7
OP048

#6
SA

#5
STL

#4
SPL

#3
/

#2
ZPZ/EF

#1
ZPY

#0
ZPXY048

M2–5 M2–6 M2–7 M2–8 M2–27 M2–26 M2–25

MA049 / / ENB DEN / RST ALY049

M2–9 M2–41 M2–22 M2–23 M2–24

/050 / DST / TF SF / MFY050

M2–10 M2–20 M2–19 M2–21

M28051 M24 M22 M21 M18 M14 M12 M11Y051

M2–33 M2–34 M2–35 M2–36 M2–37 M2–38 M2–39 M2–40

S28052 S24 S22 S21 S18 S14/GR30 S12/GR20 S11/GR10Y052

M2–11 M2–12 M2–13 M2–14 M2–15 M2–16 M2–17 M2–18

T28053 T24 T22 T21 T18 T14 T12 T11Y053

M2–42 M2–43 M2–44 M2–45 M2–46 M2–47 M2–48 M2–49

080Y080

M19–8 M19–7 M19–6 M19–5 M19–4 M19–3 M19–2 M19–1

082Y082

M19–16 M19–15 M19–14 M19–13 M19–12 M19–11 M19–10 M19–9

084 ZP4Y084

M20–36 M20–21 M20–5 M20–35 M20–20 M20–34 M20–19 M20–33

086Y086

M20–24 M20–8 M20–38 M20–23 M20–7 M20–37 M20–22 M20–6



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

889

��� �������

��� �� � ��� �������� ���

#7
000

#6 #5 #4 #3 #2 #1 #0
X000

M18–36 M18–21 M18–5 M18–35 M18–20 M18–34 M18–19 M18–33

002X002

M18–24 M18–8 M18–38 M18–23 M18–7 M18–37 M18–22 M18–6

004X004

M18–11 M18–41 M18–26 M18–10 M18–40 M18–25 M18–9 M18–39

006X006

M18–45 M18–14 M18–44 M18–13 M18–43 M18–12 M18–42 M18–27

SKIP008 SKIP4 SKIP3 SKIP2 ZAE XAEX008

M18–49 M18–18 M18–48 M18–17 M18–47 M18–16 M18–46 M18–15

SKIP ZAE XAE

��
���
�	 ��� ����� �����

010 / / / /X010

M20–11 M20–41 M20–26 M20–10

012X012

M20–45 M20–14 M20–44 M20–13 M20–43 M20–12 M20–42 M20–27

014X014

M20–49 M20–18 M20–48 M20–17 M20–47 M20–16 M20–46 M20–15

HX/ROV1016 / *DECX / –X +X SBK BDTX016

M1–6 M1–38 M1–20 M1–21 M1–11 M1–12

HY/ROV2017 / *DECY / –Z +Z MLK MP1/MINPX017

M1–7 M1–39 M1–22 M1–23 M1–9 M1–10

DRN018 / *+LZ / GR2 GR1 / /X018

M1–8 M1–40 M1–24 M1–25

*DEC3019 / *DEC4 / / /X019

M20–40 M20–25 M20–9 M20–39

ZRN020 *SSTP SOR SAR FIN ST STLK MIXX020

M1–13 M1–37 M1–5 M1–14 M1–15 M1–16 M1–17 M1–18

ERS021 RT *SP *ESP *OV8 *OV4 *OV2 *OV1X021

M1–41 M1–26 M1–27 M1–19 M1–33 M1–34 M1–35 M1–36

PN8022 PN4 PN2 PN1 KEY MD4 MD2 MD1X022

M1–42 M1–43 M1–44 M1–45 M1–46 M1–47 M1–48 M1–49



B–61393E–2/02A. INTERFACE BETWEEN CNC AND PMC APPENDIX

890

�	� ��� � �� ���
�� ����
#7
OP048

#6
SA

#5
STL

#4
SPL

#3
/

#2 #1
ZPT

#0
ZPXY048

M2–5 M2–6 M2–7 M2–8 M2–27 M2–26 M2–25

MA049 / / ENB DEN / RST ALY049

M2–9 M2–41 M2–22 M2–23 M2–24

/050 / DST / TF SF / MFY050

M2–10 M2–20 M2–19 M2–21

M28051 M24 M22 M21 M18 M14 M12 M11Y051

M2–33 M2–34 M2–35 M2–36 M2–37 M2–38 M2–39 M2–40

S28052 S24 S22 S21 S18 S14 S12 S11Y052

M2–11 M2–12 M2–13 M2–14 M2–15 M2–16 M2–17 M2–18

T28053 T24 T22 T21 T18 T14 T12 T11Y053

M2–42 M2–43 M2–44 M2–45 M2–46 M2–47 M2–48 M2–49

080Y080

M19–8 M19–7 M19–6 M19–5 M19–4 M19–3 M19–2 M19–1

082Y082

M19–16 M19–15 M19–14 M19–13 M19–12 M19–11 M19–10 M19–9

084Y084

M20–36 M20–21 M20–5 M20–35 M20–20 M20–34 M20–19 M20–33

086Y086

M20–24 M20–8 M20–38 M20–23 M20–7 M20–37 M20–22 M20–6



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

891

Meaning of symbols in the below table
�: Available
�: 0–TTC only
� : Available for 0–GCC or 0–GSC only
Blank : Unavailable

Function Signal name Symbol T M Address Ref.item

Axis moving state Axis moving signal
MVX, MVY, MVZ, MV4  �

F188 4 to F188 7 1 2 4g
output

Axis moving signal
MVX, MVZ, MV3, MV4 �  

F188.4 to F188.7 1.2.4

Mirror image check signal MMI1, MMI2 �  F158.0, F158.1

Mirror image

Mirror image check signal MMI1, MMI2, MMI4  �
F158.0, F158.1,
F158.3,

1 2 5Mirror image
Mirror image signal MIX, MIZ �  G120.0, G127.1

1.2.5

Mirror image signal MIRX, MIRY, MIR4  �
G127.0, G127.1,
G127.7

Follow–up Follow–up signal *FLWU � � G104.5 1.2.6

Servo off
(mechanical Servo off signal

SVFX, SVFZ, SVF3, SVF4 �  G105.0, G105.1, 1 2 7(mechanical
handle)

Servo off signal
SVFX, SVFY, SVFZ, SVF4  � G105.2, G105.3

1.2.7

Position switch Position switch signal PSW01 to PSW10 � �
F190, F191.0,
F191.1

1.2.8

Ignore–the–fourth–
axis–signal

Ignore–the–fourth–axis–
signal

4NG  � X004.7 1.4.3

Cancel–the–Z–axis
command signal

Cancel–the–Z–axis
command signal

ZNG  � G103.6 1.4.4

Servo axis synchronization
alarm signal

SYNAL  � F192.7

Simple
synchronous

Signals to select the slave
axis for simple synchronous

SYNCX, SYNCZ, SYNC3,
SYNC4

�  G237.0 to G237.3

1 6synchronous
control

y
control SYNC4  � G237.3

1.6

Signal for selecting the
manual feed axis for simple
synchronous control

SYNCJ  � G133.6

Synchronization control start
signals (tool post 1)

PK1M, PK2M, PK3M,
PK4M, PK7M

�  
G238.0, G238.1,
G238.2, G238.3,
G238.4

Axis recomposition

Synchronization control start
signals (tool post 2)

PK1S, PK2S, PK3S, PK4S �  
G1438.0, G1438.1, 
G1438.2, G1438.3

1 7Axis recom osition

Synchronization control start
signals (tool post 1)

SYN1M, SYN2M, SYN3M,
SYN4M, SYN7M

�  
G237.0, G237.1,
G237.2, G237.3,
G237.4

1.7

Synchronization control start
signals (tool post 2)

SYN1S, SYN2S, SYN3S,
SYN4S

�  
G1437.0, G1437.1, 
G1437.2, G1437.3

A.2
LIST OF SIGNALS

A.2.1
List of Signals 
(In Order of Functions)



A. INTERFACE BETWEEN CNC AND PMC B–61393E–2/02APPENDIX

892

Function
Ref.
itemAddressMTSymbolSignal name

Axis recomposition signals
(tool post 1)

SYN1OM, SYN2OM,
SYN3OM, SYN4OM,
SYN7OM

�  
F189.0, F189.1,
F189.2, F189.3,
F189.4

Axis recomposition Axis recomposition signals
(tool post 2)

SYN1OS, SYN2OS,
SYN3OS, SYN4OS

�  
F1389.0, F1389.1, 
F1389.2, F1389.3

1.7

Composite control start
signals

MIX1, MIX2, MIX3, MIX4 �  
G1437.4, G1437.5,
G1437.7, G1437.6,

Angular axis control
Angular axis control–related
Z–axis compensation NOZAGC

�  G133.6
1 8g

(0–GCC, 0–GSC)
Z–axis com ensation
movement signal

NOZAGC
 � G237.5

1.8

Position signal
output (T series)

Position signal output signal PX0 to PX7, PZ0 to PZ7 �  
F165.0 to F165.7,
F167.0 to F167.7

1.9

Cf axis control (T
series)

C–axis–off signal COFF � G123.0 1.10

Emergency stop Emergency stop signal *ESP, *ESP � � X021.4, G121.4 2.1

CNC ready signal
Servo ready signal SA � � F148.6

2 2CNC ready signal
CNC ready signal MA � � F149.7

2.2

*+LZ �  X018.5

Overtravel check Overtravel signal *+LX, *+LY, *+LZ, *–LX,
*–LY, *–LZ

 �
X020.0, X020.1,
X020.2, X020.3,
X020.4, X020.5

2.3.1

Stored stroke check

Stroke check external setting
signals

+LMX, +LMY, +LMZ,
–LMX, –LMY, –LMZ

 �
G129.0, G129.1,
G129.2, G129.3,
G129.4, G129.5

2 3 2
Stored stroke check
1 Stroke check release signal RLSOT  � G129.7 2.3.2

Stored stroke check select
signal

EXLM2 � � G129.6

Tool post
interference check

Tool post interference alarm
signal

TAL �  F180.7

2 3 4interference check
(0–TTC) Tool post interference check

signal
BOFF �  F180.6

2.3.4

Alarm signal AL � � F149.0

Alarm signal
Battery alarm signal BAL � � F149.2

2 4Alarm signal
Absolute pulse coder battery BAL1 to BAL4 BAL7 BAL8

 � F159.0 to F159.5
2.4

y
alarm signal

BAL1 to BAL4,BAL7,BAL8
�  F156.0 to F156.5

Interlock signal for each axis
*ITX, *ITY, *ITZ, *IT4  � G128.0, G128.1,Interlock signal for each axis
ITX, ITZ, IT3, IT4 �  G128.2, G128.3

Start lock/interlock

+MIT1, –MIT1, +MIT2,
–MIT2

�  
X008.2, X008.3
X008.4, X008.5

2 5Start lock/interlock Interlock signal for each axis
and direction *+MITX, *+MITY, *+MITZ,

*+MIT4, *–MITX, *–MITY,
*–MITZ, *–MIT4

 �

G142.0, G142.1,
G142.2, G142.3,
G142.4, G142.5,
G142.6, G142.7

2.5

High–speed interlock signal *RILK  � X008.5



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

893

Function
Ref.
itemAddressMTSymbolSignal name

Start lock/interlock
Start lock signal STLK �  G120.1

2 5Start lock/interlock
Interlock signal *ILK  � G117.0

2.5

M d l ti M d l ti i l

MD1, MD2, MD4 � �
G122.0, G122.1,
G122.2

2 6Mode selection Mode selection signal DNCI � � G127.5 2.6

ZRN � � G120.7

Tool post selection
(0–TTC)

Tool post selection signal TRT2, TRT2PC �  X018.3, G133.0 2.7

Status output signal
Cutting feed signal CUT � � F188.6

2 8Status out ut signal
Canned cycle start signal FXST  � F161.4

2.8

VRDY off alarm All–axis CRDY OFF alarm IGNVRY  � G123.0 2 9
ignore signal ignore signal IGNVRY �  G127.0

2.9

Feedrate override signal *OV1, *OV2, *OV4, *OV8 � �
G121.0, G121.1,
G121.2, G121.3

Jog Feed axis and direction

+X, –X, +Z, –Z, +3, –3, +4,
–4

�  G116.2, G116.3, 
G117.2, G117.3, Jog

feed/incremental
feed

select signal +X, –X, +Y, –Y, +Z, –Z, +4,
–4

 �
G118.2, G118.3,
G119.2, G119.3

3.1

Jog feedrate override signal JOV1 to JOV8  � G104.0 to G104.3

Manual rapid traverse select
signal

RT � � G121.6

Manual handle feed axis
selection signal for Z axis

SLHZ0, SLHZ1  � G133.0, G133.1

M l h dl f d
Manual handle feed axis HX, HZ, H3, H4 �  G116.7, G117.7,

3 2Manual handle feed selection signal HX, HY, HZ, H4  � G118.7, G119.7 3.2

Manual handle heed amount MP1, MP2 �  G117.0, G118.0

selection signal MP1, MP2  � G120.0, G120.1

Manual handle Manual handle interrupt axis HIX, HIY, HIZ, HI4  � G126.0, G126.1, 3 3
interruption selection signal HIX, HIZ, HI3, HI4 �  G126.2, G126.3

3.3

Manual reference position
return selection signal

ZRN � � G120.7

Reference position ZRFX, ZRFZ, ZRF3, ZRF4 �  F168.0, F168.1,
establishment signal ZRFX, ZRFY, ZRFZ, ZRF4  � F168.2, F168.3

Manual reference
position return

Reference position return ZPX, ZPZ, ZP3, ZP4 �  F148.0, F148.1, 4.1position return completion signal ZPX, ZPY, ZPZ, ZP4  � F148.2, F148.3
4.1

Reference position return

*DECX, *DECZ, *DEC3,
*DEC4,

�  
X016.5, X017.5,

deceleration signals *DECX, *DECY, *DECZ,
*DEC4,

 �
X018.5, X019.5



A. INTERFACE BETWEEN CNC AND PMC B–61393E–2/02APPENDIX

894

Function
Ref.
itemAddressMTSymbolSignal name

Second reference position ZP2X, ZP2Z, ZP23, ZP24 �  F161.0, F161.1,

2nd reference

return completion signals ZP2X, ZP2Y, ZP2Z, ZP24  � F161.2, F161.3

2nd reference
position return / 3rd, Third reference position ZP3X, ZP3Z, ZP33, ZP34 �  F169.0, F169.1, 4 5
4th reference
position return

return completion signals ZP3X, ZP3Y, ZP3Z, ZP34  � F169.2, F169.3
4.5

osition return

Fourth reference position ZP4X, ZP4Z, ZP43, ZP44 �  F169.4, F169.5,
return completion signals ZP4X, ZP4Y, ZP4Z, ZP44  � F169.6, F169.7

Manual data input start signal DST � � F150.5

Feed hold lamp signal SPL � � F148.4

Cycle start/feed Automatic operation signal OP � � F148.7 5 1y
hold Feed hold signal *SP � � G121.5

5.1

Cycle start lamp signal STL � � F148.5

Cycle start signal ST � � G120.2

Reset and rewind signal RRW � � G104.6

Reset and rewind
Resetting signal RST � � F149.1

5 2Reset and rewind
Rewinding signal RWD � � F164.6

5.2

External reset signal ERS � � G121.7

Machine lock All–axis machine lock signal MLK � � G117.1 5.3.1

Dry run Dry run signal DRN � � G118.7 5.3.2

Single block Single block signal SBK � � G116.1 5.3.3

Manual absolute
on/off

Manual absolute signal *ABSM � � G127.2 5.4

Optional block skip /
addition of optional
block skip

Optional block skip signals BDT1, BDT2 to BDT9 � �
G116.0, G141.0 to
G141.7

5.5

Program restart signal SRN � � G103.0

Program restart Program restart under way
signal

SRNMV � � F188.4
5.7

DNC operation DNC operation select signal DNCI � � G127.5 5.10

Output signals for remote RMTDO0 to RMTDO7
�  F289.0 to F289.7

Romote buffer
DI/DO signals

g
buffer

RMTDO0 to RMTDO7
 � F290.0 to F290.7

5.11DI/DO signals
Input signals for remote
buffer

RMTDI0 to RMTDI7 � � G239.0 to G239.7

5.11

In–feed control
In–feed control cut–in start
signal

INFD  � G237.6 5.12

Thread cutting Thread cutting signal THRD �  F188.3 6.4.1

Polygonal turning
Polygon synchronization
under way signal

PSYN �  F160.7 6.9.1

F1–digit feed F1–digit feed select signal F1D  � G140.7 7.1.5

Rapid traverse
override

Rapid traverse override
signal

ROV1, ROV2 � � G116.7, G117.7 7.1.6.1



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

895

Function
Ref.
itemAddressMTSymbolSignal name

*OV1, *OV2, *OV4, *OV8 � �
G121.0, G121.1,
G121.2, G121.3

3.1,
7.1.6.2

Feedrate override Feedrate override signal
*AOV16, *AOV32,
*AOV64, *AOV128

 �
G116.4, G116.5,
G116.6, G117.6

7 1 6 2
*AOVR16, *AOVR32,
*AOVR64, *AOVR128

�  
G140.4, G140.5,
G140.6, G140.7

7.1.6.2

Rapid traverse
override B

Rapid traverse override B
signal

ROV1D, ROV2D, ROV3D �  
G116.4, G116.5,
G116.6

7.1.6.3

Override cancel Override cancel signal OVC � � G126.4 7.1.6.4

External

*+EDCX, *+EDCZ,
*–EDCX , *–EDCZ

�  
G138.0, G138.1,
G138.3, G138.4

External
deceleration External deceleration signal *+EDCX, *+EDCY,

*+EDCZ, *–EDCX,
*–EDCY, *–EDCZ

 �
G138.0, G138.1,
G138.2, G138.3,
G138.4, G138.5

7.1.8

In–position check In–position signals INP1 to INP4 � � F184.0 to F184.3 7.2.5.1

Error detect Error detect signal SMZ �  G126.6 7.2.5.3

Signals output
according to the
speed or travel
along an axis (M
series)

Signals output according to
the speed or travel along an
axis

SPDS1, SPDS2, SPDS3,
SPDS4

 �
F189.0, F189.1,
F189.2, F189.3

7.2.5.4

Tool function code signals
T11 to T28 �  F153.0 to F153.7

Tool function code signals
T11 to T48  � F153.0 to F156.7

Tool function strobe signals TF � � F150.3

Second auxiliary function B0 to B31 �  F276.0 to F279.7y
code signals B11 to B38  � F155.0 to F154.3

Second auxiliary function BF �  F150.7y
strobe signals BF1, BF2  � F150.7, F150.6

Decode M signals M00, M01, M02, M30  �
F154.7, F154.6,
F154.5, F154.4

8 1

Miscellaneous
function / 2nd
auxiliary function

Miscellaneous function code
signal

M11, M12, M14, M18,
M21, M22, M24, M28,
M31, M32, M34, M38

� �

F151.0, F151.1,
F151.2, F151.3,
F151.4, F151.5,
F151.6, F151.7,
F157.0, F157.1,
F157.2, F157.3

8.1

Miscellaneous function
strobe signal

MF � � F150.0

End signal FIN � � G120.3

Distribution end signals DEN � � F149.3

Passing point signal DEN2 � F149.6

Spindle–speed code signals
S11, S12, S14, S18, S21,
S22, S24, S28

� �

F152.0, F152.1,
F152.2, F152.3,
F152.4, F152.5,
F152.6, F152.7

8.1, 9.3



A. INTERFACE BETWEEN CNC AND PMC B–61393E–2/02APPENDIX

896

Function
Ref.
itemAddressMTSymbolSignal name

Miscellaneous
function / 2nd
auxiliary function

Spindle–speed strobe
signals

SF � � F150.2 8.1, 9.3

Auxiliary function
lock

Auxiliary function lock signal AFL � � G103.7 8.2

M lti l M

2nd M function code signal
M211, M212, M214, M218,
M221, M222, M224, M228,
M231, M232, M234, M238

� �

F193.0, F193.1,
F193.2, F193.3,
F193.4, F193.5,
F193.6, F193.7,
F194.0, F194.1,
F194.2, F194.3

Multiple M
commands in a
single block

3rd M function code signal
M311, M312, M314, M318,
M321, M322, M324, M328,
M331, M332, M334, M338

� �

F194.4, F194.5,
F194.6, F194.7,
F195.0, F195.1,
F195.2, F195.3,
F195.4, F195.5,
F195.6, F195.7

8.3

2nd, 3rd M function strobe
signal

MF2, MF3 � � F157.4, F157.5

Miscellaneous function
completion signal

MFIN � � G115.0 8.4

2nd, 3rd M function
completion signal

MFIN2, MFIN3 � � G134.4, G134.5

External operation signal for
high–speed interface

EF  � F150.1
8.4

High–speed 2nd auxiliary function BFIN �  G115.7g
M/S/T/B interface

y
completion signal BFIN1, BFIN2  � G115.7, G115.6 8.4

Tool function completion
signal

TFIN � � G115.3

Spindle function completion
signal

SFIN � � G115.2 8.4

External operation function
completion signal

EFIN  � G115.1

Waiting M code Waiting signal WATO �  F160.6 8 5g
(0–TTC) No–wait signal NOWT �  G133.1

8.5

Spindle enable signal ENB � � F149.4 9.3

GR1 GR2
�  G118.2, G118.3 9.3, 9.5,

9.8, 9.9,

Spindle speed

Gear selection signal

GR1, GR2
 � G123.2, G123.3

9.10,
9.11

Spindle speed
control GR1O, GR2O, GR3O  �

G152.0, G152.1,
G152.2

9.3, 9.9

Spindle speed override
signal

SPA, SPB, SPC, SPD �  
G103.3, G103.4,
G103.5, G103.2

9 3
Spindle speed override
signal

SPA, SPB, SPC  �
G103.3, G103.4,
G103.5

9.3



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

897

Function
Ref.
itemAddressMTSymbolSignal name

S12–bit code signal R01O to R12O � � F172.0 to F173.3
9.3,
15.4

Spindle speed
control

Spindle speed arrival signal SAR � � G120.4
control

Spindle orientation signal SOR � � G120.5 9.3

Spindle stop signal *SSTP � � G120.6

S i dl d

Spindle command select
signal

SLSPA, SLSPB �  G133.2, G133.3

Spindle speed
control for 0–TTC

Spindle feedback select
signal;

SLPCA, SLPCB �  G1333.2, G1333.3
9.4

Spindle command signal; COSP �  F180.5

Spindle speed
fluctuation detection

Spindle fluctuation detection
alarm signal

SPAL �  F154.0 9.6

Actual spindle
speed otuput (T
series)

Actual spindle speed signal AR0 to AR15 �  F158.0 to F159.7 9.7

Spindle unclamp completion
signal

*SUCPF �  G123.4

Spindle clamp signal SCLP �  F164.0

Spindle unclamp signal SUCLP �  F164.1

Spindle positioning
(T series)

Spindle stop complete signal SPSTP �  G123.6
9.8(T series)

Spindle clamp completion
signal

*SCPF �  G123.5

9.8

Spindle orientation
completion signal

ZP3 � F148.2

Gear selection signal CTH1A CTH2A � � G229.3, G229.2

Spindle contour control COFF �  G123.0

change signal CON  � G123.7

Cs contour control

Clutch/gear signal (serial
spindle)

CTH1A CTH2A � � G229.3, G229.2

9 9Cs contour control
Spindle contour control
change completion signal

FSCSL  � F178.1
9.9

Cs contour control axis
reference position return

ZP3 �  F148.2
reference osition return
completion signal ZP4  � F148.3

Individual spindle stop signal *SSTP1, *SSTP2, *SSTP3 �  
G145.3, G145.4,
G145.5

Gear selection signal for 2nd
spindle

GR21 �  G145.6

Multi spindle
Gear selection signal for 3rd
spindle

GR31 �  G145.7
9.10,
9.11

Spindle selection signal SWS1, SWS2, SWS3 �  
G145.0, G145.1,
G145.2

2nd position coder selection
signal

PC2SLC �  G146.7



A. INTERFACE BETWEEN CNC AND PMC B–61393E–2/02APPENDIX

898

Function
Ref.
itemAddressMTSymbolSignal name

ENB � � F149.4

Spindle speed
control

Spindle enable signal
ENB2, ENB3 �  

F149.4, F164.2,
F164.3

9.3,
9.10,
9 11control

Gear selection signal GR1O, GR2O, GR3O  �
G152.0, G152.1,
G152.2

9.11

Spindle rotation direction
signal

RGSPM, RGSPP  � F165.1, F165.0

Rigid tapping
Spindle–speed function code
signal (BCD output)

S11 to S58 � � F185.0 to F187.3 9.11

Spindle function strobe signal SF � � F150.2

Rigid tapping signal RGTPN � � G123.1

Tapping return start signal RTNT � G123.6

Rigid tapping return Tapping return completion
signal

RTPT � F192.6
9.12

Spindle synchronous control
signal

SPSYC � � G146.2

S i dl

Spindle phase synchronous
control signal

SPPHS � � G146.3

9 13Spindle
synchronous
control

Spindle synchronous speed
control completion signal

FSPSY � � F178.2

9.13

control
Spindle phase synchronous
control completion signal

FSPPH � � F178.3

Spindle synchronous control
alarm signal

SYCAL � � F178.4
9.13,
9.18

Controlling the
spindle speed ratio

Spindle synchronous
polygon code signal

SBRT �  G146.6

s indle s eed ratio
for serial interface
spindles (0–TTC)

Serial spindle
synchronization polygon
signal

RSMAX �  F189.7

9.14

Spindle orientation

1st spindle orientation
external stop position
command signal

SHA00 to SHA11 � �
G110.0 to G110.7,
G111.0 to G111.3

9 15S indle orientation
2nd spindle orientation
external stop position
command signal

SHB00 to SHB11 � �
G112.0 to G112.7,
G113.0 to G113.3

9.15

Position coder
feedback control

Position coder return control
signal

PLCRVON � � G105.7

9 17feedback control
function Position coder feedback

direction selection signal
KILPLUS � � G105.6

9.17

Serial spindle Parking signal for 1st spindle PKESS1 � � G138.6

simple synchronous
control

Parking signal for 2nd
spindle

PKESS2 � � G138.7
9.18

Serial spindle
simple synchronous
control

Spindle simple synchronous
control signal

ESRSYC � � G104.4 9.18



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

899

Function
Ref.
itemAddressMTSymbolSignal name

Individual tool change signal TLCHI  � F192.0

All tools’ life expired signal TLCHE  � F192.1

New tool select signal TLNW � � F188.1

Remaining tool life expired
signal

TLCHB  � F192.2

Tool life
Tool change signal TLCH � � F188.0

Tool life
management Individual tool change reset

signal
TLRSTI  � G140.4

10.3

Tool skip signal TLSKP � � G140.0

Tool group number select
signal

TL01, TL02, TL04, TL08,
TL16, TL32, TL64

� �

G139.0, G139.1,
G139.2, G139.3,
G139.4, G139.5,
G139.6

Tool change reset signal TLRST � � G139.7

Custom macro
Custom macro output signal

UO000 to UO015,

UO100 to UO131
� �

F162.0 to F163.7,
F196.0 to F199.7 11.6.1

Custom macro input signal UI000 to UI015 � � G130.0 to G131.7

Interruption type
custom macro

Interrupt signal for custom
macro

UINT � � G140.3 11.6.2

Canned cycle (M
series) / Canned
cycle for hole
machining (T
series)

Tapping signal TAP � � F149.5 11.7

Smalldiameter peck
Skip signal SKIP � � X008.7

Smalldiameter eck
drilling cycle (M
series)

Small–diameter peck drilling
cycle execution in progress
signal

PECK2 � F180.7
11.8

External motion
function (M series)

External operation signal EF  � F150.1 11.9

Canned cycle Chamfering signal CDZ �  G126.7 11.10

B axis clamp completion
signal

*BECLP  � G143.7

Index table indexing B axis unclamp signal BUCLP  � F188.2 11 12g
function (M series) B axis clamp signal BCLP  � F188.3

11.12

B axis unclamp completion
signal

*BEUCP  � G143.6

Display and setting *LDSP � � G119.0

Display/setting Renewal disable signal of
relative coordinate

DLK � � G127.6
12.1

Run hour and parts
count display

Required parts count
reached signal

PRTSF � � F164.7 12.1.7

Graphic display /
Dynamic graphic
display

Drwing signal CKGRP � � F164.5 12.1.8



A. INTERFACE BETWEEN CNC AND PMC B–61393E–2/02APPENDIX

900

Function
Ref.
itemAddressMTSymbolSignal name

Software operator’s panel
general–purpose switch
signal (software operator’s
panel signal)

OUT0 to OUT7 � � F171.0 to F171.7

Jog rapid traverse select
signal (software operator’s
panel signal)

RTO � � F178.6

Feed hold signal (software
operator’s panel signal)

SPO � � F178.7

Mode select signal (software
operator’s panel signal)

MD1O, MD2O, MD4O � �
F174.0, F174.1,
F174.2

Manual pulse generator feed
axis select signal (software

HXO, HYO, HZO, HZ4  � F174.4, F174.5,axis select signal (software
operator’s panel signal) HXO, HZO, H3O, H4O �  F174.6, F174.7

Jog feedrate override signal
(software operator’s panel
signal)

JV1O, JV2O, JV4O, JV8O � �
F175.0, F175.1,
F175.2, F175.3

Mode select signal (software
operator’s panel signal)

ZRNO � � F174.3

Dry run signal (software
operator’s panel signal)

DRNO � � F176.7

Software operator’s
panel

Machine lock signal
(software operator’s panel
signal)

MLKO � � F176.6
12.1.10

Single block signal (software
operator’s panel signal)

SBKO � � F176.5

Optional block skip signal
(software operator’s panel
signal)

BDTO � � F176.4

Jog feed axis select signal
(software operator’s panel

+XO, –XO, +ZO, –ZO,
+YO, –YO, +4O, –4O

�  F177.0, F177.1,
F177.2, F177.3,(software o erator s anel

signal) +XO, –XO, +YO, –YO,
+ZO, –ZO, +4O, –4O

 �
F177.4, F177.5,
F177.6, F177.7

Rapid traverse override
signal (software operator’s
panel signal)

ROV1O, ROV2O � � F175.4, F175.5

Program protect signal
(software operator’s panel
signal)

KEYO � � F178.5

Feedrate override signal
(software operator’s panel
signal)

OV1O, OV2O, OV4O,
OV8O

� �
F176.0, F176.1,
F176.2, F176.3

Select of magnification of
manual pulse generator
(software operator’s panel
signal)

MP1O, MP2O � � F175.6, F175.7

Memory protection
key

Program protect signal KEY � � G122.3 12.2.3



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

901

Function
Ref.
itemAddressMTSymbolSignal name

Read/punch alarm signal RPALM � � F180.3

External read/punch stop
signal

EXSTP � � G134.2

External I/O device
control

External punch start signal EXWT � � G134.3 13.5control
Background editing signal BGEACT � � F180.4

External read start signal EXRD � � G134.1

Read/punch busy signal RPBSY � � F180.2

Simltaneous input
and output

Input and run simultaneous
mode select signal

STRD  � G140.5

13 6and out ut
operations Output and run simultaneous

mode select signal
STWD  � G140.6

13.6

External program External program input start MINP
�  G117.0

13 7g
input

g
signal

MINP
 � G120.0

13.7

Automatic tool
length Measuring position reached

XAE, ZAE �  X008.0, X008.1
g

measurement (M
series) / automatic
tool offset (T series)

Measuring osition reached
signals

XAE, YAE, ZAE  �
X008.0, X008.1,
X008.2

14.2

Skip function Skip signal SKIP � � X008.7
14.3.1,
14.3.3

Multi–step skip
function

Skip signal SKIP2, SKIP3, SKIP4 �
X008.2, X008.3,
X008.4

14.3.3

Torque limit skip (T
series)

Torque limit reached signal
TORQ1, TORQ2, TORQ3,
TORQ4, TORQ7, TORQ8

�  
F170.0, F170.1,
F170.2, F170.3,
F170.4, F170.5

14.3.4

Input of tool offset
value measured A

Position record signal PRC �  G103.6 14.4.1

Tool offset write mode select
signal

GOQSM �  G132.7 14.4.2

Tool offset write signal
+MIT1, –MIT1, +MIT2,
–MIT2

�  
X008.2, X008.3
X008.4, X008.5

2.5,
14.4.2

Input of tool offset

Tool offset number select
signal

OFN0, OFN1, OFN2,
OFN3, OFN4

�  
G132.0, G132.1,
G132.2, G132.3,
G132.4

In ut of tool offset
value measured B
(T series)

Workpiece coordinate
system shift value write
signal

WOSET �  G133.7

14 4 2
Workpiece coordinate
system shift value write
mode select signal

WOQSM �  G132.6

14.4.2

Tool compensation number
automatic selection disable
signal

TNFS �  G132.5

Grinding wheel
diameter automatic
compensation

Grinding wheel diameter
automatic compensation
signal

GWLF  � F165.3 14.4.4



A. INTERFACE BETWEEN CNC AND PMC B–61393E–2/02APPENDIX

902

Function
Ref.
itemAddressMTSymbolSignal name

Axis control command signal
(PMC axis control )

EC0A to EC6A, EC0B to
EC6B

� �
G211.0 to G211.6,
G219.0 to G219.6

Auxiliary function executing
signal (PMC axis control )

EDENA, EDENB � � F270.3, F273.3

Alarm signal (PMC axis
control )

EIALA, EIALB � � F270.2, F273.2

Control axis selection status
signal (PMC axis control)

*EAXSL � � F188.7

Following zero checking
signal (PMC axis control )

ECKZA, ECZKB � � F270.1, F273.1

Override 0% signal (PMC
axis control )

EOV0 � � F188.5

In–position signal (PMC axis
control)

EINPA, EINPB � � F270.0, F273.0

Axis control feedrate signal
(PMC axis control)

EIF0A to EIF15A, EIF0B to
EIF15B

� �
G212.0 to G213.7,
G220.0 to G221.7

Positive–direction overtravel
signal (PMC axis control)

EOTPA, EOTPB � � F270.5, F273.5

Skip signal (PMC axis control
)

ESKIP � � X008.6

PMC axis control

Axis moving signal (PMC
axis control )

EGENA, EGENB � � F270.4, F273.4
15.1PMC axis control

Axis control data signal
(PMC axis control)

EID0A to EID31A, EID0B
to EID31B

� �
G214.0 to G217.7,
G222.0 to G225.7

15.1

Auxiliary function strobe
signal

EMFA, EMFB � � F271.0, F274.0

Axis control command read
completion signal (PMC axis
control )

EBSYA, EBSYB � � F270.7, F273.7

Negative–direction overtravel
signal (PMC axis control)

EOTNA, EOTNB � � F270.6, F273.6

Dry run signal (PMC axis
control )

DRNE � � G147.7

Block stop signal (PMC axis
control )

ESBKA, ESBKB � � G210.3, G218.3

Auxiliary function completion
signal (PMC axis control )

EFINA, EFINB � � G210.0, G218.0

Servo off signal (PMC axis
control )

ESOFA, ESOFB � � G210.4, G218.4

Axis control temporary stop
signal (PMC axis control )

ESTPA, ESTPB � � G210.5, G218.5

Manual rapid traverse
selection signal (PMC axis
control )

RTE � � G147.6



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

903

Function
Ref.
itemAddressMTSymbolSignal name

Auxiliary function code signal
(PMC axis control)

EM11A to EM28A, EM11B
to EM28B

� �
F272.0 to F272.7,
F275.0 to F275.7

Reset signal (PMC axis
control )

ECLRA, ECLRB � � G210.6, G218.6

Axis control command read
signal (PMC axis control )

EBUFA, EBUFB � � G210.7, G218.7

PMC axis control

PMC axis rapid traverse
override signal

ROV1E, ROV2E � � G146.0, G146.1

15 1PMC axis control
Block stop disable signal
(PMC axis control)

EMSBKA, EMSBKB � � F211.0, G219.0

15.1

Control axis selection signal
(PMC axis control )

EAX1 to EAX8 � � G144.0 to G144.5

PMC axis override cancel
signal

OVCE � � G147.5

Feedrate override signal
(PMC axis control )

*OV1E, *OV2E, *OV4E,
*OV8E

� �
G147.0, G147.1,
G147.2, G147.3

Read completion signal (for
external data input)

EREND � � F160.0

Search completion signal (for
external data input)

ESEND � � F160.1

External data input
Read signal (for external
data input)

ESTB � � G102.7 15.2

Address signal (for external
data input)

EA0 to EA6 � � G102.0 to G102.6

Data signal (for external data
input)

ED0 to ED15 � � G100.0 to G101.7

External workpiece
number search

Workpiece number search
signal

PN1, PN2, PN4, PN8 � �
G122.4, G122.5,
G122.6, G122.7

15.3

Motor speed command
spindle input signal

R01I to R12I, R01I2 to
R12I2, R01I3 to R12I3

� �

G124.0 to G125.3,
G106.0 to G107.3,
G108.0 to G109.3

Spindle output
control by the PMC

Spindle motor speed
command signal

SIND, SIND2, SIND3 � �
G125.7, G107.7,
G109.7 9.10,

15 4control by the PMC
Spindle motor command
polarity select signal

SGN, SGN2, SGN3 � �
G125.5, G107.5,
G109.5

15.4

Spindle motor command
polarity select signal

SSIN, SSIN2, SSIN3 � �
G125.6, G107.6,
G109.6



A. INTERFACE BETWEEN CNC AND PMC B–61393E–2/02APPENDIX

904

Function
Ref.
itemAddressMTSymbolSignal name

K0, S, K1, U, K2, W, K3, R,
K4, X, K5, Z, K6, F, K7, 0,
K8, N, K9, G, KA, C,
KALARM, KALTER,
KCAN, KCUS↑ , KCUS÷,
KDELET, KDGNOS,
KEOB

�  

G106.0, G106.1,
G106.2, G106.3,
G106.4, G106.5,
G106.6, G106.7,
G107.0, G107.1,
G107.5, G109.5,
G108.0, G110.7,
G110.1, G110.0,
G108.2, G109.4,
G107.7

External key input Key signal

KINPUT, KINSRT, KM, –,
KP, Q, KPAGE ↑ , KPAGE
↓ , KPARAM, KPOS,
KPROGRM, KRESET,
KS1, KS2, KS3, KS4, KS5,
KSL, KSR, KSTART, KT,.,
KXZ, KXZ

�  

G108.3, G108.1,
G107.2, G107.4,
G110.3, G110.2,
G109.3, G109.0,
G109.1, G111.7,
G112.6, G112.5,
G112.4, G112.3,
G112.2, G112.7,
G112.1, G108.4,
G107.3, G142.7,
G110.4 15.5

KFF, KFFE, KFGB, KFI,,
KFK%, KFL+, KFM.,
KFNK, KFOJ, KFRC,
KFS=, KFT*, KFUV,
KFWH, KFXY, KFZJ, KH, I,
K

�  

G114.3, G114.2,
G113.2, G114.0,
G114.1, G114.7,
G114.4, G113.1,
G113.0, G113.3,
G114.5, G114.6,
G113.6, G113.7,
G113.4, G113.5,
G107.6

K0, S, K1, H, K2, F, K3, R,
K4, X, K5, Y, K6, Z, K7, 0,
K8, N, K9, G, KALARM,
KALTER, KB, K4, D,
KCAN, KCUS↑ , KCUS↓ ,
KDELET, KDGNOS,
KEOB, / , .

 �

G106.0, G106.1,
G106.2, G106.3,
G106.4, G106.5,
G106.6, G106.7,
G107.0, G107.1,
G109.5, G108.0,
G107.5, G110.7,
G110.1, G110.0,
G108.2, G109.4,
G107.7



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

905

Function
Ref.
itemAddressMTSymbolSignal name

External key input Key signal

KF4TH, KFF, KFF%,
KFGE, KFI,, KFJA, KFL+,
KFM., KFNK, KFOJ,
KFRC, KFS=, KFT*,
KFXU, KFXW, KFYV, KH,
J, K, KINPUT, KINSRT,
KM, –, KOFSET, KP, Q, L,
KPAGE↑ , KPAGE↓ ,
KPARAM, KPOS,
KPROGRM, KRESET,
KS1, KS2, KS3, KS4, KS5,
KSL, KSR, KSTART, KT,.,
KXY, KYZ, KZX

 �

G113.7, G114.3,
G114.2, G113.2,
G114.0, G114.1,
G114.7, G114.4,
G113.1, G113.0,
G113.3, G114.5,
G114.6, G113.4,
G113.6, G113.5,
G107.6, G108.3,
G108.1, G107.2,
G109.2, G107.4,
G110.3, G110.2,
G109.3, G109.0,
G109.1, G111.7,
G112.6, G112.5,
G112.4, G112.3,
G112.2, G112.7,
G112.1, G108.4,
G107.3, G110.4,
G110.6, G110.5

15.5

Key input disable signal INHKY � � F180.0

External key input
Program screen display
signal

PRGDPL � � F180.1
15.5

External key input mode
selection signal

ENBKY � � G134.0

Direct operation by
MMC (T series)

Direct operation select signal DMMC � � G128.7 15.6

Window request signal WNRQ � � G200.0

PMC Window Window completion signal WNANS � � F250.0 15 7
function Window rewrite signal WNWRT � � G200.1

15.7

Window error signal WNERR � � F250.1

Soft start /stop cancel signal SOCNA, SOCNB � � G230.4, G234.4

Spindle orientation stop
position change signal

INDXA, INDXB � � G231.0, G235.0

Spindle rotation direction
command signal while
changing the orientation stop
position

ROTAA, ROTAB � � G231.1, G235.1

Functions related to
serial spindle

Power line switch completion
signal

MCFNA, MCFNB � � G230.3, G234.3
Manual

for
serialserial s indle

Power line status check
signal

RCHA, RCHB � � G230.7, G234.7

serial
spindle

Output switch request signal RSLA, RSLB � � G230.6, G234.6

Short–distant movement
command while changing the
orientation stop position
signal

NRROA, NRROB � � G231.2, G235.2

Speed reached signal SARA, SARB � � F281.3, F285.3



A. INTERFACE BETWEEN CNC AND PMC B–61393E–2/02APPENDIX

906

Function
Ref.
itemAddressMTSymbolSignal name

Output switching completion
signal

PCFNA, PCFNB � � F282.3, F286.3

Output switching signal PCHPA, PCHPB � � F282.2, F286.2

Speed zero detection signal SSTA, SSTB � � F281.1, F285.1

Speed detection signal SDTA, SDTB � � F281.2, F285.2

Speed reached signal SARA, SARB � � F281.3, F285.3

Spindle switch completion
signal

CFINA, CFINB � � F282.1, F286.1

Load detection signal
LDT1A, LDT1B, LDT2A,
LDT2B

� �
F281.4, F285.4,
F281.5, F285.5

Emergency stop signal for
spindle

*ESPA, *ESPB � � G230.1, G234.1

Torque limit signal TLMA, TLMB � � F281.6, F285.6 Manual
Functions related to
serial spindle

Spindle orientation
completion signal

ORARA, ORARB � � F281.7, F285.7
for

serial
spindle

Power line switch signal CHPA, CHPB � � F282.0, F286.0
s indle

Spindle select signal SPSLA, SPSLB � � G230.2, G234.2

Spindle alarm signal ALMA, ALMB  � F281.0, F285.0

Alarm reset signal ARSTA, ARSTB � � G230.0, G234.0

Low speed torque limit signal TLMLA, TLMLB � � G229.0, G233.0

Machine ready signal MRDYA, MRDYB � � G229.7, G233.7

High–speed torque limit
signal

TLMHA, TLMHB � � G229.1, G233.1

Spindle CCW command
signal

SRVA, SRVB � � G229.4, G233.4

Orientation command signal ORCMA, ORCMB � � G229.6, G233.6

Spindle CW command signal SFRA, SFRB � � G229.5, G233.5



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

907

Meaning of symbols in the below table
�: Available
�: 0–TTC only
� : Available for 0–GCC or 0–GSC only
Blank : Unavailable

Symbol Signal name T M Address Ref.item

*+EDCX, *+EDCZ, *–EDCX ,
*–EDCZ

External deceleration signal

�  
G138.0, G138.1, G138.3,
G138.4

7 1 8
*+EDCX, *+EDCY, *+EDCZ,
*–EDCX, *–EDCY, *–EDCZ

External deceleration signal

 �
G138.0, G138.1, G138.2,
G138.3, G138.4, G138.5

7.1.8

*+LX, *+LY, *+LZ, *–LX, *–LY,
*–LZ Overtravel signal

 �
X020.0, X020.1, X020.2,
X020.3, X020.4, X020.5 2.3.1

*+LZ

g

�  X018.5

*+MITX, *+MITY, *+MITZ,
*+MIT4, *–MITX, *–MITY,
*–MITZ, *–MIT4

Interlock signal for each axis and
direction

 �
G142.0, G142.1, G142.2,
G142.3, G142.4, G142.5,
G142.6, G142.7

2.5

*ABSM Manual absolute signal � � G127.2 5.4

*AOV16, *AOV32, *AOV64,
*AOV128

Feedrate override signal

 �
G116.4, G116.5, G116.6,
G117.6

7 1 6 2
*AOVR16, *AOVR32,
*AOVR64, *AOVR128

Feedrate override signal

�  
G140.4, G140.5, G140.6,
G140.7

7.1.6.2

*BECLP B axis clamp completion signal  � G143.7
11 12

*BEUCP B axis unclamp completion signal  � G143.6
11.12

*DECX, *DECY, *DECZ, *DEC4, Reference position return deceleration  � X016.5, X017.5, X018.5, 4 1
*DECX, *DECZ, *DEC3, *DEC4, signals �  X019.5

4.1

*EAXSL
Control axis selection status signal
(PMC axis control)

� � F188.7 15.1

*ESP, *ESP Emergency stop signal � � X021.4, G121.4 2.1

*ESPA, *ESPB Emergency stop signal for spindle � � G230.1, G234.1

Manual
for

serial
spindle

*FLWU Follow–up signal � � G104.5 1.2.6

*ILK Interlock signal  � G117.0

*ITX, *ITY, *ITZ, *IT4 Interlock signal for each axis  �
G128.0, G128.1, G128.2,
G128.3

2.5

*LDSP Display and setting � � G119.0 12.1

*OV1, *OV2, *OV4, *OV8 Feedrate override signal � �
G121.0, G121.1, G121.2,
G121.3

3.1

*OV1E, *OV2E, *OV4E, *OV8E
Feedrate override signal (PMC axis
control )

� �
G147.0, G147.1, G147.2,
G147.3

15.1

*RILK High–speed interlock signal  � X008.5 2.5

*SCPF Spindle clamp completion signal �  G123.5 9.8

A.2.2
List of Signals 
(In Order of Symbols)



A. INTERFACE BETWEEN CNC AND PMC B–61393E–2/02APPENDIX

908

Symbol
Ref.
itemAddressMTSignal name

*SP Feed hold signal � � G121.5 5.1

*SSTP Spindle stop signal � � G120.6 9.3

*SSTP1, *SSTP2, *SSTP3 Individual spindle stop signal �  G145.3, G145.4, G145.5
9.10,
9.11

*SUCPF Spindle unclamp completion signal �  G123.4 9.8

+LMX, +LMY, +LMZ, –LMX,
–LMY, –LMZ

Stroke check external setting signals  �
G129.0, G129.1, G129.2,
G129.3, G129.4, G129.5

2.3.2

+MIT1, –MIT1, +MIT2, –MIT2
Interlock signal for each axis and
direction

�  
X008.2, X008.3 X008.4,
X008.5

2.5

+X, –X, +Y, –Y, +Z, –Z, +4, –4
Feed axis and direction select signal

 � G116.2, G116.3,  G117.2,
G117 3 G118 2 G118 3 3 1

+X, –X, +Z, –Z, +3, –3, +4, –4
Feed axis and direction select signal

�  
G117.3,  G118.2, G118.3,
G119.2, G119.3

3.1

+XO, –XO, +YO, –YO, +ZO,
–ZO, +4O, –4O Jog feed axis select signal (software

 � F177.0, F177.1, F177.2,
F177 3 F177 4 F177 5 12 1 10

+XO, –XO, +ZO, –ZO, +YO,
–YO, +4O, –4O

g g (
operator’s panel signal)

�  

F177.3, F177.4, F177.5,
F177.6, F177.7

12.1.10

4NG Ignore–the–fourth–axis–signal  � X004.7 1.4.3

AFL Auxiliary function lock signal � � G103.7 8.2

AL Alarm signal � � F149.0 2.4

ALMA, ALMB Spindle alarm signal  � F281.0, F285.0

Manual
for

serial
spindle

AR0 to AR15 Actual spindle speed signal �  F158.0 to F159.7 9.7

ARSTA, ARSTB Alarm reset signal � � G230.0, G234.0

Manual
for

serial
spindle

B0 to B31
Second auxiliary function code signals

�  F276.0 to F279.7
8 1

B11 to B38
Second auxiliary function code signals

 � F155.0 to F154.3
8.1

BAL Battery alarm signal � � F149.2

BAL1 to BAL4 BAL7 BAL8 Absolute pulse coder battery alarm
 � F159.0 to F159.5 2.4

BAL1 to BAL4,BAL7,BAL8 y
signal �  F156.0 to F156.5

BCLP B axis clamp signal  � F188.3 11.12

BDT1, BDT2 to BDT9 Optional block skip signals � � G116.0, G141.0 to G141.7 5.5

BDTO
Optional block skip signal (software
operator’s panel signal)

� � F176.4 12.1.10

BF Second auxiliary function strobe �  F150.7 8 1
BF1, BF2

y
signals  � F150.7, F150.6

8.1

BFIN 2nd auxiliary function completion �  G115.7 8 4
BFIN1, BFIN2

y
signal  � G115.7, G115.6

8.4

BGEACT Background editing signal � � F180.4 13.5

BOFF Tool post interference check signal �  F180.6 2.3.4



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

909

Symbol
Ref.
itemAddressMTSignal name

BUCLP B axis unclamp signal  � F188.2 11.12

CDZ Chamfering signal �  G126.7 11.10

CFINA, CFINB Spindle switch completion signal � � F282.1, F286.1 Manual
for

CHPA, CHPB Power line switch signal � � F282.0, F286.0
serial

spindle

CKGRP Drwing signal � � F164.5 12.1.8

COFF C–axis–off signal � G123.0 1.10

COFF
Spindle contour control change signal

�  G123.0
9 9

CON
S indle contour control change signal

 � G123.7
9.9

COSP Spindle command signal; �  F180.5 9.4

CUT Cutting feed signal � � F188.6 2.8

CTH1A CTH2A Gear selection signal � � G229.3, G229.2 9.8

CTH1A CTH2A Clutch/gear signal (serial spindle) � � G229.3, G229.2 9.9

DEN Distribution end signals � � F149.3
8 1

DEN2 Passing point signal � F149.6
8.1

DLK
Renewal disable signal of relative
coordinate

� � G127.6 12.1

DMMC Direct operation select signal � � G128.7 15.6

DNCI
Mode selection signal

� � G127 5
2.6

DNCI
DNC operation select signal

� � G127.5
5.10

DRNO
Dry run signal (software operator’s
panel signal)

� � F176.7 12.1.10

DRNE Dry run signal (PMC axis control ) � � G147.7 15.1

DRN Dry run signal � � G118.7 5.3.2

DST Manual data input start signal � � F150.5 5.1

EA0 to EA6 Address signal (for external data input) � � G102.0 to G102.6 15.2

EAX1 to EAX8
Control axis selection signal (PMC
axis control )

� � G144.0 to G144.5

EBSYA, EBSYB
Axis control command read completion
signal (PMC axis control )

� � F270.7, F273.7

EBUFA, EBUFB
Axis control command read signal
(PMC axis control )

� � G210.7, G218.7
15.1

EC0A to EC6A, EC0B to EC6B
Axis control command signal (PMC
axis control )

� �
G211.0 to G211.6, G219.0
to G219.6

ECKZA, ECZKB
Following zero checking signal (PMC
axis control )

� � F270.1, F273.1

ECLRA, ECLRB Reset signal (PMC axis control ) � � G210.6, G218.6

ED0 to ED15 Data signal (for external data input) � � G100.0 to G101.7 15.2

EDENA, EDENB
Auxiliary function executing signal
(PMC axis control )

� � F270.3, F273.3 15.1



A. INTERFACE BETWEEN CNC AND PMC B–61393E–2/02APPENDIX

910

Symbol
Ref.
itemAddressMTSignal name

EF External operation signal  � F150.1 11.9

EF
External operation signal for
high–speed interface

 � F150.1

8 4

EFIN
External operation function completion
signal

 � G115.1

8.4

EFINA, EFINB
Auxiliary function completion signal
(PMC axis control )

� � G210.0, G218.0

EGENA, EGENB Axis moving signal (PMC axis control ) � � F270.4, F273.4

EIALA, EIALB Alarm signal (PMC axis control ) � � F270.2, F273.2

EID0A to EID31A, EID0B to
EID31B

Axis control data signal (PMC axis
control)

� �
G214.0 to G217.7, G222.0
to G225.7

EIF0A to EIF15A, EIF0B to
EIF15B

Axis control feedrate signal (PMC axis
control)

� �
G212.0 to G213.7, G220.0
to G221.7 15.1

EINPA, EINPB In–position signal (PMC axis control) � � F270.0, F273.0

EM11A to EM28A, EM11B to
EM28B

Auxiliary function code signal (PMC
axis control)

� �
F272.0 to F272.7, F275.0
to F275.7

EMFA, EMFB Auxiliary function strobe signal � � F271.0, F274.0

EMSBKA, EMSBKB
Block stop disable signal (PMC axis
control)

� � F211.0, G219.0

ENB Spindle enable signal � � F149.4 9.3

ENB
Spindle enable signal

� � F149.4 9.3,
9 10

ENB2, ENB3
S indle enable signal

�  F149.4, F164.2, F164.3
9.10,
9.11

ENBKY
External key input mode selection
signal

� � G134.0 15.5

EOTNA, EOTNB
Negative–direction overtravel signal
(PMC axis control)

� � F270.6, F273.6

EOTPA, EOTPB
Positive–direction overtravel signal
(PMC axis control)

� � F270.5, F273.5
15.1

EOV0 Override 0% signal (PMC axis control ) � � F188.5

EREND
Read completion signal (for external
data input)

� � F160.0 15.2

ERS External reset signal � � G121.7 5.2

ESBKA, ESBKB Block stop signal (PMC axis control ) � � G210.3, G218.3 15.1

ESEND
Search completion signal (for external
data input)

� � F160.1 15.2

ESKIP Skip signal (PMC axis control ) � � X008.6
15 1

ESOFA, ESOFB Servo off signal (PMC axis control ) � � G210.4, G218.4
15.1

ESRSYC
Spindle simple synchronous control
signal

� � G104.4 9.18

ESTB Read signal (for external data input) � � G102.7 15.2

ESTPA, ESTPB
Axis control temporary stop signal
(PMC axis control )

� � G210.5, G218.5 15.1



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

911

Symbol
Ref.
itemAddressMTSignal name

EXLM2 Stored stroke check select signal � � G129.6 2.3.2

EXRD External read start signal � � G134.1

EXSTP External read/punch stop signal � � G134.2 13.5

EXWT External punch start signal � � G134.3

F1D F1–digit feed select signal  � G140.7 7.1.5

FIN End signal � � G120.3 8.1

FSCSL
Spindle contour control change
completion signal

 � F178.1 9.9

FSPPH
Spindle phase synchronous control
completion signal

� � F178.3

9 13

FSPSY
Spindle synchronous speed control
completion signal

� � F178.2

9.13

FXST Canned cycle start signal  � F161.4 2.8

GOQSM Tool offset write mode select signal �  G132.7 14.4.2

GR1 GR2 Gear selection signal
�  G118.2, G118.3 9.3, 9.5,

9.8, 9.9,GR1, GR2 Gear selection signal
 � G123.2, G123.3

9.10,
9.11

GR1O, GR2O, GR3O Gear selection signal  � G152.0, G152.1, G152.2
9.3, 9.9,

9.10,
9.11

GR21 Gear selection signal for 2nd spindle �  G145.6 9.10,

GR31 Gear selection signal for 3rd spindle �  G145.7 9.11

GWLF
Grinding wheel diameter automatic
compensation signal

 � F165.3 14.4.4

HIX, HIY, HIZ, HI4 Manual handle interrupt axis selection  � G126.0, G126.1, G126.2, 3 3
HIX, HIZ, HI3, HI4 signal �  G126.3

3.3

HX, HZ, H3, H4 Manual handle feed axis selection �  G116.7, G117.7, G118.7, 3 2
HX, HY, HZ, H4 signal  � G119.7

3.2

HXO, HYO, HZO, HZ4 Manual pulse generator feed axis
select signal (software operator’s

 � F174.4, F174.5, F174.6, 12 1 10
HXO, HZO, H3O, H4O

select signal (software o erator s
panel signal) �  F174.7

12.1.10

IGNVRY All–axis CRDY OFF alarm ignore  � G123.0 2 9
IGNVRY

g
signal �  G127.0

2.9

INDXA, INDXB
Spindle orientation stop position
change signal

� � G231.0, G235.0

Manual
for

serial
spindle

INFD In–feed control cut–in start signal  � G237.6 5.12

INHKY Key input disable signal � � F180.0 15.5

INP1 to INP4 In–position signals � � F184.0 to F184.3 7.2.5.1

ITX, ITZ, IT3, IT4 Interlock signal for each axis �  
G128.0, G128.1, G128.2,
G128.3

2.5



A. INTERFACE BETWEEN CNC AND PMC B–61393E–2/02APPENDIX

912

Symbol
Ref.
itemAddressMTSignal name

JOV1 to JOV8 Jog feedrate override signal  � G104.0 to G104.3 3.1

JV1O, JV2O, JV4O, JV8O
Jog feedrate override signal (software
operator’s panel signal)

� �
F175.0, F175.1, F175.2,
F175.3

12.1.10

K0, S, K1, H, K2, F, K3, R, K4,
X, K5, Y, K6, Z, K7, 0, K8, N,
K9, G, KALARM, KALTER, KB,
K4, D, KCAN, KCUS↑ , KCUS↓ ,
KDELET, KDGNOS, KEOB, / , .

Key signal

 �

G106.0, G106.1, G106.2,
G106.3, G106.4, G106.5,
G106.6, G106.7, G107.0,
G107.1, G109.5, G108.0,
G107.5, G110.7, G110.1,
G110.0, G108.2, G109.4,
G107.7

15 5

K0, S, K1, U, K2, W, K3, R, K4,
X, K5, Z, K6, F, K7, 0, K8, N, K9,
G, KA, C, KALARM, KALTER,
KCAN, KCUS↑ , KCUS↓ ,
KDELET, KDGNOS, KEOB

Key signal

�  

G106.0, G106.1, G106.2,
G106.3, G106.4, G106.5,
G106.6, G106.7, G107.0,
G107.1, G107.5, G109.5,
G108.0, G110.7, G110.1,
G110.0, G108.2, G109.4,
G107.7

15.5

KEY Program protect signal � � G122.3 12.2.3

KEYO
Program protect signal (software
operator’s panel signal)

� � F178.5 12.1.10

KF4TH, KFF, KFF%, KFGE,
KFI,, KFJA, KFL+, KFM., KFNK,
KFOJ, KFRC, KFS=, KFT*,
KFXU, KFXW, KFYV, KH, J, K,
KINPUT, KINSRT, KM, –,
KOFSET, KP, Q, L, KPAGE↑ ,
KPAGE÷, KPARAM, KPOS,
KPROGRM, KRESET, KS1,
KS2, KS3, KS4, KS5, KSL,
KSR, KSTART, KT,., KXY, KYZ,
KZX

Key signal

 �

G113.7, G114.3, G114.2,
G113.2, G114.0, G114.1,
G114.7, G114.4, G113.1,
G113.0, G113.3, G114.5,
G114.6, G113.4, G113.6,
G113.5, G107.6, G108.3,
G108.1, G107.2, G109.2,
G107.4, G110.3, G110.2,
G109.3, G109.0, G109.1,
G111.7, G112.6, G112.5,
G112.4, G112.3, G112.2,
G112.7, G112.1, G108.4,
G107.3, G110.4, G110.6,
G110.5

15.5

KFF, KFFE, KFGB, KFI,, KFK%,
KFL+, KFM., KFNK, KFOJ,
KFRC, KFS=, KFT*, KFUV,
KFWH, KFXY, KFZJ, KH, I, K

�  

G114.3, G114.2, G113.2,
G114.0, G114.1, G114.7,
G114.4, G113.1, G113.0,
G113.3, G114.5, G114.6,
G113.6, G113.7, G113.4,
G113.5, G107.6

KILPLUS
Position coder feedback direction
selection signal

� � G105.6 9.17

KINPUT, KINSRT, KM, –, KP, Q,
KPAGE ↑ , KPAGE ÷, KPARAM,
KPOS, KPROGRM, KRESET,
KS1, KS2, KS3, KS4, KS5,
KSL, KSR, KSTART, KT,., KXZ,
KXZ

Key signal �  

G108.3, G108.1, G107.2,
G107.4, G110.3, G110.2,
G109.3, G109.0, G109.1,
G111.7, G112.6, G112.5,
G112.4, G112.3, G112.2,
G112.7, G112.1, G108.4,
G107.3, G142.7, G110.4

15.5

LDT1A, LDT1B, LDT2A, LDT2B Load detection signal � �
F281.4, F285.4, F281.5,
F285.5

Manual
for

serial
spindle



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

913

Symbol
Ref.
itemAddressMTSignal name

M00, M01, M02, M30 Decode M signals  �
F154.7, F154.6, F154.5,
F154.4

8.1

M11, M12, M14, M18, M21,
M22, M24, M28, M31, M32,
M34, M38

Miscellaneous function code signal � �

F151.0, F151.1, F151.2,
F151.3, F151.4, F151.5,
F151.6, F151.7, F157.0,
F157.1, F157.2, F157.3

M211, M212, M214, M218,
M221, M222, M224, M228,
M231, M232, M234, M238

2nd M function code signal � �

F193.0, F193.1, F193.2,
F193.3, F193.4, F193.5,
F193.6, F193.7, F194.0,
F194.1, F194.2, F194.3

8.3

M311, M312, M314, M318,
M321, M322, M324, M328,
M331, M332, M334, M338

3rd M function code signal � �

F194.4, F194.5, F194.6,
F194.7, F195.0, F195.1,
F195.2, F195.3, F195.4,
F195.5, F195.6, F195.7

MCFNA, MCFNB Power line switch completion signal � � G230.3, G234.3

Manual
for

serial
spindle

MD1O, MD2O, MD4O
Mode select signal (software
operator’s panel signal)

� � F174.0, F174.1, F174.2 12.1.10

MINP External program input start signal
�  G117.0

13 7MINP External rogram in ut start signal
 � G120.0

13.7

MIRX, MIRY, MIR4
Mirror image signal

 � G127.0, G127.1, G127.7
1 2 5

MIX, MIZ
Mirror image signal

�  G120.0, G127.1
1.2.5

MIX1, MIX2, MIX3, MIX4 Composite control start signals �  
G1437.4, G1437.5,
G1437.7, G1437.6,

1.7

MF2, MF3 2nd, 3rd M function strobe signal � � F157.4, F157.5 8.3

MFIN
Miscellaneous function completion
signal

� � G115.0
8.4

MFIN2, MFIN3 2nd, 3rd M function completion signal � � G134.4, G134.5

MMI1, MMI2
Mirror image check signal

�  F158.0, F158.1
1 2 5

MMI1, MMI2, MMI4
Mirror image check signal

 � F158.0, F158.1, F158.3,
1.2.5

MP1 MP2 Manual handle heed amount selection
�  G117.0, G118.0

3 2MP1, MP2
signal  � G120.0, G120.1

3.2

MP1O, MP2O
Select of magnification of manual
pulse generator (software operator’s
panel signal)

� � F175.6, F175.7 12.1.10

MRDYA, MRDYB Machine ready signal � � G229.7, G233.7

Manual
for

serial
spindle

MVX, MVY, MVZ, MV4
Axis moving signal

 �
F184 4 to F184 7 1 2 4

MVX, MVZ, MV3, MV4
Axis moving signal

�  
F184.4 to F184.7 1.2.4

NOWT No–wait signal �  G133.1 8.5



A. INTERFACE BETWEEN CNC AND PMC B–61393E–2/02APPENDIX

914

Symbol
Ref.
itemAddressMTSignal name

NOZAGC Angular axis control–related Z–axis
�  G133.6

1 8NOZAGC g
compensation movement signal  � G237.5

1.8

NRROA, NRROB
Short–distant movement command
while changing the orientation stop
position signal

� � G231.2, G235.2

Manual
for

serial
spindle

OFN0, OFN1, OFN2, OFN3,
OFN4

Tool offset number select signal �  
G132.0, G132.1, G132.2,
G132.3, G132.4

14.4.2

OP Automatic operation signal � � F148.7 5.1

ORARA, ORARB Spindle orientation completion signal � � F281.7, F285.7 Manual
for

ORCMA, ORCMB Orientation command signal � � G229.6, G233.6
serial

spindle

OV1O, OV2O, OV4O, OV8O
Feedrate override signal (software
operator’s panel signal)

� �
F176.0, F176.1, F176.2,
F176.3

12.1.10

OVC Override cancel signal � � G126.4 7.1.6.4

OVCE PMC axis override cancel signal � � G147.5 15.1

OUT0 to OUT7
Software operator’s panel
general–purpose switch signal
(software operator’s panel signal)

� � F171.0 to F171.7 12.1.10

PC2SLC 2nd position coder selection signal �  G146.7
9.10,
9.11

PCFNA, PCFNB Output switching completion signal � � F282.3, F286.3 Manual
for

PCHPA, PCHPB Output switching signal � � F282.2, F286.2
serial

spindle

PECK2
Small–diameter peck drilling cycle
execution in progress signal

� F180.7 11.8

PK1M, PK2M, PK3M, PK4M,
PK7M

Synchronization control start signals
(tool post 1)

�  
G238.0, G238.1, G238.2,
G238.3, G238.4

1 7

PK1S, PK2S, PK3S, PK4S
Synchronization control start signals
(tool post 2)

�  
G1438.0, G1438.1, 
G1438.2, G1438.3

1.7

PKESS1 Parking signal for 1st spindle � � G138.6
9 18

PKESS2 Parking signal for 2nd spindle � � G138.7
9.18

PLCRVON Position coder return control signal � � G105.7 9.17

PN1, PN2, PN4, PN8 Workpiece number search signal � �
G122.4, G122.5, G122.6,
G122.7

15.3

PRC Position record signal �  G103.6 14.4.1

PRGDPL Program screen display signal � � F180.1 15.5

PRTSF Required parts count reached signal � � F164.7 12.1.7

PSW01 to PSW10 Position switch signal � � F190, F191.0, F191.1 1.2.8

PSYN
Polygon synchronization under way
signal

�  F160.7 6.9.1

PX0 to PX7, PZ0 to PZ7 Position signal output signal �  
F165.0 to F165.7, F167.0
to F167.7

1.9



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

915

Symbol
Ref.
itemAddressMTSignal name

R01I to R12I, R01I2 to R12I2,
R01I3 to R12I3

Motor speed command spindle input
signal

� �

G124.0 to G125.3, G106.0
to G107.3, G108.0 to
G109.3

9.10,
15.4

R01O to R12O S12–bit code signal � � F172.0 to F173.3
9.3,
15.4

RCHA, RCHB Power line status check signal � � G230.7, G234.7

Manual
for

serial
spindle

RGSPM, RGSPP Spindle rotation direction signal  � F165.1, F165.0
9 11

RGTPN Rigid tapping signal � � G123.1
9.11

RLSOT Stroke check release signal  � G129.7 2.3.2

RMTDI0 to RMTDI7 Input signals for remote buffer � � G239.0 to G239.7

RMTDO0 to RMTDO7 Output signals for remote buffer
�  F289.0 to F289.7 5.11

RMTDO0 to RMTDO7 Out ut signals for remote buffer
 � F290.0 to F290.7

ROTAA, ROTAB
Spindle rotation direction command
signal while changing the orientation
stop position

� � G231.1, G235.1

Manual
for

serial
spindle

ROV1, ROV2 Rapid traverse override signal � � G116.7, G117.7 7.1.6.1

ROV1D, ROV2D, ROV3D Rapid traverse override B signal �  G116.4, G116.5, G116.6 7.1.6.3

ROV1E, ROV2E
PMC axis rapid traverse override
signal

� � G146.0, G146.1 15.1

ROV1O, ROV2O
Rapid traverse override signal
(software operator’s panel signal)

� � F175.4, F175.5 12.1.10

RPALM Read/punch alarm signal � � F180.3
13 5

RPBSY Read/punch busy signal � � F180.2
13.5

RRW Reset and rewind signal � � G104.6 5.2

RSLA, RSLB Output switch request signal � � G230.6, G234.6

Manual
for

serial
spindle

RSMAX
Serial spindle synchronization polygon
signal

�  F189.7 9.14

RST Resetting signal � � F149.1 5.2

RT Manual rapid traverse select signal � � G121.6 3.1

RTE
Manual rapid traverse selection signal
(PMC axis control )

� � G147.6 15.1

RTO
Jog rapid traverse select signal
(software operator’s panel signal)

� � F178.6 12.1.10

RTNT Tapping return start signal � G123.6
9 12

RTPT Tapping return completion signal � F192.6
9.12

RWD Rewinding signal � � F164.6 5.2



A. INTERFACE BETWEEN CNC AND PMC B–61393E–2/02APPENDIX

916

Symbol
Ref.
itemAddressMTSignal name

S11, S12, S14, S18, S21, S22,
S24, S28

Spindle–speed code signals � �
F152.0, F152.1, F152.2,
F152.3, F152.4, F152.5,
F152.6, F152.7

8.1, 9.3

S11 to S58
Spindle–speed function code signal
(BCD output)

� � F185.0 to F187.3 9.11

SA Servo ready signal � � F148.6 2.2

SAR Spindle speed arrival signal � � G120.4 9.3

SARA, SARB Speed reached signal � � F281.3, F285.3

Manual
for

serial
spindle

SBK Single block signal � � G116.1 5.3.3

SBKO
Single block signal (software
operator’s panel signal)

� � F176.5 12.1.10

SBRT
Spindle synchronous polygon code
signal

�  G146.6 9.14

SCLP Spindle clamp signal �  F164.0 9.8

SDTA, SDTB Speed detection signal � � F281.2, F285.2

Manual
for

serial
spindle

SF Spindle–speed strobe signals � � F150.2
8.1, 9.3,

9.11

SFIN Spindle function completion signal � � G115.2 8.4

SFRA, SFRB Spindle CW command signal � � G229.5, G233.5

Manual
for

serial
spindle

SGN, SGN2, SGN3
Spindle motor command polarity select
signal

� � G125.5, G107.5, G109.5
9.10,
15.4

SHA00 to SHA11
1st spindle orientation external stop
position command signal

� �
G110.0 to G110.7, G111.0
to G111.3

9 15

SHB00 to SHB11
2nd spindle orientation external stop
position command signal

� �
G112.0 to G112.7, G113.0
to G113.3

9.15

SIND, SIND2, SIND3 Spindle motor speed command signal � � G125.7, G107.7, G109.7
9.10,
15.4

SKIP Skip signal � � X008.7
11.8,

14.3.1,
14.3.3

SKIP2, SKIP3, SKIP4 Skip signal � X008.2, X008.3, X008.4 14.3.3

SLHZ0, SLHZ1
Manual handle feed axis selection
signal for Z axis

 � G133.0, G133.1 3.2

SLPCA, SLPCB Spindle feedback select signal; �  G1333.2, G1333.3
9 4

SLSPA, SLSPB Spindle command select signal �  G133.2, G133.3
9.4

SMZ Error detect signal �  G126.6 7.2.5.3



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

917

Symbol
Ref.
itemAddressMTSignal name

SOR Spindle orientation signal � � G120.5

SPA, SPB, SPC, SPD
Spindle speed override signal

�  
G103.3, G103.4, G103.5,
G103.2 9.3

SPA, SPB, SPC

g

 � G103.3, G103.4, G103.5

SPAL
Spindle fluctuation detection alarm
signal

�  F154.0 9.6

SPDS1, SPDS2, SPDS3,
SPDS4

Signals output according to the speed
or travel along an axis

 �
F189.0, F189.1, F189.2,
F189.3

7.2.5.4

SPL Feed hold lamp signal � � F148.4 5.1

SPO
Feed hold signal (software operator’s
panel signal)

� � F178.7 12.1.10

SPPHS
Spindle phase synchronous control
signal

� � G146.3 9.13

SPSLA, SPSLB Spindle select signal � � G230.2, G234.2

Manual
for

serial
spindle

SPSTP Spindle stop complete signal �  G123.6 9.8

SPSYC Spindle synchronous control signal � � G146.2 9.13

SOCNA, SOCNB Soft start /stop cancel signal � � G230.4, G234.4

Manual
for

serial
spindle

SRN Program restart signal � � G103.0
5 7

SRNMV Program restart under way signal � � F188.4
5.7

SRVA, SRVB Spindle CCW command signal � � G229.4, G233.4

Manual
for

serial
spindle

SSIN, SSIN2, SSIN3
Spindle motor command polarity select
signal

� � G125.6, G107.6, G109.6
9.10,
15.4

SSTA, SSTB Speed zero detection signal � � F281.1, F285.1

Manual
for

serial
spindle

ST Cycle start signal � � G120.2 5.1

STL Cycle start lamp signal � � F148.5 5.1

STLK Start lock signal �  G120.1 2.5

STRD
Input and run simultaneous mode
select signal

 � G140.5

13 6

STWD
Output and run simultaneous mode
select signal

 � G140.6

13.6

SUCLP Spindle unclamp signal �  F164.1 9.8

SVFX, SVFZ, SVF3, SVF4
Servo off signal

�  G105.0, G105.1, G105.2, 1 2 7
SVFX, SVFY, SVFZ, SVF4

Servo off signal
 � G105.3

1.2.7



A. INTERFACE BETWEEN CNC AND PMC B–61393E–2/02APPENDIX

918

Symbol
Ref.
itemAddressMTSignal name

SWS1, SWS2, SWS3 Spindle selection signal �  G145.0, G145.1, G145.2
9.10,
9.11

SYCAL
Spindle synchronous control alarm
signal

� � F178.4
9.13,
9.18

SYN1M, SYN2M, SYN3M,
SYN4M, SYN7M

Synchronization control start signals
(tool post 1)

�  
G237.0, G237.1, G237.2,
G237.3, G237.4

SYN1OM, SYN2OM, SYN3OM,
SYN4OM, SYN7OM

Axis recomposition signals (tool post
1)

�  
F189.0, F189.1, F189.2,
F189.3, F189.4

1 7
SYN1OS, SYN2OS, SYN3OS,
SYN4OS

Axis recomposition signals (tool post
2)

�  
F1389.0, F1389.1, 
F1389.2, F1389.3

1.7

SYN1S, SYN2S, SYN3S,
SYN4S

Synchronization control start signals
(tool post 2)

�  
G1437.0, G1437.1, 
G1437.2, G1437.3

SYNAL
Servo axis synchronization alarm
signal

 � F192.7

SYNCX, SYNCZ, SYNC3,
SYNC4 Signals to select the slave axis for

simple synchronous control

�  G237.0 to G237.3
1.6

SYNC4
sim le synchronous control

 � G237.3

SYNCJ
Signal for selecting the manual feed
axis for simple synchronous control

 � G133.6

T11 to T28
Tool function code signals

�  F153.0 to F153.7
8 1

T11 to T48
Tool function code signals

 � F153.0 to F156.7
8.1

TAL Tool post interference alarm signal �  F180.7 2.3.4

TF Tool function strobe signals � � F150.3 8.1

TFIN Tool function completion signal � � G115.3 8.4

THRD Thread cutting signal �  F188.3 6.4.1

TL01, TL02, TL04, TL08, TL16,
TL32, TL64

Tool group number select signal � �
G139.0, G139.1, G139.2,
G139.3, G139.4, G139.5,
G139.6

10.3

TLCH Tool change signal � � F188.0

TLCHB Remaining tool life expired signal  � F192.2
10 3

TLCHE All tools’ life expired signal  � F192.1
10.3

TLCHI Individual tool change signal  � F192.0

TLMA, TLMB Torque limit signal � � F281.6, F285.6 Manual
fTLMHA, TLMHB High–speed torque limit signal � � G229.1, G233.1 for

serial
TLMLA, TLMLB Low speed torque limit signal � � G229.0, G233.0

serial
spindle

TLNW New tool select signal � � F188.1

TLRST Tool change reset signal � � G139.7
10 3

TLRSTI Individual tool change reset signal  � G140.4
10.3

TLSKP Tool skip signal � � G140.0

TNFS
Tool compensation number automatic
selection disable signal

�  G132.5 14.4.2



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

919

Symbol
Ref.
itemAddressMTSignal name

TORQ1, TORQ2, TORQ3,
TORQ4, TORQ7, TORQ8

Torque limit reached signal �  
F170.0, F170.1, F170.2,
F170.3, F170.4, F170.5

14.3.4

TRT2, TRT2PC Tool post selection signal �  X018.3, G133.0 2.7

UI000 to UI015 Custom macro input signal � � G130.0 to G131.7 11.6.1

UINT Interrupt signal for custom macro � � G140.3 11.6.2

UO000 to UO015,

UO100 to UO131
Custom macro output signal � �

F162.0 to F163.7, F196.0
to F199.7

11.6.1

WNANS Window completion signal � � F250.0

WNERR Window error signal � � F250.1
15 7

WNRQ Window request signal � � G200.0
15.7

WNWRT Window rewrite signal � � G200.1

WOQSM
Workpiece coordinate system shift
value write mode select signal

�  G132.6

14 4 2

WOSET
Workpiece coordinate system shift
value write signal

�  G133.7

14.4.2

XAE, YAE, ZAE
Measuring position reached signals

 � X008.0, X008.1, X008.2
14 2

XAE, ZAE
Measuring osition reached signals

�  X008.0, X008.1
14.2

ZNG Cancel–the–Z–axis command signal  � G103.6 1.4.4

ZP2X, ZP2Z, ZP23, ZP24 Second reference position return �  F161.0, F161.1, F161.2, 4 5
ZP2X, ZP2Y, ZP2Z, ZP24 completion signals  � F161.3

4.5

ZP3

Cs contour control axis reference
position return completion signal

�  
F148.2

9.9

Spindle orientation completion signal � 9.8

ZP3X, ZP3Y, ZP3Z, ZP34 Third reference position return  � F169.0, F169.1, F169.2, 4 5
ZP3X, ZP3Z, ZP33, ZP34 completion signals �  F169.3

4.5

ZP4
Cs contour control axis reference
position return completion signal

 � F148.3 9.9

ZP4X, ZP4Y, ZP4Z, ZP44 Fourth reference position return  � F169.4, F169.5, F169.6, 4 5
ZP4X, ZP4Z, ZP43, ZP44 completion signals �  F169.7

4.5

ZPX, ZPY, ZPZ, ZP4 Reference position return completion  � F148.0, F148.1, F148.2, 4 1
ZPX, ZPZ, ZP3, ZP4 signal �  F148.3

4.1

ZRFX, ZRFY, ZRFZ, ZRF4 Reference position establishment  � F168.0, F168.1, F168.2, 4 1
ZRFX, ZRFZ, ZRF3, ZRF4 signal �  F168.3

4.1

Mode selection signal 2.6

ZRN Manual reference position return
selection signal

� � G120.7
4.1

ZRNO
Mode select signal (software
operator’s panel signal)

� � F174.3 12.1.10



A. INTERFACE BETWEEN CNC AND PMC B–61393E–2/02APPENDIX

920

Meaning of symbols in the below table
�: Available
�: 0–TTC only
� : Available for 0–GCC or 0–GSC only
Blank : Unavailable

Address Signal name Symbol T M Ref.item

F148.0, F148.1, F148.2, Reference position return completion ZPX, ZPZ, ZP3, ZP4 �  4 1
F148.3 signal ZPX, ZPY, ZPZ, ZP4  �

4.1

F148.2 Spindle orientation completion signal ZP3 � 9.8

F148.2 Cs contour control axis reference ZP3 �  9 9
F148.3 position return completion signal ZP4  �

9.9

F148.4 Feed hold lamp signal SPL � � 5.1

F184 4 to F184 7 Axis moving signal
MVX, MVY, MVZ, MV4  �

1 2 4F184.4 to F184.7 Axis moving signal
MVX, MVZ, MV3, MV4 �  

1.2.4

F148.5 Cycle start lamp signal STL � �
5 1

F148.7 Automatic operation signal OP � �
5.1

F148.6 Servo ready signal SA � � 2.2

F149.0 Alarm signal AL � � 2.4

F149.1 Resetting signal RST � � 5.2

F149.2 Battery alarm signal BAL � � 2.4

F149.3 Distribution end signals DEN � � 8.1

F149.4
Spindle enable signal

ENB � � 9.3,
9 10

F149.4, F164.2, F164.3
S indle enable signal

ENB2, ENB3 �  
9.10,
9.11

F149.5 Tapping signal TAP � � 11.7

F149.6 Passing point signal DEN2 � 8.1

F149.7 CNC ready signal MA � � 2.2

F150.0 Miscellaneous function strobe signal MF � � 8.1

F150.1 External operation signal EF  � 11.9

F150.1
External operation signal for
high–speed interface

EF  � 8.4

F150.2 Spindle function strobe signal SF � �
8.1, 9.3,

9.11

F150.3 Tool function strobe signals TF � � 8.1

F150.5 Manual data input start signal DST � � 5.1

F150.7
Second auxiliary function strobe signals

BF �  
8 1

F150.7, F150.6
Second auxiliary function strobe signals

BF1, BF2  �
8.1

A.2.3
List of Signals 
(In Order of Addresses)



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

921

Address
Ref.
itemMTSymbolSignal name

F151.0, F151.1, F151.2,
F151.3, F151.4, F151.5,
F151.6, F151.7, F157.0,
F157.1, F157.2, F157.3

Miscellaneous function code signal
M11, M12, M14, M18, M21,
M22, M24, M28, M31, M32,
M34, M38

� � 8.1

F152.0, F152.1, F152.2,
F152.3, F152.4, F152.5,
F152.6, F152.7

Spindle–speed code signals
S11, S12, S14, S18, S21, S22,
S24, S28

� � 8.1, 9.3

F153.0 to F153.7
Tool function code signals

T11 to T28 �  
8 1

F153.0 to F156.7
Tool function code signals

T11 to T48  �
8.1

F154.0
Spindle fluctuation detection alarm
signal

SPAL �  9.6

F154.7, F154.6, F154.5,
F154.4

Decode M signals M00, M01, M02, M30  � 8.1

F155.0 to F154.3 Second auxiliary function code signals B11 to B38  � 8.1

F156.0 to F156.5
Absolute pulse coder battery alarm
signal

BAL1 to BAL4,BAL7,BAL8 �  2.4

F157.4, F157.5 2nd, 3rd M function strobe signal MF2, MF3 � � 8.3

F158.0 to F159.7 Actual spindle speed signal AR0 to AR15 �  9.7

F158.0, F158.1
Mirror image check signal

MMI1, MMI2 �  
1 2 5

F158.0, F158.1, F158.3,
Mirror image check signal

MMI1, MMI2, MMI4  �
1.2.5

F159.0 to F159.5
Absolute pulse coder battery alarm
signal

BAL1 to BAL4,BAL7,BAL8  � 2.4

F160.0
Read completion signal (for external
data input)

EREND � �

15 2

F160.1
Search completion signal (for external
data input)

ESEND � �

15.2

F160.6 Waiting signal WATO �  8.5

F160.7
Polygon synchronization under way
signal

PSYN �  6.9.1

F161.0, F161.1, F161.2, Second reference position return ZP2X, ZP2Z, ZP23, ZP24 �  4 5
F161.3 completion signals ZP2X, ZP2Y, ZP2Z, ZP24  �

4.5

F161.4 Canned cycle start signal FXST  � 2.8

F162.0 to F163.7, F196.0
to F199.7

Custom macro output signal
UO000 to UO015,

UO100 to UO131
� � 11.6.1

F164.0 Spindle clamp signal SCLP �  
9 8

F164.1 Spindle unclamp signal SUCLP �  
9.8

F164.5 Drwing signal CKGRP � � 12.1.8

F164.6 Rewinding signal RWD � � 5.2

F164.7 Required parts count reached signal PRTSF � � 12.1.7

F165.0 to F165.7, F167.0
to F167.7

Position signal output signal PX0 to PX7, PZ0 to PZ7 �  1.9

F165.1, F165.0 Spindle rotation direction signal RGSPM, RGSPP  � 9.11



A. INTERFACE BETWEEN CNC AND PMC B–61393E–2/02APPENDIX

922

Address
Ref.
itemMTSymbolSignal name

F165.3
Grinding wheel diameter automatic
compensation signal

GWLF  � 14.4.4

F168.0, F168.1, F168.2, Reference position establishment signal
ZRFX, ZRFZ, ZRF3, ZRF4 �  

4 1
F168.3

Reference osition establishment signal
ZRFX, ZRFY, ZRFZ, ZRF4  �

4.1

F169.0, F169.1, F169.2, Third reference position return ZP3X, ZP3Z, ZP33, ZP34 �  

F169.3 completion signals ZP3X, ZP3Y, ZP3Z, ZP34  �
4 5

F169.4, F169.5, F169.6, Fourth reference position return ZP4X, ZP4Z, ZP43, ZP44 �  
4.5

F169.7 completion signals ZP4X, ZP4Y, ZP4Z, ZP44  �

F170.0, F170.1, F170.2,
F170.3, F170.4, F170.5

Torque limit reached signal
TORQ1, TORQ2, TORQ3,
TORQ4, TORQ7, TORQ8

�  14.3.4

F171.0 to F171.7
Software operator’s panel
general–purpose switch signal
(software operator’s panel signal)

OUT0 to OUT7 � � 12.1.10

F172.0 to F173.3 S12–bit code signal R01O to R12O � �
9.3,
15.4

F174.0, F174.1, F174.2
Mode select signal (software operator’s
panel signal)

MD1O, MD2O, MD4O � �

F174.3
Mode select signal (software operator’s
panel signal)

ZRNO � �

F174.4, F174.5, F174.6, Manual pulse generator feed axis select HXO, HYO, HZO, HZ4  �

F174.7
g

signal (software operator’s panel signal) HXO, HZO, H3O, H4O �  

F175.0, F175.1, F175.2,
F175.3

Jog feedrate override signal (software
operator’s panel signal)

JV1O, JV2O, JV4O, JV8O � �

F175.4, F175.5
Rapid traverse override signal (software
operator’s panel signal)

ROV1O, ROV2O � �

F175.6, F175.7
Select of magnification of manual pulse
generator (software operator’s panel
signal)

MP1O, MP2O � �

F176.0, F176.1, F176.2,
F176.3

Feedrate override signal (software
operator’s panel signal)

OV1O, OV2O, OV4O, OV8O � �
12.1.10

F176.4
Optional block skip signal (software
operator’s panel signal)

BDTO � �

F176.5
Single block signal (software operator’s
panel signal)

SBKO � �

F176.6
Machine lock signal (software
operator’s panel signal)

MLKO � �

F176.7
Dry run signal (software operator’s
panel signal)

DRNO � �

F177.0, F177.1, F177.2,
F177 3 F177 4 F177 5 Jog feed axis select signal (software

+XO, –XO, +ZO, –ZO, +YO,
–YO, +4O, –4O

�  

F177.3, F177.4, F177.5,
F177.6, F177.7

g g (
operator’s panel signal) +XO, –XO, +YO, –YO, +ZO,

–ZO, +4O, –4O
 �

F178.1
Spindle contour control change
completion signal

FSCSL  � 9.9



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

923

Address
Ref.
itemMTSymbolSignal name

F178.2
Spindle synchronous speed control
completion signal

FSPSY � �

9 13

F178.3
Spindle phase synchronous control
completion signal

FSPPH � �

9.13

F178.4
Spindle synchronous control alarm
signal

SYCAL � �
9.13,
9.18

F178.5
Program protect signal (software
operator’s panel signal)

KEYO � � 12.1.10

F178.6
Jog rapid traverse select signal
(software operator’s panel signal)

RTO � �

12 1 10

F178.7
Feed hold signal (software operator’s
panel signal)

SPO � �

12.1.10

F180.0 Key input disable signal INHKY � �
15 5

F180.1 Program screen display signal PRGDPL � �
15.5

F180.2 Read/punch busy signal RPBSY � �

F180.3 Read/punch alarm signal RPALM � � 13.5

F180.4 Background editing signal BGEACT � �

F180.5 Spindle command signal; COSP �  9.4

F180.6 Tool post interference check signal BOFF �  
2 3 4

F180.7 Tool post interference alarm signal TAL �  
2.3.4

F180.7
Small–diameter peck drilling cycle
execution in progress signal

PECK2 � 11.8

F184.0 to F184.3 In–position signals INP1 to INP4 � � 7.2.5.1

F185.0 to F187.3
Spindle–speed function code signal
(BCD output)

S11 to S58 � � 9.11

F188.0 Tool change signal TLCH � �
10 3

F188.1 New tool select signal TLNW � �
10.3

F188.2 B axis unclamp signal BUCLP  �
11 12

F188.3 B axis clamp signal BCLP  �
11.12

F188.3 Thread cutting signal THRD �  6.4.1

F188.4 Program restart under way signal SRNMV � � 5.7

F188.5 Override 0% signal (PMC axis control ) EOV0 � � 15.1

F188.6 Cutting feed signal CUT � � 2.8

F188.7
Control axis selection status signal
(PMC axis control)

*EAXSL � � 15.1

F189.0, F189.1, F189.2,
F189.3

Signals output according to the speed
or travel along an axis

SPDS1, SPDS2, SPDS3,
SPDS4

 � 7.2.5.4

F189.0, F189.1, F189.2,
F189.3, F189.4

Axis recomposition signals (tool post 1)
SYN1OM, SYN2OM,
SYN3OM, SYN4OM, SYN7OM

�  1.7

F189.7
Serial spindle synchronization polygon
signal

RSMAX �  9.14

F190, F191.0, F191.1 Position switch signal PSW01 to PSW10 � � 1.2.8



A. INTERFACE BETWEEN CNC AND PMC B–61393E–2/02APPENDIX

924

Address
Ref.
itemMTSymbolSignal name

F192.0 Individual tool change signal TLCHI  �

F192.1 All tools’ life expired signal TLCHE  � 10.3

F192.2 Remaining tool life expired signal TLCHB  �

F192.6 Tapping return completion signal RTPT � 9.12

F192.7 Servo axis synchronization alarm signal SYNAL  � 1.6

F193.0, F193.1, F193.2,
F193.3, F193.4, F193.5,
F193.6, F193.7, F194.0,
F194.1, F194.2, F194.3

2nd M function code signal
M211, M212, M214, M218,
M221, M222, M224, M228,
M231, M232, M234, M238

� �

8 3
F194.4, F194.5, F194.6,
F194.7, F195.0, F195.1,
F195.2, F195.3, F195.4,
F195.5, F195.6, F195.7

3rd M function code signal
M311, M312, M314, M318,
M321, M322, M324, M328,
M331, M332, M334, M338

� �

8.3

F211.0, G219.0
Block stop disable signal (PMC axis
control)

EMSBKA, EMSBKB � � 15.1

F250.0 Window completion signal WNANS � �
15 7

F250.1 Window error signal WNERR � �
15.7

F270.0, F273.0 In–position signal (PMC axis control) EINPA, EINPB � �

F270.1, F273.1
Following zero checking signal (PMC
axis control )

ECKZA, ECZKB � �

F270.2, F273.2 Alarm signal (PMC axis control ) EIALA, EIALB � �

F270.3, F273.3
Auxiliary function executing signal
(PMC axis control )

EDENA, EDENB � �

F270.4, F273.4 Axis moving signal (PMC axis control ) EGENA, EGENB � �

F270.5, F273.5
Positive–direction overtravel signal
(PMC axis control)

EOTPA, EOTPB � � 15.1

F270.6, F273.6
Negative–direction overtravel signal
(PMC axis control)

EOTNA, EOTNB � �

F270.7, F273.7
Axis control command read completion
signal (PMC axis control )

EBSYA, EBSYB � �

F271.0, F274.0 Auxiliary function strobe signal EMFA, EMFB � �

F272.0 to F272.7, F275.0
to F275.7

Auxiliary function code signal (PMC axis
control)

EM11A to EM28A, EM11B to
EM28B

� �

F276.0 to F279.7 Second auxiliary function code signals B0 to B31 �  8.1

F281.0, F285.0 Spindle alarm signal ALMA, ALMB  �

F281.1, F285.1 Speed zero detection signal SSTA, SSTB � �

F281.2, F285.2 Speed detection signal SDTA, SDTB � �
Manual

F281.3, F285.3 Speed reached signal SARA, SARB � �
Manual

for
serial

F281.3, F285.3 Speed reached signal SARA, SARB � �
serial

spindle

F281.4, F285.4, F281.5,
F285.5

Load detection signal
LDT1A, LDT1B, LDT2A,
LDT2B

� �

F281.6, F285.6 Torque limit signal TLMA, TLMB � �



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

925

Address
Ref.
itemMTSymbolSignal name

F281.7, F285.7 Spindle orientation completion signal ORARA, ORARB � �

F282.0, F286.0 Power line switch signal CHPA, CHPB � � Manual
fF282.1, F286.1 Spindle switch completion signal CFINA, CFINB � � for

serial
F282.2, F286.2 Output switching signal PCHPA, PCHPB � �

serial
spindle

F282.3, F286.3 Output switching completion signal PCFNA, PCFNB � �

F289.0 to F289.7
Output signals for remote buffer RMTDO0 to RMTDO7

�  
5 11

F290.0 to F290.7
Out ut signals for remote buffer RMTDO0 to RMTDO7

 �
5.11

F1389.0, F1389.1, 
F1389.2, F1389.3

Axis recomposition signals (tool post 2)
SYN1OS, SYN2OS, SYN3OS,
SYN4OS

�  1.7

G100.0 to G101.7 Data signal (for external data input) ED0 to ED15 � �

G102.0 to G102.6 Address signal (for external data input) EA0 to EA6 � � 15.2

G102.7 Read signal (for external data input) ESTB � �

G103.0 Program restart signal SRN � � 5.7

G103.3, G103.4, G103.5,
G103.2

Spindle speed override signal SPA, SPB, SPC, SPD �  
9.3

G103.3, G103.4, G103.5 Spindle speed override signal SPA, SPB, SPC  �

G103.6 Cancel–the–Z–axis command signal ZNG  � 1.4.4

G103.6 Position record signal PRC �  14.4.1

G103.7 Auxiliary function lock signal AFL � � 8.2

G104.0 to G104.3 Jog feedrate override signal JOV1 to JOV8  � 3.1

G104.4
Spindle simple synchronous control
signal

ESRSYC � � 9.18

G104.5 Follow–up signal *FLWU � � 1.2.6

G104.6 Reset and rewind signal RRW � � 5.2

G105.0, G105.1, G105.2, Servo off signal
SVFX, SVFZ, SVF3, SVF4 �  

1 2 7
G105.3

Servo off signal
SVFX, SVFY, SVFZ, SVF4  �

1.2.7

G105.6
Position coder feedback direction
selection signal

KILPLUS � �
9.17

G105.7 Position coder return control signal PLCRVON � �

G106.0, G106.1, G106.2,
G106.3, G106.4, G106.5,
G106.6, G106.7, G107.0,
G107.1, G109.5, G108.0,
G107.5, G110.7, G110.1,
G110.0, G108.2, G109.4,
G107.7

Key signal

K0, S, K1, H, K2, F, K3, R, K4,
X, K5, Y, K6, Z, K7, 0, K8, N,
K9, G, KALARM, KALTER, KB,
K4, D, KCAN, KCUS↑ ,
KCUS↓ , KDELET, KDGNOS,
KEOB, / , .

 �

15 5
G106.0, G106.1, G106.2,
G106.3, G106.4, G106.5,
G106.6, G106.7, G107.0,
G107.1, G107.5, G109.5,
G108.0, G110.7, G110.1,
G110.0, G108.2, G109.4,
G107.7

Key signal

K0, S, K1, U, K2, W, K3, R, K4,
X, K5, Z, K6, F, K7, 0, K8, N,
K9, G, KA, C, KALARM,
KALTER, KCAN, KCUS↑ ,
KCUS÷, KDELET, KDGNOS,
KEOB

�  

15.5



A. INTERFACE BETWEEN CNC AND PMC B–61393E–2/02APPENDIX

926

Address
Ref.
itemMTSymbolSignal name

G108.3, G108.1, G107.2,
G107.4, G110.3, G110.2,
G109.3, G109.0, G109.1,
G111.7, G112.6, G112.5,
G112.4, G112.3, G112.2,
G112.7, G112.1, G108.4,
G107.3, G142.7, G110.4

Key signal

KINPUT, KINSRT, KM, –, KP,
Q, KPAGE ↑ , KPAGE ↓ ,
KPARAM, KPOS, KPROGRM,
KRESET, KS1, KS2, KS3,
KS4, KS5, KSL, KSR,
KSTART, KT,., KXZ, KXZ

�  15.5

G110.0 to G110.7, G111.0
to G111.3

1st spindle orientation external stop
position command signal

SHA00 to SHA11 � �

9 15
G112.0 to G112.7, G113.0
to G113.3

2nd spindle orientation external stop
position command signal

SHB00 to SHB11 � �

9.15

G113.7, G114.3, G114.2,
G113.2, G114.0, G114.1,
G114.7, G114.4, G113.1,
G113.0, G113.3, G114.5,
G114.6, G113.4, G113.6,
G113.5, G107.6, G108.3,
G108.1, G107.2, G109.2,
G107.4, G110.3, G110.2,
G109.3, G109.0, G109.1,
G111.7, G112.6, G112.5,
G112.4, G112.3, G112.2,
G112.7, G112.1, G108.4,
G107.3, G110.4, G110.6,
G110.5

Key signal

KF4TH, KFF, KFF%, KFGE,
KFI,, KFJA, KFL+, KFM.,
KFNK, KFOJ, KFRC, KFS=,
KFT*, KFXU, KFXW, KFYV,
KH, J, K, KINPUT, KINSRT,
KM, –, KOFSET, KP, Q, L,
KPAGE↑ , KPAGE↓ , KPARAM,
KPOS, KPROGRM, KRESET,
KS1, KS2, KS3, KS4, KS5,
KSL, KSR, KSTART, KT,., KXY,
KYZ, KZX

 �

15.5

G114.3, G114.2, G113.2,
G114.0, G114.1, G114.7,
G114.4, G113.1, G113.0,
G113.3, G114.5, G114.6,
G113.6, G113.7, G113.4,
G113.5, G107.6

KFF, KFFE, KFGB, KFI,,
KFK%, KFL+, KFM., KFNK,
KFOJ, KFRC, KFS=, KFT*,
KFUV, KFWH, KFXY, KFZJ,
KH, I, K

�  

G115.0
Miscellaneous function completion
signal

MFIN � �

G115.1
External operation function completion
signal

EFIN  �

G115.2 Spindle function completion signal SFIN � � 8.4

G115.3 Tool function completion signal TFIN � �

G115.7
2nd auxiliary function completion signal

BFIN �  

G115.7, G115.6
2nd auxiliary function com letion signal

BFIN1, BFIN2  �

G116.0, G141.0 to G141.7 Optional block skip signals BDT1, BDT2 to BDT9 � � 5.5

G116.1 Single block signal SBK � � 5.3.3

G116.2, G116.3, 
G117.2, G117.3, Feed axis and direction select signal

+X, –X, +Z, –Z, +3, –3, +4, –4 �  
3 1

G118.2, G118.3, G119.2,
G119.3

Feed axis and direction select signal
+X, –X, +Y, –Y, +Z, –Z, +4, –4  �

3.1

G116.4, G116.5, G116.6 Rapid traverse override B signal ROV1D, ROV2D, ROV3D �  7.1.6.3

G116.4, G116.5, G116.6,
G117.6

Feedrate override signal
*AOV16, *AOV32, *AOV64,
*AOV128

 � 7.1.6.2

G116.7, G117.7 Rapid traverse override signal ROV1, ROV2 � � 7.1.6.1



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

927

Address
Ref.
itemMTSymbolSignal name

G116.7, G117.7, G118.7, Manual handle feed axis selection HX, HZ, H3, H4 �  3 2
G119.7 signal HX, HY, HZ, H4  �

3.2

G117.0 External program input start signal MINP �  13.7

G117.0, G118.0
Manual handle heed amount selection
signal

MP1, MP2 �  3.2

G117.0 Interlock signal *ILK  � 2.5

G117.1 All–axis machine lock signal MLK � � 5.3.1

G118.2, G118.3 Gear selection signal GR1, GR2 �  
9.3,
9.10,
9.11

G118.2, G118.3 Gear selection signal GR1, GR2 �  
9.3, 9.5,
9.8, 9.9

G118.7 Dry run signal DRN � � 5.3.2

G119.0 Display and setting *LDSP � � 12.1

G120.0 External program input start signal MINP  � 13.7

G120.0, G120.1
Manual handle heed amount selection
signal

MP1, MP2  � 3.2

G120.0, G127.1 Mirror image signal MIX, MIZ �  1.2.5

G120.1 Start lock signal STLK �  2.5

G120.2 Cycle start signal ST � � 5.1

G120.3 End signal FIN � � 8.1

G120.4 Spindle speed arrival signal SAR � �

G120.5 Spindle orientation signal SOR � � 9.3

G120.6 Spindle stop signal *SSTP � �

G120.7 Mode selection signal ZRN � � 2.6

G120.7
Manual reference position return
selection signal

ZRN � � 4.1

G121.0, G121.1, G121.2,
G121.3

Feedrate override signal *OV1, *OV2, *OV4, *OV8 � �
3.1,

7.1.6.2

G121.5 Feed hold signal *SP � � 5.1

G121.6 Manual rapid traverse select signal RT � � 3.1

G121.7 External reset signal ERS � � 5.2

G122.0, G122.1, G122.2 Mode selection signal MD1, MD2, MD4 � � 2.6

G122.3 Program protect signal KEY � � 12.2.3

G122.4, G122.5, G122.6,
G122.7

Workpiece number search signal PN1, PN2, PN4, PN8 � � 15.3

G123 0
C–axis–off signal

COFF �
1.10

G123.0
Spindle contour control change signal

COFF �  
9.9

G123.0 All–axis CRDY OFF alarm ignore signal IGNVRY  � 2.9

G123.1 Rigid tapping signal RGTPN � � 9.11



A. INTERFACE BETWEEN CNC AND PMC B–61393E–2/02APPENDIX

928

Address
Ref.
itemMTSymbolSignal name

G124.0 to G125.3, G106.0
to G107.3, G108.0 to
G109.3

Motor speed command spindle input
signal

R01I to R12I, R01I2 to R12I2,
R01I3 to R12I3

� �
9.10,
15.4

G123.2, G123.3 Gear selection signal GR1, GR2  �

9.3, 9.5,
9.8, 9.9,

9.10,
9.11

G123.4 Spindle unclamp completion signal *SUCPF �  

G123.5 Spindle clamp completion signal *SCPF �  9.8

G123.6 Spindle stop complete signal SPSTP �  

G123.6 Tapping return start signal RTNT � 9.12

G123.7 Spindle contour control change signal CON  � 9.9

G125.5, G107.5, G109.5 Spindle motor command polarity select SGN, SGN2, SGN3
� �

9.10,

G125.6, G107.6, G109.6

y
signal SSIN, SSIN2, SSIN3

� �
15.4

G125.7, G107.7, G109.7 Spindle motor speed command signal SIND, SIND2, SIND3 � �
9.10,
15.4

G126.0, G126.1, G126.2, Manual handle interrupt axis selection HIX, HIY, HIZ, HI4  � 3 3
G126.3 signal HIX, HIZ, HI3, HI4 �  

3.3

G126.4 Override cancel signal OVC � � 7.1.6.4

G126.6 Error detect signal SMZ �  7.2.5.3

G126.7 Chamfering signal CDZ �  11.10

G127.0 All–axis CRDY OFF alarm ignore signal IGNVRY �  2.9

G127.0, G127.1, G127.7 Mirror image signal MIRX, MIRY, MIR4  � 1.2.5

G127.2 Manual absolute signal *ABSM � � 5.4

G127 5
Mode selection signal

DNCI � �
2.6

G127.5
DNC operation select signal

DNCI � �
5.10

G127.6
Renewal disable signal of relative
coordinate

DLK � � 12.1

G128.0, G128.1, G128.2, Interlock signal for each axis
*ITX, *ITY, *ITZ, *IT4  �

2 5
G128.3

Interlock signal for each axis
ITX, ITZ, IT3, IT4 �  

2.5

G128.7 Direct operation select signal DMMC � � 15.6

G129.0, G129.1, G129.2,
G129.3, G129.4, G129.5

Stroke check external setting signals
+LMX, +LMY, +LMZ, –LMX,
–LMY, –LMZ

 �

2 3 2G129.6 Stored stroke check select signal EXLM2 � � 2.3.2

G129.7 Stroke check release signal RLSOT  �

G130.0 to G131.7 Custom macro input signal UI000 to UI015 � � 11.6.1

G132.0, G132.1, G132.2,
G132.3, G132.4

Tool offset number select signal
OFN0, OFN1, OFN2, OFN3,
OFN4

�  14.4.2

G133.0, G133.1
Manual handle feed axis selection
signal for Z axis

SLHZ0, SLHZ1  � 3.2



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

929

Address
Ref.
itemMTSymbolSignal name

G132.5
Tool compensation number automatic
selection disable signal

TNFS �  

G132.6
Workpiece coordinate system shift
value write mode select signal

WOQSM �  
14.4.2

G132.7 Tool offset write mode select signal GOQSM �  

G133.1 No–wait signal NOWT �  8.5

G133.2, G133.3 Spindle command select signal SLSPA, SLSPB �  9.4

G133.6
Signal for selecting the manual feed
axis for simple synchronous control

SYNCJ  � 1.6

G133.6
Angular axis control–related Z–axis
compensation movement signal

NOZAGC �  1.8

G133.7
Workpiece coordinate system shift
value write signal

WOSET �  14.4.2

G134.0
External key input mode selection
signal

ENBKY � � 15.5

G134.1 External read start signal EXRD � �

G134.2 External read/punch stop signal EXSTP � � 13.5

G134.3 External punch start signal EXWT � �

G134.4, G134.5 2nd, 3rd M function completion signal MFIN2, MFIN3 � � 8.4

G138.0, G138.1, G138.3,
G138.4

External deceleration signal

*+EDCX, *+EDCZ, *–EDCX ,
*–EDCZ

�  

7 1 8
G138.0, G138.1, G138.2,
G138.3, G138.4, G138.5

External deceleration signal
*+EDCX, *+EDCY, *+EDCZ,
*–EDCX, *–EDCY, *–EDCZ

 �

7.1.8

G138.6 Parking signal for 1st spindle PKESS1 � �
9 18

G138.7 Parking signal for 2nd spindle PKESS2 � �
9.18

G139.0, G139.1, G139.2,
G139.3, G139.4, G139.5,
G139.6

Tool group number select signal
TL01, TL02, TL04, TL08,
TL16, TL32, TL64

� �

10.3
G139.7 Tool change reset signal TLRST � �

10.3

G140.0 Tool skip signal TLSKP � �

G140.3 Interrupt signal for custom macro UINT � � 11.6.2

G140.4 Individual tool change reset signal TLRSTI  � 10.3

G140.4, G140.5, G140.6,
G140.7

Feedrate override signal
*AOVR16, *AOVR32,
*AOVR64, *AOVR128

�  7.1.6.2

G140.5
Input and run simultaneous mode select
signal

STRD  �

13 6

G140.6
Output and run simultaneous mode
select signal

STWD  �

13.6

G140.7 F1–digit feed select signal F1D  � 7.1.5

G142.0, G142.1, G142.2,
G142.3, G142.4, G142.5,
G142.6, G142.7

Interlock signal for each axis and
direction

*+MITX, *+MITY, *+MITZ,
*+MIT4, *–MITX, *–MITY,
*–MITZ, *–MIT4

 � 2.5

G143.6 B axis unclamp completion signal *BEUCP  � 11.12



A. INTERFACE BETWEEN CNC AND PMC B–61393E–2/02APPENDIX

930

Address
Ref.
itemMTSymbolSignal name

G143.7 B axis clamp completion signal *BECLP  � 11.12

G144.0 to G144.5
Control axis selection signal (PMC axis
control )

EAX1 to EAX8 � � 15.1

G145.0, G145.1, G145.2 Spindle selection signal SWS1, SWS2, SWS3 �  

G145.3, G145.4, G145.5 Individual spindle stop signal *SSTP1, *SSTP2, *SSTP3 �  9.10,

G145.6 Gear selection signal for 2nd spindle GR21 �  9.11

G145.7 Gear selection signal for 3rd spindle GR31 �  

G146.0, G146.1 PMC axis rapid traverse override signal ROV1E, ROV2E � � 15.1

G146.2 Spindle synchronous control signal SPSYC � �

G146.3
Spindle phase synchronous control
signal

SPPHS � �
9.13

G146.6
Spindle synchronous polygon code
signal

SBRT �  9.14

G146.7 2nd position coder selection signal PC2SLC �  
9.10,
9.11

G147.0, G147.1, G147.2,
G147.3

Feedrate override signal (PMC axis
control )

*OV1E, *OV2E, *OV4E,
*OV8E

� �

G147.5 PMC axis override cancel signal OVCE � �
15 1

G147.6
Manual rapid traverse selection signal
(PMC axis control )

RTE � �

15.1

G147.7 Dry run signal (PMC axis control ) DRNE � �

G152.0, G152.1, G152.2 Gear selection signal GR1O, GR2O, GR3O  �
9.3,
9.10,
9.11

G152.0, G152.1, G152.2 Gear selection signal GR1O, GR2O, GR3O  � 9.3, 9.9

G200.0 Window request signal WNRQ � �
15 7

G200.1 Window rewrite signal WNWRT � �
15.7

G210.0, G218.0
Auxiliary function completion signal
(PMC axis control )

EFINA, EFINB � �

G210.3, G218.3 Block stop signal (PMC axis control ) ESBKA, ESBKB � �

G210.4, G218.4 Servo off signal (PMC axis control ) ESOFA, ESOFB � �

G210.5, G218.5
Axis control temporary stop signal
(PMC axis control )

ESTPA, ESTPB � �

G210.6, G218.6 Reset signal (PMC axis control ) ECLRA, ECLRB � �
15 1

G210.7, G218.7
Axis control command read signal
(PMC axis control )

EBUFA, EBUFB � �
15.1

G211.0 to G211.6, G219.0
to G219.6

Axis control command signal (PMC axis
control )

EC0A to EC6A, EC0B to EC6B � �

G212.0 to G213.7, G220.0
to G221.7

Axis control feedrate signal (PMC axis
control)

EIF0A to EIF15A, EIF0B to
EIF15B

� �

G214.0 to G217.7, G222.0
to G225.7

Axis control data signal (PMC axis
control)

EID0A to EID31A, EID0B to
EID31B

� �



B–61393E–2/02 A. INTERFACE BETWEEN CNC AND PMCAPPENDIX

931

Address
Ref.
itemMTSymbolSignal name

G229.0, G233.0 Low speed torque limit signal TLMLA, TLMLB � � Manual
for

G229.1, G233.1 High–speed torque limit signal TLMHA, TLMHB � �
serial

spindle

G229.3, G229.2 Gear selection signal CTH1A CTH2A � � 9.8

G229.3, G229.2 Clutch/gear signal (serial spindle) CTH1A CTH2A � � 9.9

G229.4, G233.4 Spindle CCW command signal SRVA, SRVB � �

G229.5, G233.5 Spindle CW command signal SFRA, SFRB � �

G229.6, G233.6 Orientation command signal ORCMA, ORCMB � �

G229.7, G233.7 Machine ready signal MRDYA, MRDYB � �

G230.0, G234.0 Alarm reset signal ARSTA, ARSTB � �

G230.1, G234.1 Emergency stop signal for spindle *ESPA, *ESPB � �

G230.2, G234.2 Spindle select signal SPSLA, SPSLB � �

G230.3, G234.3 Power line switch completion signal MCFNA, MCFNB � � Manual
fG230.4, G234.4 Soft start /stop cancel signal SOCNA, SOCNB � � for

serial
G230.6, G234.6 Output switch request signal RSLA, RSLB � �

serial
spindle

G230.7, G234.7 Power line status check signal RCHA, RCHB � �

G231.0, G235.0
Spindle orientation stop position change
signal

INDXA, INDXB � �

G231.1, G235.1
Spindle rotation direction command
signal while changing the orientation
stop position

ROTAA, ROTAB � �

G231.2, G235.2
Short–distant movement command
while changing the orientation stop
position signal

NRROA, NRROB � �

G237.0, G237.1, G237.2,
G237.3, G237.4

Synchronization control start signals
(tool post 1)

SYN1M, SYN2M, SYN3M,
SYN4M, SYN7M

�  1.7

G237.0 to G237.3 Signals to select the slave axis for
simple synchronous control

SYNCX, SYNCZ, SYNC3,
SYNC4

�  
1.6

G237.3
sim le synchronous control

SYNC4  �

G237.5
Angular axis control–related Z–axis
compensation movement signal

NOZAGC  � 1.8

G237.6 In–feed control cut–in start signal INFD  � 5.12

G238.0, G238.1, G238.2,
G238.3, G238.4

Synchronization control start signals
(tool post 1)

PK1M, PK2M, PK3M, PK4M,
PK7M

�  1.7

G239.0 to G239.7 Input signals for remote buffer RMTDI0 to RMTDI7 � � 5.11

G1333.2, G1333.3 Spindle feedback select signal; SLPCA, SLPCB �  9.4

G1437.0, G1437.1, 
G1437.2, G1437.3

Synchronization control start signals
(tool post 2)

SYN1S, SYN2S, SYN3S,
SYN4S

�  

G1437.4, G1437.5,
G1437.7, G1437.6,

Composite control start signals MIX1, MIX2, MIX3, MIX4 �  1.7

G1438.0, G1438.1, 
G1438.2, G1438.3

Synchronization control start signals
(tool post 2)

PK1S, PK2S, PK3S, PK4S �  



A. INTERFACE BETWEEN CNC AND PMC B–61393E–2/02APPENDIX

932

Address
Ref.
itemMTSymbolSignal name

X004.7 Ignore–the–fourth–axis–signal 4NG  � 1.4.3

X008.0, X008.1
Measuring position reached signals

XAE, ZAE �  
14 2

X008.0, X008.1, X008.2
Measuring osition reached signals

XAE, YAE, ZAE  �
14.2

X008.2, X008.3 X008.4,
X008.5

Interlock signal for each axis and
direction

+MIT1, –MIT1, +MIT2, –MIT2 �  2.5

X008.2, X008.3, X008.4 Skip signal SKIP2, SKIP3, SKIP4 � 14.3.3

X008.2, X008.3 X008.4,
X008.5

Tool offset write signal +MIT1, –MIT1, +MIT2, –MIT2 �  
2.5,

14.4.2

X008.5 High–speed interlock signal *RILK  � 2.5

X008.6 Skip signal (PMC axis control ) ESKIP � � 15.1

X008.7 Skip signal SKIP � �
11.8,

14.3.1,
14.3.3

X016.5, X017.5, X018.5, Reference position return deceleration

*DECX, *DECZ, *DEC3,
*DEC4,

�  

4 1
X019.5 signals *DECX, *DECY, *DECZ,

*DEC4,
 �

4.1

X018.3, G133.0 Tool post selection signal TRT2, TRT2PC �  2.7

X018.5 *+LZ �  

X020.0, X020.1, X020.2,
X020.3, X020.4, X020.5

Overtravel signal *+LX, *+LY, *+LZ, *–LX, *–LY,
*–LZ

 �
2.3.1

X021.4, G121.4 Emergency stop signal *ESP, *ESP � � 2.1



IndexB–61393E–2/01

i–1

[Number]
2nd Reference Position Return/3rd, 4th Reference

Position Return, 185

[A]
Absolute position detection, 34

Acceleration/deceleration control, 301

Actual Spindle Speed Output (T Series), 407

Advanced Preview Control (M Series), 295

Alarm and Message, 508

Alarm signal, 119

Angular Axis Control (0–GCC, 0–GSC), 86

Automatic acceleration/deceleration, 301

Automatic Corner Deceleration (M series), 288

Automatic Corner Override (M series), 280

Automatic operation, 194

Automatic Tool Length Measurement (M Series) /
Automatic Tool Offset (T Series), 698

Auxiliary function, 324

Auxiliary function lock, 338

Axis control, 1

Axis Recomposition (0–TTC), 51

[B]
Background editing, 665

Backlash compensation, 27

Balance Cut (2–path Control for T System), 222

Bell–shaped Acceleration/ Deceleration for Rapid
Traverse (M Series), 306

[C]
Cancel–the–Z–axis Command Signal (M Series), 36

Canned Cycle (M series)/Canned Cycle for Hole
Machining (T series), 597

Canned Cycle (T series)/Multiple Repetitive Canned
Cycle (M series), 615

Caution and Notes, 509

Cf axis control (T series), 92

Circular interpolation, 234

Clock Function, 639

CNC ready signal, 97

Command Format, 467

Connection Among Spindle, Spindle Motor, and Posi-
tion Coder, 458

Constant Surface Speed Control, 397

Controlled axes, 2

Controlled axes detach, 11

Controlling the Spindle Speed Ratio for Serial Inter-
face Spindles (0–TTC), 525

Conversational Programming with Graphic Function,
667

Coordinate System Rotation (M series), 634

Corner control, 316

Cs Contour Control, 427

Custom macro, 584

Custom Macro Variables Common between Tool Posts
(0–TTC), 596

Cutter compensation, 559

Cutter Compensation B, C (M Series), 559

Cutting feedrate clamp, 266

Cycle start/feed hold, 195

Cylindrical Interpolation, 251

[D]
Decimal point programming/pocket calculator type

decimal point programming, 566

Direct Operation by MMC (T series), 832

Display Data on the Diagnosis, 464

Display/Setting, 638

Display/Setting/Edit, 637

DNC operation, 224

DNC1 Interface, 675

DNC2 Interface, 681

Dry run, 207

[E]
Edit, 662

Emergency stop, 95

Entering compensation values, 715

Error compensation, 22

Error detect (T series), 320

Exact stop/exact stop mode/tapping mode/cutting
mode (M series), 220

External data input, 803

External Deceleration, 284

External I/O device control, 682

External Key Input, 822



Index B–61393E–2/01

i–2

External motion function (M series), 613

External program input, 691

External workpiece number search, 812

[F]
F1-digit Feed (M Series), 271

Feed forward in rapid traverse (M series), 323

Feed per minute, 267

Feed Per Revolution/ Manual Feed Per Revolution,
269

Feedrate Clamping by Arc Radius (M Series), 286

Feedrate control, 263

Feedrate control/acceleration and deceleration control,
262

Feedrate override, 276

Follow–up, 15

[G]
G code system (T series), 568

Graphic Display/ Dynamic Graphic Display, 646

Grinding Wheel Diameter Automatic Compensation,
727

[H]
Helical Interpolation (M Series), 248

High Speed Cycle Cutting, 578

High–speed M/S/T/B interface, 343

High–speed Skip Signal, 708

[I]
Ignore–the–fourth–axis–signal (M Series), 35

In–feed control, 228

In–position check, 316

In–position check independently of feed/rapid traverse
(M series), 318

Inch/metric conversion, 575

Increment system, 6

Index Table Indexing Function (M Series), 623

Input of measured workpiece origin offsets, 726

Input of offset value measured A (T series), 715

Input of Tool Offset Value Measured B (T Series), 717

Input/output of data, 668

Interface between CNC and PMC, 855

Interpolation function, 229

Interruption Type Custom Macro, 593

[J]
Jog feed/incremental feed, 139

[L]
Linear Acceleration/ Deceleration after Interpolation

for Cutting Feed, 309

Linear Acceleration/ Deceleration of Cutting Feed
before Interpolation (M Series), 312

Linear interpolation, 232

List of addresses, 856

List of signals, 891

List of signals (In order of addresses), 920

List of signals (In order of Symbols), 907

List of signals (In order of functions), 891

[M]
M29 and G84 (G74) are Specified in the Same Block,

485

Machine coordinate system, 37

Machine lock, 205

Macro Compiler/ Macro Executer, 636

Manual absolute on/off, 211

Manual handle feed, 147

Manual Handle Interruption, 158

Manual operation, 138

Manual reference position return, 161

Measurement, 696

Memory protection key, 663

Mirror image, 12

Mirror Image for Double Turrets (T series), 621

Miscellaneous Function/2nd Auxiliary Function, 325

Mode selection, 126

Multi–language display, 661

Multi–step skip (0–GCD), 709

Multiple M commands in a single block, 340

Multi-spindle Control (T Series), 443

[N]
Name of axes, 3



B–61393E–2/01 Index

i–3

No. of registered programs, 662

Normal Direction Control (M Seriese), 259

Notes on Interface with the PMC, 477

[O]
Operating Monitor Display, 653

Optional Block Skip/Addition of Optional Block Skip,
213

Override, 274

Override cancel, 279

Overtravel check, 99

Overtravel signal, 99

[P]
Parameter, 495

Parameters related to servo, 29

Part program storage length, 662

Password function, 664

Playback, 666

PMC axis control/PMC axis speed control function,
729

PMC control function, 728

PMC window function, 833

Polar Coordinate Interpolation (T Seires), 249

Polygonal Turning, 254

Polygonal Turning (T series), 253

Position coder feedback control function (0–TC), 532

Position display neglect, 643

Position Signal Output (T Series), 89

Position Switch, 18

Positioning, 230

Preparations for operation, 94

Program command, 565

Program configuration, 572

Program Restart, 217

[R]
Rapid traverse override, 274

Rapid traverse override B (T series), 278

Rapid traverse rate, 263

Reader/puncher interface, 669

Reference Item, 513

Reference position establishment, 160

Reference position return, 183

Reference Position Setting by Butting Axis Against
Stopper, 188

Reference Position Shift (M Series), 180

Remote Buffer, 674

Remote Buffer DI/DO Signals, 226

Reset and rewind, 201

Rigid Tapping, 456

Rigid Tapping Return (M series), 514

Rigid Tapping Specification, 463

Rotary axis roll over, 44

Run hour and parts count display, 644

[S]
Scaling (M Series), 630

Self–diagnosis, 642

Sequence Number Comparison and Stop, 216

Serial Spindle Simple Synchronous Control, 534

Servo off (mechanical handle), 16

Servo tuning screen, 640

Servo Waveform Display, 641

Setting each axis, 3

Setting the reference position without dogs, 173

Settings related to servo–controlled axes, 29

Settings related with coordinate systems, 37

Signal, 471

Signal Addresses, 477

Signals for the Rigid Tapping Function, 471

Signals output according to the speed of travel along
an axis (M series), 321

Signals Related to Gear Switching, 473

Signals Related to S Code Output, 472

Signals Related to Second Spindle Rigid Tapping, 475

Simple Synchronous Control, 46

Simultaneous Input and Output Operations (M Series),
689

Single block, 209

Single direction positioning (M Series), 246

Skip Function, 705

Skip function, 705

Small–diameter Peck Drilling Cycle (M series), 607

Software operator’s panel, 654



Index B–61393E–2/01

i–4

Specifying G84 (G74) for Rigid Tapping by Parame-
ters, 489

Specifying the rotation axis, 8

Spindle Orientation, 527

Spindle output control by the PMC, 815

Spindle Output Switching, 530

Spindle Positioning (T Series), 408

Spindle serial output/spindle analog output, 353

Spindle speed control, 359

Spindle Speed Control for 0–TTC, 386

Spindle Speed Fluctuation Detection (T Series), 402

Spindle speed function, 351

Spindle speed function (S code output), 352

Spindle Synchronous Control, 519

Spindle tuning screen, 640

Start lock/interlock, 121

Status output signal, 134

Stored pitch error compensation, 22

Stored stroke check 1, 103

Stored Stroke Limit 2, 3, 107

[T]
Testing a program, 205

Thread Cutting, 239

Thread cutting cycle retract (T series), 244

Timing Charts for Rigid Tapping Specification, 480

Timing to Cancel Rigid Tapping Mode, 493

Tool Compensation Value/ Number of Tool Com-
pensation/ Tool Compensation Memory, 546

Tool function, 544

Tool functions, 543

Tool Length Measurement (M Series), 697

Tool Life Management, 552

Tool nose radius compensation (T series), 563

Tool Post Interference Check (0–TTC), 113

Tool Post Selection (0–TTC), 132

Torque Limit Skip (T series), 712

[V]
VRDY OFF alarm ignore signal, 136

[W]
Waiting M Code (Two–path Control), 348

When M29 is Specified be, 481

Workpiece Coordinate System (T/M Series)/ Addi-
tional of Workpiece Coordinate System Pair (M
Series), 38



R
ev

is
io

n 
R

ec
or

d

FA
N

U
C
�
S

er
ie

s
�
�
��
�
��
�
�
�
�

�


	
	
�
�
�
�


	
 M

A
N

U
A

L 
(F

U
N

C
T

IO
N

) 
(B

–6
13

93
E

–2
)

02
S

ep
., 

’9
8

�
 A

dd
iti

on
 o

f S
er

ie
s 

0–
D

II

�
 C

or
re

ct
io

n 
of

 e
rr

or
s

01
Ju

l.,
 ’9

7

E
di

tio
n

D
at

e
C

on
te

nt
s

E
di

tio
n

D
at

e
C

on
te

nt
s



·  No part of this manual may be
reproduced in any form.

·  All specifications and designs
are subject to change without
notice.


	WARNINGS, CAUTIONS, AND NOTES
	PREFACE
	Applicable Models
	Applicable Software
	Signal Descriptions
	Explanation of Parameters
	Related Manuals

	TABLE OF CONTENTS
	AXIS CONTROL
	Controlled Axes
	Setting Each Axis
	Axis Names
	Increment System
	Specifying the Rotation Axis
	Controlled Axes Detach
	Mirror Image
	Follow-Up
	Servo Off (Mechanical Handle)
	Position Switch

	Error Compensation
	Stored Pitch Error Compensation
	Backlash Compensation

	Settings Related to Servo-Controlled Axes
	Servo Parameters
	Absolute Position Detection
	Ignore-the-Fourth-Axis (M Series)
	Cancel-the-Z-Axis (M Series)

	Settings for Coordinate Systems
	Machine Coordinate System
	Workpiece Coordinate System
	Additional Workpiece Coordinate System Pair (M Series)
	Rotary Axis Rollover

	Simple Synchronous Control
	Axis Recomposition (0-TTC)
	Angular Axis Control (0-GCC / 0-GSC)
	Position Signal Output (T Series)
	Cf Axis Control (T Series)

	PREPARATIONS FOR OPERATION
	Emergency Stop
	CNC Ready Signal
	Overtravel Check
	Overtravel Signal
	Stored Stroke Check 1
	Stored Stroke Check 3, 4
	Tool Post Interference Check (0-TTC)

	Alarm Signals
	Start Lock and Interlock
	Mode Selection
	Tool Post Selection (0-TTC)
	Status Output Signal
	VRDY OFF Alarm Ignore Signal

	MANUAL OPERATION
	Jog Feed and Incremental Feed
	Manual Handle Feed
	Manual Handle Interruption

	REFERENCE POSITION ESTABLISHMENT
	Manual Reference Position Return
	Setting the Reference Position
	Reference Position Shift (M Series)
	Reference Position Return
	Second, Third, Fourth Reference Position Return
	Reference Position Setting

	AUTOMATIC OPERATION
	Cycle Start and Feed Hold
	Reset and Rewind
	Testing a Program
	Machine Lock
	Dry Run
	Single Block

	Manual Absolute On and Off
	Optional Block Skip
	Addition of Optional Block Skip

	Sequence Number Comparison and Stop
	Program Restart
	Exact Stop (M Series)
	Exact Stop Mode

	Tapping Mode (M Series)
	Cutting Mode (M Series)
	Balance Cut (0-TTC)
	DNC Operation
	Remote Buffer DI / DO Signals
	In-Feed Control

	INTERPOLATION FUNCTIONS
	Positioning
	Linear
	Circular
	Thread Cutting
	Thread Cutting
	Thread Cutting Cycle Retract (T Series)

	Single Direction Positioning (M Series)
	Helical (M Series)
	Polar Coordinate (T Series)
	Cylindrical
	Polygonal Turning (T Series)
	Normal Direction Control (M Series)

	FEED RATE CONTROL AND ACCELERATION / DECELERATION CONTROL
	Feed Rate Control
	Rapid Traverse Rate
	Cutting Feed Rate Clamp
	Feed per Minute
	Feed per Revolution
	Manual Feed per Revolution

	F1-Digit Feed (M Series)
	Override
	Rapid Traverse Override
	Feed Rate Override
	Rapid Traverse Override B (T Series)
	Override Cancel

	Automatic Corner Override (M Series)
	External Deceleration
	Feedrate Clamping by Arc Radius (M Series)
	Automatic Corner Deceleration (M Series)
	Advanced Preview Control (M Series)

	Acceleration / Deceleration Control
	Automatic Acceleration / Decelereation
	Bell-Shaped Acceleration / Deceleration for Rapid Traverse (M Series)
	Linear Acceleration / Deceleration
	After Cutting Feed Interpolation
	Before Cutting Feed Interpolation (M Series)

	Corner Control
	In-Position Check
	Independent of Feed and Rapid Traverse (M Series)
	Error Detect (T Series)
	Signals Output According to Speed of Travel along an Axis (M Series)

	Feed Forward in Rapid Traverse (M Series)


	AUXILIARY FUNCTIONS
	Miscellaneous (M) Functions
	Second Auxiliary (B) Functions
	Auxiliary Function Lock
	Multiple M Commands in a Single Block
	High-Speed M/S/T/B Interface
	Waiting M Code (0-TTC)

	SPINDLE SPEED FUNCTION
	S Code Output
	Spindle Serial Output
	Spindle Analog Output
	Spindle Speed Control
	0-TTC

	Constant Surface Speed Control
	Spindle Speed Fluctuation Detection (T Series)
	Actual Spindle Speed Output (T Series)
	Spindle Positioning (T Series)
	Cs Contour Control
	Multi-Spindle Control (T Series)
	Rigid Tapping
	Overview
	Connection among Spindle, Spindle Motor, and Position Coder
	Specifications
	Display Data on the Diagnostic Screen
	Command Format
	Signals
	Rigid Tapping
	S Code Output
	Gear Switching
	Second, Third Spindle Rigid Tapping (T Series)
	Signal Addresses
	Notes on Interface with the PMC

	Timing Charts
	M29 is Specified before G84 (G74)
	M29 and G84 (G74) are Specified in the Same Block
	Specifying G84 (G74) for Rigid Tapping by Parameters
	Cancel Rigid Tapping Mode

	Parameters
	Alarms and Messages
	Cautions and Notes
	Reference Item

	Rigid Tapping Return (M Series)
	Spindle Synchronous Control
	Controlling the Spindle Speed Ratio for Serial Interface Spindles (0-TTC)
	Spindle Orientation
	Spindle Output Switching
	Position Coder Feedback Control Function (0-TC)
	Serial Spindle Simple Synchronous Control

	TOOL FUNCTIONS
	Tool Function
	Tool Compensation Value / Number / Memory
	Tool Life Management
	Cutter Compensation
	Cutter Compensation B, C (M Series)
	Tool Nose Radius Compensation (T Series)


	PROGRAM COMMAND
	Decimal Point Programming (also Pocket Calculator Type)
	G Code System (T Series)
	Program Configuration
	Inch and Metric Conversion
	High-Speed Cycle Cutting
	Custom Macro
	Custom Macro
	Interruption Type
	Custom Macro Variables Common between Tool Posts (0-TTC)

	Canned Cycle (M Series)
	Canned Cycle for Hole Machining (T Series)
	Small Diameter Peck Drilling Cycle (M Series)
	External Motion Function (M Series)
	Canned Cycle (T Series)
	Multiple Repetitive Canned Cycle (M Series)
	Mirror Image for Double Turrets (T Series)
	Index Table Indexing (M Series)
	Scaling (M Series)
	Coordinate System Rotation (M Series)
	Macro Compiler and Macro Executer

	DISPLAY / SETTING / EDIT
	Display and Setting
	Clock
	Servo Tuning Screen
	Spindle Tuning Screen
	Servo Waveform Display
	Self-Diagnosis
	Position Display Neglect
	Run Hour and Parts Count
	Graphic Display
	Dynamic Graphic Display

	Operating Monitor Display
	Software Operator's Panel
	Multi-Language Display

	Edit
	Part Program Storage Length
	Number of Registered Programs
	Memory Protection Key
	Password
	Background Editing
	Playback
	Conversational Programming with Graphic Function


	DATA INPUT / OUTPUT
	Reader / Puncher Interface
	Remote Buffer
	DNC1 Interface
	DNC2 Interface
	External I/O Device Control
	Simultaneous Input / Output Operations (M Series)
	External Program Input

	MEASUREMENT
	Tool Length Measurement (M Series)
	Automatic Tool Length Measurement (M Series)
	Automatic Tool Offset (T Series)
	Skip
	Skip
	High-Speed Skip Signal
	Multi-Step Skip (0/00-GCC)
	Torque Limit Skip (T Series)

	Entering Compensation Values
	Input of Tool Offset Value Measured A (T Series)
	Input of Tool Offset Value Measured B (T Series)
	Input of Measured Workpiece Origin Offsets
	Grinding Wheel Diameter Automatic Compensation


	PMC CONTROL FUNCTION
	PMC Axis Control
	PMC Axis Speed Control Function
	External Data Input
	External Workpiece Number Search
	Spindle Output Control by the PMC
	External Key Input
	Correspondence between MDI Keys and Signals
	Standard Keyboard
	Full Keyboard
	Soft Keys
	Standard MDI Keyboard
	0-TC
	0-MC

	Full Key MDI Keyboard
	0-TC
	0-MC



	Direct Operation by MMC (T Series)
	PMC Window Function

	APPENDIXES
	Interface between the CNC and PMC
	Address List
	M Series
	T Series
	0-TTC
	Without PMC

	Signal List
	In Order by Function
	In Order by Symbol
	In Order by Address



	INDEX
	REVISION RECORD

